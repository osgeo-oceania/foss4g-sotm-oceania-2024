/*! For license information please see main.c4334cce.js.LICENSE.txt */
(()=>{var e={497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),L=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var z=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,O=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function N(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case L:return"Portal";case S:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ae(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Le=null,we=null,ke=null;function Se(e){if(e=vi(e)){if("function"!==typeof Le)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),Le(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Te(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Me=!1;function Pe(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ee(e,t,n)}finally{Me=!1,(null!==we||null!==ke)&&(Ie(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var ze=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){ze=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){ze=!1}function Re(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Oe=null,Be=!1,Ve=null,je={onError:function(e){Fe=!0,Oe=e}};function Ne(e,t,n,r,i,a,o,s,l){Fe=!1,Oe=null,Re.apply(je,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(He(e)!==e)throw Error(a(188))}function Ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Lt,wt,kt,St,Ct=!1,Tt=[],Et=null,It=null,Mt=null,Pt=new Map,At=new Map,zt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&Lt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=_i(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void St(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&Lt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Bt(e)&&n.delete(t)}function jt(){Ct=!1,null!==Et&&Bt(Et)&&(Et=null),null!==It&&Bt(It)&&(It=null),null!==Mt&&Bt(Mt)&&(Mt=null),Pt.forEach(Vt),At.forEach(Vt)}function Nt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Ht(e){function t(t){return Nt(t,e)}if(0<Tt.length){Nt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Nt(Et,e),null!==It&&Nt(It,e),null!==Mt&&Nt(Mt,e),Pt.forEach(t),At.forEach(t),n=0;n<zt.length;n++)(r=zt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&null===(n=zt[0]).blockedOn;)Ot(n),null===n.blockedOn&&zt.shift()}var Ut=x.ReactCurrentBatchConfig,$t=!0;function Zt(e,t,n,r){var i=vt,a=Ut.transition;Ut.transition=null;try{vt=1,Gt(e,t,n,r)}finally{vt=i,Ut.transition=a}}function qt(e,t,n,r){var i=vt,a=Ut.transition;Ut.transition=null;try{vt=4,Gt(e,t,n,r)}finally{vt=i,Ut.transition=a}}function Gt(e,t,n,r){if($t){var i=Xt(e,t,n,r);if(null===i)$r(e,t,r,Wt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Ft(Et,e,t,n,r,i),!0;case"dragenter":return It=Ft(It,e,t,n,r,i),!0;case"mouseover":return Mt=Ft(Mt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Ft(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Ft(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=vi(i);if(null!==a&&bt(a),null===(a=Xt(e,t,n,r))&&$r(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Wt=null;function Xt(e,t,n,r){if(Wt=null,null!==(e=_i(e=be(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),hn=O({},cn,{view:0,detail:0}),dn=an(hn),pn=O({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(O({},pn,{dataTransfer:0})),gn=an(O({},hn,{relatedTarget:0})),yn=an(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=an(_n),xn=an(O({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Sn(){return kn}var Cn=O({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ln[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),En=an(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(O({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Mn=an(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Pn),zn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Rn,On=u&&(!Dn||Rn&&8<Rn&&11>=Rn),Bn=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Zn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Wn(e){Br(e,0)}function Xn(e){if(G(xi(e)))return e}function Kn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Zn(t,Gn,e,be(e)),Pe(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,_r=null,vr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==W(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&lr(_r,r)||(_r=r,0<(r=qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},wr={},kr={};function Sr(e){if(wr[e])return wr[e];if(!Lr[e])return e;var t,n=Lr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return wr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);var Cr=Sr("animationend"),Tr=Sr("animationiteration"),Er=Sr("animationstart"),Ir=Sr("transitionend"),Mr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Mr.set(e,t),l(t,[e])}for(var zr=0;zr<Pr.length;zr++){var Dr=Pr[zr];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Er,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,c){if(Ne.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var u=Oe;Fe=!1,Oe=null,Be||(Be=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Or(i,s,c),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Or(i,s,c),a=l}}}if(Be)throw e=Ve,Be=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Nr]){e[Nr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Nr]||(t[Nr]=!0,jr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Kt(t)){case 1:var i=Zt;break;case 4:i=qt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=_i(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var s=Mr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Tr:case Er:l=yn;break;case Ir:l=Mn;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Ae(f,d))&&u.push(Zr(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!_i(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?_i(c):null)&&(c!==(h=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xi(l),p=null==c?s:xi(c),(s=new u(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,_i(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=d;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)d=Gr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Wr(o,s,l,u,!1),null!==c&&null!==h&&Wr(o,h,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if($n(s))if(Yn)g=or;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Zn(o,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?xi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,_r=null);break;case"focusout":_r=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var _;if(Dn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?jn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(On&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(_=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,Hn=!0)),0<(y=qr(r,v)).length&&(v=new xn(v,e,null,n,i),o.push({event:v,listeners:y}),_?v.data=_:null!==(_=Nn(n))&&(v.data=_))),(_=Fn?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Qt=Jt=Yt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=_))}Br(o,t)}))}function Zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Zr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Zr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Ae(n,a))&&o.unshift(Zr(n,l,s)):i||null!=(l=Ae(n,a))&&o.push(Zr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function _i(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[pi]||null}var Li=[],wi=-1;function ki(e){return{current:e}}function Si(e){0>wi||(e.current=Li[wi],Li[wi]=null,wi--)}function Ci(e,t){wi++,Li[wi]=e.current,e.current=t}var Ti={},Ei=ki(Ti),Ii=ki(!1),Mi=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zi(){Si(Ii),Si(Ei)}function Di(e,t,n){if(Ei.current!==Ti)throw Error(a(168));Ci(Ei,t),Ci(Ii,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,U(e)||"Unknown",i));return O({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Mi=Ei.current,Ci(Ei,e),Ci(Ii,Ii.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ii),Si(Ei),Ci(Ei,e)):Si(Ii),Ci(Ii,n)}var Bi=null,Vi=!1,ji=!1;function Ni(e){null===Bi?Bi=[e]:Bi.push(e)}function Hi(){if(!ji&&null!==Bi){ji=!0;var e=0,t=vt;try{var n=Bi;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Vi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ge(Qe,Hi),i}finally{vt=t,ji=!1}}return null}var Ui=[],$i=0,Zi=null,qi=0,Gi=[],Wi=0,Xi=null,Ki=1,Yi="";function Ji(e,t){Ui[$i++]=qi,Ui[$i++]=Zi,Zi=e,qi=t}function Qi(e,t,n){Gi[Wi++]=Ki,Gi[Wi++]=Yi,Gi[Wi++]=Xi,Xi=e;var r=Ki;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ki=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Ki=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function ta(e){for(;e===Zi;)Zi=Ui[--$i],Ui[$i]=null,qi=Ui[--$i],Ui[$i]=null;for(;e===Xi;)Xi=Gi[--Wi],Gi[Wi]=null,Yi=Gi[--Wi],Gi[Wi]=null,Ki=Gi[--Wi],Gi[Wi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ki,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=ki(null),_a=null,va=null,xa=null;function ba(){xa=va=_a=null}function La(e){var t=ya.current;Si(ya),e._currentValue=t}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ka(e,t){_a=e,xa=va=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===va){if(null===_a)throw Error(a(308));va=e,_a.dependencies={lanes:0,firstContext:e}}else va=va.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ea(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ia(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ia(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Oa(e,t,n,r){var i=e.updateQueue;Ma=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,u=c=l=null,s=a;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=O({},h,d);break e;case 2:Ma=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=h}}function Ba(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Na={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=za(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),Ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=za(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=za(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),Ra(t,e,r))}};function Ha(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Ua(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ai(t)?Mi:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Na,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function $a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Na.enqueueReplaceState(t,t.state,null)}function Za(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ai(t)?Mi:Ei.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Na.enqueueReplaceState(i,i.state,null),Oa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===w?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Wa(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case L:return(t=Vc(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case L:return n.key===i?u(e,t,n,r):null;case A:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),ia&&Ji(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return ia&&Ji(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}function g(i,s,l,c){var u=R(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,y=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=p(i,m,_.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(i,m),s=o(v,s,g),null===h?u=v:h.sibling=v,h=v,m=y}if(_.done)return n(i,m),ia&&Ji(i,g),u;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=d(i,_.value,c))&&(s=o(_,s,g),null===h?u=_:h.sibling=_,h=_);return ia&&Ji(i,g),u}for(m=r(i,m);!_.done;g++,_=l.next())null!==(_=f(m,i,g,_.value,c))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),s=o(_,s,g),null===h?u=_:h.sibling=_,h=_);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ji(i,g),u}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===w){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Wa(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=qa(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===w?((a=Fc(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Rc(o.type,o.key,o.props,null,r.mode,l)).ref=qa(r,a,o),l.return=r,r=l)}return s(r);case L:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,l)).return=r,r=a}return s(r);case A:return e(r,a,(u=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(R(o))return g(r,a,o,l);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Bc(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Ka=Xa(!0),Ya=Xa(!1),Ja={},Qa=ki(Ja),eo=ki(Ja),to=ki(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Qa,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Qa),Ci(Qa,t)}function io(){Si(Qa),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Qa.current),n=le(t,e.type);t!==n&&(Ci(eo,e),Ci(Qa,n))}function oo(e){eo.current===e&&(Si(Qa),Si(eo))}var so=ki(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,mo=null,go=null,yo=null,_o=!1,vo=!1,xo=0,bo=0;function Lo(){throw Error(a(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),vo){o=0;do{if(vo=!1,xo=0,25<=o)throw Error(a(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(vo)}if(ho.current=os,t=null!==go&&null!==go.next,fo=0,yo=go=mo=null,_o=!1,t)throw Error(a(300));return e}function So(){var e=0!==xo;return xo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Eo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((fo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,mo.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ol|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mo(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ao(e,t){var n=mo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,$o(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ml)throw Error(a(349));0!==(30&fo)||zo(n,t,i)}return i}function zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Oo(e)}function Ro(e,t,n){return n((function(){Fo(t)&&Oo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=Ia(e,1);null!==t&&rc(t,e,1,-1)}function Bo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function No(e,t,n,r){var i=Co();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Ho(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==r&&wo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function Uo(e,t){return No(8390656,8,e,t)}function $o(e,t){return Ho(2048,8,e,t)}function Zo(e,t){return Ho(4,2,e,t)}function qo(e,t){return Ho(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Go.bind(null,t,e),n)}function Xo(){}function Ko(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Ol|=n,e.baseState=!0),t)}function Qo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{vt=n,po.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ea(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ta(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ea(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){vo=_o=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var os={readContext:Sa,useCallback:Lo,useContext:Lo,useEffect:Lo,useImperativeHandle:Lo,useInsertionEffect:Lo,useLayoutEffect:Lo,useMemo:Lo,useReducer:Lo,useRef:Lo,useState:Lo,useDebugValue:Lo,useDeferredValue:Lo,useTransition:Lo,useMutableSource:Lo,useSyncExternalStore:Lo,useId:Lo,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return No(4194308,4,e,t)},useInsertionEffect:function(e,t){return No(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Bo,useDebugValue:Xo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=Qo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ml)throw Error(a(349));0!==(30&fo)||zo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Ml.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Ki&~(1<<32-ot(Ki)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:Ko,useContext:Sa,useEffect:$o,useImperativeHandle:Wo,useInsertionEffect:Zo,useLayoutEffect:qo,useMemo:Yo,useReducer:Io,useRef:jo,useState:function(){return Io(Eo)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(To(),go.memoizedState,e)},useTransition:function(){return[Io(Eo)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:Ko,useContext:Sa,useEffect:$o,useImperativeHandle:Wo,useInsertionEffect:Zo,useLayoutEffect:qo,useMemo:Yo,useReducer:Mo,useRef:jo,useState:function(){return Mo(Eo)},useDebugValue:Xo,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[Mo(Eo)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=N(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,ql=r),ds(0,t)},n}function ms(e,t,n){(n=za(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _s(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=za(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,xs=!1;function bs(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Ka(t,e.child,n,r)}function Ls(e,t,n,r,i){n=n.render;var a=t.ref;return ka(t,i),r=ko(e,t,n,r,a,i),n=So(),null===e||xs?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zs(e,t,i))}function ws(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||zc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Zs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Zs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Ts(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Dl,zl),zl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Dl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Dl,zl),zl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Dl,zl),zl|=r;return bs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ai(n)?Mi:Ei.current;return a=Pi(t,a),ka(t,i),n=ko(e,t,n,r,a,i),r=So(),null===e||xs?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zs(e,t,i))}function Es(e,t,n,r,i){if(Ai(n)){var a=!0;Fi(t)}else a=!1;if(ka(t,i),null===t.stateNode)$s(e,t),Ua(t,n,r),Za(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Pi(t,c=Ai(n)?Mi:Ei.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&$a(t,o,r,c),Ma=!1;var d=t.memoizedState;o.state=d,Oa(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Ii.current||Ma?("function"===typeof u&&(ja(t,n,u,r),l=t.memoizedState),(s=Ma||Ha(t,n,s,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ga(t.type,s),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Sa(l):l=Pi(t,l=Ai(n)?Mi:Ei.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&$a(t,o,r,l),Ma=!1,d=t.memoizedState,o.state=d,Oa(t,r,o,i);var f=t.memoizedState;s!==h||d!==f||Ii.current||Ma?("function"===typeof p&&(ja(t,n,p,r),f=t.memoizedState),(c=Ma||Ha(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,a,i)}function Is(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Zs(e,t,a);r=t.stateNode,vs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return pa(),fa(i),t.flags|=256,bs(e,t,n,r),t.child}var As,zs,Ds,Rs,Fs={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),e=Fc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Fs,e):Vs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ka(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Fs,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,js(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Ml)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(e,i),rc(r,e,i,-1))}return gc(),js(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Wi++]=Ki,Gi[Wi++]=Yi,Gi[Wi++]=Xi,Ki=e.id,Yi=e.overflow,Xi=t),t=Vs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Fc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vs(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&fa(r),Ka(t,e.child,null,n),(e=Vs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ns(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function Hs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ns(e,n,t);else if(19===e.tag)Ns(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hs(t,!0,n,null,a);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ws(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ai(t.type)&&zi(),Gs(t),null;case 3:return r=t.stateNode,io(),Si(Ii),Si(Ei),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),zs(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Qa.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Vr(Rr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":K(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in _e(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":q(r),Q(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Vr(Rr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":K(e,r),i=X(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in _e(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&v(e,o,u,l))}switch(n){case"input":q(e),Q(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Qa.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Gs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),pa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),zs(e,t),null===e&&Hr(t.stateNode.containerInfo),Gs(t),null;case 10:return La(t.type._context),Gs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)qs(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Ul&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Gs(t),null}else 2*Ye()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&zl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xs(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&zi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ii),Si(Ei),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return La(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},zs=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Qa.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(u in _e(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(t,n,a)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||el(n,t);case 6:var r=hl,i=dl;hl=null,pl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Ys&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,pl(e,t,n),Ys=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(a(160));fl(o,s,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),_l(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:gl(t,e),_l(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),_l(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),ve(l,s);var u=ve(l,o);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(gl(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(gl(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:gl(t,e),_l(e);break;case 13:gl(t,e),_l(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Ye())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(u=Ys)||h,gl(t,e),Ys=u):gl(t,e),_l(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Ll(d);continue}}null!==f?(f.return=p,Qs=f):Ll(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),_l(e),4&r&&ml(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qs=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ks;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Ks;var c=Ys;if(Ks=o,(Ys=l)&&!c)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Qs=l):wl(i);for(;null!==a;)Qs=a,xl(a,t,n),a=a.sibling;Qs=i,Ks=s,Ys=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ga(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ba(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ba(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ht(d)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&al(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function Ll(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var a=t.return;try{al(t)}catch(l){Sc(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var kl,Sl=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,El=x.ReactCurrentBatchConfig,Il=0,Ml=null,Pl=null,Al=0,zl=0,Dl=ki(0),Rl=0,Fl=null,Ol=0,Bl=0,Vl=0,jl=null,Nl=null,Hl=0,Ul=1/0,$l=null,Zl=!1,ql=null,Gl=null,Wl=!1,Xl=null,Kl=0,Yl=0,Jl=null,Ql=-1,ec=0;function tc(){return 0!==(6&Il)?Ye():-1!==Ql?Ql:Ql=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==ma.transition?(0===ec&&(ec=mt()),ec):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(a(185));yt(e,n,r),0!==(2&Il)&&e===Ml||(e===Ml&&(0===(2&Il)&&(Bl|=n),4===Rl&&lc(e,Al)),ic(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Ul=Ye()+500,Vi&&Hi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Ml?Al:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Vi=!0,Ni(e)}(cc.bind(null,e)):Ni(cc.bind(null,e)),oi((function(){0===(6&Il)&&Hi()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Mc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ql=-1,ec=0,0!==(6&Il))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===Ml?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Il;Il|=2;var o=mc();for(Ml===e&&Al===t||($l=null,Ul=Ye()+500,pc(e,t));;)try{vc();break}catch(l){fc(e,l)}ba(),Cl.current=o,Il=i,null!==Pl?t=0:(Ml=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Fl,pc(e,0),lc(e,r),ic(e,Ye()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=ft(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fl,pc(e,0),lc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Lc(e,Nl,$l);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Hl+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Lc.bind(null,e,Nl,$l),t);break}Lc(e,Nl,$l);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(Lc.bind(null,e,Nl,$l),r);break}Lc(e,Nl,$l);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Nl,Nl=n,null!==t&&sc(t)),e}function sc(e){null===Nl?Nl=e:Nl.push.apply(Nl,e)}function lc(e,t){for(t&=~Vl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(a(327));wc();var t=dt(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fl,pc(e,0),lc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lc(e,Nl,$l),ic(e,Ye()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Ul=Ye()+500,Vi&&Hi())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Il)&&wc();var t=Il;Il|=1;var n=El.transition,r=vt;try{if(El.transition=null,vt=1,e)return e()}finally{vt=r,El.transition=n,0===(6&(Il=t))&&Hi()}}function dc(){zl=Dl.current,Si(Dl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&zi();break;case 3:io(),Si(Ii),Si(Ei),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:La(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Ml=e,Pl=e=Dc(e.current,null),Al=zl=t,Rl=0,Fl=null,Vl=Bl=Ol=0,Nl=jl=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(ba(),ho.current=os,_o){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}_o=!1}if(fo=0,yo=go=mo=null,vo=!1,xo=0,Tl.current=null,null===n||null===n.return){Rl=1,Fl=t,Pl=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,_s(f,s,l,0,t),1&f.mode&&gs(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(o,u,t),gc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_s(y,s,l,0,t),fa(us(c,l));break e}}o=c=us(c,l),4!==Rl&&(Rl=2),null===jl?jl=[o]:jl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,fs(0,c,t));break e;case 1:l=c;var _=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Gl||!Gl.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=os,null===e?os:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Ml||0===(268435455&Ol)&&0===(268435455&Bl)||lc(Ml,Al)}function yc(e,t){var n=Il;Il|=2;var r=mc();for(Ml===e&&Al===t||($l=null,pc(e,t));;)try{_c();break}catch(i){fc(e,i)}if(ba(),Il=n,Cl.current=r,null!==Pl)throw Error(a(261));return Ml=null,Al=0,Rl}function _c(){for(;null!==Pl;)xc(Pl)}function vc(){for(;null!==Pl&&!Xe();)xc(Pl)}function xc(e){var t=kl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,zl)))return void(Pl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Rl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Rl&&(Rl=5)}function Lc(e,t,n){var r=vt,i=El.transition;try{El.transition=null,vt=1,function(e,t,n,r){do{wc()}while(null!==Xl);if(0!==(6&Il))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ml&&(Pl=Ml=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Mc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=El.transition,El.transition=null;var s=vt;vt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ei=$t,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=s),p===o&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),y);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=nl,nl=!1}(e,n),yl(n,e),fr(ti),$t=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ke(),Il=l,vt=s,El.transition=o}else e.current=n;if(Wl&&(Wl=!1,Xl=e,Kl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,e=ql,ql=null,e;0!==(1&Kl)&&0!==e.tag&&wc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Hi()}(e,t,n,r)}finally{El.transition=i,vt=r}return null}function wc(){if(null!==Xl){var e=xt(Kl),t=El.transition,n=vt;try{if(El.transition=null,vt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Kl=0,0!==(6&Il))throw Error(a(331));var i=Il;for(Il|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(ol(h),h===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,Qs=_;break e}Qs=o.return}}var v=e.current;for(Qs=v;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=v;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(L){Sc(l,l.return,L)}if(l===s){Qs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break e}Qs=l.return}}if(Il=i,Hi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(L){}r=!0}return r}finally{vt=n,El.transition=t}}return!1}function kc(e,t,n){e=Da(e,t=fs(0,t=us(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Da(t,e=ms(t,e=us(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Ye()-Hl?pc(e,0):Vl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ia(e,t))&&(yt(e,t,n),ic(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Mc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Pc(e,t,n,r)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)zc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Fc(n.children,i,o,t);case k:s=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case I:return(e=Ac(13,n,t,i)).elementType=I,e.lanes=o,e;case M:return(e=Ac(19,n,t,i)).elementType=M,e.lanes=o,e;case z:return Oc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case E:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=z,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,s,l){return e=new jc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Hc(e){if(!e)return Ti;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Ri(e,n,t)}return t}function Uc(e,t,n,r,i,a,o,s,l){return(e=Nc(n,r,!0,e,0,a,0,s,l)).context=Hc(null),n=e.current,(a=za(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function $c(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=za(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),Ra(e,i,o)),o}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),pa();break;case 5:ao(t);break;case 1:Ai(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ci(so,1&so.current),null!==(e=Zs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Zs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$s(e,t),e=t.pendingProps;var i=Pi(t,Ei.current);ka(t,n),i=ko(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Na,t.stateNode=i,i._reactInternals=t,Za(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($s(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===P)return 14}return 2}(r),e=ga(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=Ls(null,t,r,e,n);break e;case 14:t=ws(null,t,r,ga(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 1:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Oa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=us(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=us(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Zs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Bs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ka(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ls(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=Zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=za(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),wa(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ka(t,n),r=r(i=Sa(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ga(r=t.type,t.pendingProps),ws(e,t,r,i=ga(r.type,i),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ga(r,i),$s(e,t),t.tag=1,Ai(r)?(e=!0,Fi(t)):e=!1,ka(t,n),Ua(t,r,i),Za(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Zc(o);s.call(e)}}$c(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Zc(o);a.call(e)}}var o=Uc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[fi]=o.current,Hr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Zc(l);s.call(e)}}var l=Nc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fi]=l.current,Hr(8===e.nodeType?e.parentNode:e),hc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return Zc(o)}Kc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));$c(e,t,null,null)},Kc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){$c(null,e,null,null)})),t[fi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&0!==t&&t<zt[n].priority;n++);zt.splice(n,0,e),0===n&&Ot(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),ic(t,Ye()),0===(6&Il)&&(Ul=Ye()+500,Hi()))}break;case 13:hc((function(){var t=Ia(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},Lt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},wt=function(e){if(13===e.tag){var t=nc(e),n=Ia(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},kt=function(){return vt},St=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Le=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=uc,Ie=hc;var tu={usingClientEntryPoint:!1,Events:[vi,xi,bi,Ce,Te,uc]},nu={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:L,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function _(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var x=v.prototype=new _;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var b=Array.isArray,L=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)L.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+E(l,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var u=a+E(s=e[c],c);l+=I(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=a+E(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function M(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},z={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:z,ReactCurrentOwner:w};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)L.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=z.transition;z.transition={};try{e()}finally{z.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,z(L);else{var t=r(u);null!==t&&D(b,t.startTime-e)}}function L(e,n){m=!1,g&&(g=!1,_(C),C=-1),f=!0;var a=p;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(b,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,T=5,E=-1;function I(){return!(t.unstable_now()-E<T)}function M(){if(null!==S){var e=t.unstable_now();E=e;var n=!0;try{n=S(!0,e)}finally{n?w():(k=!1,S=null)}}else k=!1}if("function"===typeof v)w=function(){v(M)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=M,w=function(){A.postMessage(null)}}else w=function(){y(M,0)};function z(e){S=e,k||(k=!0,w())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,z(L))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(_(C),C=-1):g=!0,D(b,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,z(L))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},66:function(e){e.exports=function(){"use strict";var e={},t={};function n(n,r,i){if(t[n]=i,"index"===n){var a="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",o={};return t.shared(o),t.index(e,o),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))),e}}return n("shared",["exports"],(function(e){function t(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var r=i;function i(e,t){this.x=e,this.y=t}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(e){return e instanceof i?e:Array.isArray(e)?new i(e[0],e[1]):e};var a=n(r),o=s;function s(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var o=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var l=n(o);let c,u;function h(){return null==c&&(c="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),c}function d(){if(null==u&&(u=!1,h())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let r=0;r<e*e;r++){const n=4*r;t.fillStyle=`rgb(${n},${n+1},${n+2})`,t.fillRect(r%e,Math.floor(r/e),1,1)}const n=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&n[t]!==t){u=!0;break}}}return u||!1}function p(e,t,n,r){const i=new l(e,t,n,r);return function(e){return i.solve(e)}}const f=p(.25,.1,.25,1);function m(e,t,n){return Math.min(n,Math.max(t,e))}function g(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)for(const t in i)e[t]=i[t];return e}let _=1;function v(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function x(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function b(e){return Array.isArray(e)?e.map(b):"object"==typeof e&&e?v(e,b):e}const L={};function w(e){L[e]||("undefined"!=typeof console&&console.warn(e),L[e]=!0)}function k(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function S(e){let t=0;for(let n,r,i=0,a=e.length,o=a-1;i<a;o=i++)n=e[i],r=e[o],t+=(r.x-n.x)*(n.y+r.y);return t}function C(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let T=null;function E(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function M(e,n,r,i,a){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const o=null==t?void 0:t.format;if(!o||!o.startsWith("BGR")&&!o.startsWith("RGB"))throw new Error(`Unrecognized format ${o}`);const s=o.startsWith("BGR"),l=new Uint8ClampedArray(i*a*4);if(yield t.copyTo(l,function(e,t,n,r,i){const a=4*Math.max(-t,0),o=(Math.max(0,n)-n)*r*4+a,s=4*r,l=Math.max(0,t),c=Math.max(0,n);return{rect:{x:l,y:c,width:Math.min(e.width,t+r)-l,height:Math.min(e.height,n+i)-c},layout:[{offset:o,stride:s}]}}(e,n,r,i,a)),s)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}}))}let P,A;const z="AbortError";function D(){return new Error(z)}const R={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function F(e){return R.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const O="global-dispatcher";class B extends Error{constructor(e,t,n,r){super(`AJAXError: ${t} (${e}): ${n}`),this.status=e,this.statusText=t,this.url=n,this.body=r}}const V=()=>C(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,j=function(e,n){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=F(e.url);if(t)return t(e,n);if(C(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:e,targetMapId:O},n)}if(!(/^file:/.test(r=e.url)||/^file:/.test(V())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,n){return t(this,void 0,void 0,(function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:V(),signal:n.signal});"json"===e.type&&t.headers.set("Accept","application/json");const r=yield fetch(t);if(!r.ok){const t=yield r.blob();throw new B(r.status,r.statusText,e.url,t)}let i;i="arrayBuffer"===e.type||"image"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text();const a=yield i;if(n.signal.aborted)throw D();return{data:a,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}))}(e,n);if(C(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:e,mustQueue:!0,targetMapId:O},n)}var r;return function(e,t){return new Promise(((n,r)=>{const i=new XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{r(new Error(i.statusText))},i.onload=()=>{if(!t.signal.aborted)if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let t=i.response;if("json"===e.type)try{t=JSON.parse(i.response)}catch(e){return void r(e)}n({data:t,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")})}else{const t=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});r(new B(i.status,i.statusText,e.url,t))}},t.signal.addEventListener("abort",(()=>{i.abort(),r(D())})),i.send(e.body)}))}(e,n)};function N(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function H(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function U(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class ${constructor(e){y(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class Z extends ${constructor(e){super("error",y({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class q{on(e,t){return this._listeners=this._listeners||{},H(e,t,this._listeners),this}off(e,t){return U(e,t,this._listeners),U(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},H(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new $(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const a of r)U(n,a,this._oneTimeListeners),a.call(this,e);const i=this._eventedParent;i&&(y(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Z&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var G={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const W=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function X(e,t){const n={};for(const r in e)"ref"!==r&&(n[r]=e[r]);return W.forEach((e=>{e in t&&(n[e]=t[e])})),n}function K(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!K(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!K(e[n],t[n]))return!1;return!0}return e===t}function Y(e,t){e.push(t)}function J(e,t,n){Y(n,{command:"addSource",args:[e,t[e]]})}function Q(e,t,n){Y(t,{command:"removeSource",args:[e]}),n[e]=!0}function ee(e,t,n,r){Q(e,n,r),J(e,t,n)}function te(e,t,n){let r;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!K(e[n][r],t[n][r]))return!1;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!K(e[n][r],t[n][r]))return!1;return!0}function ne(e,t,n,r,i,a){e=e||{},t=t||{};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(K(e[o],t[o])||n.push({command:a,args:[r,o,t[o],i]}));for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&!Object.prototype.hasOwnProperty.call(e,o)&&(K(e[o],t[o])||n.push({command:a,args:[r,o,t[o],i]}))}function re(e){return e.id}function ie(e,t){return e[t.id]=t,e}class ae{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)for(const t in i)e[t]=i[t];return e}class se extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new le(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const ce={kind:"null"},ue={kind:"number"},he={kind:"string"},de={kind:"boolean"},pe={kind:"color"},fe={kind:"object"},me={kind:"value"},ge={kind:"collator"},ye={kind:"formatted"},_e={kind:"padding"},ve={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function be(e,t){return{kind:"array",itemType:e,N:t}}function Le(e){if("array"===e.kind){const t=Le(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const we=[ce,ue,he,de,pe,ye,fe,be(me),_e,ve,xe];function ke(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ke(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of we)if(!ke(e,t))return null}return`Expected ${Le(e)} but found ${Le(t)} instead.`}function Se(e,t){return t.some((t=>t.kind===e.kind))}function Ce(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function Te(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Ee=.96422,Ie=.82521,Me=4/29,Pe=6/29,Ae=3*Pe*Pe,ze=Pe*Pe*Pe,De=Math.PI/180,Re=180/Math.PI;function Fe(e){return(e%=360)<0&&(e+=360),e}function Oe(e){let t,n,[r,i,a,o]=e;const s=Ve((.2225045*(r=Be(r))+.7168786*(i=Be(i))+.0606169*(a=Be(a)))/1);r===i&&i===a?t=n=s:(t=Ve((.4360747*r+.3850649*i+.1430804*a)/Ee),n=Ve((.0139322*r+.0971045*i+.7141733*a)/Ie));const l=116*s-16;return[l<0?0:l,500*(t-s),200*(s-n),o]}function Be(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ve(e){return e>ze?Math.pow(e,1/3):e/Ae+Me}function je(e){let[t,n,r,i]=e,a=(t+16)/116,o=isNaN(n)?a:a+n/500,s=isNaN(r)?a:a-r/200;return a=1*He(a),o=Ee*He(o),s=Ie*He(s),[Ne(3.1338561*o-1.6168667*a-.4906146*s),Ne(-.9787684*o+1.9161415*a+.033454*s),Ne(.0719453*o-.2289914*a+1.4052427*s),i]}function Ne(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function He(e){return e>Pe?e*e*e:Ae*(e-Me)}function Ue(e){return parseInt(e.padEnd(2,e),16)/255}function $e(e,t){return Ze(t?e/100:e,0,1)}function Ze(e,t,n){return Math.min(Math.max(t,e),n)}function qe(e){return!e.some(Number.isNaN)}const Ge={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class We{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=e,this.g=t,this.b=n,this.a=r,i||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,n,r]))}static parse(e){if(e instanceof We)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=Ge[e];if(t){const[e,n,r]=t;return[e/255,n/255,r/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let n=1;return[Ue(e.slice(n,n+=t)),Ue(e.slice(n,n+=t)),Ue(e.slice(n,n+=t)),Ue(e.slice(n,n+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,n,r,i,a,o,s,l,c,u,h,d]=t,p=[i||" ",s||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[r,o,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[Ze(+n/t,0,1),Ze(+a/t,0,1),Ze(+l/t,0,1),h?$e(+h,d):1];if(qe(e))return e}}return}}const n=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[e,t,r,i,a,o,s,l,c]=n,u=[r||" ",a||" ",s].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,Ze(+i,0,100),Ze(+o,0,100),l?$e(+l,c):1];if(qe(e))return function(e){let[t,n,r,i]=e;function a(e){const i=(e+t/30)%12,a=n*Math.min(r,1-r);return r-a*Math.max(-1,Math.min(i-3,9-i,1))}return t=Fe(t),n/=100,r/=100,[a(0),a(8),a(4),i]}(e)}}}(e);return t?new We(...t,!1):void 0}get rgb(){const{r:e,g:t,b:n,a:r}=this,i=r||1/0;return this.overwriteGetter("rgb",[e/i,t/i,n/i,r])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,n,r,i]=Oe(e),a=Math.sqrt(n*n+r*r);return[Math.round(1e4*a)?Fe(Math.atan2(r,n)*Re):NaN,a,t,i]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Oe(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,r]=this.rgb;return`rgba(${[e,t,n].map((e=>Math.round(255*e))).join(",")},${r})`}}We.black=new We(0,0,0,1),We.white=new We(1,1,1,1),We.transparent=new We(0,0,0,0),We.red=new We(1,0,0,1);class Xe{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ke{constructor(e,t,n,r,i){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Ye{constructor(e){this.sections=e}static fromString(e){return new Ye([new Ke(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Ye?e:Ye.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class Je{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Je)return e;if("number"==typeof e)return new Je([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Je(e)}}toString(){return JSON.stringify(this.values)}}const Qe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class et{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof et)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const n=e[t],r=e[t+1];if("string"!=typeof n||!Qe.has(n))return;if(!Array.isArray(r)||2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])return}return new et(e)}}toString(){return JSON.stringify(this.values)}}class tt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new tt({name:e,available:!1}):null}}function nt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rt(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof We||e instanceof Xe||e instanceof Ye||e instanceof Je||e instanceof et||e instanceof tt)return!0;if(Array.isArray(e)){for(const t of e)if(!rt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!rt(e[t]))return!1;return!0}return!1}function it(e){if(null===e)return ce;if("string"==typeof e)return he;if("boolean"==typeof e)return de;if("number"==typeof e)return ue;if(e instanceof We)return pe;if(e instanceof Xe)return ge;if(e instanceof Ye)return ye;if(e instanceof Je)return _e;if(e instanceof et)return xe;if(e instanceof tt)return ve;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=it(r);if(n){if(n===e)continue;n=me;break}n=e}return be(n||me,t)}return fe}function at(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof We||e instanceof Ye||e instanceof Je||e instanceof et||e instanceof tt?e.toString():JSON.stringify(e)}class ot{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!rt(e[1]))return t.error("invalid value");const n=e[1];let r=it(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ot(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class st{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const lt={string:he,number:ue,boolean:de,object:fe};class ct{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,a;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in lt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=lt[n],r++}else i=me;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],r++}n=be(i,a)}else{if(!lt[i])throw new Error(`Types doesn't contain name = ${i}`);n=lt[i]}const a=[];for(;r<e.length;r++){const n=t.parse(e[r],r,me);if(!n)return null;a.push(n)}return new ct(n,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!ke(this.type,it(n)))return n;if(t===this.args.length-1)throw new st(`Expected value to be of type ${Le(this.type)}, but found ${Le(it(n))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ut={"to-boolean":de,"to-color":pe,"to-number":ue,"to-string":he};class ht{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!ut[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=ut[n],i=[];for(let a=1;a<e.length;a++){const n=t.parse(e[a],a,me);if(!n)return null;i.push(n)}return new ht(r,i)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof We)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:nt(t[0],t[1],t[2],t[3]),!n))return new We(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new st(n||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const r=Je.parse(t);if(r)return r}throw new st(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const r=et.parse(t);if(r)return r}throw new st(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new st(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ye.fromString(at(this.args[0].evaluate(e)));case"resolvedImage":return tt.fromString(at(this.args[0].evaluate(e)));default:return at(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const dt=["Unknown","Point","LineString","Polygon"];class pt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=We.parse(e)),t}}class ft{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new le,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=e,this.path=n,this.key=n.map((e=>`[${e}]`)).join(""),this.scope=i,this.errors=a,this.expectedType=r,this._isConstant=t}parse(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new ct(t,[e]):"coerce"===n?new ht(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind)if("padding"!==e.kind||"value"!==i.kind&&"number"!==i.kind&&"array"!==i.kind)if("variableAnchorOffsetCollection"!==e.kind||"value"!==i.kind&&"array"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof ot)&&"resolvedImage"!==r.type.kind&&this._isConstant(r)){const t=new pt;try{r=new ot(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new ft(this.registry,this._isConstant,r,t||null,i,this.errors)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=`${this.key}${n.map((e=>`[${e}]`)).join("")}`;this.errors.push(new se(i,e))}checkSubtype(e,t){const n=ke(e,t);return n&&this.error(n),n}}class mt{constructor(e,t,n){this.type=ge,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,de);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,de);if(!i)return null;let a=null;return n.locale&&(a=t.parse(n.locale,1,he),!a)?null:new mt(r,i,a)}evaluate(e){return new Xe(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const gt=8192;function yt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function _t(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function vt(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*gt),Math.round(r*i*gt)]}function xt(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function bt(e,t){let n=!1;for(let o=0,s=t.length;o<s;o++){const s=t[o];for(let t=0,o=s.length;t<o-1;t++){if(xt(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(a=s[t+1])[1]>r[1]&&r[0]<(a[0]-i[0])*(r[1]-i[1])/(a[1]-i[1])+i[0]&&(n=!n)}}var r,i,a;return n}function Lt(e,t){for(let n=0;n<t.length;n++)if(bt(e,t[n]))return!0;return!1}function wt(e,t,n,r){const i=r[0]-n[0],a=r[1]-n[1],o=(e[0]-n[0])*a-i*(e[1]-n[1]),s=(t[0]-n[0])*a-i*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function kt(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(o=c[n+1])[0]-(a=c[n])[0],o[1]-a[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&wt(r,i,a,o)&&wt(a,o,r,i))return!0;var r,i,a,o,s,l;return!1}function St(e,t){for(let n=0;n<e.length;++n)if(!bt(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(kt(e[n],e[n+1],t))return!1;return!0}function Ct(e,t){for(let n=0;n<t.length;n++)if(St(e,t[n]))return!0;return!1}function Tt(e,t,n){const r=[];for(let i=0;i<e.length;i++){const a=[];for(let r=0;r<e[i].length;r++){const o=vt(e[i][r],n);yt(t,o),a.push(o)}r.push(a)}return r}function Et(e,t,n){const r=[];for(let i=0;i<e.length;i++){const a=Tt(e[i],t,n);r.push(a)}return r}function It(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}yt(t,e)}function Mt(e,t,n,r){const i=Math.pow(2,r.z)*gt,a=[r.x*gt,r.y*gt],o=[];for(const s of e)for(const e of s){const r=[e.x+a[0],e.y+a[1]];It(r,t,n,i),o.push(r)}return o}function Pt(e,t,n,r){const i=Math.pow(2,r.z)*gt,a=[r.x*gt,r.y*gt],o=[];for(const l of e){const e=[];for(const n of l){const r=[n.x+a[0],n.y+a[1]];yt(t,r),e.push(r)}o.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of o)for(const r of e)It(r,t,n,i)}var s;return o}class At{constructor(e,t){this.type=de,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(rt(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const n of t.features){const{type:t,coordinates:r}=n.geometry;"Polygon"===t&&e.push(r),"MultiPolygon"===t&&e.push(...r)}if(e.length)return new At(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new At(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new At(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const a=Tt(t.coordinates,r,i),o=Mt(e.geometry(),n,r,i);if(!_t(n,r))return!1;for(const e of o)if(!bt(e,a))return!1}if("MultiPolygon"===t.type){const a=Et(t.coordinates,r,i),o=Mt(e.geometry(),n,r,i);if(!_t(n,r))return!1;for(const e of o)if(!Lt(e,a))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const a=Tt(t.coordinates,r,i),o=Pt(e.geometry(),n,r,i);if(!_t(n,r))return!1;for(const e of o)if(!St(e,a))return!1}if("MultiPolygon"===t.type){const a=Et(t.coordinates,r,i),o=Pt(e.geometry(),n,r,i);if(!_t(n,r))return!1;for(const e of o)if(!Ct(e,a))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class zt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new zt(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Dt{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],r=Dt.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,o=a.filter((t=>{let[n]=t;return!Array.isArray(n)||n.length===e.length-1}));let s=null;for(const[l,c]of o){s=new ft(t.registry,Rt,t.path,null,t.scope);const r=[];let a=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(l)?l[t-1]:l.type,o=s.parse(n,1+r.length,i);if(!o){a=!0;break}r.push(o)}if(!a)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=r[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Dt(n,i,c,r)}}if(1===o.length)t.errors.push(...s.errors);else{const n=(o.length?o:a).map((e=>{let[t]=e;return n=t,Array.isArray(n)?`(${n.map(Le).join(", ")})`:`(${Le(n.type)}...)`;var n})).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(Le(n.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Dt.definitions=t;for(const n in t)e[n]=Dt}}function Rt(e){if(e instanceof zt)return Rt(e.boundExpression);if(e instanceof Dt&&"error"===e.name)return!1;if(e instanceof mt)return!1;if(e instanceof At)return!1;const t=e instanceof ht||e instanceof ct;let n=!0;return e.eachChild((e=>{n=t?n&&Rt(e):n&&e instanceof ot})),!!n&&Ft(e)&&Bt(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ft(e){if(e instanceof Dt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof At)return!1;let t=!0;return e.eachChild((e=>{t&&!Ft(e)&&(t=!1)})),t}function Ot(e){if(e instanceof Dt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!Ot(e)&&(t=!1)})),t}function Bt(e,t){if(e instanceof Dt&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!Bt(e,t)&&(n=!1)})),n}function Vt(e,t){const n=e.length-1;let r,i,a=0,o=n,s=0;for(;a<=o;)if(s=Math.floor((a+o)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;a=s+1}else{if(!(r>t))throw new st("Input is not a number.");o=s-1}return 0}class jt{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ue);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let a=1;a<e.length;a+=2){const n=1===a?-1/0:e[a],o=e[a+1],s=a,l=a+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(o,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new jt(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Vt(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Nt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ht=Ut;function Ut(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}Ut.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var o=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var $t=Nt(Ht);function Zt(e,t,n){return e+n*(t-e)}function qt(e,t,n){return e.map(((e,r)=>Zt(e,t[r],n)))}const Gt={number:Zt,color:function(e,t,n){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[r,i,a,o]=qt(e.rgb,t.rgb,n);return new We(r,i,a,o,!1)}case"hcl":{const[r,i,a,o]=e.hcl,[s,l,c,u]=t.hcl;let h,d;if(isNaN(r)||isNaN(s))isNaN(r)?isNaN(s)?h=NaN:(h=s,1!==a&&0!==a||(d=l)):(h=r,1!==c&&0!==c||(d=i));else{let e=s-r;s>r&&e>180?e-=360:s<r&&r-s>180&&(e+=360),h=r+n*e}const[p,f,m,g]=function(e){let[t,n,r,i]=e;return t=isNaN(t)?0:t*De,je([r,Math.cos(t)*n,Math.sin(t)*n,i])}([h,null!=d?d:Zt(i,l,n),Zt(a,c,n),Zt(o,u,n)]);return new We(p,f,m,g,!1)}case"lab":{const[r,i,a,o]=je(qt(e.lab,t.lab,n));return new We(r,i,a,o,!1)}}},array:qt,padding:function(e,t,n){return new Je(qt(e.values,t.values,n))},variableAnchorOffsetCollection:function(e,t,n){const r=e.values,i=t.values;if(r.length!==i.length)throw new st(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let o=0;o<r.length;o+=2){if(r[o]!==i[o])throw new st(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${r[o]}, to[${o}]: ${i[o]}`);a.push(r[o]);const[e,t]=r[o+1],[s,l]=i[o+1];a.push([Zt(e,s,n),Zt(t,l,n)])}return new et(a)}};class Wt{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[a,o]of i)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=Xt(t,e.base,n,r);else if("linear"===e.name)i=Xt(t,1,n,r);else if("cubic-bezier"===e.name){const a=e.controlPoints;i=new $t(a[0],a[1],a[2],a[3]).solve(Xt(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...a]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ue),!i)return null;const o=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=pe:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<a.length;l+=2){const e=a[l],n=a[l+1],r=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(o.length&&o[o.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,i,s);if(!c)return null;s=s||c.type,o.push([e,c])}return Te(s,ue)||Te(s,pe)||Te(s,_e)||Te(s,xe)||Te(s,be(ue))?new Wt(s,n,r,i,o):t.error(`Type ${Le(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const a=Vt(t,r),o=Wt.interpolationFactor(this.interpolation,r,t[a],t[a+1]),s=n[a].evaluate(e),l=n[a+1].evaluate(e);switch(this.operator){case"interpolate":return Gt[this.type.kind](s,l,o);case"interpolate-hcl":return Gt.color(s,l,o,"hcl");case"interpolate-lab":return Gt.color(s,l,o,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Xt(e,t,n,r){const i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}class Kt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const o of e.slice(1)){const e=t.parse(o,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}if(!n)throw new Error("No output type");const a=r&&i.some((e=>ke(r,e.type)));return new Kt(a?me:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(e),n&&n instanceof tt&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}class Yt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const a=t.parse(e[i+1],i+1);if(!a)return null;n.push([r,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new Yt(n,r):null}outputDefined(){return this.result.outputDefined()}}class Jt{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ue),r=t.parse(e[2],2,be(t.expectedType||me));return n&&r?new Jt(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new st(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new st(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new st(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Qt{constructor(e,t){this.type=de,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,me),r=t.parse(e[2],2,me);return n&&r?Se(n.type,[de,he,ue,ce,me])?new Qt(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Le(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Ce(t,["boolean","string","number","null"]))throw new st(`Expected first argument to be of type boolean, string, number or null, but found ${Le(it(t))} instead.`);if(!Ce(n,["string","array"]))throw new st(`Expected second argument to be of type array or string, but found ${Le(it(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class en{constructor(e,t,n){this.type=ue,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,me),r=t.parse(e[2],2,me);if(!n||!r)return null;if(!Se(n.type,[de,he,ue,ce,me]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Le(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ue);return i?new en(n,r,i):null}return new en(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Ce(t,["boolean","string","number","null"]))throw new st(`Expected first argument to be of type boolean, string, number or null, but found ${Le(it(t))} instead.`);if(!Ce(n,["string","array"]))throw new st(`Expected second argument to be of type array or string, but found ${Le(it(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class tn{constructor(e,t,n,r,i,a){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},a=[];for(let l=2;l<e.length-1;l+=2){let o=e[l];const s=e[l+1];Array.isArray(o)||(o=[o]);const c=t.concat(l);if(0===o.length)return c.error("Expected at least one branch label.");for(const e of o){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,it(e)))return null}else n=it(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=a.length}const u=t.parse(s,l,r);if(!u)return null;r=r||u.type,a.push(u)}const o=t.parse(e[1],1,me);if(!o)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==o.type.kind&&t.concat(1).checkSubtype(n,o.type)?null:new tn(n,r,o,i,a,s):null}evaluate(e){const t=this.input.evaluate(e);return(it(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class nn{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let a=1;a<e.length-1;a+=2){const i=t.parse(e[a],a,de);if(!i)return null;const o=t.parse(e[a+1],a+1,n);if(!o)return null;r.push([i,o]),n=n||o.type}const i=t.parse(e[e.length-1],e.length-1,n);if(!i)return null;if(!n)throw new Error("Can't infer output type");return new nn(n,r,i)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((e=>{let[t,n]=e;return n.outputDefined()}))&&this.otherwise.outputDefined()}}class rn{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,me),r=t.parse(e[2],2,ue);if(!n||!r)return null;if(!Se(n.type,[be(me),he,me]))return t.error(`Expected first argument to be of type array or string, but found ${Le(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ue);return i?new rn(n.type,n,r,i):null}return new rn(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Ce(t,["string","array"]))throw new st(`Expected first argument to be of type array or string, but found ${Le(it(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function an(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function on(e,t,n,r){return 0===r.compare(t,n)}function sn(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=de,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let a=t.parse(e[1],1,me);if(!a)return null;if(!an(n,a.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${Le(a.type)}'.`);let o=t.parse(e[2],2,me);if(!o)return null;if(!an(n,o.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${Le(o.type)}'.`);if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error(`Cannot compare types '${Le(a.type)}' and '${Le(o.type)}'.`);r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new ct(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new ct(a.type,[o])));let s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ge),!s)return null}return new i(a,o,s)}evaluate(i){const a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=it(a),n=it(o);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new st(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=it(a),n=it(o);if("string"!==e.kind||"string"!==n.kind)return t(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):t(i,a,o)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const ln=sn("==",(function(e,t,n){return t===n}),on),cn=sn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!on(0,t,n,r)})),un=sn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),hn=sn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),dn=sn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),pn=sn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class fn{constructor(e,t,n,r,i){this.type=he,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ue);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,he),!i))return null;let a=null;if(r.currency&&(a=t.parse(r.currency,1,he),!a))return null;let o=null;if(r["min-fraction-digits"]&&(o=t.parse(r["min-fraction-digits"],1,ue),!o))return null;let s=null;return r["max-fraction-digits"]&&(s=t.parse(r["max-fraction-digits"],1,ue),!s)?null:new fn(n,i,a,o,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class mn{constructor(e){this.type=ye,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let a=1;a<=e.length-1;++a){const n=e[a];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ue),!e))return null;let a=null;if(n["text-font"]&&(a=t.parse(n["text-font"],1,be(he)),!a))return null;let o=null;if(n["text-color"]&&(o=t.parse(n["text-color"],1,pe),!o))return null;const s=r[r.length-1];s.scale=e,s.font=a,s.textColor=o}else{const n=t.parse(e[a],1,me);if(!n)return null;const o=n.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new mn(r)}evaluate(e){return new Ye(this.sections.map((t=>{const n=t.content.evaluate(e);return it(n)===ve?new Ke("",n,null,null,null):new Ke(at(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class gn{constructor(e){this.type=ve,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,he);return n?new gn(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=tt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class yn{constructor(e){this.type=ue,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${Le(n.type)} instead.`):new yn(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new st(`Expected value to be of type string or array, but found ${Le(it(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const _n={"==":ln,"!=":cn,">":hn,"<":un,">=":pn,"<=":dn,array:ct,at:Jt,boolean:ct,case:nn,coalesce:Kt,collator:mt,format:mn,image:gn,in:Qt,"index-of":en,interpolate:Wt,"interpolate-hcl":Wt,"interpolate-lab":Wt,length:yn,let:Yt,literal:ot,match:tn,number:ct,"number-format":fn,object:ct,slice:rn,step:jt,string:ct,"to-boolean":ht,"to-color":ht,"to-number":ht,"to-string":ht,var:zt,within:At};function vn(e,t){let[n,r,i,a]=t;n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);const o=a?a.evaluate(e):1,s=nt(n,r,i,o);if(s)throw new st(s);return new We(n/255,r/255,i/255,o,!1)}function xn(e,t){return e in t}function bn(e,t){const n=t[e];return void 0===n?null:n}function Ln(e){return{type:e}}function wn(e){return{result:"success",value:e}}function kn(e){return{result:"error",value:e}}function Sn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Cn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Tn(e){return!!e.expression&&e.expression.interpolated}function En(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function In(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Mn(e){return e}function Pn(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),a=e.type||(Tn(t)?"exponential":"interval");if(n||"padding"===t.type){const r=n?We.parse:Je.parse;(e=oe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],r(e[1])]))),e.default=r(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==(o=e.colorSpace)&&"hcl"!==o&&"lab"!==o)throw new Error(`Unknown color space: "${e.colorSpace}"`);var o;let s,l,c;if("exponential"===a)s=Rn;else if("interval"===a)s=Dn;else if("categorical"===a){s=zn,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=Fn}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],a=i[0].zoom;void 0===n[a]&&(n[a]={zoom:a,type:e.type,property:e.property,default:e.default,stops:[]},r.push(a)),n[a].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Pn(n[e],t)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:Wt.interpolationFactor.bind(void 0,a),zoomStops:i.map((e=>e[0])),evaluate:(n,r)=>{let{zoom:a}=n;return Rn({stops:i,base:e.base},t,a).evaluate(a,r)}}}if(i){const n="exponential"===a?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Wt.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:n=>{let{zoom:r}=n;return s(e,t,r,l,c)}}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?An(e.default,t.default):s(e,t,i,l,c)}}}function An(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function zn(e,t,n,r,i){return An(typeof n===i?r[n]:void 0,e.default,t.default)}function Dn(e,t,n){if("number"!==En(n))return An(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=Vt(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function Rn(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==En(n))return An(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const a=Vt(e.stops.map((e=>e[0])),n),o=function(e,t,n,r){const i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],c=Gt[t.type]||Mn;return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=s.evaluate.apply(void 0,n),a=l.evaluate.apply(void 0,n);if(void 0!==i&&void 0!==a)return c(i,a,o,e.colorSpace)}}:c(s,l,o,e.colorSpace)}function Fn(e,t,n){switch(t.type){case"color":n=We.parse(n);break;case"formatted":n=Ye.fromString(n.toString());break;case"resolvedImage":n=tt.fromString(n.toString());break;case"padding":n=Je.parse(n);break;default:En(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0)}return An(n,e.default,t.default)}Dt.register(_n,{error:[{kind:"error"},[he],(e,t)=>{let[n]=t;throw new st(n.evaluate(e))}],typeof:[he,[me],(e,t)=>{let[n]=t;return Le(it(n.evaluate(e)))}],"to-rgba":[be(ue,4),[pe],(e,t)=>{let[n]=t;const[r,i,a,o]=n.evaluate(e).rgb;return[255*r,255*i,255*a,o]}],rgb:[pe,[ue,ue,ue],vn],rgba:[pe,[ue,ue,ue,ue],vn],has:{type:de,overloads:[[[he],(e,t)=>{let[n]=t;return xn(n.evaluate(e),e.properties())}],[[he,fe],(e,t)=>{let[n,r]=t;return xn(n.evaluate(e),r.evaluate(e))}]]},get:{type:me,overloads:[[[he],(e,t)=>{let[n]=t;return bn(n.evaluate(e),e.properties())}],[[he,fe],(e,t)=>{let[n,r]=t;return bn(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[me,[he],(e,t)=>{let[n]=t;return bn(n.evaluate(e),e.featureState||{})}],properties:[fe,[],e=>e.properties()],"geometry-type":[he,[],e=>e.geometryType()],id:[me,[],e=>e.id()],zoom:[ue,[],e=>e.globals.zoom],"heatmap-density":[ue,[],e=>e.globals.heatmapDensity||0],"line-progress":[ue,[],e=>e.globals.lineProgress||0],accumulated:[me,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ue,Ln(ue),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[ue,Ln(ue),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:ue,overloads:[[[ue,ue],(e,t)=>{let[n,r]=t;return n.evaluate(e)-r.evaluate(e)}],[[ue],(e,t)=>{let[n]=t;return-n.evaluate(e)}]]},"/":[ue,[ue,ue],(e,t)=>{let[n,r]=t;return n.evaluate(e)/r.evaluate(e)}],"%":[ue,[ue,ue],(e,t)=>{let[n,r]=t;return n.evaluate(e)%r.evaluate(e)}],ln2:[ue,[],()=>Math.LN2],pi:[ue,[],()=>Math.PI],e:[ue,[],()=>Math.E],"^":[ue,[ue,ue],(e,t)=>{let[n,r]=t;return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[ue,[ue],(e,t)=>{let[n]=t;return Math.sqrt(n.evaluate(e))}],log10:[ue,[ue],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN10}],ln:[ue,[ue],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))}],log2:[ue,[ue],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN2}],sin:[ue,[ue],(e,t)=>{let[n]=t;return Math.sin(n.evaluate(e))}],cos:[ue,[ue],(e,t)=>{let[n]=t;return Math.cos(n.evaluate(e))}],tan:[ue,[ue],(e,t)=>{let[n]=t;return Math.tan(n.evaluate(e))}],asin:[ue,[ue],(e,t)=>{let[n]=t;return Math.asin(n.evaluate(e))}],acos:[ue,[ue],(e,t)=>{let[n]=t;return Math.acos(n.evaluate(e))}],atan:[ue,[ue],(e,t)=>{let[n]=t;return Math.atan(n.evaluate(e))}],min:[ue,Ln(ue),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ue,Ln(ue),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ue,[ue],(e,t)=>{let[n]=t;return Math.abs(n.evaluate(e))}],round:[ue,[ue],(e,t)=>{let[n]=t;const r=n.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[ue,[ue],(e,t)=>{let[n]=t;return Math.floor(n.evaluate(e))}],ceil:[ue,[ue],(e,t)=>{let[n]=t;return Math.ceil(n.evaluate(e))}],"filter-==":[de,[he,me],(e,t)=>{let[n,r]=t;return e.properties()[n.value]===r.value}],"filter-id-==":[de,[me],(e,t)=>{let[n]=t;return e.id()===n.value}],"filter-type-==":[de,[he],(e,t)=>{let[n]=t;return e.geometryType()===n.value}],"filter-<":[de,[he,me],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i<a}],"filter-id-<":[de,[me],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[de,[he,me],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i>a}],"filter-id->":[de,[me],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[de,[he,me],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[de,[me],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[de,[he,me],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[de,[me],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[de,[me],(e,t)=>{let[n]=t;return n.value in e.properties()}],"filter-has-id":[de,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[de,[be(he)],(e,t)=>{let[n]=t;return n.value.indexOf(e.geometryType())>=0}],"filter-id-in":[de,[be(me)],(e,t)=>{let[n]=t;return n.value.indexOf(e.id())>=0}],"filter-in-small":[de,[he,be(me)],(e,t)=>{let[n,r]=t;return r.value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[de,[he,be(me)],(e,t)=>{let[n,r]=t;return function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:de,overloads:[[[de,de],(e,t)=>{let[n,r]=t;return n.evaluate(e)&&r.evaluate(e)}],[Ln(de),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:de,overloads:[[[de,de],(e,t)=>{let[n,r]=t;return n.evaluate(e)||r.evaluate(e)}],[Ln(de),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[de,[de],(e,t)=>{let[n]=t;return!n.evaluate(e)}],"is-supported-script":[de,[he],(e,t)=>{let[n]=t;const r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[he,[he],(e,t)=>{let[n]=t;return n.evaluate(e).toUpperCase()}],downcase:[he,[he],(e,t)=>{let[n]=t;return n.evaluate(e).toLowerCase()}],concat:[he,Ln(me),(e,t)=>t.map((t=>at(t.evaluate(e)))).join("")],"resolved-locale":[he,[ge],(e,t)=>{let[n]=t;return n.evaluate(e).resolvedLocale()}]});class On{constructor(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new pt,this._defaultValue=t?"color"===(n=t).type&&In(n.default)?new We(0,0,0,0):"color"===n.type?We.parse(n.default)||null:"padding"===n.type?Je.parse(n.default)||null:"variableAnchorOffsetCollection"===n.type?et.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new st(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Bn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in _n}function Vn(e,t){const n=new ft(_n,Rt,[],t?function(e){const t={color:pe,string:he,number:ue,enum:he,boolean:de,formatted:ye,padding:_e,resolvedImage:ve,variableAnchorOffsetCollection:xe};return"array"===e.type?be(t[e.value]||me,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?wn(new On(r,t)):kn(n.errors)}class jn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ot(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}evaluate(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}}class Nn{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ot(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}evaluate(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}interpolationFactor(e,t,n){return this.interpolationType?Wt.interpolationFactor(this.interpolationType,e,t,n):0}}function Hn(e,t){const n=Vn(e,t);if("error"===n.result)return n;const r=n.value.expression,i=Ft(r);if(!i&&!Sn(t))return kn([new se("","data expressions not supported")]);const a=Bt(r,["zoom"]);if(!a&&!Cn(t))return kn([new se("","zoom expressions not supported")]);const o=$n(r);return o||a?o instanceof se?kn([o]):o instanceof Wt&&!Tn(t)?kn([new se("",'"interpolate" expressions cannot be used with this property')]):wn(o?new Nn(i?"camera":"composite",n.value,o.labels,o instanceof Wt?o.interpolation:void 0):new jn(i?"constant":"source",n.value)):kn([new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Un{constructor(e,t){this._parameters=e,this._specification=t,oe(this,Pn(this._parameters,this._specification))}static deserialize(e){return new Un(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function $n(e){let t=null;if(e instanceof Yt)t=$n(e.result);else if(e instanceof Kt){for(const n of e.args)if(t=$n(n),t)break}else(e instanceof jt||e instanceof Wt)&&e.input instanceof Dt&&"zoom"===e.input.name&&(t=e);return t instanceof se||e.eachChild((e=>{const n=$n(e);n instanceof se?t=n:!t&&n?t=new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Zn(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Zn(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const qn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gn(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Zn(e)||(e=Kn(e));const t=Vn(e,qn);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,n,r)=>t.value.evaluate(e,n,{},r),needGeometry:Xn(e)}}function Wn(e,t){return e<t?-1:e>t?1:0}function Xn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(Xn(e[t]))return!0;return!1}function Kn(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Yn(e[1],e[2],"=="):"!="===t?er(Yn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Yn(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(Kn))):"all"===t?["all"].concat(e.slice(1).map(Kn)):"none"===t?["all"].concat(e.slice(1).map(Kn).map(er)):"in"===t?Jn(e[1],e.slice(2)):"!in"===t?er(Jn(e[1],e.slice(2))):"has"===t?Qn(e[1]):"!has"===t?er(Qn(e[1])):"within"!==t||e;var n}function Yn(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function Jn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Wn)]]:["filter-in-small",e,["literal",t]]}}function Qn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function er(e){return["!",e]}function tr(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const n of e)t+=`${tr(n)},`;return`${t}]`}const n=Object.keys(e).sort();let r="{";for(let i=0;i<n.length;i++)r+=`${JSON.stringify(n[i])}:${tr(e[n[i]])},`;return`${r}}`}function nr(e){let t="";for(const n of W)t+=`/${tr(e[n])}`;return t}function rr(e){const t=e.value;return t?[new ae(e.key,t,"constants have been deprecated as of v8")]:[]}function ir(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ar(e){if(Array.isArray(e))return e.map(ar);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=ar(e[n]);return t}return ir(e)}function or(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=e.validateSpec;let l=[];const c=En(n);if("object"!==c)return[new ae(t,n,`object expected, ${c} found`)];for(const u in n){const e=u.split(".")[0],c=r[e]||r["*"];let h;if(i[e])h=i[e];else if(r[e])h=s;else if(i["*"])h=i["*"];else{if(!r["*"]){l.push(new ae(t,n[u],`unknown property "${u}"`));continue}h=s}l=l.concat(h({key:(t?`${t}.`:t)+u,value:n[u],valueSpec:c,style:a,styleSpec:o,object:n,objectKey:u,validateSpec:s},n))}for(const u in r)i[u]||r[u].required&&void 0===r[u].default&&void 0===n[u]&&l.push(new ae(t,n,`missing required property "${u}"`));return l}function sr(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||e.validateSpec;if("array"!==En(t))return[new ae(a,t,`array expected, ${En(t)} found`)];if(n.length&&t.length!==n.length)return[new ae(a,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new ae(a,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===En(n.value)&&(s=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(o({array:t,arrayIndex:c,value:t[c],valueSpec:s,validateSpec:e.validateSpec,style:r,styleSpec:i,key:`${a}[${c}]`}));return l}function lr(e){const t=e.key,n=e.value,r=e.valueSpec;let i=En(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new ae(t,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new ae(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new ae(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function cr(e){const t=e.valueSpec,n=ir(e.value.type);let r,i,a,o={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===En(e.value.stops)&&"array"===En(e.value.stops[0])&&"object"===En(e.value.stops[0][0]),u=or({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new ae(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(sr({key:e.key,value:r,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===En(r)&&0===r.length&&t.push(new ae(e.key,r,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new ae(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new ae(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Tn(e.valueSpec)&&u.push(new ae(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Sn(e.valueSpec)?u.push(new ae(e.key,e.value,"property functions not supported")):s&&!Cn(e.valueSpec)&&u.push(new ae(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new ae(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,s=e.key;if("array"!==En(r))return[new ae(s,r,`array expected, ${En(r)} found`)];if(2!==r.length)return[new ae(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==En(r[0]))return[new ae(s,r,`object expected, ${En(r[0])} found`)];if(void 0===r[0].zoom)return[new ae(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ae(s,r,"object stop key must have value")];if(a&&a>ir(r[0].zoom))return[new ae(s,r[0].zoom,"stop zoom values must appear in ascending order")];ir(r[0].zoom)!==a&&(a=ir(r[0].zoom),i=void 0,o={}),n=n.concat(or({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:lr,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:r[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},r));return Bn(ar(r[1]))?n.concat([new ae(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(e.validateSpec({key:`${s}[1]`,value:r[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,a){const s=En(e.value),l=ir(e.value),c=null!==e.value?e.value:a;if(r){if(s!==r)return[new ae(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ae(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Sn(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ae(e.key,c,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new ae(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in o?[new ae(e.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new ae(e.key,c,`integer expected, found ${l}`)]}}function ur(e){const t=("property"===e.expressionContext?Hn:Vn)(ar(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ae(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new ae(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ot(n))return[new ae(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ot(n))return[new ae(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Bt(n,["zoom","feature-state"]))return[new ae(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Ft(n))return[new ae(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hr(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ir(n))&&i.push(new ae(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(ir(n))&&i.push(new ae(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function dr(e){return Zn(ar(e.value))?ur(oe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pr(e)}function pr(e){const t=e.value,n=e.key;if("array"!==En(t))return[new ae(n,t,`array expected, ${En(t)} found`)];const r=e.styleSpec;let i,a=[];if(t.length<1)return[new ae(n,t,"filter array must have at least 1 element")];switch(a=a.concat(hr({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),ir(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ir(t[1])&&a.push(new ae(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&a.push(new ae(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=En(t[1]),"string"!==i&&a.push(new ae(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let o=2;o<t.length;o++)i=En(t[o]),"$type"===ir(t[1])?a=a.concat(hr({key:`${n}[${o}]`,value:t[o],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new ae(`${n}[${o}]`,t[o],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)a=a.concat(pr({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=En(t[1]),2!==t.length?a.push(new ae(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&a.push(new ae(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=En(t[1]),2!==t.length?a.push(new ae(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&a.push(new ae(`${n}[1]`,t[1],`object expected, ${i} found`))}return a}function fr(e,t){const n=e.key,r=e.validateSpec,i=e.style,a=e.styleSpec,o=e.value,s=e.objectKey,l=a[`${t}_${e.layerType}`];if(!l)return[];const c=s.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return r({key:n,value:o,valueSpec:a.transition,style:i,styleSpec:a});const u=e.valueSpec||l[s];if(!u)return[new ae(n,o,`unknown property "${s}"`)];let h;if("string"===En(o)&&Sn(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(o)))return[new ae(n,o,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(h[1])} }\`.`)];const d=[];return"symbol"===e.layerType&&("text-field"===s&&i&&!i.glyphs&&d.push(new ae(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&In(ar(o))&&"identity"===ir(o.type)&&d.push(new ae(n,o,'"text-font" does not support identity functions'))),d.concat(r({key:e.key,value:o,valueSpec:u,style:i,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:s}))}function mr(e){return fr(e,"paint")}function gr(e){return fr(e,"layout")}function yr(e){let t=[];const n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new ae(r,n,'either "type" or "ref" is required'));let o=ir(n.type);const s=ir(n.ref);if(n.id){const a=ir(n.id);for(let o=0;o<e.arrayIndex;o++){const e=i.layers[o];ir(e.id)===a&&t.push(new ae(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new ae(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{ir(t.id)===s&&(e=t)})),e?e.ref?t.push(new ae(r,n.ref,"ref cannot reference another ref layer")):o=ir(e.type):t.push(new ae(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==o)if(n.source){const e=i.sources&&i.sources[n.source],a=e&&ir(e.type);e?"vector"===a&&"raster"===o?t.push(new ae(r,n.source,`layer "${n.id}" requires a raster source`)):"raster-dem"!==a&&"hillshade"===o?t.push(new ae(r,n.source,`layer "${n.id}" requires a raster-dem source`)):"raster"===a&&"raster"!==o?t.push(new ae(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==a||n["source-layer"]?"raster-dem"===a&&"hillshade"!==o?t.push(new ae(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]||"geojson"===a&&e.lineMetrics||t.push(new ae(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ae(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new ae(r,n.source,`source "${n.source}" not found`))}else t.push(new ae(r,n,'missing required property "source"'));return t=t.concat(or({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${r}.type`,value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"}),filter:dr,layout:e=>or({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>gr(oe({layerType:o},e))}}),paint:e=>or({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>mr(oe({layerType:o},e))}})}})),t}function _r(e){const t=e.value,n=e.key,r=En(t);return"string"!==r?[new ae(n,t,`string expected, ${r} found`)]:[]}const vr={promoteId:function(e){let{key:t,value:n}=e;if("string"===En(n))return _r({key:t,value:n});{const e=[];for(const r in n)e.push(..._r({key:`${t}.${r}`,value:n[r]}));return e}}};function xr(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style,a=e.validateSpec;if(!t.type)return[new ae(n,t,'"type" is required')];const o=ir(t.type);let s;switch(o){case"vector":case"raster":return s=or({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:vr,validateSpec:a}),s;case"raster-dem":return s=function(e){var t;const n=null!==(t=e.sourceName)&&void 0!==t?t:"",r=e.value,i=e.styleSpec,a=i.source_raster_dem,o=e.style;let s=[];const l=En(r);if(void 0===r)return s;if("object"!==l)return s.push(new ae("source_raster_dem",r,`object expected, ${l} found`)),s;const c="custom"===ir(r.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const d in r)!c&&u.includes(d)?s.push(new ae(d,r[d],`In "${n}": "${d}" is only valid when "encoding" is set to "custom". ${h} encoding found`)):a[d]?s=s.concat(e.validateSpec({key:d,value:r[d],valueSpec:a[d],validateSpec:e.validateSpec,style:o,styleSpec:i})):s.push(new ae(d,r[d],`unknown property "${d}"`));return s}({sourceName:n,value:t,style:e.style,styleSpec:r,validateSpec:a}),s;case"geojson":if(s=or({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:a,objectElementValidators:vr}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;s.push(...ur({key:`${n}.${e}.map`,value:i,validateSpec:a,expressionContext:"cluster-map"})),s.push(...ur({key:`${n}.${e}.reduce`,value:o,validateSpec:a,expressionContext:"cluster-reduce"}))}return s;case"video":return or({key:n,value:t,valueSpec:r.source_video,style:i,validateSpec:a,styleSpec:r});case"image":return or({key:n,value:t,valueSpec:r.source_image,style:i,validateSpec:a,styleSpec:r});case"canvas":return[new ae(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hr({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:a,styleSpec:r})}}function br(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let a=[];const o=En(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ae("light",t,`object expected, ${o} found`)]),a;for(const s in t){const o=s.match(/^(.*)-transition$/);a=a.concat(o&&r[o[1]]&&r[o[1]].transition?e.validateSpec({key:s,value:t[s],valueSpec:n.transition,validateSpec:e.validateSpec,style:i,styleSpec:n}):r[s]?e.validateSpec({key:s,value:t[s],valueSpec:r[s],validateSpec:e.validateSpec,style:i,styleSpec:n}):[new ae(s,t[s],`unknown property "${s}"`)])}return a}function Lr(e){const t=e.value,n=e.styleSpec,r=n.sky,i=e.style,a=En(t);if(void 0===t)return[];if("object"!==a)return[new ae("sky",t,`object expected, ${a} found`)];let o=[];for(const s in t)o=o.concat(r[s]?Cr({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new ae(s,t[s],`unknown property "${s}"`)]);return o}function wr(e){const t=e.value,n=e.styleSpec,r=n.terrain,i=e.style;let a=[];const o=En(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ae("terrain",t,`object expected, ${o} found`)]),a;for(const s in t)a=a.concat(r[s]?e.validateSpec({key:s,value:t[s],valueSpec:r[s],validateSpec:e.validateSpec,style:i,styleSpec:n}):[new ae(s,t[s],`unknown property "${s}"`)]);return a}function kr(e){let t=[];const n=e.value,r=e.key;if(Array.isArray(n)){const i=[],a=[];for(const o in n)n[o].id&&i.includes(n[o].id)&&t.push(new ae(r,n,`all the sprites' ids must be unique, but ${n[o].id} is duplicated`)),i.push(n[o].id),n[o].url&&a.includes(n[o].url)&&t.push(new ae(r,n,`all the sprites' URLs must be unique, but ${n[o].url} is duplicated`)),a.push(n[o].url),t=t.concat(or({key:`${r}[${o}]`,value:n[o],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return _r({key:r,value:n})}const Sr={"*":()=>[],array:sr,boolean:function(e){const t=e.value,n=e.key,r=En(t);return"boolean"!==r?[new ae(n,t,`boolean expected, ${r} found`)]:[]},number:lr,color:function(e){const t=e.key,n=e.value,r=En(n);return"string"!==r?[new ae(t,n,`color expected, ${r} found`)]:We.parse(String(n))?[]:[new ae(t,n,`color expected, "${n}" found`)]},constants:rr,enum:hr,filter:dr,function:cr,layer:yr,object:or,source:xr,light:br,sky:Lr,terrain:wr,string:_r,formatted:function(e){return 0===_r(e).length?[]:ur(e)},resolvedImage:function(e){return 0===_r(e).length?[]:ur(e)},padding:function(e){const t=e.key,n=e.value;if("array"===En(n)){if(n.length<1||n.length>4)return[new ae(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const r={type:"number"};let i=[];for(let a=0;a<n.length;a++)i=i.concat(e.validateSpec({key:`${t}[${a}]`,value:n[a],validateSpec:e.validateSpec,valueSpec:r}));return i}return lr({key:t,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(e){const t=e.key,n=e.value,r=En(n),i=e.styleSpec;if("array"!==r||n.length<1||n.length%2!=0)return[new ae(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let a=[];for(let o=0;o<n.length;o+=2)a=a.concat(hr({key:`${t}[${o}]`,value:n[o],valueSpec:i.layout_symbol["text-anchor"]})),a=a.concat(sr({key:`${t}[${o+1}]`,value:n[o+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return a},sprite:kr};function Cr(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return e.validateSpec=Cr,n.expression&&In(ir(t))?cr(e):n.expression&&Bn(ar(t))?ur(e):n.type&&Sr[n.type]?Sr[n.type](e):or(oe({},e,{valueSpec:n.type?r[n.type]:n}))}function Tr(e){const t=e.value,n=e.key,r=_r(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ae(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ae(n,t,'"glyphs" url must include a "{range}" token'))),r}function Er(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,n=[];return n=n.concat(Cr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Cr,objectElementValidators:{glyphs:Tr,"*":()=>[]}})),e.constants&&(n=n.concat(rr({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:Cr}))),Mr(n)}function Ir(e){return function(t){return e({...t,validateSpec:Cr})}}function Mr(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function Pr(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mr(e.apply(this,n))}}Er.source=Pr(Ir(xr)),Er.sprite=Pr(Ir(kr)),Er.glyphs=Pr(Ir(Tr)),Er.light=Pr(Ir(br)),Er.sky=Pr(Ir(Lr)),Er.terrain=Pr(Ir(wr)),Er.layer=Pr(Ir(yr)),Er.filter=Pr(Ir(dr)),Er.paintProperty=Pr(Ir(mr)),Er.layoutProperty=Pr(Ir(gr));const Ar=Er,zr=Ar.light,Dr=Ar.paintProperty,Rr=Ar.layoutProperty;function Fr(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new Z(new Error(r.message))),n=!0;return n}class Or{constructor(e,t,n){const r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(let e=0;e<this.d*this.d;e++){const t=i[3+e],n=i[3+e+1];r.push(t===n?null:i.subarray(t,n))}const a=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],a),this.bboxes=i.subarray(a),this.insert=this._insertReadonly}else{this.d=t+2*n;for(let e=0;e<this.d*this.d;e++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;const i=n/t*e;this.min=-i,this.max=e+i}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,n,r,i,a){this.cells[i].push(a)}query(e,t,n,r,i){const a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);{const a=[];return this._forEachCell(e,t,n,r,this._queryCell,a,{},i),a}}_queryCell(e,t,n,r,i,a,o,s){const l=this.cells[i];if(null!==l){const i=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===o[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&n>=c[l+0]&&r>=c[l+1])?(o[h]=!0,a.push(i[h])):o[h]=!1}}}}_forEachCell(e,t,n,r,i,a,o,s){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&i.call(this,e,t,n,r,c,a,o,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let n=0;for(let a=0;a<this.cells.length;a++)n+=this.cells[a].length;const r=new Int32Array(t+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let i=t;for(let a=0;a<e.length;a++){const t=e[a];r[3+a]=i,r.set(t,i),i+=t.length}return r[3+e.length]=i,r.set(this.keys,i),i+=this.keys.length,r[3+e.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer}static serialize(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}}static deserialize(e){return new Or(e.buffer)}}const Br={};function Vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Br[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Br[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}Vr("Object",Object),Vr("TransferableGridIndex",Or),Vr("Color",We),Vr("Error",Error),Vr("AJAXError",B),Vr("ResolvedImage",tt),Vr("StylePropertyFunction",Un),Vr("StyleExpression",On,{omit:["_evaluator"]}),Vr("ZoomDependentExpression",Nn),Vr("ZoomConstantExpression",jn),Vr("CompoundExpression",Dt,{omit:["_evaluate"]});for(const ih in _n)_n[ih]._classRegistryKey||Vr(`Expression_${ih}`,_n[ih]);function jr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Nr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error)return e;if(jr(e))return t&&t.push(e),e;if(E(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const r of e)n.push(Nr(r,t));return n}if("object"==typeof e){const n=e.constructor,r=n._classRegistryKey;if(!r)throw new Error(`can't serialize object of unregistered class ${n.name}`);if(!Br[r])throw new Error(`${r} is not registered.`);const i=n.serialize?n.serialize(e,t):{};if(n.serialize){if(t&&i===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const n in e){if(!e.hasOwnProperty(n))continue;if(Br[r].omit.indexOf(n)>=0)continue;const a=e[n];i[n]=Br[r].shallow.indexOf(n)>=0?a:Nr(a,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function Hr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||jr(e)||E(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(Hr);if("object"==typeof e){const t=e.$name||"Object";if(!Br[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=Br[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const i of Object.keys(e)){if("$name"===i)continue;const n=e[i];r[i]=Br[t].shallow.indexOf(i)>=0?n:Hr(n)}return r}throw new Error("can't deserialize object of type "+typeof e)}class Ur{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const $r={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Zr(e){for(const t of e)if(Wr(t.charCodeAt(0)))return!0;return!1}function qr(e){for(const t of e)if(!Gr(t.charCodeAt(0)))return!1;return!0}function Gr(e){return!($r.Arabic(e)||$r["Arabic Supplement"](e)||$r["Arabic Extended-A"](e)||$r["Arabic Presentation Forms-A"](e)||$r["Arabic Presentation Forms-B"](e))}function Wr(e){return!(746!==e&&747!==e&&(e<4352||!($r["Bopomofo Extended"](e)||$r.Bopomofo(e)||$r["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||$r["CJK Compatibility Ideographs"](e)||$r["CJK Compatibility"](e)||$r["CJK Radicals Supplement"](e)||$r["CJK Strokes"](e)||!(!$r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||$r["CJK Unified Ideographs Extension A"](e)||$r["CJK Unified Ideographs"](e)||$r["Enclosed CJK Letters and Months"](e)||$r["Hangul Compatibility Jamo"](e)||$r["Hangul Jamo Extended-A"](e)||$r["Hangul Jamo Extended-B"](e)||$r["Hangul Jamo"](e)||$r["Hangul Syllables"](e)||$r.Hiragana(e)||$r["Ideographic Description Characters"](e)||$r.Kanbun(e)||$r["Kangxi Radicals"](e)||$r["Katakana Phonetic Extensions"](e)||$r.Katakana(e)&&12540!==e||!(!$r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!$r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||$r["Unified Canadian Aboriginal Syllabics"](e)||$r["Unified Canadian Aboriginal Syllabics Extended"](e)||$r["Vertical Forms"](e)||$r["Yijing Hexagram Symbols"](e)||$r["Yi Syllables"](e)||$r["Yi Radicals"](e))))}function Xr(e){return!(Wr(e)||function(e){return!!($r["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||$r["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||$r["Letterlike Symbols"](e)||$r["Number Forms"](e)||$r["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||$r["Control Pictures"](e)&&9251!==e||$r["Optical Character Recognition"](e)||$r["Enclosed Alphanumerics"](e)||$r["Geometric Shapes"](e)||$r["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||$r["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||$r["CJK Symbols and Punctuation"](e)||$r.Katakana(e)||$r["Private Use Area"](e)||$r["CJK Compatibility Forms"](e)||$r["Small Form Variants"](e)||$r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Kr(e){return e>=1424&&e<=2303||$r["Arabic Presentation Forms-A"](e)||$r["Arabic Presentation Forms-B"](e)}function Yr(e,t){return!(!t&&Kr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||$r.Khmer(e))}function Jr(e){for(const t of e)if(Kr(t.charCodeAt(0)))return!0;return!1}const Qr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ei{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ur,this.transition={})}isSupportedScript(e){return function(e,t){for(const n of e)if(!Yr(n.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Qr.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class ti{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(In(e))return new Un(e,t);if(Bn(e)){const n=Hn(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"color"===t.type&&"string"==typeof e?n=We.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)&&(n=et.parse(e)):n=Je.parse(e),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class ni{constructor(e){this.property=e,this.value=new ti(e,void 0)}transitioned(e,t){return new ii(this.property,this.value,t,y({},e.transition,this.transition),e.now)}untransitioned(){return new ii(this.property,this.value,null,{},0)}}class ri{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return b(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ni(this._values[e].property)),this._values[e].value=new ti(this._values[e].property,null===t?void 0:b(t))}getTransition(e){return b(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ni(this._values[e].property)),this._values[e].transition=b(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new ai(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new ai(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class ii{constructor(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(e,t,n);{const o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),i,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(o))}}return i}}class ai{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new li(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class oi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return b(this._values[e].value)}setValue(e,t){this._values[e]=new ti(this._values[e].property,null===t?void 0:b(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new li(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class si{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class li{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class ci{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,n){const r=Gt[this.specification.type];return r?r(e,t,n):e}}class ui{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new si(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new si(this,{kind:"constant",value:void 0},e.parameters);const r=Gt[this.specification.type];if(r){const i=r(e.value.value,t.value.value,n);return new si(this,{kind:"constant",value:i},e.parameters)}return e}evaluate(e,t,n,r,i,a){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,a)}}class hi extends ui{possiblyEvaluate(e,t,n,r){if(void 0===e.value)return new si(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r),a="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,t);return new si(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new si(this,{kind:"constant",value:n},t)}return new si(this,e.expression,t)}evaluate(e,t,n,r,i,a){if("source"===e.kind){const o=e.evaluate(t,n,r,i,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class di{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new ei(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ei(Math.floor(t.zoom),t)),e.expression.evaluate(new ei(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class pi{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class fi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new ti(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new ni(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}Vr("DataDrivenProperty",ui),Vr("DataConstantProperty",ci),Vr("CrossFadedDataDrivenProperty",hi),Vr("CrossFadedProperty",di),Vr("ColorRampProperty",pi);const mi="-transition";class gi extends q{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new oi(t.layout)),t.paint)){this._transitionablePaint=new ri(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new li(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Rr,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(mi)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Dr,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(e.endsWith(mi))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),a=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value;return o.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(e,a,o)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),x(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Fr(this,e.call(Ar,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:G,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof si&&Sn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const yi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _i{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((e=>{const i=yi[e.type].BYTES_PER_ELEMENT,a=n=bi(n,Math.max(t,i)),o=e.components||1;return r=Math.max(r,i),n+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:bi(n,Math.max(r,t)),alignment:t}}function bi(e,t){return Math.ceil(e/t)*t}class Li extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}Li.prototype.bytesPerElement=4,Vr("StructArrayLayout2i4",Li);class wi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}wi.prototype.bytesPerElement=6,Vr("StructArrayLayout3i6",wi);class ki extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e}}ki.prototype.bytesPerElement=8,Vr("StructArrayLayout4i8",ki);class Si extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}emplace(e,t,n,r,i,a,o){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}Si.prototype.bytesPerElement=12,Vr("StructArrayLayout2i4i12",Si);class Ci extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}emplace(e,t,n,r,i,a,o){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=a,this.uint8[l+7]=o,e}}Ci.prototype.bytesPerElement=8,Vr("StructArrayLayout2i4ub8",Ci);class Ti extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}Ti.prototype.bytesPerElement=8,Vr("StructArrayLayout2f8",Ti);class Ei extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a,o,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,a,o,s,l,c)}emplace(e,t,n,r,i,a,o,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}Ei.prototype.bytesPerElement=20,Vr("StructArrayLayout10ui20",Ei);class Ii extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a,o,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,a,o,s,l,c,u,h)}emplace(e,t,n,r,i,a,o,s,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=a,this.uint16[p+5]=o,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}Ii.prototype.bytesPerElement=24,Vr("StructArrayLayout4i4ui4i24",Ii);class Mi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}Mi.prototype.bytesPerElement=12,Vr("StructArrayLayout3f12",Mi);class Pi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Pi.prototype.bytesPerElement=4,Vr("StructArrayLayout1ul4",Pi);class Ai extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a,o,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,a,o,s,l)}emplace(e,t,n,r,i,a,o,s,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.int16[u+4]=a,this.int16[u+5]=o,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}Ai.prototype.bytesPerElement=20,Vr("StructArrayLayout6i1ul2ui20",Ai);class zi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}emplace(e,t,n,r,i,a,o){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}zi.prototype.bytesPerElement=12,Vr("StructArrayLayout2i2i2i12",zi);class Di extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}emplace(e,t,n,r,i,a){const o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,e}}Di.prototype.bytesPerElement=16,Vr("StructArrayLayout2f1f2i16",Di);class Ri extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,e}}Ri.prototype.bytesPerElement=12,Vr("StructArrayLayout2ub2f12",Ri);class Fi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}Fi.prototype.bytesPerElement=6,Vr("StructArrayLayout3ui6",Fi);class Oi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g)}emplace(e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y){const _=24*e,v=12*e,x=48*e;return this.int16[_+0]=t,this.int16[_+1]=n,this.uint16[_+2]=r,this.uint16[_+3]=i,this.uint32[v+2]=a,this.uint32[v+3]=o,this.uint32[v+4]=s,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[v+7]=h,this.float32[v+8]=d,this.uint8[x+36]=p,this.uint8[x+37]=f,this.uint8[x+38]=m,this.uint32[v+10]=g,this.int16[_+22]=y,e}}Oi.prototype.bytesPerElement=48,Vr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oi);class Bi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,L,w,k,S,C,T){const E=this.length;return this.resize(E+1),this.emplace(E,e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,L,w,k,S,C,T)}emplace(e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,L,w,k,S,C,T,E){const I=32*e,M=16*e;return this.int16[I+0]=t,this.int16[I+1]=n,this.int16[I+2]=r,this.int16[I+3]=i,this.int16[I+4]=a,this.int16[I+5]=o,this.int16[I+6]=s,this.int16[I+7]=l,this.uint16[I+8]=c,this.uint16[I+9]=u,this.uint16[I+10]=h,this.uint16[I+11]=d,this.uint16[I+12]=p,this.uint16[I+13]=f,this.uint16[I+14]=m,this.uint16[I+15]=g,this.uint16[I+16]=y,this.uint16[I+17]=_,this.uint16[I+18]=v,this.uint16[I+19]=x,this.uint16[I+20]=b,this.uint16[I+21]=L,this.uint16[I+22]=w,this.uint32[M+12]=k,this.float32[M+13]=S,this.float32[M+14]=C,this.uint16[I+30]=T,this.uint16[I+31]=E,e}}Bi.prototype.bytesPerElement=64,Vr("StructArrayLayout8i15ui1ul2f2ui64",Bi);class Vi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Vi.prototype.bytesPerElement=4,Vr("StructArrayLayout1f4",Vi);class ji extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[6*e+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}ji.prototype.bytesPerElement=12,Vr("StructArrayLayout1ui2f12",ji);class Ni extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=n,this.uint16[i+3]=r,e}}Ni.prototype.bytesPerElement=8,Vr("StructArrayLayout1ul2ui8",Ni);class Hi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}Hi.prototype.bytesPerElement=4,Vr("StructArrayLayout2ui4",Hi);class Ui extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Ui.prototype.bytesPerElement=2,Vr("StructArrayLayout1ui2",Ui);class $i extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e}}$i.prototype.bytesPerElement=16,Vr("StructArrayLayout4f16",$i);class Zi extends _i{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new a(this.anchorPointX,this.anchorPointY)}}Zi.prototype.size=20;class qi extends Ai{get(e){return new Zi(this,e)}}Vr("CollisionBoxArray",qi);class Gi extends _i{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Gi.prototype.size=48;class Wi extends Oi{get(e){return new Gi(this,e)}}Vr("PlacedSymbolArray",Wi);class Xi extends _i{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Xi.prototype.size=64;class Ki extends Bi{get(e){return new Xi(this,e)}}Vr("SymbolInstanceArray",Ki);class Yi extends Vi{getoffsetX(e){return this.float32[1*e+0]}}Vr("GlyphOffsetArray",Yi);class Ji extends wi{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Vr("SymbolLineVertexArray",Ji);class Qi extends _i{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Qi.prototype.size=12;class ea extends ji{get(e){return new Qi(this,e)}}Vr("TextAnchorOffsetArray",ea);class ta extends _i{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ta.prototype.size=8;class na extends Ni{get(e){return new ta(this,e)}}Vr("FeatureIndexArray",na);class ra extends Li{}class ia extends Li{}class aa extends Li{}class oa extends Si{}class sa extends Ci{}class la extends Ti{}class ca extends Ei{}class ua extends Ii{}class ha extends Mi{}class da extends Pi{}class pa extends zi{}class fa extends Ri{}class ma extends Fi{}class ga extends Hi{}const ya=xi([{name:"a_pos",components:2,type:"Int16"}],4),{members:_a}=ya;class va{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>va.MAX_VERTEX_ARRAY_LENGTH&&w(`Max vertices per segment is ${va.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>va.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new va([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}function xa(e,t){return 256*(e=m(Math.floor(e),0,255))+m(Math.floor(t),0,255)}va.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Vr("SegmentVector",va);const ba=xi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var La={exports:{}},wa={exports:{}};wa.exports=function(e,t){var n,r,i,a,o,s,l,c;for(r=e.length-(n=3&e.length),i=t,o=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var ka=wa.exports,Sa={exports:{}};Sa.exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Ca=ka,Ta=Sa.exports;La.exports=Ca,La.exports.murmur3=Ca,La.exports.murmur2=Ta;var Ea=n(La.exports);class Ia{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Ma(e)),this.positions.push(t,n,r)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=Ma(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return Pa(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new Ia;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Ma(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Ea(String(e))}function Pa(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let a=n-1,o=r+1;for(;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;Aa(e,a,o),Aa(t,3*a,3*o),Aa(t,3*a+1,3*o+1),Aa(t,3*a+2,3*o+2)}o-n<r-o?(Pa(e,t,n,o),n=o+1):(Pa(e,t,o+1,r),r=o)}}function Aa(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}Vr("FeaturePositionMap",Ia);class za{constructor(e,t){this.gl=e.gl,this.location=t}}class Da extends za{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Ra extends za{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Fa extends za{constructor(e,t){super(e,t),this.current=We.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Oa=new Float32Array(16);function Ba(e){return[xa(255*e.r,255*e.g),xa(255*e.b,255*e.a)]}class Va{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new Fa(e,t):new Da(e,t)}}class ja{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)?new Ra(e,t):new Da(e,t)}}class Na{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i){const a=this.paintVertexArray.length,o=this.expression.evaluate(new ei(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(a,e,o)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)}_setPaintValue(e,t,n){if("color"===this.type){const r=Ba(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ha{constructor(e,t,n,r,i,a){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new a}populatePaintArray(e,t,n,r,i){const a=this.expression.evaluate(new ei(this.zoom),t,{},r,[],i),o=this.expression.evaluate(new ei(this.zoom+1),t,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,a,o)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=Ba(n),a=Ba(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],a[0],a[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=m(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,n){return new Da(e,t)}}class Ua{constructor(e,t,n,r,i,a){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=r,this.layerId=a,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(e,t,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(e,t,n,r){if(!r||!n)return;const{min:i,mid:a,max:o}=n,s=r[i],l=r[a],c=r[o];if(s&&l&&c)for(let u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ba.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ba.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $a{constructor(e,t,n){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const a=e.paint.get(i);if(!(a instanceof si&&Sn(a.property.specification)))continue;const o=qa(i,e.type),s=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,u=a.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[i]=h?new ja(s.value,o):new Va(s.value,o,l),r.push(`/u_${i}`);else if("source"===s.kind||h){const n=Ga(i,l,"source");this.binders[i]=h?new Ua(s,l,c,t,n,e.id):new Na(s,o,l,n),r.push(`/a_${i}`)}else{const e=Ga(i,l,"composite");this.binders[i]=new Ha(s,o,l,c,t,e),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Na||t instanceof Ha?t.maxValue:0}populatePaintArrays(e,t,n,r,i){for(const a in this.binders){const o=this.binders[a];(o instanceof Na||o instanceof Ha||o instanceof Ua)&&o.populatePaintArray(e,t,n,r,i)}}setConstantPatternPositions(e,t){for(const n in this.binders){const r=this.binders[n];r instanceof ja&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,r,i){let a=!1;for(const o in e){const s=t.getPositions(o);for(const t of s){const s=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Na||l instanceof Ha||l instanceof Ua)&&!0===l.expression.isStateDependent){const c=r.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[o],i),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Va||n instanceof ja)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Na||n instanceof Ha)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof Ua)for(let t=0;t<ba.members.length;t++)e.push(ba.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Va||n instanceof ja||n instanceof Ha)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Va||i instanceof ja||i instanceof Ha)for(const a of i.uniformNames)if(t[a]){const o=i.getBinding(e,t[a],a);n.push({name:a,property:r,binding:o})}}return n}setUniforms(e,t,n,r){for(const{name:i,property:a,binding:o}of t)this.binders[a].setUniform(o,r,n.get(a),i)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof Ua){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof Na||n instanceof Ha)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Na||n instanceof Ha||n instanceof Ua)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Na||t instanceof Ha||t instanceof Ua)&&t.destroy()}}}class Za{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new $a(r,t,n);this.needsUpload=!1,this._featureMap=new Ia,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,a){for(const o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,r,i,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,r)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function qa(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function Ga(e,t,n){const r={color:{source:Ti,composite:$i},number:{source:Vi,composite:Ti}},i=function(e){return{"line-pattern":{source:ca,composite:ca},"fill-pattern":{source:ca,composite:ca},"fill-extrusion-pattern":{source:ca,composite:ca}}[e]}(e);return i&&i[n]||r[t][n]}Vr("ConstantBinder",Va),Vr("CrossFadedConstantBinder",ja),Vr("SourceExpressionBinder",Na),Vr("CrossFadedCompositeBinder",Ua),Vr("CompositeExpressionBinder",Ha),Vr("ProgramConfiguration",$a,{omit:["_buffers"]}),Vr("ProgramConfigurationSet",Za);const Wa=8192,Xa=Math.pow(2,14)-1,Ka=-Xa-1;function Ya(e){const t=Wa/e.extent,n=e.loadGeometry();for(let r=0;r<n.length;r++){const e=n[r];for(let n=0;n<e.length;n++){const r=e[n],i=Math.round(r.x*t),a=Math.round(r.y*t);r.x=m(i,Ka,Xa),r.y=m(a,Ka,Xa),(i<r.x||i>r.x+1||a<r.y||a>r.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Ja(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ya(e):[]}}function Qa(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}class eo{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ia,this.indexArray=new ma,this.segments=new va,this.programConfigurations=new Za(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){const r=this.layers[0],i=[];let a=null,o=!1;"circle"===r.type&&(a=r.layout.get("circle-sort-key"),o=!a.isConstant());for(const{feature:s,id:l,index:c,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Ja(s,e);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),t,n))continue;const r=o?a.evaluate(t,{},n):void 0,h={id:l,properties:s.properties,type:s.type,sourceLayerIndex:u,index:c,geometry:e?t.geometry:Ya(s),patterns:{},sortKey:r};i.push(h)}o&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const s of i){const{geometry:r,index:i,sourceLayerIndex:a}=s,o=e[i].feature;this.addFeature(s,r,i,n),t.featureIndex.insert(o,r,i,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_a),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r){for(const i of t)for(const t of i){const n=t.x,r=t.y;if(n<0||n>=Wa||r<0||r>=Wa)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),a=i.vertexLength;Qa(this.layoutVertexArray,n,r,-1,-1),Qa(this.layoutVertexArray,n,r,1,-1),Qa(this.layoutVertexArray,n,r,1,1),Qa(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+3,a+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)}}function to(e,t){for(let n=0;n<e.length;n++)if(uo(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(uo(e,t[n]))return!0;return!!ao(e,t)}function no(e,t,n){return!!uo(e,t)||!!so(t,e,n)}function ro(e,t){if(1===e.length)return co(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(uo(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(co(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(ao(e,t[n]))return!0;return!1}function io(e,t,n){if(e.length>1){if(ao(e,t))return!0;for(let r=0;r<t.length;r++)if(so(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(so(e[r],t,n))return!0;return!1}function ao(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(oo(r,i,t[e],t[e+1]))return!0}return!1}function oo(e,t,n,r){return k(e,n,r)!==k(t,n,r)&&k(e,t,n)!==k(e,t,r)}function so(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(lo(e,t[i-1],t[i])<r)return!0;return!1}function lo(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function co(e,t){let n,r,i,a=!1;for(let o=0;o<e.length;o++){n=e[o];for(let e=0,o=n.length-1;e<n.length;o=e++)r=n[e],i=n[o],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a)}return a}function uo(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function ho(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const a=k(e,t,n[0]);return a!==k(e,t,n[1])||a!==k(e,t,n[2])||a!==k(e,t,n[3])}function po(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function fo(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function mo(e,t,n,r,i){if(!t[0]&&!t[1])return e;const o=a.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);const s=[];for(let a=0;a<e.length;a++)s.push(e[a].sub(o));return s}let go,yo;Vr("CircleBucket",eo,{omit:["layers"]});var _o={get paint(){return yo=yo||new fi({"circle-radius":new ui(G.paint_circle["circle-radius"]),"circle-color":new ui(G.paint_circle["circle-color"]),"circle-blur":new ui(G.paint_circle["circle-blur"]),"circle-opacity":new ui(G.paint_circle["circle-opacity"]),"circle-translate":new ci(G.paint_circle["circle-translate"]),"circle-translate-anchor":new ci(G.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ci(G.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ci(G.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ui(G.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ui(G.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ui(G.paint_circle["circle-stroke-opacity"])})},get layout(){return go=go||new fi({"circle-sort-key":new ui(G.layout_circle["circle-sort-key"])})}},vo=1e-6,xo="undefined"!=typeof Float32Array?Float32Array:Array;function bo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Lo(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],v=n[0],x=n[1],b=n[2],L=n[3];return e[0]=v*r+x*s+b*h+L*m,e[1]=v*i+x*l+b*d+L*g,e[2]=v*a+x*c+b*p+L*y,e[3]=v*o+x*u+b*f+L*_,e[4]=(v=n[4])*r+(x=n[5])*s+(b=n[6])*h+(L=n[7])*m,e[5]=v*i+x*l+b*d+L*g,e[6]=v*a+x*c+b*p+L*y,e[7]=v*o+x*u+b*f+L*_,e[8]=(v=n[8])*r+(x=n[9])*s+(b=n[10])*h+(L=n[11])*m,e[9]=v*i+x*l+b*d+L*g,e[10]=v*a+x*c+b*p+L*y,e[11]=v*o+x*u+b*f+L*_,e[12]=(v=n[12])*r+(x=n[13])*s+(b=n[14])*h+(L=n[15])*m,e[13]=v*i+x*l+b*d+L*g,e[14]=v*a+x*c+b*p+L*y,e[15]=v*o+x*u+b*f+L*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var wo,ko=Lo;function So(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}wo=new xo(4),xo!=Float32Array&&(wo[0]=0,wo[1]=0,wo[2]=0,wo[3]=0);class Co extends gi{constructor(e){super(e,_o)}createBucket(e){return new eo(e)}queryRadius(e){const t=e;return po("circle-radius",this,t)+po("circle-stroke-width",this,t)+fo(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,a,o,s){const l=mo(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(e,t){return e.map((e=>To(e,t)))}(l,s),d=u?c*o:c;for(const p of r)for(const e of p){const t=u?e:To(e,s);let n=d;const r=So([],[e.x,e.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=r[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=a.cameraToCenterDistance/r[3]),no(h,t,n))return!0}return!1}}function To(e,t){const n=So([],[e.x,e.y,0,1],t);return new a(n[0]/n[3],n[1]/n[3])}class Eo extends eo{}let Io;Vr("HeatmapBucket",Eo,{omit:["layers"]});var Mo={get paint(){return Io=Io||new fi({"heatmap-radius":new ui(G.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ui(G.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ci(G.paint_heatmap["heatmap-intensity"]),"heatmap-color":new pi(G.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ci(G.paint_heatmap["heatmap-opacity"])})}};function Po(e,t,n,r){let{width:i,height:a}=t;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError(`mismatched image size. expected: ${r.length} but got: ${i*a*n}`)}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function Ao(e,t,n){let{width:r,height:i}=t;if(r===e.width&&i===e.height)return;const a=Po({},{width:r,height:i},n);zo(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=a.data}function zo(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const o=e.data,s=t.data;if(o===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*a,u=((r.y+l)*t.width+r.x)*a;for(let e=0;e<i.width*a;e++)s[u+e]=o[c+e]}return t}class Do{constructor(e,t){Po(this,e,1,t)}resize(e){Ao(this,e,1)}clone(){return new Do({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){zo(e,t,n,r,i,1)}}class Ro{constructor(e,t){Po(this,e,4,t)}resize(e){Ao(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){zo(e,t,n,r,i,4)}}function Fo(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Ro({width:n,height:r});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const a=(n,r,a)=>{t[e.evaluationKey]=a;const o=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(e.clips)for(let o=0,s=0;o<r;++o,s+=4*n)for(let t=0,r=0;t<n;t++,r+=4){const i=t/(n-1),{start:l,end:c}=e.clips[o];a(s,r,l*(1-i)+c*i)}else for(let o=0,s=0;o<n;o++,s+=4)a(0,s,o/(n-1));return i}Vr("AlphaImage",Do),Vr("RGBAImage",Ro);class Oo extends gi{createBucket(e){return new Eo(e)}constructor(e){super(e,Mo),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Fo({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Bo;var Vo={get paint(){return Bo=Bo||new fi({"hillshade-illumination-direction":new ci(G.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ci(G.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ci(G.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ci(G.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ci(G.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ci(G.paint_hillshade["hillshade-accent-color"])})}};class jo extends gi{constructor(e){super(e,Vo)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const No=xi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ho}=No;var Uo={exports:{}};function $o(e,t,n){n=n||2;var r,i,a,o,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,d=Zo(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Zo(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(ns(o));for(s.sort(Jo),i=0;i<s.length;i++)n=Qo(s[i],n);return n}(e,t,d,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var f=n;f<h;f+=n)(s=e[f])<r&&(r=s),(l=e[f+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-r,o-i))?32767/c:0}return Go(d,p,n,r,i,c,0),p}function Zo(e,t,n,r,i){var a,o;if(i===ms(e,t,n,r)>0)for(a=t;a<n;a+=r)o=ds(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=ds(a,e[a],e[a+1],o);return o&&os(o,o.next)&&(ps(o),o=o.next),o}function qo(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!os(r,r.next)&&0!==as(r.prev,r,r.next))r=r.next;else{if(ps(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Go(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=ts(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Xo(e,r,i,a):Wo(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),ps(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Go(e=Ko(qo(e),t,n),t,n,r,i,a,2):2===o&&Yo(e,t,n,r,i,a):Go(qo(e),t,n,r,i,a,1);break}}}function Wo(e){var t=e.prev,n=e,r=e.next;if(as(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,c=r.y,u=i<a?i<o?i:o:a<o?a:o,h=s<l?s<c?s:c:l<c?l:c,d=i>a?i>o?i:o:a>o?a:o,p=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&rs(i,s,a,l,o,c,f.x,f.y)&&as(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Xo(e,t,n,r){var i=e.prev,a=e,o=e.next;if(as(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,c=o.x,u=i.y,h=a.y,d=o.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=ts(p,f,t,n,r),_=ts(m,g,t,n,r),v=e.prevZ,x=e.nextZ;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==o&&rs(s,u,l,h,c,d,v.x,v.y)&&as(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&rs(s,u,l,h,c,d,x.x,x.y)&&as(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==o&&rs(s,u,l,h,c,d,v.x,v.y)&&as(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&rs(s,u,l,h,c,d,x.x,x.y)&&as(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Ko(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!os(i,a)&&ss(i,r,r.next,a)&&us(i,a)&&us(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),ps(r),ps(r.next),r=e=a),r=r.next}while(r!==e);return qo(r)}function Yo(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&is(o,s)){var l=hs(o,s);return o=qo(o,o.next),l=qo(l,l.next),Go(o,t,n,r,i,a,0),void Go(l,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Jo(e,t){return e.x-t.x}function Qo(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&rs(a<h?i:o,a,u,h,a<h?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),us(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&es(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=hs(n,e);return qo(r,r.next),qo(n,n.next)}function es(e,t){return as(e.prev,e,t.prev)<0&&as(t.next,e,e.next)<0}function ts(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ns(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function rs(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function is(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ss(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(us(e,t)&&us(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(as(e.prev,e,t.prev)||as(e,t.prev,t))||os(e,t)&&as(e.prev,e,e.next)>0&&as(t.prev,t,t.next)>0)}function as(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function os(e,t){return e.x===t.x&&e.y===t.y}function ss(e,t,n,r){var i=cs(as(e,t,n)),a=cs(as(e,t,r)),o=cs(as(n,r,e)),s=cs(as(n,r,t));return i!==a&&o!==s||!(0!==i||!ls(e,n,t))||!(0!==a||!ls(e,r,t))||!(0!==o||!ls(n,e,r))||!(0!==s||!ls(n,t,r))}function ls(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function cs(e){return e>0?1:e<0?-1:0}function us(e,t){return as(e.prev,e,e.next)<0?as(e,t,e.next)>=0&&as(e,e.prev,t)>=0:as(e,t,e.prev)<0||as(e,e.next,t)<0}function hs(e,t){var n=new fs(e.i,e.x,e.y),r=new fs(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ds(e,t,n,r){var i=new fs(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ps(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fs(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ms(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}Uo.exports=$o,Uo.exports.default=$o,$o.deviation=function(e,t,n,r){var i=t&&t.length,a=Math.abs(ms(e,0,i?t[0]*n:e.length,n));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(ms(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var l=0;for(o=0;o<r.length;o+=3){var c=r[o]*n,u=r[o+1]*n,h=r[o+2]*n;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},$o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&n.holes.push(r+=e[i-1].length)}return n};var gs=n(Uo.exports);function ys(e,t,n,r,i){_s(e,t,n||0,r||e.length-1,i||xs)}function _s(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);_s(e,t,Math.max(n,Math.floor(t-o*l/a+c)),Math.min(r,Math.floor(t+(a-o)*l/a+c)),i)}var u=e[t],h=n,d=r;for(vs(e,n,t),i(e[r],u)>0&&vs(e,n,r);h<d;){for(vs(e,h,d),h++,d--;i(e[h],u)<0;)h++;for(;i(e[d],u)>0;)d--}0===i(e[n],u)?vs(e,n,d):vs(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function vs(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function xs(e,t){return e<t?-1:e>t?1:0}function bs(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,a;for(let o=0;o<n;o++){const t=S(e[o]);0!==t&&(e[o].area=Math.abs(t),void 0===a&&(a=t<0),a===t<0?(i&&r.push(i),i=[e[o]]):i.push(e[o]))}if(i&&r.push(i),t>1)for(let o=0;o<r.length;o++)r[o].length<=t||(ys(r[o],t,1,r[o].length-1,Ls),r[o]=r[o].slice(0,t));return r}function Ls(e,t){return t.area-e.area}function ws(e,t,n){const r=n.patternDependencies;let i=!1;for(const a of t){const t=a.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const n=t.constantOr(null);n&&(i=!0,r[n.to]=!0,r[n.from]=!0)}return i}function ks(e,t,n,r,i){const a=i.patternDependencies;for(const o of t){const t=o.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},n,{},i.availableImages),s=t.evaluate({zoom:r},n,{},i.availableImages),l=t.evaluate({zoom:r+1},n,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,a[e]=!0,a[s]=!0,a[l]=!0,n.patterns[o.id]={min:e,mid:s,max:l}}}return n}class Ss{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new aa,this.indexArray=new ma,this.indexArray2=new ga,this.programConfigurations=new Za(e.layers,e.zoom),this.segments=new va,this.segments2=new va,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=ws("fill",this.layers,t);const r=this.layers[0].layout.get("fill-sort-key"),i=!r.isConstant(),a=[];for(const{feature:o,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Ja(o,e);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),u,n))continue;const h=i?r.evaluate(u,{},n,t.availableImages):void 0,d={id:s,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Ya(o),patterns:{},sortKey:h};a.push(d)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const o of a){const{geometry:r,index:i,sourceLayerIndex:a}=o;if(this.hasPattern){const e=ks("fill",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,r,i,n,{});t.featureIndex.insert(e[i].feature,r,i,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ho),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i){for(const a of bs(t,500)){let e=0;for(const s of a)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),r.push(s[n].x),r.push(s[n].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const o=gs(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);t.vertexLength+=e,t.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}let Cs,Ts;Vr("FillBucket",Ss,{omit:["layers","patternFeatures"]});var Es={get paint(){return Ts=Ts||new fi({"fill-antialias":new ci(G.paint_fill["fill-antialias"]),"fill-opacity":new ui(G.paint_fill["fill-opacity"]),"fill-color":new ui(G.paint_fill["fill-color"]),"fill-outline-color":new ui(G.paint_fill["fill-outline-color"]),"fill-translate":new ci(G.paint_fill["fill-translate"]),"fill-translate-anchor":new ci(G.paint_fill["fill-translate-anchor"]),"fill-pattern":new hi(G.paint_fill["fill-pattern"])})},get layout(){return Cs=Cs||new fi({"fill-sort-key":new ui(G.layout_fill["fill-sort-key"])})}};class Is extends gi{constructor(e){super(e,Es)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Ss(e)}queryRadius(){return fo(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,a,o){return ro(mo(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),r)}isTileClipped(){return!0}}const Ms=xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ps=xi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:As}=Ms;var zs={},Ds=r,Rs=Fs;function Fs(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Os,this,t)}function Os(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Bs(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)r+=((n=e[o]).x-(t=e[i]).x)*(t.y+n.y);return r}Fs.types=["Unknown","Point","LineString","Polygon"],Fs.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,o=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)a+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new Ds(a,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Fs.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,c]},Fs.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Fs.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=Bs(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Vs=Rs,js=Ns;function Ns(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Hs,this,t),this.length=this._features.length}function Hs(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}Ns.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Vs(this._pbf,t,this.extent,this._keys,this._values)};var Us=js;function $s(e,t,n){if(3===e){var r=new Us(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}zs.VectorTile=function(e,t){this.layers=e.readFields($s,{},t)},zs.VectorTileFeature=Rs,zs.VectorTileLayer=js;const Zs=zs.VectorTileFeature.types,qs=Math.pow(2,13);function Gs(e,t,n,r,i,a,o,s){e.emplaceBack(t,n,2*Math.floor(r*qs)+o,i*qs*2,a*qs*2,Math.round(s))}class Ws{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new oa,this.centroidVertexArray=new ra,this.indexArray=new ma,this.programConfigurations=new Za(e.layers,e.zoom),this.segments=new va,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.features=[],this.hasPattern=ws("fill-extrusion",this.layers,t);for(const{feature:r,id:i,index:a,sourceLayerIndex:o}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Ja(r,e);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),s,n))continue;const l={id:i,sourceLayerIndex:o,index:a,geometry:e?s.geometry:Ya(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(ks("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,a,n,{}),t.featureIndex.insert(r,l.geometry,a,o,this.index,!0)}}addFeatures(e,t,n){for(const r of this.features){const{geometry:e}=r;this.addFeature(r,e,r.index,t,n)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,As),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ps.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,n,r,i){const a={x:0,y:0,vertexCount:0};for(const o of bs(t,500)){let t=0;for(const e of o)t+=e.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of o){if(0===e.length)continue;if(Ks(e))continue;let t=0;for(let r=0;r<e.length;r++){const i=e[r];if(r>=1){const o=e[r-1];if(!Xs(i,o)){n.vertexLength+4>va.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=i.sub(o)._perp()._unit(),r=o.dist(i);t+r>32768&&(t=0),Gs(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,0,t),Gs(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,1,t),a.x+=2*i.x,a.y+=2*i.y,a.vertexCount+=2,t+=r,Gs(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,0,t),Gs(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,1,t),a.x+=2*o.x,a.y+=2*o.y,a.vertexCount+=2;const s=n.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+t>va.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Zs[e.type])continue;const r=[],i=[],s=n.vertexLength;for(const e of o)if(0!==e.length){e!==o[0]&&i.push(r.length/2);for(let t=0;t<e.length;t++){const n=e[t];Gs(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),a.x+=n.x,a.y+=n.y,a.vertexCount+=1,r.push(n.x),r.push(n.y)}}const l=gs(r,i);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(s+l[e],s+l[e+2],s+l[e+1]);n.primitiveLength+=l.length/3,n.vertexLength+=t}for(let o=0;o<a.vertexCount;o++)this.centroidVertexArray.emplaceBack(Math.floor(a.x/a.vertexCount),Math.floor(a.y/a.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}function Xs(e,t){return e.x===t.x&&(e.x<0||e.x>Wa)||e.y===t.y&&(e.y<0||e.y>Wa)}function Ks(e){return e.every((e=>e.x<0))||e.every((e=>e.x>Wa))||e.every((e=>e.y<0))||e.every((e=>e.y>Wa))}let Ys;Vr("FillExtrusionBucket",Ws,{omit:["layers","features"]});var Js={get paint(){return Ys=Ys||new fi({"fill-extrusion-opacity":new ci(G["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ui(G["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ci(G["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ci(G["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hi(G["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ui(G["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ui(G["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ci(G["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Qs extends gi{constructor(e){super(e,Js)}createBucket(e){return new Ws(e)}queryRadius(){return fo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,n,r,i,o,s,l){const c=mo(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),d=function(e,t){const n=[];for(const r of e){const e=[r.x,r.y,0,1];So(e,e,t),n.push(new a(e[0]/e[3],e[1]/e[3]))}return n}(c,l),p=function(e,t,n,r){const i=[],o=[],s=r[8]*t,l=r[9]*t,c=r[10]*t,u=r[11]*t,h=r[8]*n,d=r[9]*n,p=r[10]*n,f=r[11]*n;for(const m of e){const e=[],t=[];for(const n of m){const i=n.x,o=n.y,m=r[0]*i+r[4]*o+r[12],g=r[1]*i+r[5]*o+r[13],y=r[2]*i+r[6]*o+r[14],_=r[3]*i+r[7]*o+r[15],v=y+c,x=_+u,b=m+h,L=g+d,w=y+p,k=_+f,S=new a((m+s)/x,(g+l)/x);S.z=v/x,e.push(S);const C=new a(b/k,L/k);C.z=w/k,t.push(C)}i.push(e),o.push(t)}return[i,o]}(r,h,u,l);return function(e,t,n){let r=1/0;ro(n,t)&&(r=tl(n,t[0]));for(let i=0;i<t.length;i++){const a=t[i],o=e[i];for(let e=0;e<a.length-1;e++){const t=a[e],i=[t,a[e+1],o[e+1],o[e],t];to(n,i)&&(r=Math.min(r,tl(n,i)))}}return r!==1/0&&r}(p[0],p[1],d)}}function el(e,t){return e.x*t.x+e.y*t.y}function tl(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const a=t[n],o=e[0],s=i.sub(r),l=a.sub(r),c=o.sub(r),u=el(s,s),h=el(s,l),d=el(l,l),p=el(c,s),f=el(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,_=r.z*(1-g-y)+i.z*g+a.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}const nl=xi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rl}=nl,il=xi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:al}=il,ol=zs.VectorTileFeature.types,sl=Math.cos(Math.PI/180*37.5),ll=Math.pow(2,14)/.5;class cl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new sa,this.layoutVertexArray2=new la,this.indexArray=new ma,this.programConfigurations=new Za(e.layers,e.zoom),this.segments=new va,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=ws("line",this.layers,t);const r=this.layers[0].layout.get("line-sort-key"),i=!r.isConstant(),a=[];for(const{feature:o,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Ja(o,e);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),t,n))continue;const u=i?r.evaluate(t,{},n):void 0,h={id:s,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:Ya(o),patterns:{},sortKey:u};a.push(h)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const o of a){const{geometry:r,index:i,sourceLayerIndex:a}=o;if(this.hasPattern){const e=ks("line",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,r,i,n,{});t.featureIndex.insert(e[i].feature,r,i,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,al)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i){const a=this.layers[0].layout,o=a.get("line-join").evaluate(e,{}),s=a.get("line-cap"),l=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const u of t)this.addLine(u,e,o,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}addLine(e,t,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===ol[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(o?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?15*Wa/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,o&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?o?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),h&&(d=h),h=e[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const y=f.x*m.x+f.y*m.y,_=t.x*m.x+t.y*m.y,v=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),b=_<sl&&d&&p,L=f.x*m.y-f.y*m.x>0;if(b&&g>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const w=d&&p;let k=w?n:o?"butt":r;if(w&&"round"===k&&(v<a?k="miter":v<=2&&(k="fakeround")),"miter"===k&&v>i&&(k="bevel"),"bevel"===k&&(v>2&&(k="flipbevel"),v<i&&(k="miter")),d&&this.updateDistance(d,h),"miter"===k)t._mult(v),this.addCurrentVertex(h,t,0,0,u);else if("flipbevel"===k){if(v>100)t=m.mult(-1);else{const e=v*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(L?-1:1))}this.addCurrentVertex(h,t,0,0,u),this.addCurrentVertex(h,t.mult(-1),0,0,u)}else if("bevel"===k||"fakeround"===k){const e=-Math.sqrt(v*v-1),t=L?e:0,n=L?0:e;if(d&&this.addCurrentVertex(h,f,t,n,u),"fakeround"===k){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(L?-1:1);this.addHalfVertex(h,r.x,r.y,!1,L,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===k)this.addCurrentVertex(h,t,0,0,u);else if("square"===k){const e=d?1:-1;this.addCurrentVertex(h,t,e,e,u)}else"round"===k&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(b&&g<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,i),this.addHalfVertex(e,o,s,a,!0,-r,i),this.distance>ll/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,n,r,i,a))}addHalfVertex(e,t,n,r,i,a,o){let{x:s,y:l}=e;const c=.5*(this.lineClips?this.scaledDistance*(ll-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),i?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let ul,hl;Vr("LineBucket",cl,{omit:["layers","patternFeatures"]});var dl={get paint(){return hl=hl||new fi({"line-opacity":new ui(G.paint_line["line-opacity"]),"line-color":new ui(G.paint_line["line-color"]),"line-translate":new ci(G.paint_line["line-translate"]),"line-translate-anchor":new ci(G.paint_line["line-translate-anchor"]),"line-width":new ui(G.paint_line["line-width"]),"line-gap-width":new ui(G.paint_line["line-gap-width"]),"line-offset":new ui(G.paint_line["line-offset"]),"line-blur":new ui(G.paint_line["line-blur"]),"line-dasharray":new di(G.paint_line["line-dasharray"]),"line-pattern":new hi(G.paint_line["line-pattern"]),"line-gradient":new pi(G.paint_line["line-gradient"])})},get layout(){return ul=ul||new fi({"line-cap":new ci(G.layout_line["line-cap"]),"line-join":new ui(G.layout_line["line-join"]),"line-miter-limit":new ci(G.layout_line["line-miter-limit"]),"line-round-limit":new ci(G.layout_line["line-round-limit"]),"line-sort-key":new ui(G.layout_line["line-sort-key"])})}};class pl extends ui{possiblyEvaluate(e,t){return t=new ei(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=y({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}let fl;class ml extends gi{constructor(e){super(e,dl),this.gradientVersion=0,fl||(fl=new pl(dl.paint.properties["line-width"].specification),fl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof jt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=fl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new cl(e)}queryRadius(e){const t=e,n=gl(po("line-width",this,t),po("line-gap-width",this,t)),r=po("line-offset",this,t);return n/2+Math.abs(r)+fo(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,i,o,s){const l=mo(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),c=s/2*gl(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=[];for(let e=0;e<i.length;e++){const n=i[e-1],r=i[e],s=i[e+1],l=0===e?new a(0,0):r.sub(n)._unit()._perp(),c=e===i.length-1?new a(0,0):s.sub(r)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;0!==h&&u._mult(1/h),o.push(u._mult(t)._add(r))}n.push(o)}return n}(r,u*s)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(uo(e,i[t]))return!0;if(io(e,i,n))return!0}return!1}(l,r,c)}isTileClipped(){return!0}}function gl(e,t){return t>0?t+2*e:e}const yl=xi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_l=xi([{name:"a_projected_pos",components:3,type:"Float32"}],4);xi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const vl=xi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const xl=xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bl=xi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ll(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Qr.applyArabicShaping&&(e=Qr.applyArabicShaping(e)),e}(e.text,t,n)})),e}xi([{name:"triangle",components:3,type:"Uint16"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),xi([{type:"Float32",name:"offsetX"}]),xi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),xi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const wl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var kl=24,Sl=El,Cl=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=e[t+h];for(h+=d,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+h],h+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},Tl=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+p]=255&o,p+=f,o/=256,c-=8);e[n+p-f]|=128*m};function El(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}El.Varint=0,El.Fixed64=1,El.Bytes=2,El.Fixed32=5;var Il=4294967296,Ml=1/Il,Pl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Al(e){return e.type===El.Bytes?e.readVarint()+e.pos:e.pos+1}function zl(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Dl(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Rl(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Fl(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Ol(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Bl(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Vl(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function jl(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Nl(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Hl(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ul(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function $l(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Zl(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function ql(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}El.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=$l(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ql(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=$l(this.buf,this.pos)+$l(this.buf,this.pos+4)*Il;return this.pos+=8,e},readSFixed64:function(){var e=$l(this.buf,this.pos)+ql(this.buf,this.pos+4)*Il;return this.pos+=8,e},readFloat:function(){var e=Cl(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Cl(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return zl(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return zl(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return zl(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return zl(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return zl(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return zl(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Pl?function(e,t,n){return Pl.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var a,o,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(a=e[i+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&a)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==El.Bytes)return e.push(this.readVarint(t));var n=Al(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==El.Bytes)return e.push(this.readSVarint());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==El.Bytes)return e.push(this.readBoolean());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==El.Bytes)return e.push(this.readFloat());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==El.Bytes)return e.push(this.readDouble());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==El.Bytes)return e.push(this.readFixed32());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==El.Bytes)return e.push(this.readSFixed32());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==El.Bytes)return e.push(this.readFixed64());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==El.Bytes)return e.push(this.readSFixed64());var t=Al(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===El.Varint)for(;this.buf[this.pos++]>127;);else if(t===El.Bytes)this.pos=this.readVarint()+this.pos;else if(t===El.Fixed32)this.pos+=4;else{if(t!==El.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Zl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Zl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Zl(this.buf,-1&e,this.pos),Zl(this.buf,Math.floor(e*Ml),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Zl(this.buf,-1&e,this.pos),Zl(this.buf,Math.floor(e*Ml),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Dl(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Tl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Tl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Dl(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,El.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Rl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Fl,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Vl,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Ol,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Bl,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,jl,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Nl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Hl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Ul,t)},writeBytesField:function(e,t){this.writeTag(e,El.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,El.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,El.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,El.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,El.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,El.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,El.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,El.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,El.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,El.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Gl=n(Sl);const Wl=3;function Xl(e,t,n){1===e&&n.readMessage(Kl,t)}function Kl(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:a,left:o,top:s,advance:l}=n.readMessage(Yl,{});t.push({id:e,bitmap:new Do({width:i+2*Wl,height:a+2*Wl},r),metrics:{width:i,height:a,left:o,top:s,advance:l}})}}function Yl(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}const Jl=Wl;function Ql(e){let t=0,n=0;for(const o of e)t+=o.w*o.h,n=Math.max(n,o.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,a=0;for(const o of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(o.w>t.w||o.h>t.h)){if(o.x=t.x,o.y=t.y,a=Math.max(a,o.y+o.h),i=Math.max(i,o.x+o.w),o.w===t.w&&o.h===t.h){const t=r.pop();e<r.length&&(r[e]=t)}else o.h===t.h?(t.x+=o.w,t.w-=o.w):o.w===t.w?(t.y+=o.h,t.h-=o.h):(r.push({x:t.x+o.w,y:t.y,w:t.w-o.w,h:o.h}),t.y+=o.h,t.h-=o.h);break}}return{w:i,h:a,fill:t/(i*a)||0}}const ec=1;class tc{constructor(e,t){let{pixelRatio:n,version:r,stretchX:i,stretchY:a,content:o}=t;this.paddedRect=e,this.pixelRatio=n,this.stretchX=i,this.stretchY=a,this.content=o,this.version=r}get tl(){return[this.paddedRect.x+ec,this.paddedRect.y+ec]}get br(){return[this.paddedRect.x+this.paddedRect.w-ec,this.paddedRect.y+this.paddedRect.h-ec]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ec)/this.pixelRatio,(this.paddedRect.h-2*ec)/this.pixelRatio]}}class nc{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:a,h:o}=Ql(i),s=new Ro({width:a||1,height:o||1});for(const l in e){const t=e[l],r=n[l].paddedRect;Ro.copy(t.data,s,{x:0,y:0},{x:r.x+ec,y:r.y+ec},t.data)}for(const l in t){const e=t[l],n=r[l].paddedRect,i=n.x+ec,a=n.y+ec,o=e.data.width,c=e.data.height;Ro.copy(e.data,s,{x:0,y:0},{x:i,y:a},e.data),Ro.copy(e.data,s,{x:0,y:c-1},{x:i,y:a-1},{width:o,height:1}),Ro.copy(e.data,s,{x:0,y:0},{x:i,y:a+c},{width:o,height:1}),Ro.copy(e.data,s,{x:o-1,y:0},{x:i-1,y:a},{width:1,height:c}),Ro.copy(e.data,s,{x:0,y:0},{x:i+o,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],a={x:0,y:0,w:i.data.width+2*ec,h:i.data.height+2*ec};n.push(a),t[r]=new tc(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}var rc;Vr("ImagePosition",tc),Vr("ImageAtlas",nc),e.ah=void 0,(rc=e.ah||(e.ah={}))[rc.none=0]="none",rc[rc.horizontal=1]="horizontal",rc[rc.vertical=2]="vertical",rc[rc.horizontalOnly=3]="horizontalOnly";const ic=-17;class ac{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new ac;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new ac;return t.imageName=e,t}}class oc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new oc;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;t+=r&&Xr(r)&&!wl[e[n+1]]||i&&Xr(i)&&!wl[e[n-1]]||!wl[e[n]]?e[n]:wl[e[n]]}return t}(this.text)}trim(){let e=0;for(let n=0;n<this.text.length&&lc[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&lc[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new oc;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(ac.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void w("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ac.forImage(t)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sc(t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=oc.fromFeature(t,a);let _;d===e.ah.vertical&&y.verticalizePunctuation();const{processBidirectionalText:v,processStyledBidirectionalText:x}=Qr;if(v&&1===y.sections.length){_=[];const e=v(y.toString(),mc(y,u,o,n,i,f,m));for(const t of e){const e=new oc;e.text=t,e.sections=y.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);_.push(e)}}else if(x){_=[];const e=x(y.text,y.sectionIndex,mc(y,u,o,n,i,f,m));for(const t of e){const e=new oc;e.text=t[0],e.sectionIndex=t[1],e.sections=y.sections,_.push(e)}}else _=function(e,t){const n=[],r=e.text;let i=0;for(const a of t)n.push(e.substring(i,a)),i=a;return i<r.length&&n.push(e.substring(i,r.length)),n}(y,mc(y,u,o,n,i,f,m));const b=[],L={positionedLines:b,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(t,n,r,i,a,o,s,l,c,u,h,d){let p=0,f=ic,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let _=0;for(const w of a){w.trim();const a=w.getMaxScale(),s=(a-1)*kl,l={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=l;const x=l.positionedGlyphs;let b=0;if(!w.length()){f+=o,++_;continue}for(let o=0;o<w.length();o++){const l=w.getSection(o),m=w.getSectionIndex(o),g=w.getCharCode(o);let y=0,_=null,L=null,k=null,S=kl;const C=!(c===e.ah.horizontal||!h&&!Wr(g)||h&&(lc[g]||(v=g,$r.Arabic(v)||$r["Arabic Supplement"](v)||$r["Arabic Extended-A"](v)||$r["Arabic Presentation Forms-A"](v)||$r["Arabic Presentation Forms-B"](v))));if(l.imageName){const e=i[l.imageName];if(!e)continue;k=l.imageName,t.iconsInText=t.iconsInText||!0,L=e.paddedRect;const n=e.displaySize;l.scale=l.scale*kl/d,_={width:n[0],height:n[1],left:ec,top:-Jl,advance:C?n[1]:n[0]},y=s+(kl-n[1]*l.scale),S=_.advance;const r=C?n[0]*l.scale-kl*a:n[1]*l.scale-kl*a;r>0&&r>b&&(b=r)}else{const e=r[l.fontStack],t=e&&e[g];if(t&&t.rect)L=t.rect,_=t.metrics;else{const e=n[l.fontStack],t=e&&e[g];if(!t)continue;_=t.metrics}y=(a-l.scale)*kl}C?(t.verticalizable=!0,x.push({glyph:g,imageName:k,x:p,y:f+y,vertical:C,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:_,rect:L}),p+=S*l.scale+u):(x.push({glyph:g,imageName:k,x:p,y:f+y,vertical:C,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:_,rect:L}),p+=_.advance*l.scale+u)}0!==x.length&&(m=Math.max(p-u,m),yc(x,0,x.length-1,y,b)),p=0;const L=o*a+b;l.lineOffset=Math.max(b,s),f+=L,g=Math.max(L,g),++_}var v;const x=f-ic,{horizontalAlign:b,verticalAlign:L}=gc(s);(function(e,t,n,r,i,a,o,s,l){const c=(t-n)*i;let u=0;u=a!==o?-s*r-ic:(-r*l+.5)*o;for(const h of e)for(const e of h.positionedGlyphs)e.x+=c,e.y+=u})(t.positionedLines,y,b,L,m,g,o,x,a.length),t.top+=-L*x,t.bottom=t.top+x,t.left+=-b*m,t.right=t.left+m}(L,n,r,i,_,s,l,c,d,u,p,g),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&L}const lc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function uc(e,t,n,r,i,a){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*kl/a+i:0}{const r=n[t.fontStack],a=r&&r[e];return a?a.metrics.advance*t.scale+i:0}}function hc(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function dc(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function pc(e,t,n,r,i,a){let o=null,s=hc(t,n,i,a);for(const l of r){const e=hc(t-l.x,n,i,a)+l.badness;e<=s&&(o=l,s=e)}return{index:e,x:t,priorBreak:o,badness:s}}function fc(e){return e?fc(e.priorBreak).concat(e.index):[]}function mc(e,t,n,r,i,a,o){if("point"!==a)return[];if(!e)return[];const s=[],l=function(e,t,n,r,i,a){let o=0;for(let s=0;s<e.length();s++){const n=e.getSection(s);o+=uc(e.getCharCode(s),n,r,i,t,a)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,r,i,o),c=e.text.indexOf("\u200b")>=0;let u=0;for(let d=0;d<e.length();d++){const n=e.getSection(d),a=e.getCharCode(d);if(lc[a]||(u+=uc(a,n,r,i,t,o)),d<e.length()-1){const t=!((h=a)<11904||!($r["Bopomofo Extended"](h)||$r.Bopomofo(h)||$r["CJK Compatibility Forms"](h)||$r["CJK Compatibility Ideographs"](h)||$r["CJK Compatibility"](h)||$r["CJK Radicals Supplement"](h)||$r["CJK Strokes"](h)||$r["CJK Symbols and Punctuation"](h)||$r["CJK Unified Ideographs Extension A"](h)||$r["CJK Unified Ideographs"](h)||$r["Enclosed CJK Letters and Months"](h)||$r["Halfwidth and Fullwidth Forms"](h)||$r.Hiragana(h)||$r["Ideographic Description Characters"](h)||$r["Kangxi Radicals"](h)||$r["Katakana Phonetic Extensions"](h)||$r.Katakana(h)||$r["Vertical Forms"](h)||$r["Yi Radicals"](h)||$r["Yi Syllables"](h)));(cc[a]||t||n.imageName)&&s.push(pc(d+1,u,l,s,dc(a,e.getCharCode(d+1),t&&c),!1))}}var h;return fc(pc(e.length(),u,l,s,0,!0))}function gc(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function yc(e,t,n,r,i){if(!r&&!i)return;const a=e[n],o=(e[n].x+a.metrics.advance*a.scale)*r;for(let s=t;s<=n;s++)e[s].x-=o,e[s].y+=i}function _c(e,t,n){const{horizontalAlign:r,verticalAlign:i}=gc(n),a=t[0]-e.displaySize[0]*r,o=t[1]-e.displaySize[1]*i;return{image:e,top:o,bottom:o+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function vc(e,t,n,r,i,a){const o=e.image;let s;if(o.content){const e=o.content,t=o.pixelRatio||1;s=[e[0]/t,e[1]/t,o.displaySize[0]-e[2]/t,o.displaySize[1]-e[3]/t]}const l=t.left*a,c=t.right*a;let u,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-o.displaySize[0])/2,h=p+o.displaySize[0]);const f=t.top*a,m=t.bottom*a;return"height"===n||"both"===n?(u=i[1]+f-r[0],d=i[1]+m+r[2]):(u=i[1]+(f+m-o.displaySize[1])/2,d=u+o.displaySize[1]),{image:o,top:u,right:h,bottom:d,left:p,collisionPadding:s}}const xc=255,bc=128,Lc=xc*bc;function wc(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ei(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let a=i;for(;a<t.length&&t[a]<e+1;)a++;a=Math.min(t.length-1,a);const o=t[i],s=t[a];return"composite"===n.kind?{kind:"composite",minZoom:o,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:o,maxZoom:s,minSize:n.evaluate(new ei(o)),maxSize:n.evaluate(new ei(s)),interpolationType:r}}}function kc(e,t,n){let r="never";const i=e.get(t);return i?r=i:e.get(n)&&(r="always"),r}const Sc=zs.VectorTileFeature.types,Cc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tc(e,t,n,r,i,a,o,s,l,c,u,h,d){const p=s?Math.min(Lc,Math.round(s[0])):0,f=s?Math.min(Lc,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,o,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function Ec(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Ic(e){for(const t of e.sections)if(Jr(t.text))return!0;return!1}class Mc{constructor(e){this.layoutVertexArray=new ua,this.indexArray=new ma,this.programConfigurations=e,this.segments=new va,this.dynamicLayoutVertexArray=new ha,this.opacityVertexArray=new da,this.hasVisibleVertices=!1,this.placedSymbolArray=new Wi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_l.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Cc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Vr("SymbolBuffers",Mc);class Pc{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new va,this.collisionVertexArray=new fa}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,vl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Vr("CollisionBuffers",Pc);class Ac{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bo([]),this.placementViewportMatrix=bo([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wc(this.zoom,n["text-size"]),this.iconSizeData=wc(this.zoom,n["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap="never"!==kc(r,"text-overlap","text-allow-overlap")||"never"!==kc(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((t=>e.ah[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Mc(new Za(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Mc(new Za(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Yi,this.lineVertexArray=new Ji,this.symbolInstances=new Ki,this.textAnchorOffsets=new ea}calculateGlyphDependencies(e,t,n,r,i){for(let a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,(n||r)&&i){const n=wl[e.charAt(a)];n&&(t[n.charCodeAt(0)]=!0)}}populate(t,n,r){const i=this.layers[0],a=i.layout,o=a.get("text-font"),s=a.get("text-field"),l=a.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Ye&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=a.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new ei(this.zoom);for(const{feature:g,id:y,index:_,sourceLayerIndex:v}of t){const t=i._featureFilter.needGeometry,n=Ja(g,t);if(!i._featureFilter.filter(m,n,r))continue;let s,l;if(t||(n.geometry=Ya(g)),c){const e=i.getValueAndResolveTokens("text-field",n,r,f),t=Ye.factory(e),a=this.hasRTLText=this.hasRTLText||Ic(t);(!a||"unavailable"===Qr.getRTLTextPluginStatus()||a&&Qr.isParsed())&&(s=Ll(t,i,n))}if(u){const e=i.getValueAndResolveTokens("icon-image",n,r,f);l=e instanceof tt?e:tt.fromString(e)}if(!s&&!l)continue;const x=this.sortFeaturesByKey?h.evaluate(n,{},r):void 0;if(this.features.push({id:y,text:s,icon:l,index:_,sourceLayerIndex:v,geometry:n.geometry,properties:g.properties,type:Sc[g.type],sortKey:x}),l&&(d[l.name]=!0),s){const t=o.evaluate(n,{},r).join(","),i="viewport"!==a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.ah.vertical)>=0;for(const e of s.sections)if(e.image)d[e.image.name]=!0;else{const n=Zr(s.toString()),r=e.fontStack||t,a=p[r]=p[r]||{};this.calculateGlyphDependencies(e.text,a,i,this.allowVerticalPlacement,n)}}}"line"===a.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){const a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(e,n,i){const a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){a(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=s(p,f,h),i=o(p,f,r[e].geometry);delete t[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?o(p,f,h):f in t?s(p,f,h):(a(c),t[p]=i-1,n[f]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]);const i={};for(let a=e.segment+1;a<t.length;a++)i[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:n},a<t.length-1&&(n+=t[a+1].dist(t[a]));for(let a=e.segment||0;a>=0;a--)i[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a>0&&(r+=t[a-1].dist(t[a]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,n,r,i,a,o,s,l,c,u,h,d){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*n.length,f,p,this.canOverlap?o.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,_=this.allowVerticalPlacement&&s===e.ah.vertical?Math.PI/2:0,v=o.text&&o.text.sections;for(let e=0;e<n.length;e++){const{tl:i,tr:a,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:x,glyphOffset:b,isSDF:L,sectionIndex:w}=n[e],k=m.vertexLength,S=b[1];Tc(f,l.x,l.y,i.x,S+i.y,u.x,u.y,r,L,h.x,h.y,y,x),Tc(f,l.x,l.y,a.x,S+a.y,u.x+u.w,u.y,r,L,g.x,h.y,y,x),Tc(f,l.x,l.y,s.x,S+s.y,u.x,u.y+u.h,r,L,h.x,g.y,y,x),Tc(f,l.x,l.y,c.x,S+c.y,u.x+u.w,u.y+u.h,r,L,g.x,g.y,y,x),Ec(t.dynamicLayoutVertexArray,l,_),p.emplaceBack(k,k+1,k+2),p.emplaceBack(k+1,k+2,k+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),e!==n.length-1&&w===n[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},d,v&&v[w])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,h)}_addCollisionDebugVertex(e,t,n,r,i,a){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(a.x),Math.round(a.y))}addCollisionDebugVertices(e,t,n,r,i,o,s){const l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=l.vertexLength,u=i.layoutVertexArray,h=i.collisionVertexArray,d=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,h,o,d,p,new a(e,t)),this._addCollisionDebugVertex(u,h,o,d,p,new a(n,t)),this._addCollisionDebugVertex(u,h,o,d,p,new a(n,r)),this._addCollisionDebugVertex(u,h,o,d,p,new a(e,r)),l.vertexLength+=4;const f=i.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,n,r){for(let i=e;i<t;i++){const e=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,r?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Pc(pa,xl.members,ga),this.iconCollisionBox=new Pc(pa,xl.members,ga);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,a,o,s,l){const c={};for(let u=t;u<n;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=r;u<i;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=a;u<o;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=s;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],a=[];for(let o=0;o<this.symbolInstances.length;++o){a.push(o);const e=this.symbolInstances.get(o);r.push(0|Math.round(t*e.anchorX+n*e.anchorY)),i.push(e.featureIndex)}return a.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),a}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let zc,Dc;Vr("SymbolBucket",Ac,{omit:["layers","collisionBoxArray","features","compareText"]}),Ac.MAX_GLYPHS=65535,Ac.addDynamicAttributes=Ec;var Rc={get paint(){return Dc=Dc||new fi({"icon-opacity":new ui(G.paint_symbol["icon-opacity"]),"icon-color":new ui(G.paint_symbol["icon-color"]),"icon-halo-color":new ui(G.paint_symbol["icon-halo-color"]),"icon-halo-width":new ui(G.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ui(G.paint_symbol["icon-halo-blur"]),"icon-translate":new ci(G.paint_symbol["icon-translate"]),"icon-translate-anchor":new ci(G.paint_symbol["icon-translate-anchor"]),"text-opacity":new ui(G.paint_symbol["text-opacity"]),"text-color":new ui(G.paint_symbol["text-color"],{runtimeType:pe,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new ui(G.paint_symbol["text-halo-color"]),"text-halo-width":new ui(G.paint_symbol["text-halo-width"]),"text-halo-blur":new ui(G.paint_symbol["text-halo-blur"]),"text-translate":new ci(G.paint_symbol["text-translate"]),"text-translate-anchor":new ci(G.paint_symbol["text-translate-anchor"])})},get layout(){return zc=zc||new fi({"symbol-placement":new ci(G.layout_symbol["symbol-placement"]),"symbol-spacing":new ci(G.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ci(G.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ui(G.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ci(G.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ci(G.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ci(G.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ci(G.layout_symbol["icon-ignore-placement"]),"icon-optional":new ci(G.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ci(G.layout_symbol["icon-rotation-alignment"]),"icon-size":new ui(G.layout_symbol["icon-size"]),"icon-text-fit":new ci(G.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ci(G.layout_symbol["icon-text-fit-padding"]),"icon-image":new ui(G.layout_symbol["icon-image"]),"icon-rotate":new ui(G.layout_symbol["icon-rotate"]),"icon-padding":new ui(G.layout_symbol["icon-padding"]),"icon-keep-upright":new ci(G.layout_symbol["icon-keep-upright"]),"icon-offset":new ui(G.layout_symbol["icon-offset"]),"icon-anchor":new ui(G.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ci(G.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ci(G.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ci(G.layout_symbol["text-rotation-alignment"]),"text-field":new ui(G.layout_symbol["text-field"]),"text-font":new ui(G.layout_symbol["text-font"]),"text-size":new ui(G.layout_symbol["text-size"]),"text-max-width":new ui(G.layout_symbol["text-max-width"]),"text-line-height":new ci(G.layout_symbol["text-line-height"]),"text-letter-spacing":new ui(G.layout_symbol["text-letter-spacing"]),"text-justify":new ui(G.layout_symbol["text-justify"]),"text-radial-offset":new ui(G.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ci(G.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ui(G.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ui(G.layout_symbol["text-anchor"]),"text-max-angle":new ci(G.layout_symbol["text-max-angle"]),"text-writing-mode":new ci(G.layout_symbol["text-writing-mode"]),"text-rotate":new ui(G.layout_symbol["text-rotate"]),"text-padding":new ci(G.layout_symbol["text-padding"]),"text-keep-upright":new ci(G.layout_symbol["text-keep-upright"]),"text-transform":new ui(G.layout_symbol["text-transform"]),"text-offset":new ui(G.layout_symbol["text-offset"]),"text-allow-overlap":new ci(G.layout_symbol["text-allow-overlap"]),"text-overlap":new ci(G.layout_symbol["text-overlap"]),"text-ignore-placement":new ci(G.layout_symbol["text-ignore-placement"]),"text-optional":new ci(G.layout_symbol["text-optional"])})}};class Fc{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ce,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Vr("FormatSectionOverride",Fc,{omit:["defaultValue"]});class Oc extends gi{constructor(e){super(e,Rc)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||Bn(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>e&&n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new Ac(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Rc.paint.overridableProperties){if(!Oc.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Fc(t),r=new On(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new jn("source",r):new Nn("composite",r,t.value.zoomStops),this.paint._values[e]=new si(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Oc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=Rc.paint.properties[t];let i=!1;const a=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Ye)a(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof ot&&it(t.value)===ye?a(t.value.sections):t instanceof mn?a(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}}let Bc;var Vc={get paint(){return Bc=Bc||new fi({"background-color":new ci(G.paint_background["background-color"]),"background-pattern":new di(G.paint_background["background-pattern"]),"background-opacity":new ci(G.paint_background["background-opacity"])})}};class jc extends gi{constructor(e){super(e,Vc)}}let Nc;var Hc={get paint(){return Nc=Nc||new fi({"raster-opacity":new ci(G.paint_raster["raster-opacity"]),"raster-hue-rotate":new ci(G.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ci(G.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ci(G.paint_raster["raster-brightness-max"]),"raster-saturation":new ci(G.paint_raster["raster-saturation"]),"raster-contrast":new ci(G.paint_raster["raster-contrast"]),"raster-resampling":new ci(G.paint_raster["raster-resampling"]),"raster-fade-duration":new ci(G.paint_raster["raster-fade-duration"])})}};class Uc extends gi{constructor(e){super(e,Hc)}}class $c extends gi{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Zc{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const qc=6371008.8;class Gc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gc(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return qc*Math.acos(Math.min(i,1))}static convert(e){if(e instanceof Gc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Gc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Gc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Wc=2*Math.PI*qc;function Xc(e){return Wc*Math.cos(e*Math.PI/180)}function Kc(e){return(180+e)/360}function Yc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Jc(e,t){return e/Xc(t)}function Qc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class eu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Gc.convert(e);return new eu(Kc(n.lng),Yc(n.lat),Jc(t,n.lat))}toLngLat(){return new Gc(360*this.x-180,Qc(this.y))}toAltitude(){return this.z*Xc(Qc(this.y))}meterInMercatorCoordinateUnits(){return 1/Wc*(e=Qc(this.y),1/Math.cos(e*Math.PI/180));var e}}function tu(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class nu{constructor(e,t,n){if(e<0||e>25||n<0||n>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))throw new Error(`x=${t}, y=${n}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=n,this.key=au(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,n){const r=(a=this.y,o=this.z,s=tu(256*(i=this.x),256*(a=Math.pow(2,o)-a-1),o),l=tu(256*(i+1),256*(a+1),o),s[0]+","+s[1]+","+l[0]+","+l[1]);var i,a,o,s,l;const c=function(e,t,n){let r,i="";for(let a=e;a>0;a--)r=1<<a-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new a((e.x*t-this.x)*Wa,(e.y*t-this.y)*Wa)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ru{constructor(e,t){this.wrap=e,this.canonical=t,this.key=au(e,t.z,t.z,t.x,t.y)}}class iu{constructor(e,t,n,r,i){if(e<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${n}`);this.overscaledZ=e,this.wrap=t,this.canonical=new nu(n,+r,+i),this.key=au(t,e,n,r,i)}clone(){return new iu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new iu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new iu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-e;return e>this.canonical.z?au(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):au(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new iu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new iu(t,this.wrap,t,n,r),new iu(t,this.wrap,t,n+1,r),new iu(t,this.wrap,t,n,r+1),new iu(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new iu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new iu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ru(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new eu(e.x-this.wrap,e.y))}}function au(e,t,n,r,i){(e*=2)<0&&(e=-1*e-1);const a=1<<n;return(a*a*e+a*i+r).toString(36)+n.toString(36)+t.toString(36)}Vr("CanonicalTileID",nu),Vr("OverscaledTileID",iu,{omit:["posMatrix"]});class ou{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n))return void w(`"${n}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=t.height;const s=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=r,this.greenFactor=i,this.blueFactor=a,this.baseShift=o;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<s;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(s,l)]=this.data[this._idx(s-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,s)]=this.data[this._idx(l,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<s;l++)for(let e=0;e<s;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const n=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return this.unpack(n[r],n[r+1],n[r+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,n){return e*this.redFactor+t*this.greenFactor+n*this.blueFactor-this.baseShift}getPixels(){return new Ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}const s=-t*this.dim,l=-n*this.dim;for(let c=a;c<o;c++)for(let t=r;t<i;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+s,c+l)]}}Vr("DEMData",ou);class su{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class lu{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class cu{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Or(Wa,16,0),this.grid3D=new Or(Wa,16,0),this.featureIndexArray=new na,this.promoteId=t}insert(e,t,n,r,i,a){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);const s=a?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<Wa&&n[1]<Wa&&n[2]>=0&&n[3]>=0&&s.insert(o,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new zs.VectorTile(new Gl(this.rawTileData)).layers,this.sourceLayerCoder=new su(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=Wa/e.tileSize/e.scale,s=Gn(i.filter),l=e.queryGeometry,c=e.queryPadding*o,u=hu(l),h=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),d=hu(e.cameraQueryGeometry),p=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,((t,n,r,i)=>function(e,t,n,r,i){for(const a of e)if(t<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new a(t,n),new a(t,i),new a(r,i),new a(r,n)];if(e.length>2)for(const a of o)if(uo(e,a))return!0;for(let a=0;a<e.length-1;a++)if(ho(e[a],e[a+1],o))return!0;return!1}(e.cameraQueryGeometry,t-c,n-c,r+c,i+c)));for(const a of p)h.push(a);h.sort(du);const f={};let m;for(let a=0;a<h.length;a++){const c=h[a];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,i.layers,i.availableImages,t,n,r,((t,n,r)=>(d||(d=Ya(t)),n.queryIntersectsFeature(l,t,r,d,this.z,e.transform,o,e.pixelPosMatrix))))}return f}loadMatchingFeature(e,t,n,r,i,a,o,s,l,c,u){const h=this.bucketLayerIDs[t];if(a&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(a,h))return;const d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(r);if(i.needGeometry){const e=Ja(p,!0);if(!i.filter(new ei(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!i.filter(new ei(this.tileID.overscaledZ),p))return;const f=this.getId(p,d);for(let m=0;m<h.length;m++){const t=h[m];if(a&&a.indexOf(t)<0)continue;const n=s[t];if(!n)continue;let i={};f&&c&&(i=c.getState(n.sourceLayer||"_geojsonTileLayer",f));const d=y({},l[t]);d.paint=uu(d.paint,n.paint,p,i,o),d.layout=uu(d.layout,n.layout,p,i,o);const g=!u||u(p,n,i);if(!g)continue;const _=new lu(p,this.z,this.x,this.y,f);_.layer=d;let v=e[t];void 0===v&&(v=e[t]=[]),v.push({featureIndex:r,feature:_,intersectionZ:g})}}lookupSymbolFeatures(e,t,n,r,i,a,o,s){const l={};this.loadVTLayers();const c=Gn(i);for(const u of e)this.loadMatchingFeature(l,n,r,u,c,a,o,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function uu(e,t,n,r,i){return v(e,((e,a)=>{const o=t instanceof li?t.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function hu(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const a of e)t=Math.min(t,a.x),n=Math.min(n,a.y),r=Math.max(r,a.x),i=Math.max(i,a.y);return{minX:t,minY:n,maxX:r,maxY:i}}function du(e,t){return t-e}function pu(e,t,n,r,i){const o=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new a(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new a(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new a(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new a(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=r&&u.x>=r||(s.x>=r?s=new a(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=r&&(u=new a(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=i&&u.y>=i||(s.y>=i?s=new a(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y>=i&&(u=new a(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),c&&s.equals(c[c.length-1])||(c=[s],o.push(c)),c.push(u)))))}}return o}Vr("FeatureIndex",cu,{omit:["rawTileData","sourceLayerCoder"]});class fu extends a{constructor(e,t,n,r){super(e,t),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new fu(this.x,this.y,this.angle,this.segment)}}function mu(e,t,n,r,i){if(void 0===t.segment||0===n)return!0;let a=t,o=t.segment+1,s=0;for(;s>-n/2;){if(o--,o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;const l=[];let c=0;for(;s<n/2;){const t=e[o],n=e[o+1];if(!n)return!1;let a=e[o-1].angleTo(t)-t.angleTo(n);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:a}),c+=a;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;o++,s+=t.dist(n)}return!0}function gu(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function yu(e,t,n){return e?.6*t*n:0}function _u(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function vu(e,t,n,r,i,a){const o=yu(n,i,a),s=_u(n,r)*a;let l=0;const c=gu(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],r=e[u+1],i=n.dist(r);if(l+i>c){const a=(c-l)/i,h=Gt.number(n.x,r.x,a),d=Gt.number(n.y,r.y,a),p=new fu(h,d,r.angleTo(n),u);return p._round(),!o||mu(e,p,s,o,t)?p:void 0}l+=i}}function xu(e,t,n,r,i,a,o,s,l){const c=yu(r,a,o),u=_u(r,i),h=u*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),bu(e,d?t/2*s%t:(u/2+2*a)*o*s%t,t,c,n,h,d,!1,l)}function bu(e,t,n,r,i,a,o,s,l){const c=a/2,u=gu(e);let h=0,d=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],o=e[f+1],s=t.dist(o),m=o.angleTo(t);for(;d+n<h+s;){d+=n;const g=(d-h)/s,y=Gt.number(t.x,o.x,g),_=Gt.number(t.y,o.y,g);if(y>=0&&y<l&&_>=0&&_<l&&d-c>=0&&d+c<=u){const t=new fu(y,_,m,f);t._round(),r&&!mu(e,t,a,r,i)||p.push(t)}}h+=s}return s||p.length||o||(p=bu(e,h/2,n,r,i,a,o,!0,l)),p}Vr("Anchor",fu);const Lu=ec;function wu(e,t,n,r){const i=[],o=e.image,s=o.pixelRatio,l=o.paddedRect.w-2*Lu,c=o.paddedRect.h-2*Lu,u=e.right-e.left,h=e.bottom-e.top,d=o.stretchX||[[0,l]],p=o.stretchY||[[0,c]],f=(e,t)=>e+t[1]-t[0],m=d.reduce(f,0),g=p.reduce(f,0),y=l-m,_=c-g;let v=0,x=m,b=0,L=g,w=0,k=y,S=0,C=_;if(o.content&&r){const e=o.content;v=ku(d,0,e[0]),b=ku(p,0,e[1]),x=ku(d,e[0],e[2]),L=ku(p,e[1],e[3]),w=e[0]-v,S=e[1]-b,k=e[2]-e[0]-x,C=e[3]-e[1]-L}const T=(r,i,l,c)=>{const d=Cu(r.stretch-v,x,u,e.left),p=Tu(r.fixed-w,k,r.stretch,m),f=Cu(i.stretch-b,L,h,e.top),y=Tu(i.fixed-S,C,i.stretch,g),_=Cu(l.stretch-v,x,u,e.left),T=Tu(l.fixed-w,k,l.stretch,m),E=Cu(c.stretch-b,L,h,e.top),I=Tu(c.fixed-S,C,c.stretch,g),M=new a(d,f),P=new a(_,f),A=new a(_,E),z=new a(d,E),D=new a(p/s,y/s),R=new a(T/s,I/s),F=t*Math.PI/180;if(F){const e=Math.sin(F),t=Math.cos(F),n=[t,-e,e,t];M._matMult(n),P._matMult(n),z._matMult(n),A._matMult(n)}const O=r.stretch+r.fixed,B=i.stretch+i.fixed;return{tl:M,tr:P,bl:z,br:A,tex:{x:o.paddedRect.x+Lu+O,y:o.paddedRect.y+Lu+B,w:l.stretch+l.fixed-O,h:c.stretch+c.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:R,minFontScaleX:k/s/u,minFontScaleY:C/s/h,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const e=Su(d,y,m),t=Su(p,_,g);for(let n=0;n<e.length-1;n++){const r=e[n],a=e[n+1];for(let e=0;e<t.length-1;e++)i.push(T(r,t[e],a,t[e+1]))}}else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return i}function ku(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function Su(e,t,n){const r=[{fixed:-Lu,stretch:0}];for(const[i,a]of e){const e=r[r.length-1];r.push({fixed:i-e.stretch,stretch:e.stretch}),r.push({fixed:i-e.stretch,stretch:e.stretch+(a-i)})}return r.push({fixed:t+Lu,stretch:n}),r}function Cu(e,t,n,r){return e/t*n+r}function Tu(e,t,n,r){return e-t*n/r}class Eu{constructor(e,t,n,r,i,o,s,l,c,u){if(this.boxStartIndex=e.length,c){let e=o.top,t=o.bottom;const n=o.collisionPadding;n&&(e-=n[1],t+=n[3]);let r=t-e;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let c=o.top*s-l[0],h=o.bottom*s+l[2],d=o.left*s-l[3],p=o.right*s+l[1];const f=o.collisionPadding;if(f&&(d-=f[0]*s,c-=f[1]*s,p+=f[2]*s,h+=f[3]*s),u){const e=new a(d,c),t=new a(p,c),n=new a(d,h),r=new a(p,h),i=u*Math.PI/180;e._rotate(i),t._rotate(i),n._rotate(i),r._rotate(i),d=Math.min(e.x,t.x,n.x,r.x),p=Math.max(e.x,t.x,n.x,r.x),c=Math.min(e.y,t.y,n.y,r.y),h=Math.max(e.y,t.y,n.y,r.y)}e.emplaceBack(t.x,t.y,d,c,p,h,n,r,i)}this.boxEndIndex=e.length}}class Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mu;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),a=t[r];const o=r+1;if(o<this.length&&n(t[o],a)<0&&(r=o,a=t[o]),n(a,i)>=0)break;t[e]=a,e=r}t[e]=i}}function Mu(e,t){return e<t?-1:e>t?1:0}function Pu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,s=-1/0;const l=e[0];for(let a=0;a<l.length;a++){const e=l[a];(!a||e.x<r)&&(r=e.x),(!a||e.y<i)&&(i=e.y),(!a||e.x>o)&&(o=e.x),(!a||e.y>s)&&(s=e.y)}const c=Math.min(o-r,s-i);let u=c/2;const h=new Iu([],Au);if(0===c)return new a(r,i);for(let a=r;a<o;a+=c)for(let t=i;t<s;t+=c)h.push(new zu(a+u,t+u,u,e));let d=function(e){let t=0,n=0,r=0;const i=e[0];for(let a=0,o=i.length,s=o-1;a<o;s=a++){const e=i[a],o=i[s],l=e.x*o.y-o.x*e.y;n+=(e.x+o.x)*l,r+=(e.y+o.y)*l,t+=3*l}return new zu(n/t,r/t,0,e)}(e),p=h.length;for(;h.length;){const r=h.pop();(r.d>d.d||!d.d)&&(d=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-d.d<=t||(u=r.h/2,h.push(new zu(r.p.x-u,r.p.y-u,u,e)),h.push(new zu(r.p.x+u,r.p.y-u,u,e)),h.push(new zu(r.p.x-u,r.p.y+u,u,e)),h.push(new zu(r.p.x+u,r.p.y+u,u,e)),p+=4)}return n&&(console.log(`num probes: ${p}`),console.log(`best distance: ${d.d}`)),d.p}function Au(e,t){return t.max-e.max}function zu(e,t,n,r){this.p=new a(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const a=t[i];for(let t=0,i=a.length,o=i-1;t<i;o=t++){const i=a[t],s=a[o];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,lo(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var Du;e.ap=void 0,(Du=e.ap||(e.ap={}))[Du.center=1]="center",Du[Du.left=2]="left",Du[Du.right=3]="right",Du[Du.top=4]="top",Du[Du.bottom=5]="bottom",Du[Du["top-left"]=6]="top-left",Du[Du["top-right"]=7]="top-right",Du[Du["bottom-left"]=8]="bottom-left",Du[Du["bottom-right"]=9]="bottom-right";const Ru=7,Fu=Number.POSITIVE_INFINITY;function Ou(e,t){return t[1]!==Fu?function(e,t,n){let r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-Ru;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+Ru}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){let n=0,r=0;t<0&&(t=0);const i=t/Math.SQRT2;switch(e){case"top-right":case"top-left":r=i-Ru;break;case"bottom-right":case"bottom-left":r=-i+Ru;break;case"bottom":r=-t+Ru;break;case"top":r=t-Ru}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function Bu(e,t,n){var r;const i=e.layout,a=null===(r=i.get("text-variable-anchor-offset"))||void 0===r?void 0:r.evaluate(t,{},n);if(a){const e=a.values,t=[];for(let n=0;n<e.length;n+=2){const r=t[n]=e[n],i=e[n+1].map((e=>e*kl));r.startsWith("top")?i[1]-=Ru:r.startsWith("bottom")&&(i[1]+=Ru),t[n+1]=i}return new et(t)}const o=i.get("text-variable-anchor");if(o){let r;r=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[i.get("text-radial-offset").evaluate(t,{},n)*kl,Fu]:i.get("text-offset").evaluate(t,{},n).map((e=>e*kl));const a=[];for(const e of o)a.push(e,Ou(e,r));return new et(a)}return null}function Vu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ju(t,n,r,i,a,o,s,l,c,u,h){let d=o.textMaxSize.evaluate(n,{});void 0===d&&(d=s);const p=t.layers[0].layout,f=p.get("icon-offset").evaluate(n,{},h),m=Hu(r.horizontal),g=s/24,y=t.tilePixelRatio*g,_=t.tilePixelRatio*d/24,v=t.tilePixelRatio*l,x=t.tilePixelRatio*p.get("symbol-spacing"),b=p.get("text-padding")*t.tilePixelRatio,L=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.get("icon-padding").evaluate(t,{},n),a=i&&i.values;return[a[0]*r,a[1]*r,a[2]*r,a[3]*r]}(p,n,h,t.tilePixelRatio),k=p.get("text-max-angle")/180*Math.PI,S="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),C="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),T=p.get("symbol-placement"),E=x/2,I=p.get("icon-text-fit");let M;i&&"none"!==I&&(t.allowVerticalPlacement&&r.vertical&&(M=vc(i,r.vertical,I,p.get("icon-text-fit-padding"),f,g)),m&&(i=vc(i,m,I,p.get("icon-text-fit-padding"),f,g)));const P=(l,d)=>{d.x<0||d.x>=Wa||d.y<0||d.y>=Wa||function(t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,L,k,S,C){const T=t.addToLineVertexArray(n,r);let E,I,M,P,A=0,z=0,D=0,R=0,F=-1,O=-1;const B={};let V=Ea("");if(t.allowVerticalPlacement&&i.vertical){const e=l.layout.get("text-rotate").evaluate(b,{},S)+90;M=new Eu(c,n,u,h,d,i.vertical,p,f,m,e),s&&(P=new Eu(c,n,u,h,d,s,y,_,m,e))}if(a){const r=l.layout.get("icon-rotate").evaluate(b,{}),i="none"!==l.layout.get("icon-text-fit"),o=wu(a,r,k,i),p=s?wu(s,r,k,i):void 0;I=new Eu(c,n,u,h,d,a,y,_,!1,r),A=4*o.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[bc*l.layout.get("icon-size").evaluate(b,{})],m[0]>Lc&&w(`${t.layerIds[0]}: Value for "icon-size" is >= ${xc}. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[bc*L.compositeIconSizes[0].evaluate(b,{},S),bc*L.compositeIconSizes[1].evaluate(b,{},S)],(m[0]>Lc||m[1]>Lc)&&w(`${t.layerIds[0]}: Value for "icon-size" is >= ${xc}. Reduce your "icon-size".`)),t.addSymbols(t.icon,o,m,x,v,b,e.ah.none,n,T.lineStartIndex,T.lineLength,-1,S),F=t.icon.placedSymbolArray.length-1,p&&(z=4*p.length,t.addSymbols(t.icon,p,m,x,v,b,e.ah.vertical,n,T.lineStartIndex,T.lineLength,-1,S),O=t.icon.placedSymbolArray.length-1)}const j=Object.keys(i.horizontal);for(const w of j){const r=i.horizontal[w];if(!E){V=Ea(r.text);const e=l.layout.get("text-rotate").evaluate(b,{},S);E=new Eu(c,n,u,h,d,r,p,f,m,e)}const a=1===r.positionedLines.length;if(D+=Nu(t,n,r,o,l,m,b,g,T,i.vertical?e.ah.horizontal:e.ah.horizontalOnly,a?j:[w],B,F,L,S),a)break}i.vertical&&(R+=Nu(t,n,i.vertical,o,l,m,b,g,T,e.ah.vertical,["vertical"],B,O,L,S));const N=E?E.boxStartIndex:t.collisionBoxArray.length,H=E?E.boxEndIndex:t.collisionBoxArray.length,U=M?M.boxStartIndex:t.collisionBoxArray.length,$=M?M.boxEndIndex:t.collisionBoxArray.length,Z=I?I.boxStartIndex:t.collisionBoxArray.length,q=I?I.boxEndIndex:t.collisionBoxArray.length,G=P?P.boxStartIndex:t.collisionBoxArray.length,W=P?P.boxEndIndex:t.collisionBoxArray.length;let X=-1;const K=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;X=K(E,X),X=K(M,X),X=K(I,X),X=K(P,X);const Y=X>-1?1:0;Y&&(X*=C/kl),t.glyphOffsetArray.length>=Ac.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey);const J=Bu(l,b,S),[Q,ee]=function(t,n){const r=t.length,i=null==n?void 0:n.values;if((null==i?void 0:i.length)>0)for(let a=0;a<i.length;a+=2){const n=i[a+1];t.emplaceBack(e.ap[i[a]],n[0],n[1])}return[r,t.length]}(t.textAnchorOffsets,J);t.symbolInstances.emplaceBack(n.x,n.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical||-1,F,O,V,N,H,U,$,Z,q,G,W,u,D,R,A,z,Y,0,p,X,Q,ee)}(t,d,l,r,i,a,M,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,y,[b,b,b,b],S,c,v,L,C,f,n,o,u,h,s)};if("line"===T)for(const e of pu(n.geometry,0,0,Wa,Wa)){const n=xu(e,x,k,r.vertical||m,i,24,_,t.overscaling,Wa);for(const r of n)m&&Uu(t,m.text,E,r)||P(e,r)}else if("line-center"===T){for(const e of n.geometry)if(e.length>1){const t=vu(e,k,r.vertical||m,i,24,_);t&&P(e,t)}}else if("Polygon"===n.type)for(const e of bs(n.geometry,0)){const t=Pu(e,16);P(e[0],new fu(t.x,t.y,0))}else if("LineString"===n.type)for(const e of n.geometry)P(e,new fu(e[0].x,e[0].y,0));else if("Point"===n.type)for(const e of n.geometry)for(const t of e)P([t],new fu(t.x,t.y,0))}function Nu(e,t,n,r,i,o,s,l,c,u,h,d,p,f,m){const g=function(e,t,n,r,i,o,s,l){const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[];for(const h of t.positionedLines)for(const e of h.positionedGlyphs){if(!e.rect)continue;const r=e.rect||{};let o=Jl+1,d=!0,p=1,f=0;const m=(i||l)&&e.vertical,g=e.metrics.advance*e.scale/2;if(l&&t.verticalizable&&(f=h.lineOffset/2-(e.imageName?-(kl-e.metrics.width*e.scale)/2:(e.scale-1)*kl)),e.imageName){const t=s[e.imageName];d=t.sdf,p=t.pixelRatio,o=ec/p}const y=i?[e.x+g,e.y]:[0,0];let _=i?[0,0]:[e.x+g+n[0],e.y+n[1]-f],v=[0,0];m&&(v=_,_=[0,0]);const x=e.metrics.isDoubleResolution?2:1,b=(e.metrics.left-o)*e.scale-g+_[0],L=(-e.metrics.top-o)*e.scale+_[1],w=b+r.w/x*e.scale/p,k=L+r.h/x*e.scale/p,S=new a(b,L),C=new a(w,L),T=new a(b,k),E=new a(w,k);if(m){const t=new a(-g,g-ic),n=-Math.PI/2,r=kl/2-g,i=new a(5-ic-r,-(e.imageName?r:0)),o=new a(...v);S._rotateAround(n,t)._add(i)._add(o),C._rotateAround(n,t)._add(i)._add(o),T._rotateAround(n,t)._add(i)._add(o),E._rotateAround(n,t)._add(i)._add(o)}if(c){const e=Math.sin(c),t=Math.cos(c),n=[t,-e,e,t];S._matMult(n),C._matMult(n),T._matMult(n),E._matMult(n)}const I=new a(0,0),M=new a(0,0);u.push({tl:S,tr:C,bl:T,br:E,tex:r,writingMode:t.writingMode,glyphOffset:y,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:I,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}return u}(0,n,l,i,o,s,r,e.allowVerticalPlacement),y=e.textSizeData;let _=null;"source"===y.kind?(_=[bc*i.layout.get("text-size").evaluate(s,{})],_[0]>Lc&&w(`${e.layerIds[0]}: Value for "text-size" is >= ${xc}. Reduce your "text-size".`)):"composite"===y.kind&&(_=[bc*f.compositeTextSizes[0].evaluate(s,{},m),bc*f.compositeTextSizes[1].evaluate(s,{},m)],(_[0]>Lc||_[1]>Lc)&&w(`${e.layerIds[0]}: Value for "text-size" is >= ${xc}. Reduce your "text-size".`)),e.addSymbols(e.text,g,_,l,o,s,u,t,c.lineStartIndex,c.lineLength,p,m);for(const a of h)d[a]=e.text.placedSymbolArray.length-1;return 4*g.length}function Hu(e){for(const t in e)return e[t];return null}function Uu(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}const $u=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Zu{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=$u[15&n];if(!i)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new Zu(o,a,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=$u.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-o%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+o+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return qu(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:o}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=o){for(let o=h;o<=u;o++){const s=a[2*o],c=a[2*o+1];s>=e&&s<=n&&c>=t&&c<=r&&l.push(i[o])}continue}const d=h+u>>1,p=a[2*d],f=a[2*d+1];p>=e&&p<=n&&f>=t&&f<=r&&l.push(i[d]),(0===c?e<=p:t<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?n>=p:r>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:a}=this,o=[0,r.length-1,0],s=[],l=n*n;for(;o.length;){const c=o.pop()||0,u=o.pop()||0,h=o.pop()||0;if(u-h<=a){for(let n=h;n<=u;n++)Ku(i[2*n],i[2*n+1],e,t)<=l&&s.push(r[n]);continue}const d=h+u>>1,p=i[2*d],f=i[2*d+1];Ku(p,f,e,t)<=l&&s.push(r[d]),(0===c?e-n<=p:t-n<=f)&&(o.push(h),o.push(d-1),o.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(o.push(d+1),o.push(u),o.push(1-c))}return s}}function qu(e,t,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;Gu(e,t,o,r,i,a),qu(e,t,n,r,o-1,1-a),qu(e,t,n,o+1,i,1-a)}function Gu(e,t,n,r,i,a){for(;i>r;){if(i-r>600){const o=i-r+1,s=n-r+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);Gu(e,t,n,Math.max(r,Math.floor(n-s*c/o+u)),Math.min(i,Math.floor(n+(o-s)*c/o+u)),a)}const o=t[2*n+a];let s=r,l=i;for(Wu(e,t,r,n),t[2*i+a]>o&&Wu(e,t,r,i);s<l;){for(Wu(e,t,s,l),s++,l--;t[2*s+a]<o;)s++;for(;t[2*l+a]>o;)l--}t[2*r+a]===o?Wu(e,t,r,l):(l++,Wu(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function Wu(e,t,n,r){Xu(e,n,r),Xu(t,2*n,2*r),Xu(t,2*n+1,2*r+1)}function Xu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ku(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}var Yu;e.bc=void 0,(Yu=e.bc||(e.bc={})).create="create",Yu.load="load",Yu.fullLoad="fullLoad";let Ju=null,Qu=[];const eh=1e3/60,th="loadTime",nh="fullLoadTime",rh={mark(e){performance.mark(e)},frame(e){const t=e;null!=Ju&&Qu.push(t-Ju),Ju=t},clearMetrics(){Ju=null,Qu=[],performance.clearMeasures(th),performance.clearMeasures(nh);for(const t in e.bc)performance.clearMarks(e.bc[t])},getPerformanceMetrics(){performance.measure(th,e.bc.create,e.bc.load),performance.measure(nh,e.bc.create,e.bc.fullLoad);const t=performance.getEntriesByName(th)[0].duration,n=performance.getEntriesByName(nh)[0].duration,r=Qu.length,i=1/(Qu.reduce(((e,t)=>e+t),0)/r/1e3),a=Qu.filter((e=>e>eh)).reduce(((e,t)=>e+(t-eh)/eh),0);return{loadTime:t,fullLoadTime:n,fps:i,percentDroppedFrames:a/(r+a)*100,totalFrames:r}}};e.$=va,e.A=xo,e.B=function(e){if(null==T){const t=e.navigator?e.navigator.userAgent:null;T=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return T},e.C=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Zc((()=>this.process())),this.subscription=function(e,t,n){return e.addEventListener(t,n,!1),{unsubscribe:()=>{e.removeEventListener(t,n,!1)}}}(this.target,"message",(e=>this.receive(e))),this.globalScope=C(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise(((n,r)=>{const i=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[i]={resolve:n,reject:r},t&&t.signal.addEventListener("abort",(()=>{delete this.resolveRejects[i];const t={id:i,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)}),{once:!0});const a=[],o=Object.assign(Object.assign({},e),{id:i,sourceMapId:this.mapId,origin:location.origin,data:Nr(e.data,a)});this.target.postMessage(o,{transfer:a})}))}receive(e){const t=e.data,n=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[n];const e=this.abortControllers[n];return delete this.abortControllers[n],void(e&&e.abort())}if(C(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,n){return t(this,void 0,void 0,(function*(){if("<response>"===n.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(n.error?t.reject(Hr(n.error)):t.resolve(Hr(n.data)))}if(!this.messageHandlers[n.type])return void this.completeTask(e,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const t=Hr(n.data),r=new AbortController;this.abortControllers[e]=r;try{const i=yield this.messageHandlers[n.type](n.sourceMapId,t,r);this.completeTask(e,null,i)}catch(t){this.completeTask(e,t)}}))}completeTask(e,t,n){const r=[];delete this.abortControllers[e];const i={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Nr(t):null,data:Nr(n,r)};this.target.postMessage(i,{transfer:r})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.D=ci,e.E=q,e.F=function(){var e=new xo(16);return xo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.G=O,e.H=function(e,t,n){var r,i,a,o,s,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=a*m+c*g+p*y+t[14],e[15]=o*m+u*g+f*y+t[15]),e},e.I=tc,e.J=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.K=Lo,e.L=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.M=Gc,e.N=Kc,e.O=Yc,e.P=a,e.Q=iu,e.R=Ro,e.S=h,e.T=ri,e.U=d,e.V=M,e.W=Wa,e.X=xi,e.Y=eu,e.Z=class extends ki{},e._=t,e.a=R,e.a$=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.a0=nu,e.a1=ae,e.a2=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((n=>{t.onloadstart=()=>{n(t)};for(const r of e){const e=window.document.createElement("source");N(r)||(t.crossOrigin="Anonymous"),e.src=r,t.appendChild(e)}}))},e.a3=function(){return _++},e.a4=qi,e.a5=Ac,e.a6=Gn,e.a7=Ja,e.a8=ei,e.a9=lu,e.aA=b,e.aB=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let n=[];try{if(!K(e.version,t.version))return[{command:"setStyle",args:[t]}];K(e.center,t.center)||n.push({command:"setCenter",args:[t.center]}),K(e.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),K(e.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),K(e.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),K(e.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),K(e.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),K(e.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),K(e.light,t.light)||n.push({command:"setLight",args:[t.light]}),K(e.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),K(e.sky,t.sky)||n.push({command:"setSky",args:[t.sky]});const r={},i=[];!function(e,t,n,r){let i;for(i in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)||Q(i,n,r));for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)?K(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&te(e,t,i)?Y(n,{command:"setGeoJSONSourceData",args:[i,t[i].data]}):ee(i,t,n,r)):J(i,t,n))}(e.sources,t.sources,i,r);const a=[];e.layers&&e.layers.forEach((e=>{"source"in e&&r[e.source]?n.push({command:"removeLayer",args:[e.id]}):a.push(e)})),n=n.concat(i),function(e,t,n){t=t||[];const r=(e=e||[]).map(re),i=t.map(re),a=e.reduce(ie,{}),o=t.reduce(ie,{}),s=r.slice(),l=Object.create(null);let c,u,h,d,p;for(let f=0,m=0;f<r.length;f++)c=r[f],Object.prototype.hasOwnProperty.call(o,c)?m++:(Y(n,{command:"removeLayer",args:[c]}),s.splice(s.indexOf(c,m),1));for(let f=0,m=0;f<i.length;f++)c=i[i.length-1-f],s[s.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(a,c)?(Y(n,{command:"removeLayer",args:[c]}),s.splice(s.lastIndexOf(c,s.length-m),1)):m++,d=s[s.length-f],Y(n,{command:"addLayer",args:[o[c],d]}),s.splice(s.length-f,0,c),l[c]=!0);for(let f=0;f<i.length;f++)if(c=i[f],u=a[c],h=o[c],!l[c]&&!K(u,h))if(K(u.source,h.source)&&K(u["source-layer"],h["source-layer"])&&K(u.type,h.type)){for(p in ne(u.layout,h.layout,n,c,null,"setLayoutProperty"),ne(u.paint,h.paint,n,c,null,"setPaintProperty"),K(u.filter,h.filter)||Y(n,{command:"setFilter",args:[c,h.filter]}),K(u.minzoom,h.minzoom)&&K(u.maxzoom,h.maxzoom)||Y(n,{command:"setLayerZoomRange",args:[c,h.minzoom,h.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?ne(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):K(u[p],h[p])||Y(n,{command:"setLayerProperty",args:[c,p,h[p]]}));for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?ne(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):K(u[p],h[p])||Y(n,{command:"setLayerProperty",args:[c,p,h[p]]}))}else Y(n,{command:"removeLayer",args:[c]}),d=s[s.lastIndexOf(c)+1],Y(n,{command:"addLayer",args:[h,d]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:"setStyle",args:[t]}]}return n},e.aC=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.aD=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!e(t[r],n[r]))return!1;return!0}return t===n},e.aE=v,e.aF=x,e.aG=class extends za{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.aH=Da,e.aI=class extends za{constructor(e,t){super(e,t),this.current=Oa}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.aJ=Ra,e.aK=class extends za{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.aL=class extends za{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.aM=Fa,e.aN=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*c,e[15]=1,e},e.aO=We,e.aP=ko,e.aQ=class extends Di{},e.aR=bl,e.aS=class extends Fi{},e.aT=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.aU=Fo,e.aV=ra,e.aW=class extends Ui{},e.aX=ma,e.aY=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=t[0],v=t[1],x=t[2],b=t[3],L=t[4],w=t[5],k=t[6],S=t[7],C=t[8],T=t[9],E=t[10],I=t[11],M=t[12],P=t[13],A=t[14],z=t[15];return Math.abs(n-_)<=vo*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-v)<=vo*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(i-x)<=vo*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-b)<=vo*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-L)<=vo*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(s-w)<=vo*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-k)<=vo*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-S)<=vo*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(u-C)<=vo*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(h-T)<=vo*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-E)<=vo*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-I)<=vo*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-M)<=vo*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(m-P)<=vo*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-A)<=vo*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(y-z)<=vo*Math.max(1,Math.abs(y),Math.abs(z))},e.aZ=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.a_=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},e.aa=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ab=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n},e.ac=m,e.ad=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+u*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=c*i-a*r,e[5]=u*i-o*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e},e.ae=function(e){var t=new xo(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.af=So,e.ag=function(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:a,maxZoom:o}=e,s=i?m(Wt.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?r=Gt.number(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}},e.ai=function(e,t,n){let{uSize:r,uSizeT:i}=t,{lowerSize:a,upperSize:o}=n;return"source"===e.kind?a/bc:"composite"===e.kind?Gt.number(a/bc,o/bc,i):r},e.aj=Ec,e.ak=function(e,t,n,r){const i=t.y-e.y,o=t.x-e.x,s=r.y-n.y,l=r.x-n.x,c=s*o-l*i;if(0===c)return null;const u=(l*(e.y-n.y)-s*(e.x-n.x))/c;return new a(e.x+u*o,e.y+u*i)},e.al=pu,e.am=to,e.an=bo,e.ao=kl,e.aq=kc,e.ar=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=n*s-r*o,v=n*l-i*o,x=n*c-a*o,b=r*l-i*s,L=r*c-a*s,w=i*c-a*l,k=u*m-h*f,S=u*g-d*f,C=u*y-p*f,T=h*g-d*m,E=h*y-p*m,I=d*y-p*g,M=_*I-v*E+x*T+b*C-L*S+w*k;return M?(e[0]=(s*I-l*E+c*T)*(M=1/M),e[1]=(i*E-r*I-a*T)*M,e[2]=(m*w-g*L+y*b)*M,e[3]=(d*L-h*w-p*b)*M,e[4]=(l*C-o*I-c*S)*M,e[5]=(n*I-i*C+a*S)*M,e[6]=(g*x-f*w-y*v)*M,e[7]=(u*w-d*x+p*v)*M,e[8]=(o*E-s*C+c*k)*M,e[9]=(r*C-n*E-a*k)*M,e[10]=(f*L-m*x+y*_)*M,e[11]=(h*x-u*L-p*_)*M,e[12]=(s*S-o*T-l*k)*M,e[13]=(n*T-r*S+i*k)*M,e[14]=(m*v-f*b-g*_)*M,e[15]=(u*b-h*v+d*_)*M,e):null},e.as=Vu,e.at=gc,e.au=Zu,e.av=function(){const e={},t=G.$version;for(const n in G.$root){const r=G.$root[n];if(r.required){let i=null;i="version"===n?t:"array"===r.type?[]:{},null!=i&&(e[n]=i)}}return e},e.aw=Ur,e.ax=V,e.ay=function(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=X(e[n],t[e[n].ref]));return e},e.az=function(e){if("custom"===e.type)return new $c(e);switch(e.type){case"background":return new jc(e);case"circle":return new Co(e);case"fill":return new Is(e);case"fill-extrusion":return new Qs(e);case"heatmap":return new Oo(e);case"hillshade":return new jo(e);case"line":return new ml(e);case"raster":return new Uc(e);case"symbol":return new Oc(e)}},e.b=E,e.b0=g,e.b1=ru,e.b2=Jc,e.b3=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(a=1/(r-i)),e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},e.b4=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+u*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=c*i-a*r,e[9]=u*i-o*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e},e.b5=p,e.b6=f,e.b7=function(e){return e*Math.PI/180},e.b8=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.b9=class extends wi{},e.ba=qc,e.bb=rh,e.bd=B,e.be=function(e,t){R.REGISTERED_PROTOCOLS[e]=t},e.bf=function(e){delete R.REGISTERED_PROTOCOLS[e]},e.bg=function(e,t){const n={};for(let i=0;i<e.length;i++){const r=t&&t[e[i].id]||nr(e[i]);t&&(t[e[i].id]=r);let a=n[r];a||(a=n[r]=[]),a.push(e[i])}const r=[];for(const i in n)r.push(n[i]);return r},e.bh=Vr,e.bi=su,e.bj=cu,e.bk=nc,e.bl=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=Wa/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const n=t.bucket.layers[0],r=n.layout,i=n._unevaluatedLayout._values,a={layoutIconSize:i["icon-size"].possiblyEvaluate(new ei(t.bucket.zoom+1),t.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new ei(t.bucket.zoom+1),t.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new ei(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.textSizeData;a.compositeTextSizes=[i["text-size"].possiblyEvaluate(new ei(e),t.canonical),i["text-size"].possiblyEvaluate(new ei(n),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.iconSizeData;a.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new ei(e),t.canonical),i["icon-size"].possiblyEvaluate(new ei(n),t.canonical)]}const o=r.get("text-line-height")*kl,s="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),l=r.get("text-keep-upright"),c=r.get("text-size");for(const u of t.bucket.features){const i=r.get("text-font").evaluate(u,{},t.canonical).join(","),h=c.evaluate(u,{},t.canonical),d=a.layoutTextSize.evaluate(u,{},t.canonical),p=a.layoutIconSize.evaluate(u,{},t.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,y=[0,0];if(m){const a=m.toString(),c=r.get("text-letter-spacing").evaluate(u,{},t.canonical)*kl,p=qr(a)?c:0,g=r.get("text-anchor").evaluate(u,{},t.canonical),_=Bu(n,u,t.canonical);if(!_){const e=r.get("text-radial-offset").evaluate(u,{},t.canonical);y=e?Ou(g,[e*kl,Fu]):r.get("text-offset").evaluate(u,{},t.canonical).map((e=>e*kl))}let v=s?"center":r.get("text-justify").evaluate(u,{},t.canonical);const x=r.get("symbol-placement"),b="point"===x?r.get("text-max-width").evaluate(u,{},t.canonical)*kl:0,L=()=>{t.bucket.allowVerticalPlacement&&Zr(a)&&(f.vertical=sc(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,o,g,"left",p,y,e.ah.vertical,!0,x,d,h))};if(!s&&_){const n=new Set;if("auto"===v)for(let e=0;e<_.values.length;e+=2)n.add(Vu(_.values[e]));else n.add(v);let r=!1;for(const a of n)if(!f.horizontal[a])if(r)f.horizontal[a]=f.horizontal[0];else{const n=sc(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,o,"center",a,p,y,e.ah.horizontal,!1,x,d,h);n&&(f.horizontal[a]=n,r=1===n.positionedLines.length)}L()}else{"auto"===v&&(v=Vu(g));const n=sc(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,o,g,v,p,y,e.ah.horizontal,!1,x,d,h);n&&(f.horizontal[v]=n),L(),Zr(a)&&s&&l&&(f.vertical=sc(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,o,g,v,p,y,e.ah.vertical,!1,x,d,h))}}let _=!1;if(u.icon&&u.icon.name){const e=t.imageMap[u.icon.name];e&&(g=_c(t.imagePositions[u.icon.name],r.get("icon-offset").evaluate(u,{},t.canonical),r.get("icon-anchor").evaluate(u,{},t.canonical)),_=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=_:t.bucket.sdfIcons!==_&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const v=Hu(f.horizontal)||f.vertical;t.bucket.iconsInText=!!v&&v.iconsInText,(v||g)&&ju(t.bucket,u,f,g,t.imageMap,a,d,p,y,_,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.bm=cl,e.bn=Ss,e.bo=Ws,e.bp=zs,e.bq=Gl,e.br=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.bs=function(e,n,r,i,a){return t(this,void 0,void 0,(function*(){if(d())try{return yield M(e,n,r,i,a)}catch(e){}return function(e,t,n,r,i){const a=e.width,o=e.height;P&&A||(P=new OffscreenCanvas(a,o),A=P.getContext("2d",{willReadFrequently:!0})),P.width=a,P.height=o,A.drawImage(e,0,0,a,o);const s=A.getImageData(t,n,r,i);return A.clearRect(0,0,a,o),s.data}(e,n,r,i,a)}))},e.bt=ou,e.bu=n,e.bv=r,e.bw=Sl,e.bx=Vn,e.by=function(e){return e.message===z},e.bz=Qr,e.c=D,e.d=e=>t(void 0,void 0,void 0,(function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),e.e=y,e.f=e=>new Promise(((t,n)=>{const r=new Image;r.onload=()=>{t(r),URL.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame((()=>{r.src=I}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?URL.createObjectURL(i):I})),e.g=F,e.h=(e,t)=>j(y(e,{type:"json"}),t),e.i=C,e.j=Z,e.k=$,e.l=(e,t)=>j(y(e,{type:"arrayBuffer"}),t),e.m=j,e.n=function(e){return new Gl(e).readFields(Xl,[])},e.o=Do,e.p=Ql,e.q=fi,e.r=zr,e.s=N,e.t=Fr,e.u=$r,e.v=G,e.w=w,e.x=Ar,e.y=function(e){let[t,n,r]=e;return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},e.z=Gt})),n("worker",["./shared"],(function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const i of t){this._layerConfigs[i.id]=i;const t=this._layers[i.id]=e.az(i);t._featureFilter=e.a6(t.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const r=e.bg(Object.values(this._layerConfigs),this.keyCache);for(const e of r){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const a=n.sourceLayer||"_geojsonTileLayer";let o=i[a];o||(o=i[a]=[]),o.push(t)}}}class n{constructor(t){const n={},r=[];for(const e in t){const i=t[e],a=n[e]={};for(const e in i){const t=i[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};r.push(n),a[e]={rect:n,metrics:t.metrics}}}const{w:i,h:a}=e.p(r),o=new e.o({width:i||1,height:a||1});for(const s in t){const r=t[s];for(const t in r){const i=r[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=n[s][t].rect;e.o.copy(i.bitmap,o,{x:0,y:0},{x:a.x+1,y:a.y+1},i.bitmap)}}this.image=o,this.positions=n}}e.bh("GlyphAtlas",n);class r{constructor(t){this.tileID=new e.Q(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[]}parse(t,r,a,o){return e._(this,void 0,void 0,(function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a4;const s=new e.bi(Object.keys(t.layers).sort()),l=new e.bj(this.tileID,this.promoteId);l.bucketLayerIDs=[];const c={},u={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:a},h=r.familiesBySource[this.source];for(const n in h){const r=t.layers[n];if(!r)continue;1===r.version&&e.w(`Vector tile source "${this.source}" layer "${n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=s.encode(n),d=[];for(let e=0;e<r.length;e++){const t=r.feature(e),i=l.getId(t,n);d.push({feature:t,id:i,index:e,sourceLayerIndex:o})}for(const t of h[n]){const n=t[0];n.source!==this.source&&e.w(`layer.source = ${n.source} does not equal this.source = ${this.source}`),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(i(t,this.zoom,a),(c[n.id]=n.createBucket({index:l.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(d,u,this.tileID.canonical),l.bucketLayerIDs.push(t.map((e=>e.id))))}}const d=e.aE(u.glyphDependencies,(e=>Object.keys(e).map(Number)));this.inFlightDependencies.forEach((e=>null==e?void 0:e.abort())),this.inFlightDependencies=[];let p=Promise.resolve({});if(Object.keys(d).length){const e=new AbortController;this.inFlightDependencies.push(e),p=o.sendAsync({type:"getGlyphs",data:{stacks:d,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const f=Object.keys(u.iconDependencies);let m=Promise.resolve({});if(f.length){const e=new AbortController;this.inFlightDependencies.push(e),m=o.sendAsync({type:"getImages",data:{icons:f,source:this.source,tileID:this.tileID,type:"icons"}},e)}const g=Object.keys(u.patternDependencies);let y=Promise.resolve({});if(g.length){const e=new AbortController;this.inFlightDependencies.push(e),y=o.sendAsync({type:"getImages",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[_,v,x]=yield Promise.all([p,m,y]),b=new n(_),L=new e.bk(v,x);for(const t in c){const n=c[t];n instanceof e.a5?(i(n.layers,this.zoom,a),e.bl({bucket:n,glyphMap:_,glyphPositions:b.positions,imageMap:v,imagePositions:L.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):n.hasPattern&&(n instanceof e.bm||n instanceof e.bn||n instanceof e.bo)&&(i(n.layers,this.zoom,a),n.addFeatures(u,this.tileID.canonical,L.patternPositions))}return this.status="done",{buckets:Object.values(c).filter((e=>!e.isEmpty())),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:b.image,imageAtlas:L,glyphMap:this.returnDependencies?_:null,iconMap:this.returnDependencies?v:null,glyphPositions:this.returnDependencies?b.positions:null}}))}}function i(t,n,r){const i=new e.a8(n);for(const e of t)e.recalculate(i,r)}class a{constructor(e,t,n){this.actor=e,this.layerIndex=t,this.availableImages=n,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,n){return e._(this,void 0,void 0,(function*(){const r=yield e.l(t.request,n);try{return{vectorTile:new e.bp.VectorTile(new e.bq(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires}}catch(e){const i=new Uint8Array(r.data);let a=`Unable to parse the tile at ${t.request.url}, `;throw a+=31===i[0]&&139===i[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${e.messge}`,new Error(a)}}))}loadTile(t){return e._(this,void 0,void 0,(function*(){const n=t.uid,i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.br(t.request),a=new r(t);this.loading[n]=a;const o=new AbortController;a.abort=o;try{const r=yield this.loadVectorTile(t,o);if(delete this.loading[n],!r)return null;const s=r.rawData,l={};r.expires&&(l.expires=r.expires),r.cacheControl&&(l.cacheControl=r.cacheControl);const c={};if(i){const e=i.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}a.vectorTile=r.vectorTile;const u=a.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[n]=a,this.fetching[n]={rawTileData:s,cacheControl:l,resourceTiming:c};try{const t=yield u;return e.e({rawTileData:s.slice(0)},t,l,c)}finally{delete this.fetching[n]}}catch(e){throw delete this.loading[n],a.status="done",this.loaded[n]=a,e}}))}reloadTile(t){return e._(this,void 0,void 0,(function*(){const n=t.uid;if(!this.loaded||!this.loaded[n])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const r=this.loaded[n];if(r.showCollisionBoxes=t.showCollisionBoxes,"parsing"===r.status){const t=yield r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor);let i;if(this.fetching[n]){const{rawTileData:r,cacheControl:a,resourceTiming:o}=this.fetching[n];delete this.fetching[n],i=e.e({rawTileData:r.slice(0)},t,a,o)}else i=t;return i}if("done"===r.status&&r.vectorTile)return r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){const e=this.loading,n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort.abort(),delete e[n])}))}removeTile(t){return e._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]}))}}class o{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:n,encoding:r,rawImageData:i,redFactor:a,greenFactor:o,blueFactor:s,baseShift:l}=t,c=i.width+2,u=i.height+2,h=e.b(i)?new e.R({width:c,height:u},yield e.bs(i,-1,-1,c,u)):i,d=new e.bt(n,h,r,a,o,s,l);return this.loaded=this.loaded||{},this.loaded[n]=d,d}))}removeTile(e){const t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]}}function s(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,r=0,i=0,a=e.length,o=a-1;i<a;o=i++){var s=(e[i][0]-e[o][0])*(e[o][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}var c=e.bu((function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)s(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)s(t.coordinates[r],n);return t}));const u=e.bp.VectorTileFeature.prototype.toGeoJSON;var h={exports:{}},d=e.bv,p=e.bp.VectorTileFeature,f=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new d(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var y=e.bw,_=f;function v(e){var t=new y;return function(e,t){for(var n in e.layers)t.writeMessage(3,x,e.layers[n])}(e,t),t.finish()}function x(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,b,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,C,a[n])}function b(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,L,e),t.writeVarintField(3,n.type),t.writeMessage(4,S,n)}function L(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=a[s];if(null!==l){void 0===c&&(r.push(s),a[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=o[h];void 0===d&&(i.push(l),o[h]=d=i.length-1),t.writeVarint(d)}}}function w(e,t){return(t<<3)+(7&e)}function k(e){return e<<1^e>>31}function S(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(w(2,u-1));var d=l[h].x-i,p=l[h].y-a;t.writeVarint(k(d)),t.writeVarint(k(p)),i+=d,a+=p}3===r&&t.writeVarint(w(7,1))}}function C(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}h.exports=v,h.exports.fromVectorTileJs=v,h.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new _(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return v({layers:n})},h.exports.GeoJSONWrapper=_;var T=e.bu(h.exports);const E={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},I=Math.fround||(M=new Float32Array(1),e=>(M[0]=+e,M[0]));var M;const P=3,A=5,z=6;class D{constructor(e){this.options=Object.assign(Object.create(E),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const a=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=I(O(n)),o=I(B(r));a.push(i,o,1/0,s,-1,1),this.options.reduce&&a.push(0)}let o=this.trees[r+1]=this._createTree(a);t&&console.timeEnd(i);for(let s=r;s>=n;s--){const e=+Date.now();o=this.trees[s]=this._createTree(this._cluster(o,s)),t&&console.log("z%d: %d clusters in %dms",s,o.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,a],t),o=this.getClusters([-180,r,i,a],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],s=o.range(O(n),B(a),O(i),B(r)),l=o.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+A]>1?R(l,e,this.clusterProps):this.points[l[e+P]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const a=i.data;if(t*this.stride>=a.length)throw new Error(r);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(a[t*this.stride],a[t*this.stride+1],o),l=[];for(const c of s){const t=c*this.stride;a[t+4]===e&&l.push(a[t+A]>1?R(a,t,this.clusterProps):this.points[a[t+P]])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:o}=this.options,s=o/a,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.data,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.data,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const a=this.getChildren(t);for(const o of a){const t=o.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(o),e.length===n)break}return i}_createTree(t){const n=new e.au(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,r,i,a){for(const o of e){const e=o*this.stride,s=t[e+A]>1;let l,c,u;if(s)l=F(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+P]];l=n.properties;const[r,i]=n.geometry.coordinates;c=O(r),u=B(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;d=s||this.options.generateId?t[e+P]:this.points[t[e+P]].id,void 0!==d&&(h.id=d),a.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:a}=this.options,o=n/(r*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const n=s[u],r=s[u+1],h=e.within(s[u],s[u+1],o),d=s[u+A];let p=d;for(const e of h){const n=e*c;s[n+2]>t&&(p+=s[n+A])}if(p>d&&p>=a){let e,a=n*d,o=r*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const n of h){const r=n*c;if(s[r+2]<=t)continue;s[r+2]=t;const l=s[r+A];a+=s[r]*l,o+=s[r+1]*l,s[r+4]=m,i&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(s,r)))}s[u+4]=m,l.push(a/p,o/p,1/0,m,-1,p),i&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+A]>1){const r=this.clusterProps[e[t+z]];return n?Object.assign({},r):r}const r=this.points[e[t+P]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function R(e,t,n){return{type:"Feature",id:e[t+P],properties:F(e,t,n),geometry:{type:"Point",coordinates:[(r=e[t],360*(r-.5)),V(e[t+1])]}};var r}function F(e,t,n){const r=e[t+A],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,a=e[t+z],o=-1===a?{}:Object.assign({},n[a]);return Object.assign(o,{cluster:!0,cluster_id:e[t+P],point_count:r,point_count_abbreviated:i})}function O(e){return e/360+.5}function B(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function V(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function j(e,t,n,r){for(var i,a=r,o=n-t>>1,s=n-t,l=e[t],c=e[t+1],u=e[n],h=e[n+1],d=t+3;d<n;d+=3){var p=N(e[d],e[d+1],l,c,u,h);if(p>a)i=d,a=p;else if(p===a){var f=Math.abs(d-o);f<s&&(i=d,s=f)}}a>r&&(i-t>3&&j(e,t,i,r),e[i+2]=a,n-i>3&&j(e,i,n,r))}function N(e,t,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var l=((e-n)*o+(t-r)*s)/(o*o+s*s);l>1?(n=i,r=a):l>0&&(n+=o*l,r+=s*l)}return(o=e-n)*o+(s=t-r)*s}function H(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)U(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)U(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)U(e,t[r][i])}(i),i}function U(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function $(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===a)Z(i,s);else if("MultiPoint"===a)for(var c=0;c<i.length;c++)Z(i[c],s);else if("LineString"===a)q(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(c=0;c<i.length;c++)q(i[c],s=[],o,!1),e.push(H(l,"LineString",s,t.properties));return}G(i,s,o,!1)}else if("Polygon"===a)G(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(c=0;c<t.geometry.geometries.length;c++)$(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];G(i[c],u,o,!0),s.push(u)}}e.push(H(l,a,s,t.properties))}}function Z(e,t){t.push(W(e[0])),t.push(X(e[1])),t.push(0)}function q(e,t,n,r){for(var i,a,o=0,s=0;s<e.length;s++){var l=W(e[s][0]),c=X(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(o+=r?(i*c-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-a,2))),i=l,a=c}var u=t.length-3;t[2]=1,j(t,0,u,n),t[u+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function G(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];q(e[i],a,n,r),t.push(a)}}function W(e){return e/360+.5}function X(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function K(e,t,n,r,i,a,o,s){if(r/=t,a>=(n/=t)&&o<r)return e;if(o<n||a>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=n&&f<r)l.push(u);else if(!(f<n||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)Y(h,m,n,r,i);else if("LineString"===d)J(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)ee(h,m,n,r,i,!1);else if("Polygon"===d)ee(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];ee(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(H(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(H(u.id,d,m,u.tags))}}}return l.length?l:null}function Y(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=n&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function J(e,t,n,r,i,a,o){for(var s,l,c=Q(e),u=0===i?ne:re,h=e.start,d=0;d<e.length-3;d+=3){var p=e[d],f=e[d+1],m=e[d+2],g=e[d+3],y=e[d+4],_=0===i?p:f,v=0===i?g:y,x=!1;o&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),_<n?v>n&&(l=u(c,p,f,g,y,n),o&&(c.start=h+s*l)):_>r?v<r&&(l=u(c,p,f,g,y,r),o&&(c.start=h+s*l)):te(c,p,f,m),v<n&&_>=n&&(l=u(c,p,f,g,y,n),x=!0),v>r&&_<=r&&(l=u(c,p,f,g,y,r),x=!0),!a&&x&&(o&&(c.end=h+s*l),t.push(c),c=Q(e)),o&&(h+=s)}var b=e.length-3;p=e[b],f=e[b+1],m=e[b+2],(_=0===i?p:f)>=n&&_<=r&&te(c,p,f,m),b=c.length-3,a&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&te(c,c[0],c[1],c[2]),c.length&&t.push(c)}function Q(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ee(e,t,n,r,i,a){for(var o=0;o<e.length;o++)J(e[o],t,n,r,i,a,!1)}function te(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ne(e,t,n,r,i,a){var o=(a-t)/(r-t);return e.push(a),e.push(n+(i-n)*o),e.push(1),o}function re(e,t,n,r,i,a){var o=(a-n)/(i-n);return e.push(t+(r-t)*o),e.push(a),e.push(1),o}function ie(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=ae(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(ae(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],c=0;c<a.geometry[s].length;c++)l.push(ae(a.geometry[s][c],t));i.push(l)}n.push(H(a.id,o,i,a.tags))}return n}function ae(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function oe(e,t){if(e.transformed)return e;var n,r,i,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(se(c[r],c[r+1],t,a,o,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(se(c[r][i],c[r][i+1],t,a,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function se(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}function le(e,t,n,r,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,ce(o,e[s],a,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),h>o.maxY&&(o.maxY=h)}return o}function ce(e,t,n,r){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)ue(o,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)ue(o,i[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)ue(o,c[s],e,n,!0,0===s)}if(o.length){var u=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function ue(e,t,n,r,i,a){var o=r*r;if(r>0&&t.size<(i?o:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>o)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=o,e[i-1-r]=s}}(s,a),e.push(s)}}function he(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)$(n,e.features[r],t,r);else $(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=K(e,1,-1-n,n,0,-1,2,t),a=K(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(r=K(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=ie(i,1).concat(r)),a&&(r=r.concat(ie(a,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function de(e,t,n){return 32*((1<<e)*n+t)+e}function pe(e,t){return t?e.properties[t]:e.id}function fe(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=pe(e,t);if("FeatureCollection"===e.type){const n=new Set;for(const r of e.features){const e=pe(r,t);if(null==e)return!1;if(n.has(e))return!1;n.add(e)}return!0}return!1}function me(e,t){const n=new Map;if(null==e);else if("Feature"===e.type)n.set(pe(e,t),e);else for(const r of e.features)n.set(pe(r,t),r);return n}he.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},he.prototype.splitTile=function(e,t,n,r,i,a,o){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=de(t,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=le(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(n!==Math.floor(a/f)||r!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,_,v,x,b=.5*l.buffer/l.extent,L=.5-b,w=.5+b,k=1+b;m=g=y=_=null,v=K(e,u,n-b,n+w,0,d.minX,d.maxX,l),x=K(e,u,n+L,n+k,0,d.minX,d.maxX,l),e=null,v&&(m=K(v,u,r-b,r+w,1,d.minY,d.maxY,l),g=K(v,u,r+L,r+k,1,d.minY,d.maxY,l),v=null),x&&(y=K(x,u,r-b,r+w,1,d.minY,d.maxY,l),_=K(x,u,r+L,r+k,1,d.minY,d.maxY,l),x=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(_||[],t+1,2*n+1,2*r+1)}}},he.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var o=1<<e,s=de(e,t=(t%o+o)%o,n);if(this.tiles[s])return oe(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[de(c,u,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",c,u,h),a>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?oe(this.tiles[s],i):null):null};class ge extends a{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,n){return e._(this,void 0,void 0,(function*(){const n=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return null;const i=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.W,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.W,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.P(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.P(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return u.call(this,e,t,n)}}(this._features[t])}}(r.features);let a=T(i);return 0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),{vectorTile:i,rawData:a.buffer}}))}loadData(t){return e._(this,void 0,void 0,(function*(){var n;null===(n=this._pendingRequest)||void 0===n||n.abort();const r=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.br(t.request);this._pendingRequest=new AbortController;try{let n=yield this.loadGeoJSON(t,this._pendingRequest);if(delete this._pendingRequest,"object"!=typeof n)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(c(n,!0),t.filter){const r=e.bx(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const i=n.features.filter((e=>r.value.evaluate({zoom:0},e)));n={type:"FeatureCollection",features:i}}this._geoJSONIndex=t.cluster?new D(function(t){let{superclusterOptions:n,clusterProperties:r}=t;if(!r||!n)return n;const i={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const c of l){const[t,n]=r[c],o=e.bx(n),s=e.bx("string"==typeof t?[t,["accumulated"],["get",c]]:t);i[c]=o.value,a[c]=s.value}return n.map=e=>{s.properties=e;const t={};for(const n of l)t[n]=i[n].evaluate(o,s);return t},n.reduce=(e,t)=>{s.properties=t;for(const n of l)o.accumulated=e[n],e[n]=a[n].evaluate(o,s)},n}(t)).load(n.features):function(e,t){return new he(e,t)}(n,t.geojsonVtOptions),this.loaded={};const i={};if(r){const e=r.finish();e&&(i.resourceTiming={},i.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return i}catch(t){if(delete this._pendingRequest,e.by(t))return{abandoned:!0};throw t}}))}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadGeoJSON(t,n){return e._(this,void 0,void 0,(function*(){const{promoteId:r}=t;if(t.request){const i=yield e.h(t.request,n);return this._dataUpdateable=fe(i.data,r)?me(i.data,r):void 0,i.data}if("string"==typeof t.data)try{const e=JSON.parse(t.data);return this._dataUpdateable=fe(e,r)?me(e,r):void 0,e}catch(e){throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`)}if(!t.dataDiff)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${t.source}`);return function(e,t,n){var r,i,a,o;if(t.removeAll&&e.clear(),t.remove)for(const s of t.remove)e.delete(s);if(t.add)for(const s of t.add){const t=pe(s,n);null!=t&&e.set(t,s)}if(t.update)for(const s of t.update){let t=e.get(s.id);if(null==t)continue;const n=!s.removeAllProperties&&((null===(r=s.removeProperties)||void 0===r?void 0:r.length)>0||(null===(i=s.addOrUpdateProperties)||void 0===i?void 0:i.length)>0);if((s.newGeometry||s.removeAllProperties||n)&&(t=Object.assign({},t),e.set(s.id,t),n&&(t.properties=Object.assign({},t.properties))),s.newGeometry&&(t.geometry=s.newGeometry),s.removeAllProperties)t.properties={};else if((null===(a=s.removeProperties)||void 0===a?void 0:a.length)>0)for(const e of s.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(o=s.addOrUpdateProperties)||void 0===o?void 0:o.length)>0)for(const{key:e,value:r}of s.addOrUpdateProperties)t.properties[e]=r}}(this._dataUpdateable,t.dataDiff,r),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(t){return e._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class ye{constructor(t){this.self=t,this.actor=new e.C(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.be,this.self.removeProtocol=e.bf,this.self.registerRTLTextPlugin=t=>{if(e.bz.isParsed())throw new Error("RTL text plugin already registered.");e.bz.setMethods(t)},this.actor.registerMessageHandler("loadDEMTile",((e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t))),this.actor.registerMessageHandler("removeDEMTile",((t,n)=>e._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(t,n.source).removeTile(n)})))),this.actor.registerMessageHandler("getClusterExpansionZoom",((t,n)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,n.type,n.source).getClusterExpansionZoom(n)})))),this.actor.registerMessageHandler("getClusterChildren",((t,n)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,n.type,n.source).getClusterChildren(n)})))),this.actor.registerMessageHandler("getClusterLeaves",((t,n)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,n.type,n.source).getClusterLeaves(n)})))),this.actor.registerMessageHandler("loadData",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t))),this.actor.registerMessageHandler("loadTile",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t))),this.actor.registerMessageHandler("reloadTile",((e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t))),this.actor.registerMessageHandler("abortTile",((e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t))),this.actor.registerMessageHandler("removeTile",((e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t))),this.actor.registerMessageHandler("removeSource",((t,n)=>e._(this,void 0,void 0,(function*(){if(!this.workerSources[t]||!this.workerSources[t][n.type]||!this.workerSources[t][n.type][n.source])return;const e=this.workerSources[t][n.type][n.source];delete this.workerSources[t][n.type][n.source],void 0!==e.removeSource&&e.removeSource(n)})))),this.actor.registerMessageHandler("removeMap",(t=>e._(this,void 0,void 0,(function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})))),this.actor.registerMessageHandler("setReferrer",((t,n)=>e._(this,void 0,void 0,(function*(){this.referrer=n})))),this.actor.registerMessageHandler("syncRTLPluginState",((e,t)=>this._syncRTLPluginState(e,t))),this.actor.registerMessageHandler("importScript",((t,n)=>e._(this,void 0,void 0,(function*(){this.self.importScripts(n)})))),this.actor.registerMessageHandler("setImages",((e,t)=>this._setImages(e,t))),this.actor.registerMessageHandler("updateLayers",((t,n)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).update(n.layers,n.removedIds)})))),this.actor.registerMessageHandler("setLayers",((t,n)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).replace(n)}))))}_setImages(t,n){return e._(this,void 0,void 0,(function*(){this.availableImages[t]=n;for(const e in this.workerSources[t]){const r=this.workerSources[t][e];for(const e in r)r[e].availableImages=n}}))}_syncRTLPluginState(t,n){return e._(this,void 0,void 0,(function*(){if(e.bz.isParsed())return e.bz.getState();if("loading"!==n.pluginStatus)return e.bz.setState(n),n;const t=n.pluginURL;if(this.self.importScripts(t),e.bz.isParsed()){const n={pluginStatus:"loaded",pluginURL:t};return e.bz.setState(n),n}throw e.bz.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${t}`)}))}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let n=this.layerIndexes[e];return n||(n=this.layerIndexes[e]=new t),n}_getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={sendAsync:(t,n)=>(t.targetMapId=e,this.actor.sendAsync(t,n))};switch(t){case"vector":this.workerSources[e][t][n]=new a(r,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][n]=new ge(r,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][n]=new this.externalWorkerSourceTypes[t](r,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][n]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new o),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new ye(self)),ye})),n("index",["exports","./shared"],(function(e,t){var n="4.1.1";let r,i;const a={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:e=>new Promise(((n,r)=>{const i=requestAnimationFrame(n);e.signal.addEventListener("abort",(()=>{cancelAnimationFrame(i),r(t.c())}))})),getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n},resolveURL:e=>(r||(r=document.createElement("a")),r.href=e,r.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==i&&(i=matchMedia("(prefers-reduced-motion: reduce)")),i.matches)}};class o{static testProp(e){if(!o.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in o.docStyle)return e[t];return e[0]}static create(e,t,n){const r=window.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(e,t){e.style[o.transformProp]=t}static addEventListener(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in r?r:r.capture)}static removeEventListener(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in r?r:r.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,n,r){const i=n.boundingClientRect;return new t.P((r.clientX-i.left)/n.x-e.clientLeft,(r.clientY-i.top)/n.y-e.clientTop)}static mousePos(e,t){const n=o.getScale(e);return o.getPoint(e,n,t)}static touchPos(e,t){const n=[],r=o.getScale(e);for(let i=0;i<t.length;i++)n.push(o.getPoint(e,r,t[i]));return n}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);const s={supported:!1,testSupport:function(e){!u&&c&&(h?d(e):l=e)}};let l,c,u=!1,h=!1;function d(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c),e.isContextLost())return;s.supported=!0}catch(e){}e.deleteTexture(t),u=!0}var p,f;"undefined"!=typeof document&&(c=document.createElement("img"),c.onload=function(){l&&d(l),l=null,h=!0},c.onerror=function(){u=!0,l=null},c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let n,r,i,a;e.resetRequestQueue=()=>{n=[],r=0,i=0,a={}},e.addThrottleControl=e=>{const t=i++;return a[t]=e,t},e.removeThrottleControl=e=>{delete a[e],l()},e.getImage=function(e,r){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(((a,o)=>{s.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),n.push({abortController:r,requestParameters:e,supportImageRefresh:i,state:"queued",onError:e=>{o(e)},onSuccess:e=>{a(e)}}),l()}))};const o=e=>t._(this,void 0,void 0,(function*(){e.state="running";const{requestParameters:n,supportImageRefresh:i,onError:a,onSuccess:o,abortController:s}=e,u=!1===i&&!t.i(self)&&!t.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce(((e,t)=>e&&"accept"===t),!0));r++;const h=u?c(n,s):t.m(n,s);try{const n=yield h;delete e.abortController,e.state="completed",n.data instanceof HTMLImageElement||t.b(n.data)?o(n):n.data&&o({data:yield(d=n.data,"function"==typeof createImageBitmap?t.d(d):t.f(d)),cacheControl:n.cacheControl,expires:n.expires})}catch(t){delete e.abortController,a(t)}finally{r--,l()}var d})),l=()=>{const e=(()=>{for(const e of Object.keys(a))if(a[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=r;t<e&&n.length>0;t++){const e=n.shift();e.abortController.signal.aborted?t--:o(e)}},c=(e,n)=>new Promise(((r,i)=>{const a=new Image,o=e.url,s=e.credentials;s&&"include"===s?a.crossOrigin="use-credentials":(s&&"same-origin"===s||!t.s(o))&&(a.crossOrigin="anonymous"),n.signal.addEventListener("abort",(()=>{a.src="",i(t.c())})),a.fetchPriority="high",a.onload=()=>{a.onerror=a.onload=null,r({data:a})},a.onerror=()=>{a.onerror=a.onload=null,n.signal.aborted||i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},a.src=o}))}(p||(p={})),p.resetRequestQueue(),function(e){e.Glyphs="Glyphs",e.Image="Image",e.Source="Source",e.SpriteImage="SpriteImage",e.SpriteJSON="SpriteJSON",e.Style="Style",e.Tile="Tile",e.Unknown="Unknown"}(f||(f={}));class m{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeSpriteURL(e,t,n){const r=function(e){const t=e.match(g);if(!t)throw new Error(`Unable to parse URL "${e}"`);return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}(e);return r.path+=`${t}${n}`,function(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}(r)}setTransformRequest(e){this._transformRequestFn=e}}const g=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function y(e){var n=new t.A(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}var _,v=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};_=new t.A(3),t.A!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0);var x=function(e){var t=e[0],n=e[1];return t*t+n*n};function b(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const n=[];for(const{id:r,url:i}of e){const e=`${r}${i}`;-1===n.indexOf(e)&&(n.push(e),t.push({id:r,url:i}))}}return t}!function(){var e=new t.A(2);t.A!=Float32Array&&(e[0]=0,e[1]=0)}();class L{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,n,r){const{width:i,height:a}=e,o=!(this.size&&this.size[0]===i&&this.size[1]===a||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),o)this.size=[i,a],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,a,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:n,y:o}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texSubImage2D(l.TEXTURE_2D,0,n,o,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,n,o,i,a,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function w(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class k extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const e=n.spriteData;n.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),n.spriteData=null}return n}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,n){let r=!0;const i=n.data||n.spriteData;return this._validateStretch(n.stretchX,i&&i.width)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,i&&i.height)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const n=t.spriteData,r=n&&n.width||t.data.width,i=n&&n.height||t.data.height;return!(e[0]<0||r<e[0]||e[1]<0||i<e[1]||e[2]<0||r<e[2]||e[3]<0||i<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.getImage(e);if(n&&(r.data.width!==t.data.width||r.data.height!==t.data.height))throw new Error(`size mismatch between old image (${r.data.width}x${r.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=r.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((t,n)=>{let r=!0;if(!this.isLoaded())for(const i of e)this.images[i]||(r=!1);this.isLoaded()||r?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})}))}_getImagesForIds(e){const n={};for(const r of e){let e=this.getImage(r);e||(this.fire(new t.k("styleimagemissing",{id:r})),e=this.getImage(r)),e?n[r]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w(`Image "${r}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.I(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new L(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.p(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const a in this.patterns){const{bin:e}=this.patterns[a],n=e.x+1,r=e.y+1,o=this.getImage(a).data,s=o.width,l=o.height;t.R.copy(o,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),t.R.copy(o,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),t.R.copy(o,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),t.R.copy(o,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.R.copy(o,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.getImage(n);e||t.w(`Image with ID: "${n}" was not found`),w(e)&&this.updateImage(n,e)}}}const S=1e20;function C(e,t,n,r,i,a,o,s,l){for(let c=t;c<t+r;c++)T(e,n*a+c,a,i,o,s,l);for(let c=n;c<n+i;c++)T(e,c*a+t,1,r,o,s,l)}function T(e,t,n,r,i,a,o){a[0]=0,o[0]=-S,o[1]=S,i[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=a[l];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=o[l]&&--l>-1);l++,a[l]=s,o[l]=c,o[l+1]=S}for(let s=0,l=0;s<r;s++){for(;o[l+1]<s;)l++;const r=a[l],c=s-r;e[t+s*n]=i[r]+c*c}}class E{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,(function*(){const t=[];for(const i in e)for(const n of e[i])t.push(this._getAndCacheGlyphsPromise(i,n));const n=yield Promise.all(t),r={};for(const{stack:e,id:i,glyph:a}of n)r[e]||(r[e]={}),r[e][i]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics};return r}))}_getAndCacheGlyphsPromise(e,n){return t._(this,void 0,void 0,(function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let r=t.glyphs[n];if(void 0!==r)return{stack:e,id:n,glyph:r};if(r=this._tinySDF(t,e,n),r)return t.glyphs[n]=r,{stack:e,id:n,glyph:r};const i=Math.floor(n/256);if(256*i>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[i])return{stack:e,id:n,glyph:r};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[i]){const n=E.loadGlyphRange(e,i,this.url,this.requestManager);t.requests[i]=n}const a=yield t.requests[i];for(const e in a)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=a[+e]);return t.ranges[i]=!0,{stack:e,id:n,glyph:a[n]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.u["CJK Unified Ideographs"](e)||t.u["Hangul Syllables"](e)||t.u.Hiragana(e)||t.u.Katakana(e))}_tinySDF(e,n,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let a=e.tinySDF;if(!a){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),a=e.tinySDF=new E.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:i,fontWeight:t})}const o=a.draw(String.fromCharCode(r));return{id:r,bitmap:new t.o({width:o.width||60,height:o.height||60},o.data),metrics:{width:o.glyphWidth/2||24,height:o.glyphHeight/2||24,left:o.glyphLeft/2+.5||0,top:o.glyphTop/2-27.5||-8,advance:o.glyphAdvance/2||24,isDoubleResolution:!0}}}}E.loadGlyphRange=function(e,n,r,i){return t._(this,void 0,void 0,(function*(){const a=256*n,o=a+255,s=i.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${a}-${o}`),f.Glyphs),l=yield t.l(s,new AbortController);if(!l||!l.data)throw new Error(`Could not load glyph range. range: ${n}, ${a}-${o}`);const c={};for(const e of t.n(l.data))c[e.id]=e;return c}))},E.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:a="normal",fontStyle:o="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${o} ${a} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:a}=this.ctx.measureText(e),o=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-i))),l=Math.min(this.size-this.buffer,o+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+o);const _=f.getImageData(m,m,s,l);y.fill(S,0,h),g.fill(0,0,h);for(let v=0;v<l;v++)for(let e=0;e<s;e++){const t=_.data[4*(v*s+e)+3]/255;if(0===t)continue;const n=(v+m)*c+e+m;if(1===t)y[n]=0,g[n]=S;else{const e=.5-t;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}C(y,0,0,c,u,c,this.f,this.v,this.z),C(g,m,m,s,l,c,this.f,this.v,this.z);for(let v=0;v<h;v++){const e=Math.sqrt(y[v])-Math.sqrt(g[v]);d[v]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class I{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,n){return t.y(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.z.number(e.x,n.x,r),y:t.z.number(e.y,n.y,r),z:t.z.number(e.z,n.z,r)}}}let M;class P extends t.E{constructor(e){super(),M=M||new t.q({anchor:new t.D(t.v.light.anchor),position:new I,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.T(M),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.r,e,n))for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.t(this,e.call(t.x,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}class A{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){o=!o;const t=e[l];i=s*n,s+=t,a=s*n,r.push({left:i,right:a,isDash:o,zeroLength:0===t})}return r}addRoundDash(e,t,n){const r=t/2;for(let i=-n;i<=n;i++){const t=this.width*(this.nextRow+n+i);let a=0,o=e[a];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++a]);const l=Math.abs(s-o.left),c=Math.abs(s-o.right),u=Math.min(l,c);let h;const d=i/n*(r+1);if(o.isDash){const e=r-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+d*d);this.data[t+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let o=e.length-1;o>=0;--o){const t=e[o],n=e[o+1];t.zeroLength?e.splice(o,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(o,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const r=this.width*this.nextRow;let i=0,a=e[i];for(let o=0;o<this.width;o++){o/a.right>1&&(a=e[++i]);const t=Math.abs(o-a.left),n=Math.abs(o-a.right),s=Math.min(t,n);this.data[r+o]=Math.max(0,Math.min(255,(a.isDash?s:-s)+128))}}addDash(e,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.w("LineAtlas out of space"),null;let a=0;for(let t=0;t<e.length;t++)a+=e[t];if(0!==a){const t=this.width/a,i=this.getDashRanges(e,this.width,t);n?this.addRoundDash(i,t,r):this.addRegularDash(i)}const o={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=i,this.dirty=!0,o}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const z="maplibre_preloaded_worker_pool";class D{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<D.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[z]}numActive(){return Object.keys(this.active).length}}const R=Math.floor(a.hardwareConcurrency/2);let F,O;function B(){return F||(F=new D),F}D.workerCount=t.B(globalThis)?Math.max(Math.min(R,3),1):1;class V{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const r=this.workerPool.acquire(n);for(let i=0;i<r.length;i++){const e=new t.C(r[i],n);e.name=`Worker ${i}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const n=[];for(const r of this.actors)n.push(r.sendAsync({type:e,data:t}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach((e=>{e.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const n of this.actors)n.registerMessageHandler(e,t)}}function j(){return O||(O=new V(B(),t.G),O.registerMessageHandler("getResource",((e,n,r)=>t.m(n,r)))),O}function N(e,n){const r=t.F();return t.H(r,r,[1,1,0]),t.J(r,r,[.5*e.width,.5*e.height,1]),t.K(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function H(e,t,n,r,i,a){const o=function(e,t,n){if(e)for(const r of e){const e=t[r];if(e&&e.source===n&&"fill-extrusion"===e.type)return!0}else for(const r in t){const e=t[r];if(e.source===n&&"fill-extrusion"===e.type)return!0}return!1}(i&&i.layers,t,e.id),s=a.maxPitchScaleFactor(),l=e.tilesIn(r,s,o);l.sort(U);const c=[];for(const h of l)c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,n,e._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,a,s,N(e.transform,h.tileID))});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,a=n[i]=n[i]||{};for(const n in e){const r=e[n],i=a[n]=a[n]||{},o=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,o.push(e))}}return t}(c);for(const h in u)u[h].forEach((t=>{const n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return u}function U(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function $(e,n,r){return t._(this,void 0,void 0,(function*(){let i=e;if(e.url?i=(yield t.h(n.transformRequest(e.url,f.Source),r)).data:yield a.frameAsync(r),!i)return null;const o=t.L(t.e(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in i&&i.vector_layers&&(o.vectorLayerIds=i.vector_layers.map((e=>e.id))),o}))}class Z{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.M?new t.M(e.lng,e.lat):t.M.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.M?new t.M(e.lng,e.lat):t.M.convert(e),this}extend(e){const n=this._sw,r=this._ne;let i,a;if(e instanceof t.M)i=e,a=e;else{if(!(e instanceof Z))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Z.convert(e)):this.extend(t.M.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.M.convert(e)):this;if(i=e._sw,a=e._ne,!i||!a)return this}return n||r?(n.lng=Math.min(i.lng,n.lng),n.lat=Math.min(i.lat,n.lat),r.lng=Math.max(a.lng,r.lng),r.lat=Math.max(a.lat,r.lat)):(this._sw=new t.M(i.lng,i.lat),this._ne=new t.M(a.lng,a.lat)),this}getCenter(){return new t.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.M(this.getWest(),this.getNorth())}getSouthEast(){return new t.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:r}=t.M.convert(e);let i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}static convert(e){return e instanceof Z?e:e?new Z(e):e}static fromLngLat(e){const n=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,r=n/Math.cos(Math.PI/180*e.lat);return new Z(new t.M(e.lng-r,e.lat-n),new t.M(e.lng+r,e.lat+n))}}class q{constructor(e,t,n){this.bounds=Z.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.N(this.bounds.getWest())*n),i=Math.floor(t.O(this.bounds.getNorth())*n),a=Math.ceil(t.N(this.bounds.getEast())*n),o=Math.ceil(t.O(this.bounds.getSouth())*n);return e.x>=r&&e.x<a&&e.y>=i&&e.y<o}}class G extends t.E{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.L(n,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield $(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(t,f.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request.collectResourceTiming=this._collectResourceTiming;let r="reloadTile";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise(((t,n)=>{e.reloadPromise={resolve:t,reject:n}}))}else e.actor=this.dispatcher.getActor(),r="loadTile";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:r,data:n},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"abortTile",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"removeTile",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class W extends t.E{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},n),t.e(this,t.L(n,["url","scheme","tileSize"]))}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield $(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const n=yield p.getImage(this.map._requestManager.transformRequest(t,f.Tile),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const t=this.map.painter.context,r=t.gl,i=n.data;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new L(t,i,r.RGBA,{useMipmap:!0}),e.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),t.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class X extends W{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return t._(this,void 0,void 0,(function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r=this.map._requestManager.transformRequest(n,f.Tile);e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const n=yield p.getImage(r,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){const r=n.data;this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const i=t.b(r)&&t.S()?r:yield this.readImageNow(r),a={type:this.type,uid:e.uid,source:this.id,rawImageData:i,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"loadDEMTile",data:a});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}readImageNow(e){return t._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&t.U()){const n=e.width+2,r=e.height+2;try{return new t.R({width:n,height:r},yield t.V(e,-1,-1,n,r))}catch(e){}}return a.getImageData(e,1)}))}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.Q(e.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},l[new t.Q(e.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new t.Q(e.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.Q(e.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class K extends t.E{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.e({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const a=t.W/this.tileSize;this.workerOptions=t.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.W,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.W,radius:(n.clusterRadius||50)*a,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return t._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,n){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:n}})}_updateWorkerData(e){return t._(this,void 0,void 0,(function*(){const n=t.e({type:this.type},this.workerOptions);e?n.dataDiff=e:"string"==typeof this._data?(n.request=this.map._requestManager.transformRequest(a.resolveURL(this._data),f.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.k("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"loadData",data:n});if(this._pendingLoads--,this._removed||e.abandoned)return void this.fire(new t.k("dataabort",{dataType:"source"}));let r=null;e.resourceTiming&&e.resourceTiming[this.id]&&(r=e.resourceTiming[this.id].slice(0));const i={dataType:"source"};this._collectResourceTiming&&r&&r.length>0&&t.e(i,{resourceTiming:r}),this.fire(new t.k("data",Object.assign(Object.assign({},i),{sourceDataType:"metadata"}))),this.fire(new t.k("data",Object.assign(Object.assign({},i),{sourceDataType:"content"})))}catch(e){if(this._pendingLoads--,this._removed)return void this.fire(new t.k("dataabort",{dataType:"source"}));this.fire(new t.j(e))}}))}loaded(){return 0===this._pendingLoads}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.actor?"reloadTile":"loadTile";e.actor=this.actor;const n={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const r=yield this.actor.sendAsync({type:t,data:n},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(r,this.map.painter,"reloadTile"===t)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Y=t.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class J extends t.E{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(e){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield p.getImage(this.map._requestManager.transformRequest(this.url,f.Image),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(t.Y.fromLngLat);this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,a=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),a=Math.max(a,t.y);const o=Math.max(i-n,a-r),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,s);return new t.a0(s,Math.floor((n+i)/2*l),Math.floor((r+a)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const r=n.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new t.Z,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.W,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.W),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.W,t.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=t.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new L(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Q extends J{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,f.Source).url);try{const e=yield t.a2(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.j(e))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.j(new t.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=t.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new L(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ee extends J{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new t.j(new t.a1(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.j(new t.a1(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.j(new t.a1(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.j(new t.a1(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.j(new t.a1(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=t.$.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new L(n,this.canvas,r.RGBA,{premultiply:!0});let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const te={},ne=e=>{switch(e){case"geojson":return K;case"image":return J;case"raster":return W;case"raster-dem":return X;case"vector":return G;case"video":return Q;case"canvas":return ee}return te[e]},re="RTLPluginLoaded";class ie extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=j()}_syncState(e){return this.status=e,this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e,pluginURL:this.url}).catch((e=>{throw this.status="error",e}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(t.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(t.url=a.resolveURL(e),!t.url)throw new Error(`requested url ${e} is invalid`);if("unavailable"===t.status){if(!n)return t._requestImport();t.status="deferred",t._syncState(t.status)}else if("requested"===t.status)return t._requestImport()}()}))}_requestImport(){return t._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.k(re))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let ae=null;function oe(){return ae||(ae=new ie),ae}class se{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a3(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a5){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a5&&n.hasRTLText){this.hasRTLText=!0,oe().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a4}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new L(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new L(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,a,o,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:a,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:o,queryPadding:this.queryPadding*l},e,t,n):{}}querySourceFeatures(e,n){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),a=n&&n.sourceLayer?n.sourceLayer:"",o=i._geojsonTileLayer||i[a];if(!o)return;const s=t.a6(n&&n.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<o.length;d++){const n=o.feature(d);if(s.needGeometry){const e=t.a7(n,!0);if(!s.filter(new t.a8(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.a8(this.tileID.overscaledZ),n))continue;const i=r.getId(n,a),p=new t.a9(n,l,c,u,i);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.aa(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(n)if(this.expirationTime<n)t=!0;else{const r=this.expirationTime-n;r?this.expirationTime=e+Math.max(r,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!t.style.hasLayer(r))continue;const i=this.buckets[r],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=e[a];if(!o||!s||0===Object.keys(s).length)continue;i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=a.now()+e}setDependencies(e,t){const n={};for(const r of t)n[r]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}}class le{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const n of t)this.remove(n.value.tileID,n)}}class ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,r){const i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.e(this.stateChanges[e][i],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])r[t]||(this.deletedStates[e][i][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,n){const r=String(n),i=t.e({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,n){const r={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const e={};for(const n in this.stateChanges[i])this.state[i][n]||(this.state[i][n]={}),t.e(this.state[i][n],this.stateChanges[i][n]),e[n]=this.state[i][n];r[i]=e}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const e={};if(null===this.deletedStates[i])for(const t in this.state[i])e[t]={},this.state[i][t]={};else for(const t in this.deletedStates[i]){if(null===this.deletedStates[i][t])this.state[i][t]={};else for(const e of Object.keys(this.deletedStates[i][t]))delete this.state[i][t][e];e[t]=this.state[i][t]}r[i]=r[i]||{},t.e(r[i],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const t in e)e[t].setFeatureState(r,n)}}class ue extends t.E{constructor(e,t,n){super(),this.id=e,this.dispatcher=n,this.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((e,t,n,r)=>{const i=new(ne(t.type))(e,t,n,r);if(i.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${i.id}`);return i})(e,t,n,this),this._tiles={},this._cache=new le(0,(e=>this._unloadTile(e))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ce,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,r){return t._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,r)}catch(n){e.state="errored",404!==n.status?this._source.fire(new t.j(n,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(he).map((e=>e.key))}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort(((e,n)=>{const r=e.tileID,i=n.tileID,a=new t.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),o=new t.P(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((e=>e.tileID.key)):n.map((e=>e.tileID)).sort(he).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,n){return t._(this,void 0,void 0,(function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=n),yield this._loadTile(t,e,n))}))}_tileLoaded(e,n,r){e.timeAdded=a.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let a=this._tiles[i];if(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)continue;let o=a.tileID;for(;a&&a.tileID.overscaledZ>t+1;){const e=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[e.key],a&&a.hasData()&&(o=e)}let s=o;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[o.key]=o;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,r=Math.ceil(e.height/this._source.tileSize)+1,i=Math.floor(n*r*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}update(e,n){if(this.transform=e,this.terrain=n,!this._sourceLoaded||this._paused)return;let r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.Q(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=e.coveringZoomLevel(this._source),o=Math.max(i-ue.maxOverzooming,this._source.minzoom),s=Math.max(i+ue.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of r)if(t.canonical.z>this._source.minzoom){const n=t.scaledTo(t.canonical.z-1);e[n.key]=n;const r=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[r.key]=r}r=r.concat(Object.values(e))}const l=0===r.length&&!this._updated&&this._didEmitContent;this._updated=!0,l&&this.fire(new t.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const c=this._updateRetainedTiles(r,i);if(de(this._source.type)){const e={},t={},l=Object.keys(c),u=a.now();for(const n of l){const r=c[n],i=this._tiles[n];if(!i||0!==i.fadeEndTime&&i.fadeEndTime<=u)continue;const a=this.findLoadedParent(r,o);a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[n]=r}this._retainLoadedChildren(t,i,s,c);for(const n in e)c[n]||(this._coveredTiles[n]=!0,c[n]=e[n]);if(n){const e={},t={};for(const n of r)this._tiles[n.key].hasData()?e[n.key]=n:t[n.key]=n;for(const n in t){const r=t[n].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(e[r[0].key]=c[r[0].key]=r[0],e[r[1].key]=c[r[1].key]=r[1],e[r[2].key]=c[r[2].key]=r[2],e[r[3].key]=c[r[3].key]=r[3],delete t[n])}for(const n in t){const r=this.findLoadedParent(t[n],this._source.minzoom);if(r){e[r.tileID.key]=c[r.tileID.key]=r.tileID;for(const t in e)e[t].isChildOf(r.tileID)&&delete e[t]}}for(const n in this._tiles)e[n]||(this._coveredTiles[n]=!0)}}for(const t in c)this._tiles[t].clearFadeHold();const u=t.ab(this._tiles,c);for(const t of u){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){const n={},r={},i=Math.max(t-ue.maxOverzooming,this._source.minzoom),a=Math.max(t+ue.maxUnderzooming,this._source.minzoom),o={};for(const s of e){const e=this._addTile(s);n[s.key]=s,e.hasData()||t<this._source.maxzoom&&(o[s.key]=s)}this._retainLoadedChildren(o,t,a,n);for(const s of e){let e=this._tiles[s.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=s.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){n[e.key]=e;continue}}else{const e=s.children(this._source.maxzoom);if(n[e[0].key]&&n[e[1].key]&&n[e[2].key]&&n[e[3].key])continue}let a=e.wasRequested();for(let t=s.overscaledZ-1;t>=i;--t){const i=s.scaledTo(t);if(r[i.key])break;if(r[i.key]=!0,e=this.getTile(i),!e&&a&&(e=this._addTile(i)),e){const t=e.hasData();if((a||t)&&(n[i.key]=i),a=e.wasRequested(),t)break}}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const r=n;return n||(n=new se(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.k("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,n,r){const i=[],a=this.transform;if(!a)return i;const o=r?a.getCameraQueryGeometry(e):e,s=e.map((e=>a.pointCoordinate(e,this.terrain))),l=o.map((e=>a.pointCoordinate(e,this.terrain))),c=this.getIds();let u=1/0,h=1/0,d=-1/0,p=-1/0;for(const t of l)u=Math.min(u,t.x),h=Math.min(h,t.y),d=Math.max(d,t.x),p=Math.max(p,t.y);for(let f=0;f<c.length;f++){const e=this._tiles[c[f]];if(e.holdingForFade())continue;const r=e.tileID,o=Math.pow(2,a.zoom-e.tileID.overscaledZ),m=n*e.queryPadding*t.W/e.tileSize/o,g=[r.getTilePoint(new t.Y(u,h)),r.getTilePoint(new t.Y(d,p))];if(g[0].x-m<t.W&&g[0].y-m<t.W&&g[1].x+m>=0&&g[1].y+m>=0){const t=s.map((e=>r.getTilePoint(e))),n=l.map((e=>r.getTilePoint(e)));i.push({tile:e,tileID:r,queryGeometry:t,cameraQueryGeometry:n,scale:o})}}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const n of t)n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(de(this._source.type)){const e=a.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}}function he(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function de(e){return"raster"===e||"image"===e||"video"===e}ue.maxOverzooming=10,ue.maxUnderzooming=3;class pe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ac(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const a=n-1,o=this._distances[a],s=r-o,l=s>0?(i-o)/s:0;return this.points[a].mult(1-l).add(this.points[n].mult(l))}}function fe(e,t){let n=!0;return"always"===e||"never"!==e&&"never"!==t||(n=!1),n}class me{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,a){this.boxCells[i].push(a)}_insertCircleCell(e,t,n,r,i,a){this.circleCells[i].push(a)}_query(e,t,n,r,i,a,o){if(n<0||e>this.width||r<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:e,y1:t,x2:n,y2:r}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}}else this._forEachCell(e,t,n,r,this._queryCell,s,{hitTest:i,overlapMode:a,seenUids:{box:{},circle:{}}},o);return s}query(e,t,n,r){return this._query(e,t,n,r,!1,null)}hitTest(e,t,n,r,i,a){return this._query(e,t,n,r,!0,i,a).length>0}hitTestCircle(e,t,n,r,i){const a=e-n,o=e+n,s=t-n,l=t+n;if(o<0||a>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),c.length>0}_queryCell(e,t,n,r,i,a,o,s){const{seenUids:l,hitTest:c,overlapMode:u}=o,h=this.boxCells[i];if(null!==h){const i=this.bboxes;for(const o of h)if(!l.box[o]){l.box[o]=!0;const h=4*o,d=this.boxKeys[o];if(e<=i[h+2]&&t<=i[h+3]&&n>=i[h+0]&&r>=i[h+1]&&(!s||s(d))&&(!c||!fe(u,d.overlapMode))&&(a.push({key:d,x1:i[h],y1:i[h+1],x2:i[h+2],y2:i[h+3]}),c))return!0}}const d=this.circleCells[i];if(null!==d){const i=this.circles;for(const o of d)if(!l.circle[o]){l.circle[o]=!0;const h=3*o,d=this.circleKeys[o];if(this._circleAndRectCollide(i[h],i[h+1],i[h+2],e,t,n,r)&&(!s||s(d))&&(!c||!fe(u,d.overlapMode))){const e=i[h],t=i[h+1],n=i[h+2];if(a.push({key:d,x1:e-n,y1:t-n,x2:e+n,y2:t+n}),c)return!0}}}return!1}_queryCellCircle(e,t,n,r,i,a,o,s){const{circle:l,seenUids:c,overlapMode:u}=o,h=this.boxCells[i];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const n=4*t,r=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(r))&&!fe(u,r.overlapMode))return a.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t,r=this.circleKeys[t];if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(r))&&!fe(u,r.overlapMode))return a.push(!0),!0}}}_forEachCell(e,t,n,r,i,a,o,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+d,a,o,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,a){const o=r-e,s=i-t,l=n+a;return l*l>o*o+s*s}_circleAndRectCollide(e,t,n,r,i,a,o){const s=(a-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(o-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}function ge(e,n,r,i,a){const o=t.F();return n?(t.J(o,o,[1/a,1/a,1]),r||t.ad(o,o,i.angle)):t.K(o,i.labelPlaneMatrix,e),o}function ye(e,n,r,i,a){if(n){const n=t.ae(e);return t.J(n,n,[a,a,1]),r||t.ad(n,n,-i.angle),n}return i.glCoordMatrix}function _e(e,n,r){let i;r?(i=[e.x,e.y,r(e.x,e.y),1],t.af(i,i,n)):(i=[e.x,e.y,0,1],Ae(i,i,n));const a=i[3];return{point:new t.P(i[0]/a,i[1]/a),signedDistanceFromCamera:a}}function ve(e,t){return.5+e/t*.5}function xe(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function be(e,n,r,i,a,o,s,l,c,u){const h=i?e.textSizeData:e.iconSizeData,d=t.ag(h,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],f=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();const m=e.lineVertexArray,g=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=r.transform.width/r.transform.height;let _=!1;for(let v=0;v<g.length;v++){const i=g.get(v);if(i.hidden||i.writingMode===t.ah.vertical&&!_){Pe(i.numGlyphs,f);continue}let x;if(_=!1,u?(x=[i.anchorX,i.anchorY,u(i.anchorX,i.anchorY),1],t.af(x,x,n)):(x=[i.anchorX,i.anchorY,0,1],Ae(x,x,n)),!xe(x,p)){Pe(i.numGlyphs,f);continue}const b=ve(r.transform.cameraToCenterDistance,x[3]),L=t.ai(h,d,i),w=s?L/b:L*b,k=new t.P(i.anchorX,i.anchorY),S=_e(k,a,u).point,C={projections:{},offsets:{}},T=ke(i,w,!1,l,n,a,o,e.glyphOffsetArray,m,f,S,k,C,y,c,u);_=T.useVertical,(T.notEnoughRoom||_||T.needsFlipping&&ke(i,w,!0,l,n,a,o,e.glyphOffsetArray,m,f,S,k,C,y,c,u).notEnoughRoom)&&Pe(i.numGlyphs,f)}i?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function Le(e,t,n,r,i,a,o,s,l,c,u,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(p-1),_=Ie(e*g,n,r,i,a,o,s.segment,f,m,l,c,u,h,d);if(!_)return null;const v=Ie(e*y,n,r,i,a,o,s.segment,f,m,l,c,u,h,d);return v?{first:_,last:v}:null}function we(e,n,r,i){return e===t.ah.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.ah.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function ke(e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=n/24,_=e.lineOffsetX*y,v=e.lineOffsetY*y;let x;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,a=e.lineStartIndex+e.lineLength,u=Le(y,l,_,v,r,h,d,e,c,o,p,m,g);if(!u)return{notEnoughRoom:!0};const b=_e(u.first.point,s,g).point,L=_e(u.last.point,s,g).point;if(i&&!r){const t=we(e.writingMode,b,L,f);if(t)return t}x=[u.first];for(let i=e.glyphStartIndex+1;i<t-1;i++)x.push(Ie(y*l.getoffsetX(i),_,v,r,h,d,e.segment,n,a,c,o,p,m,g));x.push(u.last)}else{if(i&&!r){const n=_e(d,a,g).point,r=e.lineStartIndex+e.segment+1,i=new t.P(c.getx(r),c.gety(r)),o=_e(i,a,g),s=o.signedDistanceFromCamera>0?o.point:Se(d,i,n,1,a,g),l=we(e.writingMode,n,s,f);if(l)return l}const n=Ie(y*l.getoffsetX(e.glyphStartIndex),_,v,r,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,o,p,m,g);if(!n)return{notEnoughRoom:!0};x=[n]}for(const b of x)t.aj(u,b.point,b.angle);return{}}function Se(e,t,n,r,i,a){const o=_e(e.add(e.sub(t)._unit()),i,a).point,s=n.sub(o);return n.add(s._mult(r/s.mag()))}function Ce(e,n){const{projectionCache:r,lineVertexArray:i,labelPlaneMatrix:a,tileAnchorPoint:o,distanceFromAnchor:s,getElevation:l,previousVertex:c,direction:u,absOffsetX:h}=n;if(r.projections[e])return r.projections[e];const d=new t.P(i.getx(e),i.gety(e)),p=_e(d,a,l);if(p.signedDistanceFromCamera>0)return r.projections[e]=p.point,p.point;const f=e-u;return Se(0===s?o:new t.P(i.getx(f),i.gety(f)),d,c,h-s+1,a,l)}function Te(e,t,n){return e._unit()._perp()._mult(t*n)}function Ee(e,n,r,i,a,o,s,l){const{projectionCache:c,direction:u}=l;if(c.offsets[e])return c.offsets[e];const h=r.add(n);if(e+u<i||e+u>=a)return c.offsets[e]=h,h;const d=Ce(e+u,l),p=Te(d.sub(r),s,u),f=r.add(p),m=d.add(p);return c.offsets[e]=t.ak(o,h,f,m)||h,c.offsets[e]}function Ie(e,t,n,r,i,a,o,s,l,c,u,h,d,p){const f=r?e-t:e+t;let m=f>0?1:-1,g=0;r&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);let y,_,v=m>0?s+o:s+o+1,x=i,b=i,L=0,w=0;const k=Math.abs(f),S=[];let C;for(;L+w<=k;){if(v+=m,v<s||v>=l)return null;L+=w,b=x,_=y;const e={projectionCache:h,lineVertexArray:c,labelPlaneMatrix:u,tileAnchorPoint:a,distanceFromAnchor:L,getElevation:p,previousVertex:b,direction:m,absOffsetX:k};if(x=Ce(v,e),0===n)S.push(b),C=x.sub(b);else{let t;const r=x.sub(b);t=0===r.mag()?Te(Ce(v+m,e).sub(x),n,m):Te(r,n,m),_||(_=b.add(t)),y=Ee(v,t,x,s,l,_,n,e),S.push(_),C=y.sub(_)}w=C.mag()}const T=C._mult((k-L)/w)._add(_||b),E=g+Math.atan2(x.y-b.y,x.x-b.x);return S.push(T),{point:T,angle:d?E:0,path:S}}const Me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pe(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(Me,3*e)}}function Ae(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const ze=100;class De{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new me(e.width+200,e.height+200,25),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new me(e.width+200,e.height+200,25);this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ze,this.screenBottomBoundary=e.height+ze,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,n,r,i,a){const o=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY,a),s=n*o.perspectiveRatio,l=e.x1*s+o.point.x,c=e.y1*s+o.point.y,u=e.x2*s+o.point.x,h=e.y2*s+o.point.y;return!this.isInsideGrid(l,c,u,h)||"always"!==t&&this.grid.hitTest(l,c,u,h,t,i)||o.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,c,u,h],offscreen:this.isOffscreen(l,c,u,h)}}placeCollisionCircles(e,n,r,i,a,o,s,l,c,u,h,d,p,f){const m=[],g=new t.P(n.anchorX,n.anchorY),y=_e(g,o,f),_=ve(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),v=(u?a/_:a*_)/t.ao,x=_e(g,s,f).point,b=Le(v,i,n.lineOffsetX*v,n.lineOffsetY*v,!1,x,g,n,r,s,{projections:{},offsets:{}},!1,f);let L=!1,w=!1,k=!0;if(b){const n=.5*d*_+p,r=new t.P(-100,-100),i=new t.P(this.screenRightBoundary,this.screenBottomBoundary),a=new pe,o=b.first,s=b.last;let u=[];for(let e=o.path.length-1;e>=1;e--)u.push(o.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const g=2.5*n;if(l){const e=u.map((e=>_e(e,l,f)));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let y=[];if(u.length>0){const e=u[0].clone(),n=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),n.x=Math.max(n.x,u[t].x),n.y=Math.max(n.y,u[t].y);y=e.x>=r.x&&n.x<=i.x&&e.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||e.x>i.x||n.y<r.y||e.y>i.y?[]:t.al([u],r.x,r.y,i.x,i.y)}for(const t of y){a.reset(t,.25*n);let r=0;r=a.length<=.5*n?1:Math.ceil(a.paddedLength/g)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),o=a.lerp(i),s=o.x+ze,l=o.y+ze;m.push(s,l,n,0);const u=s-n,d=l-n,p=s+n,f=l+n;if(k=k&&this.isOffscreen(u,d,p,f),w=w||this.isInsideGrid(u,d,p,f),"always"!==e&&this.grid.hitTestCircle(s,l,n,e,h)&&(L=!0,!c))return{circles:[],offscreen:!1,collisionDetected:L}}}}return{circles:!c&&L||!w||_<this.perspectiveRatioCutoff?[]:m,offscreen:k,collisionDetected:L}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,a=-1/0,o=-1/0;for(const u of e){const e=new t.P(u.x+ze,u.y+ze);r=Math.min(r,e.x),i=Math.min(i,e.y),a=Math.max(a,e.x),o=Math.max(o,e.y),n.push(e)}const s=this.grid.query(r,i,a,o).concat(this.ignoredGrid.query(r,i,a,o)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.P(u.x1,u.y1),new t.P(u.x2,u.y1),new t.P(u.x2,u.y2),new t.P(u.x1,u.y2)];t.am(n,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(e,t,n,r,i,a){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:a,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i,a){const o=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:a,overlapMode:t};for(let l=0;l<e.length;l+=4)o.insertCircle(s,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,n,r,i){let a;return i?(a=[n,r,i(n,r),1],t.af(a,a,e)):(a=[n,r,0,1],Ae(a,a,e)),{point:new t.P((a[0]/a[3]+1)/2*this.transform.width+ze,(-a[1]/a[3]+1)/2*this.transform.height+ze),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}}isOffscreen(e,t,n,r){return n<ze||e>=this.screenRightBoundary||r<ze||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.an([]);return t.H(e,e,[-100,-100,0]),e}}function Re(e,n,r){return n*(t.W/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}class Fe{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Oe{constructor(e,t,n,r,i){this.text=new Fe(e?e.text:null,t,n,i),this.icon=new Fe(e?e.icon:null,t,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Be{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class Ve{constructor(){this.invProjMatrix=t.F(),this.viewportMatrix=t.F(),this.circles=[]}}class je{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Ne{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function He(e,n,r,i,a){const{horizontalAlign:o,verticalAlign:s}=t.at(e);return new t.P(-(o-.5)*n+i[0]*a,-(s-.5)*r+i[1]*a)}function Ue(e,n,r,i,a,o){const{x1:s,x2:l,y1:c,y2:u,anchorPointX:h,anchorPointY:d}=e,p=new t.P(n,r);return i&&p._rotate(a?o:-o),{x1:s+p.x,y1:c+p.y,x2:l+p.x,y2:u+p.y,anchorPointX:h,anchorPointY:d}}class $e{constructor(e,t,n,r,i){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new De(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Ne(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const a=r.getBucket(n),o=r.latestFeatureIndex;if(!a||!o||n.id!==a.layerIds[0])return;const s=r.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.W,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),f=Re(r,1,this.transform.zoom),m=ge(h,d,p,this.transform,f);let g=null;if(d){const e=ye(h,d,p,this.transform,f);g=t.K([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[a.bucketInstanceId]=new je(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);const y={bucket:a,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.ag(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i)for(const t of a.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:y})}attemptAnchorPlacement(e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=t.ap[e.textAnchor],_=[e.textOffset0,e.textOffset1],v=He(y,r,i,_,a),x=this.collisionIndex.placeCollisionBox(Ue(n,v.x,v.y,o,s,this.transform.angle),h,l,c,u.predicate,g);if((!m||0!==this.collisionIndex.placeCollisionBox(Ue(m,v.x,v.y,o,s,this.transform.angle),h,l,c,u.predicate,g).box.length)&&x.box.length>0){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(e=this.prevPlacement.variableOffsets[d.crossTileID].anchor),0===d.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[d.crossTileID]={textOffset:_,width:r,height:i,anchor:y,textBoxScale:a,prevAnchor:e},this.markUsedJustification(p,y,d,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,d),this.placedOrientations[d.crossTileID]=f),{shift:v,placedGlyphBoxes:x}}}placeLayerBucketPart(e,n,r){const{bucket:i,layout:a,posMatrix:o,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:d,collisionGroup:p}=e.parameters,f=a.get("text-optional"),m=a.get("icon-optional"),g=t.aq(a,"text-overlap","text-allow-overlap"),y="always"===g,_=t.aq(a,"icon-overlap","icon-allow-overlap"),v="always"===_,x="map"===a.get("text-rotation-alignment"),b="map"===a.get("text-pitch-alignment"),L="none"!==a.get("icon-text-fit"),w="viewport-y"===a.get("symbol-z-order"),k=y&&(v||!i.hasIconData()||m),S=v&&(y||!i.hasTextData()||f);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const C=this.retainedQueryData[i.bucketInstanceId].tileID,T=this.terrain?(e,t)=>this.terrain.getElevation(C,e,t):null,E=(e,h)=>{var v,w;if(n[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new Be(!1,!1,!1));let C=!1,E=!1,I=!0,M=null,P={box:null,offscreen:null},A={box:null,offscreen:null},z=null,D=null,R=null,F=0,O=0,B=0;h.textFeatureIndex?F=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(F=e.featureIndex),h.verticalTextFeatureIndex&&(O=h.verticalTextFeatureIndex);const V=h.textBox;if(V){const n=n=>{let r=t.ah.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(i,r,e))}return r},r=(n,r)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of i.writingModes)if(e===t.ah.vertical?(P=r(),A=P):P=n(),P&&P.box&&P.box.length)break}else P=n()},a=e.textAnchorOffsetStartIndex,s=e.textAnchorOffsetEndIndex;if(s===a){const a=(t,n)=>{const r=this.collisionIndex.placeCollisionBox(t,g,c,o,p.predicate,T);return r&&r.box&&r.box.length&&(this.markUsedOrientation(i,n,e),this.placedOrientations[e.crossTileID]=n),r};r((()=>a(V,t.ah.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?a(n,t.ah.vertical):{box:null,offscreen:null}})),n(P&&P.box&&P.box.length)}else{let l=t.ap[null===(w=null===(v=this.prevPlacement)||void 0===v?void 0:v.variableOffsets[e.crossTileID])||void 0===w?void 0:w.anchor];const u=(t,n,r)=>{const u=t.x2-t.x1,h=t.y2-t.y1,d=e.textBoxScale,f=L&&"never"===_?n:null;let m={box:[],offscreen:!1},y="never"===g?1:2,v="never";l&&y++;for(let _=0;_<y;_++){for(let n=a;n<s;n++){const a=i.textAnchorOffsets.get(n);if(l&&a.textAnchor!==l)continue;const s=this.attemptAnchorPlacement(a,t,u,h,d,x,b,c,o,p,v,e,i,r,f,T);if(s&&(m=s.placedGlyphBoxes,m&&m.box&&m.box.length))return C=!0,M=s.shift,m}l?l=null:v=g}return m};r((()=>u(V,h.iconBox,t.ah.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&e.numVerticalGlyphVertices>0&&n?u(n,h.verticalIconBox,t.ah.vertical):{box:null,offscreen:null}})),P&&(C=P.box,I=P.offscreen);const d=n(P&&P.box);if(!C&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,d))}}}if(z=P,C=z&&z.box&&z.box.length>0,I=z&&z.offscreen,e.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),c=t.ai(i.textSizeData,d,n),u=a.get("text-padding");D=this.collisionIndex.placeCollisionCircles(g,n,i.lineVertexArray,i.glyphOffsetArray,c,o,s,l,r,b,p.predicate,e.collisionCircleDiameter,u,T),D.circles.length&&D.collisionDetected&&!r&&t.w("Collisions detected, but collision boxes are not shown"),C=y||D.circles.length>0&&!D.collisionDetected,I=I&&D.offscreen}if(h.iconFeatureIndex&&(B=h.iconFeatureIndex),h.iconBox){const e=e=>{const t=L&&M?Ue(e,M.x,M.y,x,b,this.transform.angle):e;return this.collisionIndex.placeCollisionBox(t,_,c,o,p.predicate,T)};A&&A.box&&A.box.length&&h.verticalIconBox?(R=e(h.verticalIconBox),E=R.box.length>0):(R=e(h.iconBox),E=R.box.length>0),I=I&&R.offscreen}const j=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,N=m||0===e.numIconVertices;if(j||N?N?j||(E=E&&C):C=E&&C:E=C=E&&C,C&&z&&z.box&&this.collisionIndex.insertCollisionBox(z.box,g,a.get("text-ignore-placement"),i.bucketInstanceId,A&&A.box&&O?O:F,p.ID),E&&R&&this.collisionIndex.insertCollisionBox(R.box,_,a.get("icon-ignore-placement"),i.bucketInstanceId,B,p.ID),D&&(C&&this.collisionIndex.insertCollisionCircles(D.circles,g,a.get("text-ignore-placement"),i.bucketInstanceId,F,p.ID),r)){const e=i.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Ve);for(let n=0;n<D.circles.length;n+=4)t.circles.push(D.circles[n+0]),t.circles.push(D.circles[n+1]),t.circles.push(D.circles[n+2]),t.circles.push(D.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Be(C||k,E||S,I||i.justReloaded),n[e.crossTileID]=!0};if(w){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];E(i.symbolInstances.get(n),i.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)E(i.symbolInstances.get(t),i.collisionArrays[t]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[i.bucketInstanceId];t.ar(e.invProjMatrix,o),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(e,n,r,i){let a;a=i===t.ah.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.as(n)];const o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of o)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:r.crossTileID)}markUsedOrientation(e,n,r){const i=n===t.ah.horizontal||n===t.ah.horizontalOnly?n:0,a=n===t.ah.vertical?n:0,o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of o)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=a)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=i[s];t?(this.opacities[s]=new Oe(t,r,e.text,e.icon),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new Oe(null,r,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const s in i){const e=i[s];if(!this.opacities[s]){const t=new Oe(e,r,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in a)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=a[s]);for(const s in o)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=o[s]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0],a=i.layout,o=new Oe(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),c=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),u="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),d="none"!==a.get("icon-text-fit"),p=new Oe(null,0,s&&(l||!e.hasIconData()||a.get("icon-optional")),l&&(s||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const f=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n);e.hasVisibleVertices=e.hasVisibleVertices||n!==et};for(let m=0;m<e.symbolInstances.length;m++){const r=e.symbolInstances.get(m),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:a,crossTileID:s}=r;let l=this.opacities[s];n[s]?l=o:l||(l=p,this.opacities[s]=l),n[s]=!0;const g=r.numIconVertices>0,y=this.placedOrientations[r.crossTileID],_=y===t.ah.vertical,v=y===t.ah.horizontal||y===t.ah.horizontalOnly;if(i>0||a>0){const t=Qe(l.text);f(e.text,i,_?et:t),f(e.text,a,v?et:t);const n=l.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||_?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||v?1:0);const o=this.variableOffsets[r.crossTileID];o&&this.markUsedJustification(e,o.anchor,r,y);const s=this.placedOrientations[r.crossTileID];s&&(this.markUsedJustification(e,"left",r,s),this.markUsedOrientation(e,s,r))}if(g){const t=Qe(l.icon),n=!(d&&r.verticalPlacedIconSymbolIndex&&_);r.placedIconSymbolIndex>=0&&(f(e.icon,r.numIconVertices,n?t:et),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=l.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,r.numVerticalIconVertices,n?et:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[m];if(n){let r=new t.P(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(c){const e=this.variableOffsets[s];e?(r=He(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&Ze(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||_,r.x,r.y),n.verticalTextBox&&Ze(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||v,r.x,r.y)}const i=Boolean(!v&&n.verticalIconBox);n.iconBox&&Ze(e.iconCollisionBox.collisionVertexArray,l.icon.placed,i,d?r.x:0,d?r.y:0),n.verticalIconBox&&Ze(e.iconCollisionBox.collisionVertexArray,l.icon.placed,!i,d?r.x:0,d?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Ze(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const qe=Math.pow(2,25),Ge=Math.pow(2,24),We=Math.pow(2,17),Xe=Math.pow(2,16),Ke=Math.pow(2,9),Ye=Math.pow(2,8),Je=Math.pow(2,1);function Qe(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*qe+t*Ge+n*We+t*Xe+n*Ke+t*Ye+n*Je+t}const et=0;class tt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const a=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<a.length;)if(t.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class nt{constructor(e,t,n,r,i,a,o,s){this.placement=new $e(e,t,a,o,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,t,n){const r=a.now(),i=()=>!this._forceFullPlacement&&a.now()-r>2;for(;this._currentPlacementIndex>=0;){const r=t[e[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if("symbol"===r.type&&(!r.minzoom||r.minzoom<=a)&&(!r.maxzoom||r.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new tt(r)),this._inProgressLayer.continuePlacement(n[r.source],this.placement,this._showCollisionBoxes,r,i))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const rt=512/t.W/2;class it{constructor(e,n,r){this.tileID=e,this.bucketInstanceId=r,this._symbolsByKey={};const i=new Map;for(let t=0;t<n.length;t++){const e=n.get(t),r=e.key,a=i.get(r);a?a.push(e):i.set(r,[e])}for(const[a,o]of i){const e={positions:o.map((e=>({x:Math.floor(e.anchorX*rt),y:Math.floor(e.anchorY*rt)}))),crossTileIDs:o.map((e=>e.crossTileID))};if(e.positions.length>128){const n=new t.au(e.positions.length,16,Uint16Array);for(const{x:t,y:r}of e.positions)n.add(t,r);n.finish(),delete e.positions,e.index=n}this._symbolsByKey[a]=e}}getScaledCoordinates(e,n){const{x:r,y:i,z:a}=this.tileID.canonical,{x:o,y:s,z:l}=n.canonical,c=rt/Math.pow(2,l-a),u=(s*t.W+e.anchorY)*c,h=i*t.W*rt;return{x:Math.floor((o*t.W+e.anchorX)*c-r*t.W*rt),y:Math.floor(u-h)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const a=e.get(i);if(a.crossTileID)continue;const o=this._symbolsByKey[a.key];if(!o)continue;const s=this.getScaledCoordinates(a,t);if(o.index){const e=o.index.range(s.x-r,s.y-r,s.x+r,s.y+r).sort();for(const t of e){const e=o.crossTileIDs[t];if(!n[e]){n[e]=!0,a.crossTileID=e;break}}}else if(o.positions)for(let e=0;e<o.positions.length;e++){const t=o.positions[e],i=o.crossTileIDs[e];if(Math.abs(t.x-s.x)<=r&&Math.abs(t.y-s.y)<=r&&!n[i]){n[i]=!0,a.crossTileID=i;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((e=>{let{crossTileIDs:t}=e;return t}))}}class at{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ot{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],r={};for(const n in e){const i=e[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const a=n[i];a.tileID.isChildOf(e)&&a.findMatches(t.symbolInstances,e,r)}else{const a=n[e.scaledTo(Number(i)).key];a&&a.findMatches(t.symbolInstances,e,r)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=n.generate(),r[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new it(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.getCrossTileIDsLists())for(const t of n)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class st{constructor(){this.layerIndexes={},this.crossTileIDs=new at,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new ot);let i=!1;const a={};r.handleWrapJump(n);for(const o of t){const t=o.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(o.tileID,t,this.crossTileIDs)&&(i=!0),a[t.bucketInstanceId]=!0)}return r.removeStaleBuckets(a)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const lt=(e,n)=>t.t(e,n&&n.filter((e=>"source.canvas"!==e.identifier))),ct=t.av();class ut extends t.E{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new V(B(),e._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",((e,t)=>this.getGlyphs(e,t))),this.dispatcher.registerMessageHandler("getImages",((e,t)=>this.getImages(e,t))),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new E(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new A(256,512),this.crossTileSymbolIndex=new st,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.ax()),oe().on(re,this._rtlPluginLoaded),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const n=t.getSource();if(n&&n.vectorLayerIds)for(const r in this._layers){const e=this._layers[r];e.source===n.id&&this._validateLayer(e)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),n.validate="boolean"!=typeof n.validate||n.validate;const i=this.map._requestManager.transformRequest(e,f.Style);this._loadStyleRequest=new AbortController,t.h(i,this._loadStyleRequest).then((e=>{this._loadStyleRequest=null,this._load(e.data,n,r)})).catch((e=>{this._loadStyleRequest=null,e&&this.fire(new t.j(e))}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,a.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,n.validate=!1!==n.validate,this._load(e,n,r)})).catch((()=>{}))}loadEmpty(){this.fire(new t.k("dataloading",{dataType:"style"})),this._load(ct,{validate:!1})}_load(e,n,r){var i;const a=n.transformStyle?n.transformStyle(r,e):e;if(!n.validate||!lt(this,t.x(a))){this._loaded=!0,this.stylesheet=a;for(const e in a.sources)this.addSource(e,a.sources[e],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs),this._createLayers(),this.light=new P(this.stylesheet.light),this.map.setTerrain(null!==(i=this.stylesheet.terrain)&&void 0!==i?i:null),this.fire(new t.k("data",{dataType:"style"})),this.fire(new t.k("style.load"))}}_createLayers(){const e=t.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",e),this._order=e.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const n of e){const e=t.az(n);e.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=e}}_loadSprite(e){let n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,n,r,i){return t._(this,void 0,void 0,(function*(){const o=b(e),s=r>1?"@2x":"",l={},c={};for(const{id:e,url:r}of o){const a=n.transformRequest(n.normalizeSpriteURL(r,s,".json"),f.SpriteJSON);l[e]=t.h(a,i);const o=n.transformRequest(n.normalizeSpriteURL(r,s,".png"),f.SpriteImage);c[e]=p.getImage(o,i)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,n){return t._(this,void 0,void 0,(function*(){const t={};for(const r in e){t[r]={};const i=a.getImageCanvasContext((yield n[r]).data),o=(yield e[r]).data;for(const e in o){const{width:n,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=o[e];t[r][e]={data:null,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,spriteData:{width:n,height:a,x:s,y:l,context:i}}}}return t}))}(l,c)}))}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const n=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter((t=>!(t in e))):[];for(const e of n)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const i in e[t]){const n="default"===t?i:`${t}:${i}`;this._spritesImagesIds[t].push(n),n in this.imageManager.images?this.imageManager.updateImage(n,e[t][i],!1):this.imageManager.addImage(n,e[t][i]),r&&(this._changedImages[n]=!0)}}})).catch((e=>{this._spriteRequest=null,n=e,this.fire(new t.j(n))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"})),i&&i(n)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const r=e.sourceLayer;if(!r)return;const i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.j(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){const t=this._serializedAllLayers();if(!e||0===e.length)return Object.values(t);const n=[];for(const r of e)t[r]&&n.push(t[r]);return n}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const n of t){const t=this._layers[n];"custom"!==t.type&&(e[n]=t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const i in r){const e=this.sourceCaches[i];r[i]!==e.used&&e.fire(new t.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:i}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this._checkLoaded();const i=this.serialize();if(e=n.transformStyle?n.transformStyle(i,e):e,(null===(r=n.validate)||void 0===r||r)&&lt(this,t.x(e)))return!1;(e=t.aA(e)).layers=t.ay(e.layers);const a=t.aB(i,e),o=this._getOperationsToPerform(a);if(o.unimplemented.length>0)throw new Error(`Unimplemented: ${o.unimplemented.join(", ")}.`);if(0===o.operations.length)return!1;for(const t of o.operations)t();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],n=[];for(const r of e)switch(r.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":t.push((()=>this.addLayer.apply(this,r.args)));break;case"removeLayer":t.push((()=>this.removeLayer.apply(this,r.args)));break;case"setPaintProperty":t.push((()=>this.setPaintProperty.apply(this,r.args)));break;case"setLayoutProperty":t.push((()=>this.setLayoutProperty.apply(this,r.args)));break;case"setFilter":t.push((()=>this.setFilter.apply(this,r.args)));break;case"addSource":t.push((()=>this.addSource.apply(this,r.args)));break;case"removeSource":t.push((()=>this.removeSource.apply(this,r.args)));break;case"setLayerZoomRange":t.push((()=>this.setLayerZoomRange.apply(this,r.args)));break;case"setLight":t.push((()=>this.setLight.apply(this,r.args)));break;case"setGeoJSONSourceData":t.push((()=>this.setGeoJSONSourceData.apply(this,r.args)));break;case"setGlyphs":t.push((()=>this.setGlyphs.apply(this,r.args)));break;case"setSprite":t.push((()=>this.setSprite.apply(this,r.args)));break;case"setTerrain":t.push((()=>this.map.setTerrain.apply(this,r.args)));break;case"setTransition":t.push((()=>{}));break;default:n.push(r.command)}return{operations:t,unimplemented:n}}addImage(e,n){if(this.getImage(e))return this.fire(new t.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.x.source,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=this.sourceCaches[e]=new ue(e,n,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:i.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.j(new Error(`Source "${e}" cannot be removed while layer "${r}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const n=this.sourceCaches[e].getSource();if("geojson"!==n.type)throw new Error(`geojsonSource.type is ${n.type}, which is !== 'geojson`);n.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.j(new Error(`Layer "${i}" already exists on this map.`)));let a;if("custom"===e.type){if(lt(this,t.aC(e)))return;a=t.az(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(i,e.source),e=t.aA(e),e=t.e(e,{source:i})),this._validate(t.x.layer,`layers.${i}`,e,{arrayIndex:-1},r))return;a=t.az(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}})}const o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new t.j(new Error(`Cannot add layer "${i}" before non-existing layer "${n}".`)));else{if(this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a,this._removedLayers[i]&&a.source&&"custom"!==a.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.j(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.j(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=this.getLayer(e);if(i){if(!t.aD(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.x.filter,`layers.${i.id}.filter`,n,null,r)||(i.filter=t.aA(n),this._updateLayer(i)))}else this.fire(new t.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.aA(this.getLayer(e).filter)}setLayoutProperty(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(e);a?t.aD(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,i),this._updateLayer(a)):this.fire(new t.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(e);a?t.aD(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,a=this.sourceCaches[r];if(void 0===a)return void this.fire(new t.j(new Error(`The source '${r}' does not exist in the map's style.`)));const o=a.getSource().type;"geojson"===o&&i?this.fire(new t.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||i?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),a.setFeatureState(i,e.id,n)):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new t.j(new Error(`The source '${r}' does not exist in the map's style.`)));const a=i.getSource().type,o="vector"===a?e.sourceLayer:void 0;"vector"!==a||o?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.j(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(o,e.id,n):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.j(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.aE(this.sourceCaches,(e=>e.serialize())),n=this._serializeByIds(this._order),r=this.map.getTerrain()||void 0,i=this.stylesheet;return t.aF({version:i.version,name:i.name,metadata:i.metadata,light:i.light,center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,sprite:i.sprite,glyphs:i.glyphs,transition:i.transition,sources:e,layers:n,terrain:r},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let a=this._order.length-1;a>=0;a--){const i=this._order[a];if(t(i)){n[i]=a;for(const t of e){const e=t[i];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let a=this._order.length-1;a>=0;a--){const o=this._order[a];if(t(o))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<a)break;i.push(t),r.pop()}else for(const t of e){const e=t[o];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.x.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.j(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const a=[];n.availableImages=this._availableImages;const o=this._serializedAllLayers();for(const t in this.sourceCaches)n.layers&&!i[t]||a.push(H(this.sourceCaches[t],this._layers,o,e,n,r));return this.placement&&a.push(function(e,t,n,r,i,a,o){const s={},l=a.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(o[u]);c.sort(U);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],r=n[e];r.sort(((e,t)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e)}}for(const u in s)s[u].forEach((t=>{const r=t.feature,i=n[e[u].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return s}(this._layers,o,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.x.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this.sourceCaches[e];return r?function(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let a=0;a<n.length;a++){const e=n[a],o=e.tileID.canonical.key;i[o]||(i[o]=!0,e.querySourceFeatures(r,t))}return r}(r,n):[]}getLight(){return this.light.getLight()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in e)if(!t.aD(e[a],r[a])){i=!0;break}if(!i)return;const o={now:a.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}_validate(e,n,r,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&lt(this,e.call(t.x,t.e({key:n,style:this.serialize(),value:r,styleSpec:t.v},i)))}_remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),oe().off(re,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("removeMap",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!1,s=!1;const l={};for(const a of this._order){const t=this._layers[a];if("symbol"!==t.type)continue;if(!l[t.source]){const e=this.sourceCaches[t.source];l[t.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(t,l[t.source],e.center.lng);o=o||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.now(),e.zoom))&&(this.pauseablePlacement=new nt(e,this.map.terrain,this._order,i,t,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(const a of this._order){const e=this._layers[a];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,n){return t._(this,void 0,void 0,(function*(){const e=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,n.icons),e}))}getGlyphs(e,n){return t._(this,void 0,void 0,(function*(){const e=yield this.glyphManager.getGlyphs(n.stacks),t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,[""]),e}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.x.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const a=[{id:e,url:n}],o=[...b(this.stylesheet.sprite),...a];this._validate(t.x.sprite,"sprite",o,null,r)||(this.stylesheet.sprite=o,this._loadSprite(a,!0,i))}removeSprite(e){this._checkLoaded();const n=b(this.stylesheet.sprite);if(n.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;n.splice(n.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}else this.fire(new t.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return b(this.stylesheet.sprite)}setSprite(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.x.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,r):(this._unloadSprite(),r&&r(null)))}}var ht=t.X([{name:"a_pos",type:"Int16",components:2}]),dt="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const pt={prelude:ft("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ft("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ft("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ft("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ft("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ft("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ft("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ft("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ft("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ft("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ft("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ft("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ft("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ft("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ft("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ft("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ft("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ft("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ft("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ft("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ft("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ft("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ft("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ft("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ft("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ft("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ft("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",dt),terrainDepth:ft("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",dt),terrainCoords:ft("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",dt)};function ft(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=a?a.concat(i):i,s={};return{fragmentSource:e=e.replace(n,((e,t,n,r,i)=>(s[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(n,((e,t,n,r,i)=>{const a="float"===r?"vec2":"vec4",o=i.match(/color/)?"color":a;return s[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${a} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${o}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${a} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${o}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:r,staticUniforms:o}}class mt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,r,i,a,o,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!c&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||c||this.boundIndexBuffer!==i||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,n,r,i,a,o,s,l):(e.bindVertexArray.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind(),l&&l.bind())}freshBind(e,t,n,r,i,a,o,s){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o,this.boundDynamicVertexBuffer3=s,t.enableAttributes(u,e);for(const h of n)h.enableAttributes(u,e);a&&a.enableAttributes(u,e),o&&o.enableAttributes(u,e),s&&s.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const h of n)h.bind(),h.setVertexAttribPointers(u,e,i);a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),s&&(s.bind(),s.setVertexAttribPointers(u,e,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function gt(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}class yt{constructor(e,n,r,i,a,o){const s=e.gl;this.program=s.createProgram();const l=gt(n.staticAttributes),c=r?r.getBinderAttributes():[],u=l.concat(c),h=pt.prelude.staticUniforms?gt(pt.prelude.staticUniforms):[],d=n.staticUniforms?gt(n.staticUniforms):[],p=r?r.getBinderUniforms():[],f=h.concat(d).concat(p),m=[];for(const t of f)m.indexOf(t)<0&&m.push(t);const g=r?r.defines():[];a&&g.push("#define OVERDRAW_INSPECTOR;"),o&&g.push("#define TERRAIN3D;");const y=g.concat(pt.prelude.fragmentSource,n.fragmentSource).join("\n"),_=g.concat(pt.prelude.vertexSource,n.vertexSource).join("\n"),v=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(v,y),s.compileShader(v),!s.getShaderParameter(v,s.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${s.getShaderInfoLog(v)}`);s.attachShader(this.program,v);const x=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(x,_),s.compileShader(x),!s.getShaderParameter(x,s.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${s.getShaderInfoLog(x)}`);s.attachShader(this.program,x),this.attributes={};const b={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);if(s.linkProgram(this.program),!s.getProgramParameter(this.program,s.LINK_STATUS))throw new Error(`Program failed to link: ${s.getProgramInfoLog(this.program)}`);s.deleteShader(x),s.deleteShader(v);for(let t=0;t<m.length;t++){const e=m[t];if(e&&!b[e]){const t=s.getUniformLocation(this.program,e);t&&(b[e]=t)}}this.fixedUniforms=i(e,b),this.terrainUniforms=((e,n)=>({u_depth:new t.aG(e,n.u_depth),u_terrain:new t.aG(e,n.u_terrain),u_terrain_dim:new t.aH(e,n.u_terrain_dim),u_terrain_matrix:new t.aI(e,n.u_terrain_matrix),u_terrain_unpack:new t.aJ(e,n.u_terrain_unpack),u_terrain_exaggeration:new t.aH(e,n.u_terrain_exaggeration)}))(e,b),this.binderUniforms=r?r.getUniforms(e,b):[]}draw(e,t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(a),s){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,s.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}for(const x in this.fixedUniforms)this.fixedUniforms[x].set(o[x]);f&&f.setUniforms(e,this.binderUniforms,d,{zoom:p});let v=0;switch(t){case _.LINES:v=2;break;case _.TRIANGLES:v=3;break;case _.LINE_STRIP:v=1}for(const x of h.get()){const n=x.vaos||(x.vaos={});(n[l]||(n[l]=new mt)).bind(e,this,c,f?f.getPaintVertexBuffers():[],u,x.vertexOffset,m,g,y),_.drawElements(t,x.primitiveLength*v,_.UNSIGNED_SHORT,x.primitiveOffset*v*2)}}}function _t(e,t,n){const r=1/Re(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,o=a*(n.tileID.canonical.x+n.tileID.wrap*i),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}const vt=(e,n,r,i)=>{const a=n.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],l=function(){var e=new t.A(9);return t.A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===a.properties.get("anchor")&&function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(l,-n.transform.angle),function(e,t,n){var r=t[0],i=t[1],a=t[2];e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8]}(s,s,l);const c=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},xt=(e,n,r,i,a,o,s)=>t.e(vt(e,n,r,i),_t(o,n,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8}),bt=e=>({u_matrix:e}),Lt=(e,n,r,i)=>t.e(bt(e),_t(r,n,i)),wt=(e,t)=>({u_matrix:e,u_world:t}),kt=(e,n,r,i,a)=>t.e(Lt(e,n,r,i),{u_world:a}),St=(e,t,n,r)=>{const i=e.transform;let a,o;if("map"===r.paint.get("circle-pitch-alignment")){const e=Re(n,1,i.zoom);a=!0,o=[e,e]}else a=!1,o=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:o}},Ct=(e,t,n)=>{const r=Re(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),a=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:a}},Tt=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Et=e=>({u_matrix:e}),It=(e,t,n,r)=>({u_matrix:e,u_extrude_scale:Re(t,1,n),u_intensity:r});function Mt(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.Y(0,i/r).toLngLat().lat,new t.Y(0,(i+1)/r).toLngLat().lat]}const Pt=(e,t,n,r)=>{const i=e.transform;return{u_matrix:Ft(e,t,n,r),u_ratio:1/Re(t,1,i.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},At=(e,n,r,i,a)=>t.e(Pt(e,n,r,a),{u_image:0,u_image_height:i}),zt=(e,t,n,r,i)=>{const a=e.transform,o=Rt(t,a);return{u_matrix:Ft(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Re(t,1,a.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Dt=(e,n,r,i,a,o)=>{const s=e.lineAtlas,l=Rt(n,e.transform),c="round"===r.layout.get("line-cap"),u=s.getDash(i.from,c),h=s.getDash(i.to,c),d=u.width*a.fromScale,p=h.width*a.toScale;return t.e(Pt(e,n,r,o),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:a.t})};function Rt(e,t){return 1/Re(e,1,t.tileZoom)}function Ft(e,t,n,r){return e.translatePosMatrix(r?r.posMatrix:t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Ot=(e,t,n,r,i)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(o=i.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Bt(i.paint.get("raster-hue-rotate"))};var a,o};function Bt(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const Vt=(e,t,n,r,i,a,o,s,l,c)=>{const u=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},jt=(e,n,r,i,a,o,s,l,c,u,h)=>{const d=a.transform;return t.e(Vt(e,n,r,i,a,o,s,l,c,u),{u_gamma_scale:i?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:+h})},Nt=(e,n,r,i,a,o,s,l,c,u)=>t.e(jt(e,n,r,i,a,o,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Ht=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),Ut=(e,n,r,i,a,o)=>t.e(function(e,t,n,r){const i=n.imageManager.getPattern(e.from.toString()),a=n.imageManager.getPattern(e.to.toString()),{width:o,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[o,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Re(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,o,r,a),{u_matrix:e,u_opacity:n}),$t={fillExtrusion:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_lightpos:new t.aK(e,n.u_lightpos),u_lightintensity:new t.aH(e,n.u_lightintensity),u_lightcolor:new t.aK(e,n.u_lightcolor),u_vertical_gradient:new t.aH(e,n.u_vertical_gradient),u_opacity:new t.aH(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_lightpos:new t.aK(e,n.u_lightpos),u_lightintensity:new t.aH(e,n.u_lightintensity),u_lightcolor:new t.aK(e,n.u_lightcolor),u_vertical_gradient:new t.aH(e,n.u_vertical_gradient),u_height_factor:new t.aH(e,n.u_height_factor),u_image:new t.aG(e,n.u_image),u_texsize:new t.aL(e,n.u_texsize),u_pixel_coord_upper:new t.aL(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aL(e,n.u_pixel_coord_lower),u_scale:new t.aK(e,n.u_scale),u_fade:new t.aH(e,n.u_fade),u_opacity:new t.aH(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_image:new t.aG(e,n.u_image),u_texsize:new t.aL(e,n.u_texsize),u_pixel_coord_upper:new t.aL(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aL(e,n.u_pixel_coord_lower),u_scale:new t.aK(e,n.u_scale),u_fade:new t.aH(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_world:new t.aL(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_world:new t.aL(e,n.u_world),u_image:new t.aG(e,n.u_image),u_texsize:new t.aL(e,n.u_texsize),u_pixel_coord_upper:new t.aL(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aL(e,n.u_pixel_coord_lower),u_scale:new t.aK(e,n.u_scale),u_fade:new t.aH(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.aH(e,n.u_camera_to_center_distance),u_scale_with_map:new t.aG(e,n.u_scale_with_map),u_pitch_with_map:new t.aG(e,n.u_pitch_with_map),u_extrude_scale:new t.aL(e,n.u_extrude_scale),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_matrix:new t.aI(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_camera_to_center_distance:new t.aH(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.aH(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.aL(e,n.u_extrude_scale),u_overscale_factor:new t.aH(e,n.u_overscale_factor)}),collisionCircle:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_inv_matrix:new t.aI(e,n.u_inv_matrix),u_camera_to_center_distance:new t.aH(e,n.u_camera_to_center_distance),u_viewport_size:new t.aL(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.aM(e,n.u_color),u_matrix:new t.aI(e,n.u_matrix),u_overlay:new t.aG(e,n.u_overlay),u_overlay_scale:new t.aH(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.aH(e,n.u_extrude_scale),u_intensity:new t.aH(e,n.u_intensity),u_matrix:new t.aI(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_world:new t.aL(e,n.u_world),u_image:new t.aG(e,n.u_image),u_color_ramp:new t.aG(e,n.u_color_ramp),u_opacity:new t.aH(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_image:new t.aG(e,n.u_image),u_latrange:new t.aL(e,n.u_latrange),u_light:new t.aL(e,n.u_light),u_shadow:new t.aM(e,n.u_shadow),u_highlight:new t.aM(e,n.u_highlight),u_accent:new t.aM(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_image:new t.aG(e,n.u_image),u_dimension:new t.aL(e,n.u_dimension),u_zoom:new t.aH(e,n.u_zoom),u_unpack:new t.aJ(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_ratio:new t.aH(e,n.u_ratio),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aL(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_ratio:new t.aH(e,n.u_ratio),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aL(e,n.u_units_to_pixels),u_image:new t.aG(e,n.u_image),u_image_height:new t.aH(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_texsize:new t.aL(e,n.u_texsize),u_ratio:new t.aH(e,n.u_ratio),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_image:new t.aG(e,n.u_image),u_units_to_pixels:new t.aL(e,n.u_units_to_pixels),u_scale:new t.aK(e,n.u_scale),u_fade:new t.aH(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_ratio:new t.aH(e,n.u_ratio),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aL(e,n.u_units_to_pixels),u_patternscale_a:new t.aL(e,n.u_patternscale_a),u_patternscale_b:new t.aL(e,n.u_patternscale_b),u_sdfgamma:new t.aH(e,n.u_sdfgamma),u_image:new t.aG(e,n.u_image),u_tex_y_a:new t.aH(e,n.u_tex_y_a),u_tex_y_b:new t.aH(e,n.u_tex_y_b),u_mix:new t.aH(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_tl_parent:new t.aL(e,n.u_tl_parent),u_scale_parent:new t.aH(e,n.u_scale_parent),u_buffer_scale:new t.aH(e,n.u_buffer_scale),u_fade_t:new t.aH(e,n.u_fade_t),u_opacity:new t.aH(e,n.u_opacity),u_image0:new t.aG(e,n.u_image0),u_image1:new t.aG(e,n.u_image1),u_brightness_low:new t.aH(e,n.u_brightness_low),u_brightness_high:new t.aH(e,n.u_brightness_high),u_saturation_factor:new t.aH(e,n.u_saturation_factor),u_contrast_factor:new t.aH(e,n.u_contrast_factor),u_spin_weights:new t.aK(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.aG(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aG(e,n.u_is_size_feature_constant),u_size_t:new t.aH(e,n.u_size_t),u_size:new t.aH(e,n.u_size),u_camera_to_center_distance:new t.aH(e,n.u_camera_to_center_distance),u_pitch:new t.aH(e,n.u_pitch),u_rotate_symbol:new t.aG(e,n.u_rotate_symbol),u_aspect_ratio:new t.aH(e,n.u_aspect_ratio),u_fade_change:new t.aH(e,n.u_fade_change),u_matrix:new t.aI(e,n.u_matrix),u_label_plane_matrix:new t.aI(e,n.u_label_plane_matrix),u_coord_matrix:new t.aI(e,n.u_coord_matrix),u_is_text:new t.aG(e,n.u_is_text),u_pitch_with_map:new t.aG(e,n.u_pitch_with_map),u_texsize:new t.aL(e,n.u_texsize),u_texture:new t.aG(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.aG(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aG(e,n.u_is_size_feature_constant),u_size_t:new t.aH(e,n.u_size_t),u_size:new t.aH(e,n.u_size),u_camera_to_center_distance:new t.aH(e,n.u_camera_to_center_distance),u_pitch:new t.aH(e,n.u_pitch),u_rotate_symbol:new t.aG(e,n.u_rotate_symbol),u_aspect_ratio:new t.aH(e,n.u_aspect_ratio),u_fade_change:new t.aH(e,n.u_fade_change),u_matrix:new t.aI(e,n.u_matrix),u_label_plane_matrix:new t.aI(e,n.u_label_plane_matrix),u_coord_matrix:new t.aI(e,n.u_coord_matrix),u_is_text:new t.aG(e,n.u_is_text),u_pitch_with_map:new t.aG(e,n.u_pitch_with_map),u_texsize:new t.aL(e,n.u_texsize),u_texture:new t.aG(e,n.u_texture),u_gamma_scale:new t.aH(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_is_halo:new t.aG(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.aG(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aG(e,n.u_is_size_feature_constant),u_size_t:new t.aH(e,n.u_size_t),u_size:new t.aH(e,n.u_size),u_camera_to_center_distance:new t.aH(e,n.u_camera_to_center_distance),u_pitch:new t.aH(e,n.u_pitch),u_rotate_symbol:new t.aG(e,n.u_rotate_symbol),u_aspect_ratio:new t.aH(e,n.u_aspect_ratio),u_fade_change:new t.aH(e,n.u_fade_change),u_matrix:new t.aI(e,n.u_matrix),u_label_plane_matrix:new t.aI(e,n.u_label_plane_matrix),u_coord_matrix:new t.aI(e,n.u_coord_matrix),u_is_text:new t.aG(e,n.u_is_text),u_pitch_with_map:new t.aG(e,n.u_pitch_with_map),u_texsize:new t.aL(e,n.u_texsize),u_texsize_icon:new t.aL(e,n.u_texsize_icon),u_texture:new t.aG(e,n.u_texture),u_texture_icon:new t.aG(e,n.u_texture_icon),u_gamma_scale:new t.aH(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aH(e,n.u_device_pixel_ratio),u_is_halo:new t.aG(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_opacity:new t.aH(e,n.u_opacity),u_color:new t.aM(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_opacity:new t.aH(e,n.u_opacity),u_image:new t.aG(e,n.u_image),u_pattern_tl_a:new t.aL(e,n.u_pattern_tl_a),u_pattern_br_a:new t.aL(e,n.u_pattern_br_a),u_pattern_tl_b:new t.aL(e,n.u_pattern_tl_b),u_pattern_br_b:new t.aL(e,n.u_pattern_br_b),u_texsize:new t.aL(e,n.u_texsize),u_mix:new t.aH(e,n.u_mix),u_pattern_size_a:new t.aL(e,n.u_pattern_size_a),u_pattern_size_b:new t.aL(e,n.u_pattern_size_b),u_scale_a:new t.aH(e,n.u_scale_a),u_scale_b:new t.aH(e,n.u_scale_b),u_pixel_coord_upper:new t.aL(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aL(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.aH(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_texture:new t.aG(e,n.u_texture),u_ele_delta:new t.aH(e,n.u_ele_delta)}),terrainDepth:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_ele_delta:new t.aH(e,n.u_ele_delta)}),terrainCoords:(e,n)=>({u_matrix:new t.aI(e,n.u_matrix),u_texture:new t.aG(e,n.u_texture),u_terrain_coords_id:new t.aH(e,n.u_terrain_coords_id),u_ele_delta:new t.aH(e,n.u_ele_delta)})};class Zt{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Gt{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[qt[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wt=new WeakMap;function Xt(e){var t;if(Wt.has(e))return Wt.get(e);{const n=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Wt.set(e,n),n}}class Kt{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yt extends Kt{getDefault(){return t.aO.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Jt extends Kt{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Qt extends Kt{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class en extends Kt{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class tn extends Kt{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class nn extends Kt{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class rn extends Kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class an extends Kt{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class on extends Kt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class sn extends Kt{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ln extends Kt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class cn extends Kt{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class un extends Kt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class hn extends Kt{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class dn extends Kt{getDefault(){return t.aO.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class pn extends Kt{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class fn extends Kt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class mn extends Kt{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class gn extends Kt{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class yn extends Kt{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class _n extends Kt{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class vn extends Kt{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class xn extends Kt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class bn extends Kt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ln extends Kt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class wn extends Kt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class kn extends Kt{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Sn extends Kt{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const n=this.gl;Xt(n)?n.bindVertexArray(e):null===(t=n.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Cn extends Kt{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Tn extends Kt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class En extends Kt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class In extends Kt{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Mn extends In{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Pn extends In{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class An extends In{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class zn{constructor(e,t,n,r,i){this.context=e,this.width=t,this.height=n;const a=e.gl,o=this.framebuffer=a.createFramebuffer();if(this.colorAttachment=new Mn(e,o),r)this.depthAttachment=i?new An(e,o):new Pn(e,o);else if(i)throw new Error("Stencil cannot be set without depth");if(a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Dn{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Dn.Replace=[1,0],Dn.disabled=new Dn(Dn.Replace,t.aO.transparent,[!1,!1,!1,!1]),Dn.unblended=new Dn(Dn.Replace,t.aO.transparent,[!0,!0,!0,!0]),Dn.alphaBlended=new Dn([1,771],t.aO.transparent,[!0,!0,!0,!0]);class Rn{constructor(e){var t,n;if(this.gl=e,this.clearColor=new Yt(this),this.clearDepth=new Jt(this),this.clearStencil=new Qt(this),this.colorMask=new en(this),this.depthMask=new tn(this),this.stencilMask=new nn(this),this.stencilFunc=new rn(this),this.stencilOp=new an(this),this.stencilTest=new on(this),this.depthRange=new sn(this),this.depthTest=new ln(this),this.depthFunc=new cn(this),this.blend=new un(this),this.blendFunc=new hn(this),this.blendColor=new dn(this),this.blendEquation=new pn(this),this.cullFace=new fn(this),this.cullFaceSide=new mn(this),this.frontFace=new gn(this),this.program=new yn(this),this.activeTexture=new _n(this),this.viewport=new vn(this),this.bindFramebuffer=new xn(this),this.bindRenderbuffer=new bn(this),this.bindTexture=new Ln(this),this.bindVertexBuffer=new wn(this),this.bindElementBuffer=new kn(this),this.bindVertexArray=new Sn(this),this.pixelStoreUnpack=new Cn(this),this.pixelStoreUnpackPremultiplyAlpha=new Tn(this),this.pixelStoreUnpackFlipY=new En(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Xt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const r=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==r?void 0:r.RGBA16F_EXT,this.RGB16F=null!==(n=e.RGB16F)&&void 0!==n?n:null==r?void 0:r.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Zt(this,e,t)}createVertexBuffer(e,t,n){return new Gt(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n,r){return new zn(this,e,t,n,r)}clear(e){let{color:t,depth:n,stencil:r}=e;const i=this.gl;let a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.aD(e.blendFunction,Dn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Xt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Xt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Fn{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Fn.ReadOnly=!1,Fn.ReadWrite=!0,Fn.disabled=new Fn(519,Fn.ReadOnly,[0,1]);const On=7680;class Bn{constructor(e,t,n,r,i,a){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=a}}Bn.disabled=new Bn({func:519,mask:0},0,0,On,On,On);class Vn{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}let jn;function Nn(e,n,r,i,a,o,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let x=0;x<i.length;x++){const f=i[x],m=n.getTile(f),g=m.getBucket(r);if(!g)continue;let y=f.posMatrix;0===a[0]&&0===a[1]||(y=e.translatePosMatrix(f.posMatrix,m,a,o));const _=s?g.textCollisionBox:g.iconCollisionBox,v=g.collisionCircleArray;if(v.length>0){const n=t.F(),r=y;t.aP(n,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.aP(n,n,g.placementViewportMatrix),h.push({circleArray:v,circleOffset:p,transform:r,invTransform:n,coord:f}),d+=v.length/4,p=d}_&&u.draw(l,c.LINES,Fn.disabled,Bn.disabled,e.colorModeForRenderPass(),Vn.disabled,Ct(y,e.transform,m),e.style.map.terrain&&e.style.map.terrain.getTerrainData(f),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,null,_.collisionVertexBuffer)}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.aQ;m.resize(4*d),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],a=t.circleArray[n+2],o=t.circleArray[n+3];m.emplace(g++,r,i,a,o,0),m.emplace(g++,r,i,a,o,1),m.emplace(g++,r,i,a,o,2),m.emplace(g++,r,i,a,o,3)}(!jn||jn.length<2*d)&&(jn=function(e){const n=2*e,r=new t.aS;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(d));const y=l.createIndexBuffer(jn,!0),_=l.createVertexBuffer(m,t.aR.members,!0);for(const x of h){const n={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(v=e.transform).cameraToCenterDistance,u_viewport_size:[v.width,v.height]};f.draw(l,c.TRIANGLES,Fn.disabled,Bn.disabled,e.colorModeForRenderPass(),Vn.disabled,n,e.style.map.terrain&&e.style.map.terrain.getTerrainData(x.coord),r.id,_,y,t.$.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,e.transform.zoom,null,null,null)}var v;_.destroy(),y.destroy()}Vn.disabled=new Vn(!1,1029,2305),Vn.backCCW=new Vn(!0,1029,2305);const Hn=t.an(new Float32Array(16));function Un(e,n,r,i,a,o){const{horizontalAlign:s,verticalAlign:l}=t.at(e);return new t.P((-(s-.5)*n/a+i[0])*o,(-(l-.5)*r/a+i[1])*o)}function $n(e,n,r,i,a,o,s,l,c,u,h){const d=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={};p.clear();for(let g=0;g<d.length;g++){const f=d.get(g),y=f.hidden||!f.crossTileID||e.allowVerticalPlacement&&!f.placedOrientation?null:i[f.crossTileID];if(y){const i=new t.P(f.anchorX,f.anchorY),d=_e(i,r?s:o,h),g=ve(a.cameraToCenterDistance,d.signedDistanceFromCamera);let _=t.ai(e.textSizeData,c,f)*g/t.ao;r&&(_*=e.tilePixelRatio/l);const{width:v,height:x,anchor:b,textOffset:L,textBoxScale:w}=y,k=Un(b,v,x,L,w,_),S=r?_e(i.add(k),o,h).point:d.point.add(n?k.rotate(-a.angle):k),C=e.allowVerticalPlacement&&f.placedOrientation===t.ah.vertical?Math.PI/2:0;for(let e=0;e<f.numGlyphs;e++)t.aj(p,S,C);u&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={shiftedAnchor:S,angle:C})}else Pe(f.numGlyphs,p)}if(u){f.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e);if(r.hidden)Pe(r.numGlyphs,f);else{const n=m[e];if(n)for(let e=0;e<r.numGlyphs;e++)t.aj(f,n.shiftedAnchor,n.angle);else Pe(r.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Zn(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function qn(e,n,r,i,a,o,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g="map"===l,y="map"===c,_="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),v=g&&!y&&!_,x=!r.layout.get("symbol-sort-key").isConstant();let b=!1;const L=e.depthModeForSublayer(0,Fn.ReadOnly),w=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),k=[];for(const S of i){const i=n.getTile(S),l=i.getBucket(r);if(!l)continue;const c=a?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const h=c.programConfigurations.get(r.id),d=a||l.sdfIcons,p=a?l.textSizeData:l.iconSizeData,L=y||0!==m.pitch,C=e.useProgram(Zn(d,a,l),h),T=t.ag(p,m.zoom),E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(S);let I,M,P,A,z=[0,0],D=null;if(a)M=i.glyphAtlasTexture,P=f.LINEAR,I=i.glyphAtlasTexture.size,l.iconsInText&&(z=i.imageAtlasTexture.size,D=i.imageAtlasTexture,A=L||e.options.rotating||e.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;M=i.imageAtlasTexture,P=d||e.options.rotating||e.options.zooming||t||L?f.LINEAR:f.NEAREST,I=i.imageAtlasTexture.size}const R=Re(i,1,e.transform.zoom),F=ge(S.posMatrix,y,g,e.transform,R),O=ye(S.posMatrix,y,g,e.transform,R),B=w&&l.hasTextData(),V="none"!==r.layout.get("icon-text-fit")&&B&&l.hasIconData();if(_){const t=e.style.map.terrain?(t,n)=>e.style.map.terrain.getElevation(S,t,n):null,n="map"===r.layout.get("text-rotation-alignment");be(l,S.posMatrix,e,a,F,O,y,u,n,t)}const j=e.translatePosMatrix(S.posMatrix,i,o,s),N=_||a&&w||V?Hn:F,H=e.translatePosMatrix(O,i,o,s,!0),U=d&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let $;$=d?l.iconsInText?Nt(p.kind,T,v,y,e,j,N,H,I,z):jt(p.kind,T,v,y,e,j,N,H,a,I,!0):Vt(p.kind,T,v,y,e,j,N,H,a,I);const Z={program:C,buffers:c,uniformValues:$,atlasTexture:M,atlasTextureIcon:D,atlasInterpolation:P,atlasInterpolationIcon:A,isSDF:d,hasHalo:U};if(x&&l.canOverlap){b=!0;const e=c.segments.get();for(const n of e)k.push({segments:new t.$([n]),sortKey:n.sortKey,state:Z,terrainData:E})}else k.push({segments:c.segments,sortKey:0,state:Z,terrainData:E})}b&&k.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of k){const n=t.state;if(p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,Gn(n.buffers,t.segments,r,e,n.program,L,h,d,i,t.terrainData)),i.u_is_halo=0}Gn(n.buffers,t.segments,r,e,n.program,L,h,d,n.uniformValues,t.terrainData)}}function Gn(e,t,n,r,i,a,o,s,l,c){const u=r.context;i.draw(u,u.gl.TRIANGLES,a,o,s,Vn.disabled,l,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Wn(e,t,n,r,i){if(!n||!r||!r.imageAtlas)return;const a=r.imageAtlas.patternPositions;let o=a[n.to.toString()],s=a[n.from.toString()];if(!o&&s&&(o=s),!s&&o&&(s=o),!o||!s){const e=i.getPaintProperty(t);o=a[e],s=a[e]}o&&s&&e.setConstantPatternPositions(o,s)}function Xn(e,t,n,r,i,a,o){const s=e.context.gl,l="fill-pattern",c=n.paint.get(l),u=c&&c.constantOr(1),h=n.getCrossfadeParameters();let d,p,f,m,g;o?(p=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=s.LINES):(p=u?"fillPattern":"fill",d=s.TRIANGLES);const y=c.constantOr(null);for(const _ of r){const r=t.getTile(_);if(u&&!r.patternsLoaded())continue;const c=r.getBucket(n);if(!c)continue;const v=c.programConfigurations.get(n.id),x=e.useProgram(p,v),b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_);u&&(e.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),v.updatePaintBuffers(h)),Wn(v,l,y,r,n);const L=b?_:null,w=e.translatePosMatrix(L?L.posMatrix:_.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){m=c.indexBuffer2,g=c.segments2;const t=[s.drawingBufferWidth,s.drawingBufferHeight];f="fillOutlinePattern"===p&&u?kt(w,e,h,r,t):wt(w,t)}else m=c.indexBuffer,g=c.segments,f=u?Lt(w,e,h,r):bt(w);x.draw(e.context,d,i,e.stencilModeForClipping(_),a,Vn.disabled,f,b,n.id,c.layoutVertexBuffer,m,g,n.paint,e.transform.zoom,v)}}function Kn(e,t,n,r,i,a,o){const s=e.context,l=s.gl,c="fill-extrusion-pattern",u=n.paint.get(c),h=u.constantOr(1),d=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),f=u.constantOr(null);for(const m of r){const r=t.getTile(m),u=r.getBucket(n);if(!u)continue;const g=e.style.map.terrain&&e.style.map.terrain.getTerrainData(m),y=u.programConfigurations.get(n.id),_=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",y);h&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(d)),Wn(y,c,f,r,n);const v=e.translatePosMatrix(m.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),x=n.paint.get("fill-extrusion-vertical-gradient"),b=h?xt(v,e,x,p,m,d,r):vt(v,e,x,p);_.draw(s,s.gl.TRIANGLES,i,a,o,Vn.backCCW,b,g,n.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,n.paint,e.transform.zoom,y,e.style.map.terrain&&u.centroidVertexBuffer)}}function Yn(e,t,n,r,i,a,o){const s=e.context,l=s.gl,c=n.fbo;if(!c)return;const u=e.useProgram("hillshade"),h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,i,a,o,Vn.disabled,((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r?r.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Mt(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}})(e,n,r,h?t:null),h,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function Jn(e,n,r,i,a,o){const s=e.context,l=s.gl,c=n.dem;if(c&&c.data){const u=c.dim,h=c.stride,d=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){const e=n.demTexture;e.update(d,{premultiply:!1}),e.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new L(s,d,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let p=n.fbo;if(!p){const e=new L(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=n.fbo=s.createFramebuffer(u,u,!0,!1),p.colorAttachment.set(e.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,a,o,Vn.disabled,((e,n)=>{const r=n.stride,i=t.F();return t.aN(i,0,t.W,-t.W,0,0,1),t.H(i,i,[0,-t.W,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,c),null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Qn(e,n,r,i,o,s){const l=i.paint.get("raster-fade-duration");if(!s&&l>0){const i=a.now(),s=(i-e.timeAdded)/l,c=n?(i-n.timeAdded)/l:-1,u=r.getSource(),h=o.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=d&&e.refreshedUponExpiration?1:t.ac(d?s:1-c,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const er=new t.aO(1,0,0,1),tr=new t.aO(0,1,0,1),nr=new t.aO(0,0,1,1),rr=new t.aO(1,0,1,1),ir=new t.aO(0,1,1,1);function ar(e,t,n,r){sr(e,0,t+n/2,e.transform.width,n,r)}function or(e,t,n,r){sr(e,t-n/2,0,n,e.transform.height,r)}function sr(e,t,n,r,i,a){const o=e.context,s=o.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,n*e.pixelRatio,r*e.pixelRatio,i*e.pixelRatio),o.clear({color:a}),s.disable(s.SCISSOR_TEST)}function lr(e,n,r){const i=e.context,a=i.gl,o=r.posMatrix,s=e.useProgram("debug"),l=Fn.disabled,c=Bn.disabled,u=e.colorModeForRenderPass(),h="$debug",d=e.style.map.terrain&&e.style.map.terrain.getTerrainData(r);i.activeTexture.set(a.TEXTURE0);const p=n.getTileByID(r.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/e.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${y} ${f}kB`),s.draw(i,a.TRIANGLES,l,c,Dn.alphaBlended,Vn.disabled,Tt(o,t.aO.transparent,g),null,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,a.LINE_STRIP,l,c,u,Vn.disabled,Tt(o,t.aO.red),d,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function cr(e,t,n){const r=e.context,i=r.gl,a=e.colorModeForRenderPass(),o=new Fn(i.LEQUAL,Fn.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh();r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height]);for(const c of n){const n=e.renderToTexture.getTexture(c),u=t.getTerrainData(c.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.texture);const h={u_matrix:e.transform.calculatePosMatrix(c.tileID.toUnwrapped()),u_texture:0,u_ele_delta:t.getMeshFrameDelta(e.transform.zoom)};s.draw(r,i.TRIANGLES,o,Bn.disabled,a,Vn.backCCW,h,u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class ur{constructor(e,n){this.context=new Rn(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.F(),renderTime:0},this.setup(),this.numSublayers=ue.maxUnderzooming+ue.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new st}resize(e,t,n){if(this.width=Math.floor(e*n),this.height=Math.floor(t*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const r of this.style._order)this.style._layers[r].resize()}setup(){const e=this.context,n=new t.aV;n.emplaceBack(0,0),n.emplaceBack(t.W,0),n.emplaceBack(0,t.W),n.emplaceBack(t.W,t.W),this.tileExtentBuffer=e.createVertexBuffer(n,ht.members),this.tileExtentSegments=t.$.simpleSegment(0,0,4,2);const r=new t.aV;r.emplaceBack(0,0),r.emplaceBack(t.W,0),r.emplaceBack(0,t.W),r.emplaceBack(t.W,t.W),this.debugBuffer=e.createVertexBuffer(r,ht.members),this.debugSegments=t.$.simpleSegment(0,0,4,5);const i=new t.Z;i.emplaceBack(0,0,0,0),i.emplaceBack(t.W,0,t.W,0),i.emplaceBack(0,t.W,0,t.W),i.emplaceBack(t.W,t.W,t.W,t.W),this.rasterBoundsBuffer=e.createVertexBuffer(i,Y.members),this.rasterBoundsSegments=t.$.simpleSegment(0,0,4,2);const a=new t.aV;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,ht.members),this.viewportSegments=t.$.simpleSegment(0,0,4,2);const o=new t.aW;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);const s=new t.aX;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);const l=this.context.gl;this.stencilClearMode=new Bn({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.F();t.aN(r,0,this.width,this.height,0,0,1),t.J(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Fn.disabled,this.stencilClearMode,Dn.disabled,Vn.disabled,Et(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const n=this.context,r=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(Dn.disabled),n.setDepthMode(Fn.disabled);const i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of t){const e=this._tileClippingMaskIDs[a.key]=this.nextStencilID++,t=this.style.map.terrain&&this.style.map.terrain.getTerrainData(a);i.draw(n,r.TRIANGLES,Fn.disabled,new Bn({func:r.ALWAYS,mask:0},e,255,r.KEEP,r.KEEP,r.REPLACE),Dn.disabled,Vn.disabled,Et(a.posMatrix),t,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Bn({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new Bn({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,n=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const e={};for(let n=0;n<i;n++)e[n+r]=new Bn({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=i,[e,n]}return[{[r]:Bn.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new Dn([e.CONSTANT_COLOR,e.ONE],new t.aO(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Dn.unblended:Dn.alphaBlended}depthModeForSublayer(e,t,n){if(!this.opaquePassEnabledForLayer())return Fn.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Fn(n||this.context.gl.LEQUAL,t,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(a.now()),this.imageManager.beginFrame();const r=this.style._order,i=this.style.sourceCaches,o={},s={},l={};for(const t in i){const e=i[t];e.used&&e.prepare(this.context),o[t]=e.getVisibleCoordinates(),s[t]=o[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const e=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!t.aY(this.terrainFacilitator.matrix,this.transform.projMatrix)||e.length)&&(t.aZ(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const r=e.context,i=r.gl,a=Dn.unblended,o=new Fn(i.LEQUAL,Fn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");r.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.aO.transparent,depth:1});for(const t of l){const l=n.getTerrainData(t.tileID),u={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};c.draw(r,i.TRIANGLES,o,Bn.disabled,a,Vn.backCCW,u,l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,n){const r=e.context,i=r.gl,a=Dn.unblended,o=new Fn(i.LEQUAL,Fn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.getCoordsTexture(),c=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");r.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.aO.transparent,depth:1}),n.coordsIndex=[];for(const t of c){const c=n.getTerrainData(t.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const h={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};u.draw(r,i.TRIANGLES,o,Bn.disabled,a,Vn.backCCW,h,c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),n.coordsIndex.push(t.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const t of r){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=s[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,i[e.source],e,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.aO.black:t.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],t=i[e.source],n=o[e.source];this._renderTileClippingMasks(e,n),this.renderLayer(this,t,e,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],t=i[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e))continue;const n=("symbol"===e.type?l:s)[e.source];this._renderTileClippingMasks(e,o[e.source]),this.renderLayer(this,t,e,n)}if(this.options.showTileBoundaries){const e=function(e,t){let n=null;const r=Object.values(e._layers).flatMap((n=>n.source&&!n.isHidden(t)?[e.sourceCaches[n.source]]:[])),i=r.filter((e=>"vector"===e.getSource().type)),a=r.filter((e=>"vector"!==e.getSource().type)),o=e=>{(!n||n.getSource().maxzoom<e.getSource().maxzoom)&&(n=e)};return i.forEach((e=>o(e))),n||a.forEach((e=>o(e))),n}(this.style,this.transform.zoom);e&&function(e,t,n){for(let r=0;r<n.length;r++)lr(e,t,n[r])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;ar(e,e.transform.height-(t.top||0),3,er),ar(e,t.bottom||0,3,tr),or(e,t.left||0,3,nr),or(e,e.transform.width-(t.right||0),3,rr);const n=e.transform.centerPoint;!function(e,t,n,r){sr(e,t-1,n-10,2,20,r),sr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,ir)}(this),this.context.setDefault()}renderLayer(e,n,r,i){if(!r.isHidden(this.transform.zoom)&&("background"===r.type||"custom"===r.type||(i||[]).length))switch(this.id=r.id,r.type){case"symbol":!function(e,n,r,i,a){if("translucent"!==e.renderPass)return;const o=Bn.disabled,s=e.colorModeForRenderPass();(r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,n,r,i,a,o,s){const l=n.transform,c="map"===a,u="map"===o;for(const h of e){const e=i.getTile(h),a=e.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;const o=t.ag(a.textSizeData,l.zoom),d=Re(e,1,n.transform.zoom),p=ge(h.posMatrix,u,c,n.transform,d),f="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(o){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);$n(a,c,u,s,l,p,h.posMatrix,t,o,f,n.style.map.terrain?(e,t)=>n.style.map.terrain.getElevation(h,e,t):null)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&qn(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&qn(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(Nn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Nn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}(e,n,r,i,this.style.placement.variableOffsets);break;case"circle":!function(e,n,r,i){if("translucent"!==e.renderPass)return;const a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===a.constantOr(1)&&(0===o.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,Fn.ReadOnly),d=Bn.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<i.length;m++){const a=i[m],o=n.getTile(a),s=o.getBucket(r);if(!s)continue;const c=s.programConfigurations.get(r.id),u=e.useProgram("circle",c),h=s.layoutVertexBuffer,d=s.indexBuffer,p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(a),g={programConfiguration:c,program:u,layoutVertexBuffer:h,indexBuffer:d,uniformValues:St(e,a,o,r),terrainData:p};if(l){const e=s.segments.get();for(const n of e)f.push({segments:new t.$([n]),sortKey:n.sortKey,state:g})}else f.push({segments:s.segments,sortKey:0,state:g})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of f){const{programConfiguration:n,program:i,layoutVertexBuffer:a,indexBuffer:o,uniformValues:s,terrainData:l}=t.state;i.draw(c,u.TRIANGLES,h,d,p,Vn.disabled,s,l,r.id,a,o,t.segments,r.paint,e.transform.zoom,n)}}(e,n,r,i);break;case"heatmap":!function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const a=e.context,o=a.gl,s=Bn.disabled,l=new Dn([o.ONE,o.ONE],t.aO.transparent,[!0,!0,!0,!0]);!function(e,t,n){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{const a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1,!1),function(e,t,n,r){var i,a;const o=e.gl,s=null!==(i=e.HALF_FLOAT)&&void 0!==i?i:o.UNSIGNED_BYTE,l=null!==(a=e.RGBA16F)&&void 0!==a?a:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,l,t.width/4,t.height/4,0,o.RGBA,s,null),r.colorAttachment.set(n)}(e,t,a,i)}}(a,e,r),a.clear({color:t.aO.transparent});for(let t=0;t<i.length;t++){const c=i[t];if(n.hasRenderableParent(c))continue;const u=n.getTile(c),h=u.getBucket(r);if(!h)continue;const d=h.programConfigurations.get(r.id),p=e.useProgram("heatmap",d),{zoom:f}=e.transform;p.draw(a,o.TRIANGLES,Fn.disabled,s,l,Vn.disabled,It(c.posMatrix,u,f,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,d)}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,a=n.heatmapFbo;if(!a)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let o=n.colorRampTexture;o||(o=n.colorRampTexture=new L(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Fn.disabled,Bn.disabled,e.colorModeForRenderPass(),Vn.disabled,((e,n)=>{const r=t.F();t.aN(r,0,e.width,e.height,0,0,1);const i=e.context.gl;return{u_matrix:r,u_world:[i.drawingBufferWidth,i.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(e,n),null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))}(e,n,r,i);break;case"line":!function(e,n,r,i){if("translucent"!==e.renderPass)return;const a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0===a.constantOr(1)||0===o.constantOr(1))return;const s=e.depthModeForSublayer(0,Fn.ReadOnly),l=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),h=u.constantOr(1),d=r.paint.get("line-gradient"),p=r.getCrossfadeParameters(),f=h?"linePattern":c?"lineSDF":d?"lineGradient":"line",m=e.context,g=m.gl;let y=!0;for(const _ of i){const i=n.getTile(_);if(h&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;const o=a.programConfigurations.get(r.id),v=e.context.program.get(),x=e.useProgram(f,o),b=y||x.program!==v,w=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_),k=u.constantOr(null);if(k&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[k.to.toString()],n=e.patternPositions[k.from.toString()];t&&n&&o.setConstantPatternPositions(t,n)}const S=w?_:null,C=h?zt(e,i,r,p,S):c?Dt(e,i,r,c,p,S):d?At(e,i,r,a.lineClipsArray.length,S):Pt(e,i,r,S);if(h)m.activeTexture.set(g.TEXTURE0),i.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),o.updatePaintBuffers(p);else if(c&&(b||e.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m);else if(d){const i=a.gradients[r.id];let o=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=_.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;s=t.ac(t.aT(a.maxLineLength/t.W*1024*i),256,m.maxTextureSize)}i.gradient=t.aU({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new L(m,i.gradient,g.RGBA),i.version=r.gradientVersion,o=i.texture}m.activeTexture.set(g.TEXTURE0),o.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}x.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(_),l,Vn.disabled,C,w,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,e.transform.zoom,o,a.layoutVertexBuffer2),y=!1}}(e,n,r,i);break;case"fill":!function(e,n,r,i){const a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0===o.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.aO.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Fn.ReadWrite:Fn.ReadOnly);Xn(e,n,r,i,t,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const t=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Fn.ReadOnly);Xn(e,n,r,i,t,s,!0)}}(e,n,r,i);break;case"fill-extrusion":!function(e,t,n,r){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===e.renderPass){const a=new Fn(e.context.gl.LEQUAL,Fn.ReadWrite,e.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Kn(e,t,n,r,a,Bn.disabled,Dn.disabled),Kn(e,t,n,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const i=e.colorModeForRenderPass();Kn(e,t,n,r,a,Bn.disabled,i)}}}(e,n,r,i);break;case"hillshade":!function(e,t,n,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const i=e.context,a=e.depthModeForSublayer(0,Fn.ReadOnly),o=e.colorModeForRenderPass(),[s,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r];for(const c of l){const r=t.getTile(c);void 0!==r.needsHillshadePrepare&&r.needsHillshadePrepare&&"offscreen"===e.renderPass?Jn(e,r,n,a,Bn.disabled,o):"translucent"===e.renderPass&&Yn(e,c,r,n,a,s[c.overscaledZ],o)}i.viewport.set([0,0,e.width,e.height])}(e,n,r,i);break;case"raster":!function(e,t,n,r){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const i=e.context,a=i.gl,o=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),[c,u]=o instanceof J?[{},r]:e.stencilConfigForOverlap(r),h=u[u.length-1].overscaledZ,d=!e.options.moving;for(const p of u){const r=e.depthModeForSublayer(p.overscaledZ-h,1===n.paint.get("raster-opacity")?Fn.ReadWrite:Fn.ReadOnly,a.LESS),u=t.getTile(p);u.registerFadeDuration(n.paint.get("raster-fade-duration"));const f=t.findLoadedParent(p,0),m=Qn(u,f,t,n,e.transform,e.style.map.terrain);let g,y;const _="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;i.activeTexture.set(a.TEXTURE0),u.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(a.TEXTURE1),f?(f.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,f.tileID.overscaledZ-u.tileID.overscaledZ),y=[u.tileID.canonical.x*g%1,u.tileID.canonical.y*g%1]):u.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const v=e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),x=v?p:null,b=x?x.posMatrix:e.transform.calculatePosMatrix(p.toUnwrapped(),d),L=Ot(b,y||[0,0],g||1,m,n);o instanceof J?s.draw(i,a.TRIANGLES,r,Bn.disabled,l,Vn.disabled,L,v,n.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments):s.draw(i,a.TRIANGLES,r,c[p.overscaledZ],l,Vn.disabled,L,v,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}(e,n,r,i);break;case"background":!function(e,t,n,r){const i=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0===a)return;const o=e.context,s=o.gl,l=e.transform,c=l.tileSize,u=n.paint.get("background-pattern");if(e.isPatternMissing(u))return;const h=!u&&1===i.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==h)return;const d=Bn.disabled,p=e.depthModeForSublayer(0,"opaque"===h?Fn.ReadWrite:Fn.ReadOnly),f=e.colorModeForRenderPass(),m=e.useProgram(u?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:c,terrain:e.style.map.terrain});u&&(o.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));const y=n.getCrossfadeParameters();for(const _ of g){const t=r?_.posMatrix:e.transform.calculatePosMatrix(_.toUnwrapped()),l=u?Ut(t,a,e,u,{tileID:_,tileSize:c},y):Ht(t,a,i),h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_);m.draw(o,s.TRIANGLES,p,d,f,Vn.disabled,l,h,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}(e,0,r,i);break;case"custom":!function(e,t,n){const r=e.context,i=n.implementation;if("offscreen"===e.renderPass){const t=i.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Bn.disabled);const t="3d"===i.renderingMode?new Fn(e.context.gl.LEQUAL,Fn.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Fn.ReadOnly);r.setDepthMode(t),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}(e,0,r)}}translatePosMatrix(e,n,r,i,a){if(!r[0]&&!r[1])return e;const o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[a?r[0]:Re(n,r[0],this.transform.zoom),a?r[1]:Re(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.H(l,e,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}useProgram(e,t){this.cache=this.cache||{};const n=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new yt(this.context,pt[e],t,$t[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new L(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}class hr{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,n,r){const i=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const a=1/(r=t.af([],r,e))[3]/n*i;return t.a_(r,r,[a,a,1/r[3],a])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}([],function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e}([],v([],a[e[0]],a[e[1]]),v([],a[e[2]],a[e[1]]))),n=-((r=t)[0]*(i=a[e[1]])[0]+r[1]*i[1]+r[2]*i[2]);var r,i;return t.concat(n)}));return new hr(a,o)}}class dr{constructor(e,t){this.min=e,this.max=t,this.center=function(e,t){return e[0]=.5*t[0],e[1]=.5*t[1],e[2]=.5*t[2],e}([],function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}([],this.min,this.max))}quadrant(e){const t=[e%2==0,e<2],n=y(this.min),r=y(this.max);for(let i=0;i<t.length;i++)n[i]=t[i]?this.min[i]:this.center[i],r[i]=t[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new dr(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let i=0;i<e.planes.length;i++){const a=e.planes[i];let o=0;for(let e=0;e<n.length;e++)t.a$(a,n[e])>=0&&o++;if(0===o)return 0;o!==n.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const a=e.points[i][t]-this.min[t];n=Math.min(n,a),r=Math.max(r,a)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}class pr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.z.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.z.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.z.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.z.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.ac((this.left+e-this.right)/2,0,e),i=t.ac((this.top+n-this.bottom)/2,0,n);return new t.P(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new pr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const fr=85.051129;class mr{constructor(e,n,r,i,a){this.tileSize=512,this._renderWorldCopies=void 0===a||!!a,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pr,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new mr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.b0(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=r*-s+a*l,e[3]=i*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.tileZoom=Math.max(0,Math.floor(t)),this.scale=this.zoomScale(t),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(e){const n=[new t.b1(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new t.P(0,0)),i=this.pointCoordinate(new t.P(this.width,0)),a=this.pointCoordinate(new t.P(this.width,this.height)),o=this.pointCoordinate(new t.P(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),l=Math.floor(Math.max(r.x,i.x,a.x,o.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new t.b1(u,e))}return n}coveringTiles(e){var n,r;let i=this.coveringZoomLevel(e);const a=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const o=this.pointCoordinate(this.getCameraPoint()),s=t.Y.fromLngLat(this.center),l=Math.pow(2,i),c=[l*o.x,l*o.y,0],u=[l*s.x,l*s.y,0],h=hr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let d=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=i);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=e=>({aabb:new dr([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],y=i,_=e.reparseOverscaled?a:i;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(f(-t)),m.push(f(t));for(m.push(f(0));m.length>0;){const i=m.pop(),a=i.x,o=i.y;let s=i.fullyVisible;if(!s){const e=i.aabb.intersects(h);if(0===e)continue;s=2===e}const l=e.terrain?c:u,f=i.aabb.distanceX(l),v=i.aabb.distanceY(l),b=Math.max(Math.abs(f),Math.abs(v));if(i.zoom===y||b>p+(1<<y-i.zoom)-2&&i.zoom>=d){const e=y-i.zoom,n=c[0]-.5-(a<<e),r=c[1]-.5-(o<<e);g.push({tileID:new t.Q(i.zoom===y?_:i.zoom,i.wrap,i.zoom,a,o),distanceSq:x([u[0]-.5-a,u[1]-.5-o]),tileDistanceToCamera:Math.sqrt(n*n+r*r)})}else for(let c=0;c<4;c++){const l=(a<<1)+c%2,u=(o<<1)+(c>>1),h=i.zoom+1;let d=i.aabb.quadrant(c);if(e.terrain){const a=new t.Q(h,i.wrap,h,l,u),o=e.terrain.getMinMaxElevation(a),s=null!==(n=o.minElevation)&&void 0!==n?n:this.elevation,c=null!==(r=o.maxElevation)&&void 0!==r?r:this.elevation;d=new dr([d.min[0],d.min[1],s],[d.max[0],d.max[1],c])}m.push({aabb:d,zoom:h,x:l,y:u,wrap:i.wrap,fullyVisible:s})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const n=t.ac(e.lat,-85.051129,fr);return new t.P(t.N(e.lng)*this.worldSize,t.O(n)*this.worldSize)}unproject(e){return new t.Y(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const n=this.elevation,r=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,i=this.pointLocation(this.centerPoint,e),a=e.getElevationForLngLatZoom(i,this.tileZoom);if(!(this.elevation-a))return;const o=r+n-a,s=Math.cos(this._pitch)*this.cameraToCenterDistance/o/t.b2(1,i.lat),l=this.scaleZoom(s/this.tileSize);this._elevation=a,this._center=i,this.zoom=l}setLocationAtPoint(e,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),o=new t.Y(a.x-(r.x-i.x),a.y-(r.y-i.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),t.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return t.Y.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(null!=t)return t}const r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.af(r,r,this.pixelMatrixInverse),t.af(i,i,this.pixelMatrixInverse);const a=r[3],o=i[3],s=r[1]/a,l=i[1]/o,c=r[2]/a,u=i[2]/o,h=c===u?0:(0-c)/(u-c);return new t.Y(t.z.number(r[0]/a,i[0]/o,h)/this.worldSize,t.z.number(s,l,h)/this.worldSize)}coordinatePoint(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix;const i=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.af(i,i,r),new t.P(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new Z).extend(this.pointLocation(new t.P(0,e))).extend(this.pointLocation(new t.P(this.width,e))).extend(this.pointLocation(new t.P(this.width,this.height))).extend(this.pointLocation(new t.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Z([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,fr])}calculatePosMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const a=e.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.an(new Float64Array(16));return t.H(l,l,[s*o,a.y*o,0]),t.J(l,l,[o/t.W,o/t.W,1]),t.K(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,n){n=t.ac(+n,this.minZoom,this.maxZoom);const r={center:new t.M(e.lng,e.lat),zoom:n};let i=this.lngRange;if(!this._renderWorldCopies&&null===i){const e=180-1e-10;i=[-e,e]}const a=this.tileSize*this.zoomScale(r.zoom);let o=0,s=a,l=0,c=a,u=0,h=0;const{x:d,y:p}=this.size;if(this.latRange){const e=this.latRange;o=t.O(e[1])*a,s=t.O(e[0])*a,s-o<p&&(u=p/(s-o))}i&&(l=t.b0(t.N(i[0])*a,0,a),c=t.b0(t.N(i[1])*a,0,a),c<l&&(c+=a),c-l<d&&(h=d/(c-l)));const{x:f,y:m}=this.project.call({worldSize:a},e);let g,y;const _=Math.max(h||0,u||0);if(_){const e=new t.P(h?(c+l)/2:f,u?(s+o)/2:m);return r.center=this.unproject.call({worldSize:a},e).wrap(),r.zoom+=this.scaleZoom(_),r}if(this.latRange){const e=p/2;m-e<o&&(y=o+e),m+e>s&&(y=s-e)}if(i){const e=(l+c)/2;let n=f;this._renderWorldCopies&&(n=t.b0(f,e-a/2,e+a/2));const r=d/2;n-r<l&&(g=l+r),n+r>c&&(g=c-r)}if(void 0!==g||void 0!==y){const e=new t.P(null!=g?g:f,null!=y?y:m);r.center=this.unproject.call({worldSize:a},e).wrap()}return r}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:n}=this.getConstrained(this.center,this.zoom);this.center=t,this.zoom=n,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.b2(1,this.center.lat)*this.worldSize;let i=t.an(new Float64Array(16));t.J(i,i,[this.width/2,-this.height/2,1]),t.H(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=t.an(new Float64Array(16)),t.J(i,i,[1,-1,1]),t.H(i,i,[-1,-1,0]),t.J(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i;const a=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),o=Math.min(this.elevation,this.minElevationForCurrentTile),s=a-o*this._pixelPerMeter/Math.cos(this._pitch),l=o<0?s:a,c=Math.PI/2+this._pitch,u=this._fov*(.5+e.y/this.height),h=Math.sin(u)*l/Math.sin(t.ac(Math.PI-c-u,.01,Math.PI-.01)),d=this.getHorizon(),p=2*Math.atan(d/this.cameraToCenterDistance)*(.5+e.y/(2*d)),f=Math.sin(p)*l/Math.sin(t.ac(Math.PI-c-p,.01,Math.PI-.01)),m=Math.min(h,f),g=1.01*(Math.cos(Math.PI/2-this._pitch)*m+l),y=this.height/50;i=new Float64Array(16),t.b3(i,this._fov,this.width/this.height,y,g),i[8]=2*-e.x/this.width,i[9]=2*e.y/this.height,t.J(i,i,[1,-1,1]),t.H(i,i,[0,0,-this.cameraToCenterDistance]),t.b4(i,i,this._pitch),t.ad(i,i,this.angle),t.H(i,i,[-n,-r,0]),this.mercatorMatrix=t.J([],i,[this.worldSize,this.worldSize,this.worldSize]),t.J(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.K(new Float64Array(16),this.labelPlaneMatrix,i),t.H(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=t.ar([],i),this.pixelMatrix3D=t.K(new Float64Array(16),this.labelPlaneMatrix,i);const _=this.width%2/2,v=this.height%2/2,x=Math.cos(this.angle),b=Math.sin(this.angle),L=n-Math.round(n)+x*_+b*v,w=r-Math.round(r)+x*v+b*_,k=new Float64Array(i);if(t.H(k,k,[L>.5?L-1:L,w>.5?w-1:w,0]),this.alignedProjMatrix=k,i=t.ar(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.af(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,e))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(1===e.length)return[e[0],n];{let r=n.x,i=n.y,a=n.x,o=n.y;for(const t of e)r=Math.min(r,t.x),i=Math.min(i,t.y),a=Math.max(a,t.x),o=Math.max(o,t.y);return[new t.P(r,i),new t.P(a,i),new t.P(a,o),new t.P(r,o),new t.P(r,i)]}}lngLatToCameraDepth(e,n){const r=this.locationCoordinate(e),i=[r.x*this.worldSize,r.y*this.worldSize,n,1];return t.af(i,i,this.projMatrix),i[2]/i[3]}}function gr(e,t){var n=this;let r,i=!1,a=null,o=null;const s=()=>{a=null,i&&(e.apply(o,r),a=setTimeout(s,t),i=!1)};return function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return i=!0,o=n,r=t,a||s(),a}}class yr{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}},this._updateHash=gr(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),a=Math.round(t.lng*i)/i,o=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${a}/${o}/${n}`:`${n}/${o}/${a}`,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const r=n.split("=")[0];return r===e?(t=!0,`${r}=${c}`):n})).filter((e=>e));return t||n.push(`${e}=${c}`),`#${n.join("&")}`}return`#${c}`}}const _r={linearity:.3,easing:t.b5(0,0,.3,1)},vr=t.e({deceleration:2500,maxSpeed:1400},_r),xr=t.e({deceleration:20,maxSpeed:1400},_r),br=t.e({deceleration:1e3,maxSpeed:360},_r),Lr=t.e({deceleration:1e3,maxSpeed:90},_r);class wr{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=a.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const a=Sr(n.pan.mag(),r,t.e({},vr,e||{}));i.offset=n.pan.mult(a.amount/n.pan.mag()),i.center=this._map.transform.center,kr(i,a)}if(n.zoom){const e=Sr(n.zoom,r,xr);i.zoom=this._map.transform.zoom+e.amount,kr(i,e)}if(n.bearing){const e=Sr(n.bearing,r,br);i.bearing=this._map.transform.bearing+t.ac(e.amount,-179,179),kr(i,e)}if(n.pitch){const e=Sr(n.pitch,r,Lr);i.pitch=this._map.transform.pitch+e.amount,kr(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(i,{noMoveStart:!0})}}function kr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Sr(e,n,r){const{maxSpeed:i,linearity:a,deceleration:o}=r,s=t.ac(e*a/(n/1e3),-i,i),l=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class Cr extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=o.mousePos(n.getCanvas(),r),s=n.unproject(a);super(e,t.e({point:a,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class Tr extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,a=o.touchPos(n.getCanvasContainer(),i),s=a.map((e=>n.unproject(e))),l=a.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new t.P(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class Er extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class Ir{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Er(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Cr(e.type,this._map,e))}mouseup(e){this._map.fire(new Cr(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Cr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Cr(e.type,this._map,e))}mouseover(e){this._map.fire(new Cr(e.type,this._map,e))}mouseout(e){this._map.fire(new Cr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Tr(e.type,this._map,e))}touchmove(e){this._map.fire(new Tr(e.type,this._map,e))}touchend(e){this._map.fire(new Tr(e.type,this._map,e))}touchcancel(e){this._map.fire(new Tr(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Cr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Cr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pr{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(t.P.convert(e),this._map.terrain)}}class Ar{constructor(e,t){this._map=e,this._tr=new Pr(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(o.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=o.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);o.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=a-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=n;if(this.reset(),o.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.k("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.k(e,{originalEvent:n}))}}function zr(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class Dr{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.P(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=zr(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=zr(n,t);for(const i in this.touches){const e=r[i];(!e||e.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Rr{constructor(e){this.singleTap=new Dr(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Fr{constructor(e){this._tr=new Pr(e),this._zoomIn=new Rr({numTouches:1,numTaps:2}),this._zoomOut=new Rr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n),a=this._tr;return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:a.zoom+1,around:a.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:a.zoom-1,around:a.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Or{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(){const e=this._moveFunction(...arguments);if(e.bearingDelta||e.pitchDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=t.length?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const n=this._lastPoint;if(!n)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const r=t.length?t[0]:t;return!this._moved&&r.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=r,this._move(n,r))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&o.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Br={0:1,2:2};class Vr{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=o.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const n=Br[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton)}isValidEndEvent(e){return o.mouseButton(e)===this._eventButton}}class jr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Nr=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=function(e){e.preventDefault()}},Hr=e=>{let{enable:t,clickTolerance:n,bearingDegreesPerPixelMoved:r=.8}=e;const i=new Vr({checkCorrectEvent:e=>0===o.mouseButton(e)&&e.ctrlKey||2===o.mouseButton(e)});return new Or({clickTolerance:n,move:(e,t)=>({bearingDelta:(t.x-e.x)*r}),moveStateManager:i,enable:t,assignEvents:Nr})},Ur=e=>{let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:r=-.5}=e;const i=new Vr({checkCorrectEvent:e=>0===o.mouseButton(e)&&e.ctrlKey||2===o.mouseButton(e)});return new Or({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*r}),moveStateManager:i,enable:t,assignEvents:Nr})};class $r{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active&&!(n.length<this.minTouchs()))return e.preventDefault(),this._calculateTransform(e,t,n)}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=zr(r,n),a=new t.P(0,0),o=new t.P(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(a._add(e),o._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this.minTouchs()||!o.mag())return;const l=o.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[r,i]=this._firstTwoTouches,a=qr(n,t,r),o=qr(n,t,i);if(!a||!o)return;const s=this._aroundCenter?null:a.add(o).div(2);return this._move([a,o],s,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,a=qr(n,t,r),s=qr(n,t,i);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function qr(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Gr(e,t){return Math.log(e/t)/Math.LN2}class Wr extends Zr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Gr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gr(this._distance,n),pinchAround:t}}}function Xr(e,t){return 180*e.angleWith(t)/Math.PI}class Kr extends Zr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,n){const r=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xr(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=Xr(e,this._startVector);return Math.abs(n)<t}}function Yr(e){return Math.abs(e.y)>Math.abs(e.x)}class Jr extends Zr{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,n){super.touchstart(e,t,n),this._currentTouchCount=n.length}_start(e){this._lastPoints=e,Yr(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const a=e.y>0==t.y>0;return Yr(e)&&Yr(t)&&a}}const Qr={panStep:100,bearingStep:15,pitchStep:10};class ei{constructor(e){this._tr=new Pr(e);const t=Qr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:o=>{const s=this._tr;o.easeTo({duration:300,easeId:"keyboardHandler",easing:ti,zoom:t?Math.round(s.zoom)+t*(e.shiftKey?2:1):s.zoom,bearing:s.bearing+n*this._bearingStep,pitch:s.pitch+r*this._pitchStep,offset:[-i*this._panStep,-a*this._panStep],center:s.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ti(e){return e*(2-e)}const ni=4.000244140625;class ri{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new Pr(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map.cooperativeGestures.isEnabled()&&!e[this._map.cooperativeGestures._bypassKey])return;let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=a.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%ni==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=o.mousePos(this._map.getCanvas(),e),r=this._tr;this._around=n.y>r.transform.height/2-r.transform.getHorizon()?t.M.convert(this._aroundCenter?r.center:r.unproject(n)):t.M.convert(r.center),this._aroundPoint=r.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>ni?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:e.zoom,r=this._startZoom,i=this._easing;let o,s=!1;if("wheel"===this._type&&r&&i){const e=Math.min((a.now()-this._lastWheelEventTime)/200,1),l=i(e);o=t.z.number(r,n,l),e<1?this._frameId||(this._frameId=!0):s=!0}else o=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.b6;if(this._prevEase){const e=this._prevEase,r=(a.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=t.b5(o,s,.25,1)}return this._prevEase={start:a.now(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ii{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ai{constructor(e){this._tr=new Pr(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oi{constructor(){this._tap=new Rr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,n){if(!this._swipePoint)if(this._tapTime){const r=t[0],i=e.timeStamp-this._tapTime<500,a=this._tapPoint.dist(r)<30;i&&a?n.length>0&&(this._swipePoint=r,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(e,t,n)}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{const r=this._tap.touchend(e,t,n);r&&(this._tapTime=e.timeStamp,this._tapPoint=r)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class si{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class li{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ci{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ui{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=o.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const n=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),r=document.createElement("div");r.className="maplibregl-desktop-message",r.textContent=t,this._container.appendChild(r);const i=document.createElement("div");i.className="maplibregl-mobile-message",i.textContent=n,this._container.appendChild(i),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(o.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(e){this._onCooperativeGesture(1===e.touches.length)}wheel(e){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!e[this._bypassKey])}_onCooperativeGesture(e){this._enabled&&e&&(this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const hi=e=>e.zoom||e.drag||e.pitch||e.rotate;class di extends t.k{}function pi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class fi{constructor(e,t){this.handleWindowEvent=e=>{this.handleEvent(e,`${e.type}Window`)},this.handleEvent=(e,t)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===e.type?void 0:e,r={needsRenderFrame:!1},i={},a={},s=e.touches,l=s?this._getMapTouches(s):void 0,c=l?o.touchPos(this._map.getCanvas(),l):o.mousePos(this._map.getCanvas(),e);for(const{handlerName:o,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let s;this._blockedByActive(a,p,o)?d.reset():d[t||e.type]&&(s=d[t||e.type](e,c,l),this.mergeHandlerResult(r,i,s,o,n),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||d.isActive())&&(a[o]=d)}const u={};for(const o in this._previousActiveHandlers)a[o]||(u[o]=n);this._previousActiveHandlers=a,(Object.keys(u).length||pi(r))&&(this._changes.push([r,i,u]),this._triggerRenderFrame()),(Object.keys(a).length||pi(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wr(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[r,i,a]of this._listeners)o.addEventListener(r,i,r===document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[e,t,n]of this._listeners)o.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Ir(t,e));const r=t.boxZoom=new Ar(t,e);this._add("boxZoom",r),e.interactive&&e.boxZoom&&r.enable();const i=t.cooperativeGestures=new ui(t,e.cooperativeGestures);this._add("cooperativeGestures",i),e.cooperativeGestures&&i.enable();const a=new Fr(t),s=new ai(t);t.doubleClickZoom=new ii(s,a),this._add("tapZoom",a),this._add("clickZoom",s),e.interactive&&e.doubleClickZoom&&t.doubleClickZoom.enable();const l=new oi;this._add("tapDragZoom",l);const c=t.touchPitch=new Jr(t);this._add("touchPitch",c),e.interactive&&e.touchPitch&&t.touchPitch.enable(e.touchPitch);const u=Hr(e),h=Ur(e);t.dragRotate=new li(e,u,h),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]),e.interactive&&e.dragRotate&&t.dragRotate.enable();const d=(e=>{let{enable:t,clickTolerance:n}=e;const r=new Vr({checkCorrectEvent:e=>0===o.mouseButton(e)&&!e.ctrlKey});return new Or({clickTolerance:n,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:r,enable:t,assignEvents:Nr})})(e),p=new $r(e,t);t.dragPan=new si(n,d,p),this._add("mousePan",d),this._add("touchPan",p,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&t.dragPan.enable(e.dragPan);const f=new Kr,m=new Wr;t.touchZoomRotate=new ci(n,m,f,l),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&t.touchZoomRotate.enable(e.touchZoomRotate);const g=t.scrollZoom=new ri(t,(()=>this._triggerRenderFrame()));this._add("scrollZoom",g,["mousePan"]),e.interactive&&e.scrollZoom&&t.scrollZoom.enable(e.scrollZoom);const y=t.keyboard=new ei(t);this._add("keyboard",y),e.interactive&&e.keyboard&&t.keyboard.enable(),this._add("blockableMapEvent",new Mr(t))}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(hi(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}mergeHandlerResult(e,n,r,i,a){if(!r)return;t.e(e,r);const o={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}_applyChanges(){const e={},n={},r={};for(const[i,a,o]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.e(n,a),t.e(r,o);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,t,n){const r=this._map,i=r._getTransformForUpdate(),a=r.terrain;if(!(pi(e)||a&&this._terrainMovement))return this._fireEvents(t,n,!0);let{panDelta:o,zoomDelta:s,bearingDelta:l,pitchDelta:c,around:u,pinchAround:h}=e;void 0!==h&&(u=h),r._stop(!0),u=u||r.transform.centerPoint;const d=i.pointLocation(o?u.sub(o):u);l&&(i.bearing+=l),c&&(i.pitch+=c),s&&(i.zoom+=s),a?this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?i.center=i.pointLocation(i.centerPoint.sub(o)):i.setLocationAtPoint(d,u):(this._terrainMovement=!0,this._map._elevationFreeze=!0,i.setLocationAtPoint(d,u),this._map.once("moveend",(()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,i.recalculateZoom(r.terrain)}))):i.setLocationAtPoint(d,u),r._applyUpdatedTransform(i),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}_fireEvents(e,n,r){const i=hi(this._eventsInProgress),o=hi(e),s={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in s)this._fireEvent(t,s[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=n[e]||r,l[`${t}end`]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=hi(this._eventsInProgress);if(r&&(i||o)&&!u){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&a.prefersReducedMotion?(this._map.fire(new t.k("moveend",{originalEvent:c})),n(this._map.getBearing())&&this._map.resetNorth()):(n(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.k(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new di("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class mi extends t.E{constructor(e,t){super(),this._renderFrameCallback=()=>{const e=Math.min((a.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new t.M(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,n,r){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.e({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,n,r){return this.easeTo(t.e({zoom:e},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,n,r){return this.easeTo(t.e({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.e({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=Z.convert(e);const n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}_cameraForBoxAndBearing(e,n,r,i){const a={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.e({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}i.padding=t.e(a,i.padding);const o=this.transform,s=o.padding,l=new Z(e,n),c=o.project(l.getNorthWest()),u=o.project(l.getNorthEast()),h=o.project(l.getSouthEast()),d=o.project(l.getSouthWest()),p=t.b7(-r),f=c.rotate(p),m=u.rotate(p),g=h.rotate(p),y=d.rotate(p),_=new t.P(Math.max(f.x,m.x,y.x,g.x),Math.max(f.y,m.y,y.y,g.y)),v=new t.P(Math.min(f.x,m.x,y.x,g.x),Math.min(f.y,m.y,y.y,g.y)),x=_.sub(v),b=(o.width-(s.left+s.right+i.padding.left+i.padding.right))/x.x,L=(o.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/x.y;if(L<0||b<0)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const w=Math.min(o.scaleZoom(o.scale*Math.min(b,L)),i.maxZoom),k=t.P.convert(i.offset),S=new t.P((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(t.b7(r)),C=k.add(S).mult(o.scale/o.zoomScale(w));return{center:o.unproject(c.add(h).div(2).sub(C)),zoom:w,bearing:r}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}fitScreenCoordinates(e,n,r,i,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.P.convert(e)),this.transform.pointLocation(t.P.convert(n)),r,i),i,a)}_fitInternal(e,n,r){return e?(delete(n=t.e(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this._getTransformForUpdate();let i=!1,a=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.M.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(a=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this._applyUpdatedTransform(r),this.fire(new t.k("movestart",n)).fire(new t.k("move",n)),i&&this.fire(new t.k("zoomstart",n)).fire(new t.k("zoom",n)).fire(new t.k("zoomend",n)),a&&this.fire(new t.k("rotatestart",n)).fire(new t.k("rotate",n)).fire(new t.k("rotateend",n)),o&&this.fire(new t.k("pitchstart",n)).fire(new t.k("pitch",n)).fire(new t.k("pitchend",n)),this.fire(new t.k("moveend",n))}calculateCameraOptionsFromTo(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=t.Y.fromLngLat(e,n),o=t.Y.fromLngLat(r,i),s=o.x-a.x,l=o.y-a.y,c=o.z-a.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:o.toLngLat(),zoom:d,pitch:f,bearing:p}}easeTo(e,n){var r;this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.b6},e)).animate||!e.essential&&a.prefersReducedMotion)&&(e.duration=0);const i=this._getTransformForUpdate(),o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:i.padding,p=t.P.convert(e.offset);let f=i.centerPoint.add(p);const m=i.pointLocation(f),{center:g,zoom:y}=i.getConstrained(t.M.convert(e.center||m),null!==(r=e.zoom)&&void 0!==r?r:o);this._normalizeCenter(g);const _=i.project(m),v=i.project(g).sub(_),x=i.zoomScale(y-o);let b,L;e.around&&(b=t.M.convert(e.around),L=i.locationPoint(b));const w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||y!==o,this._rotating=this._rotating||s!==u,this._pitching=this._pitching||h!==l,this._padding=!i.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),this.terrain&&this._prepareElevation(g),this._ease((r=>{if(this._zooming&&(i.zoom=t.z.number(o,y,r)),this._rotating&&(i.bearing=t.z.number(s,u,r)),this._pitching&&(i.pitch=t.z.number(l,h,r)),this._padding&&(i.interpolatePadding(c,d,r),f=i.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(r),b)i.setLocationAtPoint(b,L);else{const e=i.zoomScale(i.zoom-o),t=y>o?Math.min(2,x):Math.max(.5,x),n=Math.pow(t,1-r),a=i.unproject(_.add(v.mult(r*n)).mult(e));i.setLocationAtPoint(i.renderWorldCopies?a.wrap():a,f)}this._applyUpdatedTransform(i),this._fireMoveEvents(n)}),(e=>{this.terrain&&this._finalizeElevation(),this._afterEase(n,e)}),e),this}_prepareEase(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,n||r.moving||this.fire(new t.k("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.k("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.k("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(n-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.elevation=t.z.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(e){if(!this.transformCameraUpdate)return;const t=e.clone(),{center:n,zoom:r,pitch:i,bearing:a,elevation:o}=this.transformCameraUpdate(t);n&&(t.center=n),void 0!==r&&(t.zoom=r),void 0!==i&&(t.pitch=i),void 0!==a&&(t.bearing=a),void 0!==o&&(t.elevation=o),this.transform.apply(t)}_fireMoveEvents(e){this.fire(new t.k("move",e)),this._zooming&&this.fire(new t.k("zoom",e)),this._rotating&&this.fire(new t.k("rotate",e)),this._pitching&&this.fire(new t.k("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.k("zoomend",e)),i&&this.fire(new t.k("rotateend",e)),a&&this.fire(new t.k("pitchend",e)),this.fire(new t.k("moveend",e))}flyTo(e,n){var r;if(!e.essential&&a.prefersReducedMotion){const r=t.L(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.b6},e);const i=this._getTransformForUpdate(),o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:i.padding,p=t.P.convert(e.offset);let f=i.centerPoint.add(p);const m=i.pointLocation(f),{center:g,zoom:y}=i.getConstrained(t.M.convert(e.center||m),null!==(r=e.zoom)&&void 0!==r?r:o);this._normalizeCenter(g);const _=i.zoomScale(y-o),v=i.project(m),x=i.project(g).sub(v);let b=e.curve;const L=Math.max(i.width,i.height),w=L/_,k=x.mag();if("minZoom"in e){const n=t.ac(Math.min(e.minZoom,o,y),i.minZoom,i.maxZoom),r=L/i.zoomScale(n-o);b=Math.sqrt(r/k*2)}const S=b*b;function C(e){const t=(w*w-L*L+(e?-1:1)*S*S*k*k)/(2*(e?w:L)*S*k);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}const I=C(!1);let M=function(e){return E(I)/E(I+b*e)},P=function(e){return L*((E(I)*(T(t=I+b*e)/E(t))-T(I))/S)/k;var t},A=(C(!0)-I)/b;if(Math.abs(k)<1e-6||!isFinite(A)){if(Math.abs(L-w)<1e-6)return this.easeTo(e,n);const t=w<L?-1:1;A=Math.abs(Math.log(w/L))/b,P=function(){return 0},M=function(e){return Math.exp(t*b*e)}}return e.duration="duration"in e?+e.duration:1e3*A/("screenSpeed"in e?+e.screenSpeed/b:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==u,this._pitching=h!==l,this._padding=!i.isPaddingEqual(d),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(g),this._ease((r=>{const a=r*A,m=1/M(a);i.zoom=1===r?y:o+i.scaleZoom(m),this._rotating&&(i.bearing=t.z.number(s,u,r)),this._pitching&&(i.pitch=t.z.number(l,h,r)),this._padding&&(i.interpolatePadding(c,d,r),f=i.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(r);const _=1===r?g:i.unproject(v.add(x.mult(P(a))).mult(m));i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,f),this._applyUpdatedTransform(i),this._fireMoveEvents(n)}),(()=>{this.terrain&&this._finalizeElevation(),this._afterEase(n)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=a.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=t.b0(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.M.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const gi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class yi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gi;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.title=n,e.setAttribute("aria-label",n)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const r in t){const n=t[r];if(n.used||n.usedForTerrain){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl");const t=o.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const r of n)if(r.id===e)return void(r.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var xi=t.X([{name:"a_pos3d",type:"Int16",components:3}]);class bi extends t.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];const r={};for(const i of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))r[i.key]=!0,this._renderableTilesKeys.push(i.key),this._tiles[i.key]||(i.posMatrix=new Float64Array(16),t.aN(i.posMatrix,0,t.W,0,t.W,0,1),this._tiles[i.key]=new se(i,this.tileSize));for(const t in this._tiles)r[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const n=this._tiles[t];(!e||n.tileID.equals(e)||n.tileID.isChildOf(e)||e.isChildOf(n.tileID))&&(n.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const n={};for(const r of this._renderableTilesKeys){const i=this._tiles[r].tileID;if(i.canonical.equals(e.canonical)){const i=e.clone();i.posMatrix=new Float64Array(16),t.aN(i.posMatrix,0,t.W,0,t.W,0,1),n[r]=i}else if(i.canonical.isChildOf(e.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16);const o=i.canonical.z-e.canonical.z,s=i.canonical.x-(i.canonical.x>>o<<o),l=i.canonical.y-(i.canonical.y>>o<<o),c=t.W>>o;t.aN(a.posMatrix,0,c,0,c,0,1),t.H(a.posMatrix,a.posMatrix,[-s*c,-l*c,0]),n[r]=a}else if(e.canonical.isChildOf(i.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16);const o=e.canonical.z-i.canonical.z,s=e.canonical.x-(e.canonical.x>>o<<o),l=e.canonical.y-(e.canonical.y>>o<<o),c=t.W>>o;t.aN(a.posMatrix,0,t.W,0,t.W,0,1),t.H(a.posMatrix,a.posMatrix,[s*c,l*c,0]),t.J(a.posMatrix,a.posMatrix,[1/2**o,1/2**o,0]),n[r]=a}}return n}getSourceTile(e,t){const n=this.sourceCache._source;let r=e.overscaledZ-this.deltaZoom;if(r>n.maxzoom&&(r=n.maxzoom),r<n.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(r).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!i||!i.dem)&&t)for(;r>=n.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(e.scaledTo(r--).key);return i}tilesAfterTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((t=>t.timeAdded>=e))}}class Li{constructor(e,t,n){this.painter=e,this.sourceCache=new bi(t),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.W;var a;if(!(n>=0&&n<i&&r>=0&&r<i))return 0;const o=this.getTerrainData(e),s=null===(a=o.tile)||void 0===a?void 0:a.dem;if(!s)return 0;const l=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}([],[n/i*t.W,r/i*t.W],o.u_terrain_matrix),c=[l[0]*s.dim,l[1]*s.dim],u=Math.floor(c[0]),h=Math.floor(c[1]),d=c[0]-u,p=c[1]-h;return s.get(u,h)*(1-d)*(1-p)+s.get(u+1,h)*d*(1-p)+s.get(u,h+1)*(1-d)*p+s.get(u+1,h+1)*d*p}getElevationForLngLatZoom(e,n){const{tileID:r,mercatorX:i,mercatorY:a}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(r,i%t.W,a%t.W,t.W)}getElevation(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.W;return this.getDEMElevation(e,n,r,i)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,n=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new L(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new L(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.an([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const e=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new L(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const r=n&&n+n.tileID.key+e.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=r?i=e.canonical.z-r:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const a=e.canonical.x-(e.canonical.x>>i<<i),o=e.canonical.y-(e.canonical.y>>i<<i),s=t.b8(new Float64Array(16),[1/(t.W<<i),1/(t.W<<i),0]);t.H(s,s,[a*t.W,o*t.W,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const t=this.painter,n=t.width/devicePixelRatio,r=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new L(t.context,{width:n,height:r,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new L(t.context,{width:n,height:r,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(n,r,!0,!1),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,n,r))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,a=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,a+=4)n[a+0]=255&e,n[a+1]=255&t,n[a+2]=e>>8<<4|t>>8,n[a+3]=0;const r=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),i=new L(e,r,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){const n=new Uint8Array(4),r=this.painter.context,i=r.gl;r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,n),r.bindFramebuffer.set(null);const a=n[0]+(n[2]>>4<<8),o=n[1]+((15&n[2])<<8),s=this.coordsIndex[255-n[3]],l=s&&this.sourceCache.getTileByID(s);if(!l)return null;const c=this._coordsTextureSize,u=(1<<l.tileID.canonical.z)*c;return new t.Y((l.tileID.canonical.x*c+a)/u+l.tileID.wrap,(l.tileID.canonical.y*c+o)/u,this.getElevation(l.tileID,a,o,c))}depthAtPoint(e){const t=new Uint8Array(4),n=this.painter.context,r=n.gl;return n.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),r.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,r.RGBA,r.UNSIGNED_BYTE,t),n.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,n=new t.b9,r=new t.aX,i=this.meshSize,a=t.W/i,o=i*i;for(let t=0;t<=i;t++)for(let e=0;e<=i;e++)n.emplaceBack(e*a,t*a,0);for(let t=0;t<o;t+=i+1)for(let e=0;e<i;e++)r.emplaceBack(e+t,i+e+t+1,i+e+t+2),r.emplaceBack(e+t,i+e+t+2,e+t+1);const s=n.length,l=s+2*(i+1);for(const h of[0,1])for(let e=0;e<=i;e++)for(const r of[0,1])n.emplaceBack(e*a,h*t.W,r);for(let t=0;t<2*i;t+=2)r.emplaceBack(l+t,l+t+1,l+t+3),r.emplaceBack(l+t,l+t+3,l+t+2),r.emplaceBack(s+t,s+t+3,s+t+1),r.emplaceBack(s+t,s+t+2,s+t+3);const c=n.length,u=c+2*(i+1);for(const h of[0,1])for(let e=0;e<=i;e++)for(const r of[0,1])n.emplaceBack(h*t.W,e*a,r);for(let t=0;t<2*i;t+=2)r.emplaceBack(c+t,c+t+1,c+t+3),r.emplaceBack(c+t,c+t+3,c+t+2),r.emplaceBack(u+t,u+t+3,u+t+1),r.emplaceBack(u+t,u+t+2,u+t+3);return this._mesh={indexBuffer:e.createIndexBuffer(r),vertexBuffer:e.createVertexBuffer(n,xi.members),segments:t.$.simpleSegment(0,0,n.length,r.length)},this._mesh}getMeshFrameDelta(e){return 2*Math.PI*t.ba/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,t){var n;const{tileID:r}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(n=this.getMinMaxElevation(r).minElevation)&&void 0!==n?n:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,n={minElevation:null,maxElevation:null};return t&&t.dem&&(n.minElevation=t.dem.min*this.exaggeration,n.maxElevation=t.dem.max*this.exaggeration),n}_getOverscaledTileIDFromLngLatZoom(e,n){const r=t.Y.fromLngLat(e.wrap()),i=(1<<n)*t.W,a=r.x*i,o=r.y*i,s=Math.floor(a/t.W),l=Math.floor(o/t.W);return{tileID:new t.Q(n,0,n,s,l),mercatorX:a,mercatorY:o}}}class wi{constructor(e,t,n){this._context=e,this._size=t,this._tileSize=n,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const t=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),n=new L(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return n.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),t.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),t.colorAttachment.set(n.texture),{id:e,fbo:t,texture:n,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const ki={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Si{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new wi(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((n=>!e._layers[n].isHidden(t))),this._coordsDescendingInv={};for(const n in e.sourceCaches){this._coordsDescendingInv[n]={};const t=e.sourceCaches[n].getVisibleCoordinates();for(const e of t){const t=this.terrain.sourceCache.getTerrainCoords(e);for(const e in t)this._coordsDescendingInv[n][e]||(this._coordsDescendingInv[n][e]=[]),this._coordsDescendingInv[n][e].push(t[e])}}this._coordsDescendingInvStr={};for(const n of e._order){const t=e._layers[n],r=t.source;if(ki[t.type]&&!this._coordsDescendingInvStr[r]){this._coordsDescendingInvStr[r]={};for(const e in this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][e]=this._coordsDescendingInv[r][e].map((e=>e.key)).sort().join()}}for(const n of this._renderableTiles)for(const e in this._coordsDescendingInvStr){const t=this._coordsDescendingInvStr[e][n.tileID.key];t&&t!==n.rttCoords[e]&&(n.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const n=e.type,r=this.painter,i=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(ki[n]&&(this._prevType&&ki[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(e.id),!i))return!0;if(ki[this._prevType]||ki[n]&&i){this._prevType=n;const e=this._stacks.length-1,i=this._stacks[e]||[];for(const n of this._renderableTiles){if(this.pool.isFull()&&(cr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(n),n.rtt[e]){const t=this.pool.getObjectForId(n.rtt[e].id);if(t.stamp===n.rtt[e].stamp){this.pool.useObject(t);continue}}const a=this.pool.getOrCreateFreeObject();this.pool.useObject(a),this.pool.stampObject(a),n.rtt[e]={id:a.id,stamp:a.stamp},r.context.bindFramebuffer.set(a.fbo.framebuffer),r.context.clear({color:t.aO.transparent,stencil:0}),r.currentStencilSource=void 0;for(let e=0;e<i.length;e++){const t=r.style._layers[i[e]],o=t.source?this._coordsDescendingInv[t.source][n.tileID.key]:[n.tileID];r.context.viewport.set([0,0,a.fbo.width,a.fbo.height]),r._renderTileClippingMasks(t,o),r.renderLayer(r,r.style.sourceCaches[t.source],t,o),t.source&&(n.rttCoords[t.source]=this._coordsDescendingInvStr[t.source][n.tileID.key])}}return cr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ki[n]}return!1}}const Ci={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ti=n,Ei={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:gi,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ii=e=>{e.touchstart=e.dragStart,e.touchmoveWindow=e.dragMove,e.touchend=e.dragEnd},Mi={showCompass:!0,showZoom:!0,visualizePitch:!1};class Pi{constructor(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=e=>{this.startMouse(t.e({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.moveMouse(e,o.mousePos(this.element,e))},this.mouseup=e=>{this.mouseRotate.dragEnd(e),this.mousePitch&&this.mousePitch.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.startTouch(e,this._startPos),o.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),o.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.moveTouch(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const i=e.dragRotate._mouseRotate.getClickTolerance(),a=e.dragRotate._mousePitch.getClickTolerance();this.element=n,this.mouseRotate=Hr({clickTolerance:i,enable:!0}),this.touchRotate=(e=>{let{enable:t,clickTolerance:n,bearingDegreesPerPixelMoved:r=.8}=e;const i=new jr;return new Or({clickTolerance:n,move:(e,t)=>({bearingDelta:(t.x-e.x)*r}),moveStateManager:i,enable:t,assignEvents:Ii})})({clickTolerance:i,enable:!0}),this.map=e,r&&(this.mousePitch=Ur({clickTolerance:a,enable:!0}),this.touchPitch=(e=>{let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:r=-.5}=e;const i=new jr;return new Or({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*r}),moveStateManager:i,enable:t,assignEvents:Ii})})({clickTolerance:a,enable:!0})),o.addEventListener(n,"mousedown",this.mousedown),o.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(n,"touchcancel",this.reset)}startMouse(e,t){this.mouseRotate.dragStart(e,t),this.mousePitch&&this.mousePitch.dragStart(e,t),o.disableDrag()}startTouch(e,t){this.touchRotate.dragStart(e,t),this.touchPitch&&this.touchPitch.dragStart(e,t),o.disableDrag()}moveMouse(e,t){const n=this.map,{bearingDelta:r}=this.mouseRotate.dragMove(e,t)||{};if(r&&n.setBearing(n.getBearing()+r),this.mousePitch){const{pitchDelta:r}=this.mousePitch.dragMove(e,t)||{};r&&n.setPitch(n.getPitch()+r)}}moveTouch(e,t){const n=this.map,{bearingDelta:r}=this.touchRotate.dragMove(e,t)||{};if(r&&n.setBearing(n.getBearing()+r),this.touchPitch){const{pitchDelta:r}=this.touchPitch.dragMove(e,t)||{};r&&n.setPitch(n.getPitch()+r)}}off(){const e=this.element;o.removeEventListener(e,"mousedown",this.mousedown),o.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),o.removeEventListener(window,"touchend",this.touchend),o.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup),o.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),o.removeEventListener(window,"touchend",this.touchend)}}let Ai;function zi(e,n,r){const i=new t.M(e.lng,e.lat);if(e=new t.M(e.lng,e.lat),n){const i=new t.M(e.lng-360,e.lat),a=new t.M(e.lng+360,e.lat),o=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<o?e=i:r.locationPoint(a).distSqr(n)<o&&(e=a)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e.lng!==i.lng&&r.locationPoint(e).y>r.height/2-r.getHorizon()?e:i}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ri(e,t,n){const r=e.classList;for(const i in Di)r.remove(`maplibregl-${n}-anchor-${i}`);r.add(`maplibregl-${n}-anchor-${t}`)}class Fi extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},this._update=e=>{var t;if(!this._map)return;const n=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!n)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?zi(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let r="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?r=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(r=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${r}`),a.frameAsync(new AbortController).then((()=>{this._updateOpacity(e&&"moveend"===e.type)})).catch((()=>{}))},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.k("dragstart"))),this.fire(new t.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.k("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const n=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${i}px`),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=o.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Ri(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.M.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.abs(n)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n;if(!(null===(n=this._map)||void 0===n?void 0:n.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const r=this._map,i=r.terrain.depthAtPoint(this._pos),a=r.terrain.getElevationForLngLatZoom(this._lngLat,r.transform.tileZoom);if(r.transform.lngLatToCameraDepth(this._lngLat,a)-i<.006)return void(this._element.style.opacity=this._opacity);const o=-this._offset.y/r.transform._pixelPerMeter,s=Math.sin(r.getPitch()*Math.PI/180)*o,l=r.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),c=r.transform.lngLatToCameraDepth(this._lngLat,a+s);this._element.style.opacity=c-l>.006?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return void 0===e&&void 0===t&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const Oi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bi=0,Vi=!1;const ji={maxWidth:100,unit:"metric"};function Ni(e,t,n){const r=n&&n.maxWidth||100,i=e._container.clientHeight/2,a=e.unproject([0,i]),o=e.unproject([r,i]),s=a.distanceTo(o);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?Hi(t,r,n/5280,e._getUIString("ScaleControl.Miles")):Hi(t,r,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Hi(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Hi(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):Hi(t,r,s,e._getUIString("ScaleControl.Meters"))}function Hi(e,t,n,r){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(i/n)+"px",e.innerHTML=`${i}&nbsp;${r}`}const Ui={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},$i=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Zi(e){if(e){if("number"==typeof e){const n=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(n,n),"top-right":new t.P(-n,n),bottom:new t.P(0,-e),"bottom-left":new t.P(n,-n),"bottom-right":new t.P(-n,-n),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const n=t.P.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return Zi(new t.P(0,0))}const qi=n;e.AJAXError=t.bd,e.Evented=t.E,e.LngLat=t.M,e.MercatorCoordinate=t.Y,e.Point=t.P,e.addProtocol=t.be,e.config=t.a,e.removeProtocol=t.bf,e.AttributionControl=yi,e.BoxZoomHandler=Ar,e.CanvasSource=ee,e.CooperativeGesturesHandler=ui,e.DoubleClickZoomHandler=ii,e.DragPanHandler=si,e.DragRotateHandler=li,e.EdgeInsets=pr,e.FullscreenControl=class extends t.E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=K,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new t.M(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),a=t.e({bearing:i},this.options.fitBoundsOptions),o=Z.fromLngLat(n,r);this._map.fitBounds(o,a,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new t.M(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Vi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=e=>{if(this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Fi({element:this._dotElement}),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.k("trackuserlocationend")))}))}},this.options=t.e({},Oi,e)}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return t._(this,arguments,void 0,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==Ai&&!e)return Ai;if(void 0===window.navigator.permissions)return Ai=!!window.navigator.geolocation,Ai;try{const e=yield window.navigator.permissions.query({name:"geolocation"});Ai="denied"!==e.state}catch(e){Ai=!!window.navigator.geolocation}return Ai}()}))}().then((e=>this._setupUI(e))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bi=0,Vi=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),n=e.getNorthEast(),r=t.distanceTo(n),i=Math.ceil(this._accuracy/(r/this._map._container.clientHeight)*2);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bi--,Vi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bi++,Bi>1?(e={maximumAge:6e5,timeout:0},Vi=!0):(e=this.options.positionOptions,Vi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.Hash=yr,e.ImageSource=J,e.KeyboardHandler=ei,e.LngLatBounds=Z,e.LogoControl=_i,e.Map=class extends mi{constructor(e){if(t.bb.mark(t.bc.create),null!=(e=t.e({},Ei,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new mr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.k("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.k("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new vi,this._controls=[],this._mapId=t.a3(),this._locale=t.e({},Ci,e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this._imageQueueHandle=p.addThrottleControl((()=>this.isMoving())),this._requestManager=new m(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=gr((e=>{this._trackResize&&!this._removed&&this.resize(e)._update()}),50);this._resizeObserver=new ResizeObserver((n=>{e?t(n):e=!0})),this._resizeObserver.observe(this._container)}this.handlers=new fi(this,e),this._hash=e.hash&&new yr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new yi("boolean"==typeof e.attributionControl?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new _i,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.k(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.k(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.k("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,n,r){return null==r&&this.terrain&&(r=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,n,r)}resize(e){var n;const r=this._containerDimensions(),i=r[0],a=r[1],o=this._getClampedPixelRatio(i,a);if(this._resizeCanvas(i,a,o),this.painter.resize(i,a,o),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(i,a);this._resizeCanvas(i,a,t),this.painter.resize(i,a,t)}this.transform.resize(i,a),null===(n=this._requestedCameraState)||void 0===n||n.resize(i,a);const s=!this._moving;return s&&(this.stop(),this.fire(new t.k("movestart",e)).fire(new t.k("move",e))),this.fire(new t.k("resize",e)),s&&this.fire(new t.k("moveend",e)),this}_getClampedPixelRatio(e,t){const{0:n,1:r}=this._maxCanvasSize,i=this.getPixelRatio(),a=e*i,o=t*i;return Math.min(a>n?n/a:1,o>r?r/o:1)*i}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(Z.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(e){return this.transform.locationPoint(t.M.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.pointLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const a=this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[];a.length?r||(r=!0,n.call(this,new Cr(e,this,i.originalEvent,{features:a}))):r=!1};return{layer:t,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{(this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[]).length?r=!0:r&&(r=!1,n.call(this,new Cr(e,this,i.originalEvent)))},a=t=>{r&&(r=!1,n.call(this,new Cr(e,this,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:i,mouseout:a}}}{const r=e=>{const r=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(this,e),delete e.features)};return{layer:t,listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);const r=this._createDelegatedListener(e,t,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(()=>{const r=this._delegatedListeners[e];for(let e=0;e<r.length;e++){const i=r[e];if(i.layer===t&&i.listener===n){for(const e in i.delegates)this.off(e,i.delegates[e]);return r.splice(e,1),this}}})(),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let r;const i=e instanceof t.P||Array.isArray(e),a=i?e:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(i?{}:e)||{},a instanceof t.P||"number"==typeof a[0])r=[t.P.convert(a)];else{const e=t.P.convert(a[0]),n=t.P.convert(a[1]);r=[e,new t.P(n.x,e.y),n,new t.P(e.x,n.y),e]}return this.style.queryRenderedFeatures(r,n,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,n){return!1!==(n=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const n=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new ut(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,n):this.style.loadJSON(e,t,n),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ut(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.transformRequest(e,f.Style);t.h(r,new AbortController).then((e=>{this._updateDiff(e.data,n)})).catch((e=>{e&&this.fire(new t.j(e))}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e,n)&&this._update(!0)}catch(r){t.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.j(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const n=this.style.sourceCaches[e.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);null===this.terrain&&n.reload();for(const r in this.style._layers){const n=this.style._layers[r];"hillshade"===n.type&&n.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Li(this.painter,n,e),this.painter.renderToTexture=new Si(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=t=>{"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new t.k("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:i=1,sdf:o=!1,stretchX:s,stretchY:l,content:c}=r;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||t.b(n))){if(void 0===n.width||void 0===n.height)return this.fire(new t.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:r,height:a,data:u}=n,h=n;return this.style.addImage(e,{data:new t.R({width:r,height:a},new Uint8Array(u)),pixelRatio:i,stretchX:s,stretchY:l,content:c,sdf:o,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e),this}}{const{width:r,height:u,data:h}=a.getImageData(n);this.style.addImage(e,{data:new t.R({width:r,height:u},h),pixelRatio:i,stretchX:s,stretchY:l,content:c,sdf:o,version:0})}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return this.fire(new t.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof HTMLImageElement||t.b(n)?a.getImageData(n):n,{width:o,height:s,data:l}=i;if(void 0===o||void 0===s)return this.fire(new t.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||s!==r.data.height)return this.fire(new t.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(n instanceof HTMLImageElement||t.b(n));return r.data.replace(l,c),this.style.updateImage(e,r),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.j(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return p.getImage(this._requestManager.transformRequest(e,f.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,n,(e=>{e||this._update(!0)})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0)})),this}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=o.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),r=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],r);const i=this._controlContainer=o.create("div","maplibregl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{a[e]=o.create("div",`maplibregl-ctrl-${e} `,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,n){this._canvas.width=Math.floor(n*e),this._canvas.height=Math.floor(n*t),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const e={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",(n=>{t={requestedAttributes:e},n&&(t.statusMessage=n.statusMessage,t.type=n.type)}),{once:!0});const n=this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e);if(!n){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new ur(n,this.transform),s.testSupport(n)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=a.now();this.style.zoomHistory.update(e,i);const o=new t.a8(e,{now:i,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=o.crossFadingFactor();1===s&&s===this._crossFadingFactor||(r=!0,this._crossFadingFactor=s),this.style.update(o)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new t.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.bb.mark(t.bc.load),this.fire(new t.k("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const i=this._sourcesDirty||this._styleDirty||this._placementDirty;return i||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.k("idle")),!this._loaded||this._fullyLoaded||i||(this._fullyLoaded=!0,t.bb.mark(t.bc.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),p.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),t.bb.clearMetrics(),this._removed=!0,this.fire(new t.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,a.frameAsync(this._frameRequest).then((e=>{t.bb.frame(e),this._frameRequest=null,this._render(e)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return Ti}getCameraTargetElevation(){return this.transform.elevation}},e.MapMouseEvent=Cr,e.MapTouchEvent=Tr,e.MapWheelEvent=Er,e.Marker=Fi,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,t)=>{const n=this._map._getUIString(`NavigationControl.${t}`);e.title=n,e.setAttribute("aria-label",n)},this.options=t.e({},Mi,e),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=o.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},e.Popup=class extends t.E{constructor(e){super(),this.remove=()=>(this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map),this.fire(new t.k("close")),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var t;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=o.create("div","maplibregl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?zi(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._trackPointer&&!e)return;const n=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let r=this.options.anchor;const i=Zi(this.options.offset);if(!r){const e=this._container.offsetWidth,t=this._container.offsetHeight;let a;a=n.y+i.bottom.y<t?["top"]:n.y>this._map.transform.height-t?["bottom"]:[],n.x<e/2?a.push("left"):n.x>this._map.transform.width-e/2&&a.push("right"),r=0===a.length?"bottom":a.join("-")}let a=n.add(i[r]);this.options.subpixelPositioning||(a=a.round()),o.setTransform(this._container,`${Di[r]} translate(${a.x}px,${a.y}px)`),Ri(this._container,r,"popup")},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(Ui),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.M.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),n=document.createElement("body");let r;for(n.innerHTML=e;r=n.firstChild,r;)t.appendChild(r);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector($i);e&&e.focus()}},e.RasterDEMTileSource=X,e.RasterTileSource=W,e.ScaleControl=class{constructor(e){this._onMove=()=>{Ni(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Ni(this._map,this._container,this.options)},this.options=t.e({},ji,e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=ri,e.Style=ut,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=Jr,e.TwoFingersTouchRotateHandler=Kr,e.TwoFingersTouchZoomHandler=Wr,e.TwoFingersTouchZoomRotateHandler=ci,e.VectorTileSource=G,e.VideoSource=Q,e.addSourceType=(e,n)=>t._(void 0,void 0,void 0,(function*(){if(ne(e))throw new Error(`A source type called "${e}" already exists.`);((e,t)=>{te[e]=t})(e,n)})),e.clearPrewarmedResources=function(){const e=F;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(z),F=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return oe().getRTLTextPluginStatus()},e.getVersion=function(){return qi},e.getWorkerCount=function(){return D.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return j().broadcast("importScript",e)},e.prewarm=function(){B().acquire(z)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return oe().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){D.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}})),e}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(a,o),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".8ab44547.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,i,a,o)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,o=r[0],s=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const o="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ie){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:d=!1}=i,p=l.history,f=e.Pop,m=null,g=y();function y(){return(p.state||{idx:null}).idx}function _(){f=e.Pop;let t=y(),n=null==t?null:t-g;g=t,m&&m({action:f,location:x.location,delta:n})}function v(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let x={get action(){return f},get location(){return t(l,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(o,_),m=e,()=>{l.removeEventListener(o,_),m=null}},createHref:e=>n(l,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let i=u(x.location,t,n);r&&r(i,t),g=y()+1;let a=c(i,g),o=x.createHref(i);try{p.pushState(a,"",o)}catch(s){l.location.assign(o)}d&&m&&m({action:f,location:x.location,delta:1})},replace:function(t,n){f=e.Replace;let i=u(x.location,t,n);r&&r(i,t),g=y();let a=c(i,g),o=x.createHref(i);p.replaceState(a,"",o),d&&m&&m({action:f,location:x.location,delta:0})},go:e=>p.go(e)};return x}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){void 0===n&&(n="/");let r=I(("string"===typeof t?d(t):t).pathname||"/",n);if(null==r)return null;let i=g(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o)a=C(i[o],E(r));return a}function g(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let l=M([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let o=y(r.join("/")),s=[];return s.push(...o.map((e=>""===e?a:[a,e].join("/")))),i&&s.push(...o),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:\w+$/,v=3,x=2,b=1,L=10,w=-2,k=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=w),t&&(r+=x),n.filter((e=>!k(e))).reduce(((e,t)=>e+(_.test(t)?v:""===t?b:L)),r)}function C(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let e=n[o],s=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;a.push({params:r,pathname:M([i,c.pathname]),pathnameBase:P(M([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=M([i,c.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(r.push(t),"/([^\\/]+)")));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=s[n]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return l(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(s[n]||"",t),e}),{}),pathname:a,pathnameBase:o,pattern:e}}function E(e){try{return decodeURI(e)}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const M=e=>e.join("/").replace(/\/\/+/g,"/"),P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");Error;function A(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],D=(new Set(z),["get",...z]);new Set(D),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");const R="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},{useState:F,useEffect:O,useLayoutEffect:B,useDebugValue:V}=r;function j(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!R(n,e)}catch(r){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;const N=t.createContext(null);const H=t.createContext(null);const U=t.createContext(null);const $=t.createContext(null);const Z=t.createContext({outlet:null,matches:[]});const q=t.createContext(null);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function W(){return null!=t.useContext($)}function X(){return W()||s(!1),t.useContext($).location}const K=t.createContext(null);function Y(){let e=function(){var e;let n=t.useContext(q),r=re(ne.UseRouteError),i=ie(ne.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=A(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}class J extends t.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(Z.Provider,{value:this.props.routeContext},t.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q(e){let{routeContext:n,match:r,children:i}=e,a=t.useContext(N);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Z.Provider,{value:n},i)}function ee(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}let i=e,a=null==r?void 0:r.errors;if(null!=a){let e=i.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||s(!1),i=i.slice(0,Math.min(i.length,e+1))}return i.reduceRight(((e,o,s)=>{let l=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;r&&(c=o.route.ErrorBoundary?t.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:t.createElement(Y,null));let u=n.concat(i.slice(0,s+1)),h=()=>{let n=e;return l?n=c:o.route.Component?n=t.createElement(o.route.Component,null):o.route.element&&(n=o.route.element),t.createElement(Q,{match:o,routeContext:{outlet:e,matches:u},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===s)?t.createElement(J,{location:r.location,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u}}):h()}),null)}var te,ne;function re(e){let n=t.useContext(H);return n||s(!1),n}function ie(e){let n=function(){let e=t.useContext(Z);return e||s(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||s(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(te||(te={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ne||(ne={}));function ae(e){return function(e){let n=t.useContext(Z).outlet;return n?t.createElement(K.Provider,{value:e},n):n}(e.context)}function oe(e){s(!1)}function se(n){let{basename:r="/",children:i=null,location:a,navigationType:o=e.Pop,navigator:l,static:c=!1}=n;W()&&s(!1);let u=r.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:u,navigator:l,static:c})),[u,l,c]);"string"===typeof a&&(a=d(a));let{pathname:p="/",search:f="",hash:m="",state:g=null,key:y="default"}=a,_=t.useMemo((()=>{let e=I(p,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:y},navigationType:o}}),[u,p,f,m,g,y,o]);return null==_?null:t.createElement(U.Provider,{value:h},t.createElement($.Provider,{children:i,value:_}))}function le(n){let{children:r,location:i}=n,a=t.useContext(N);return function(n,r){W()||s(!1);let{navigator:i}=t.useContext(U),a=t.useContext(H),{matches:o}=t.useContext(Z),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=X();if(r){var f;let e="string"===typeof r?d(r):r;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||s(!1),h=e}else h=p;let g=h.pathname||"/",y=m(n,{pathname:"/"===u?g:g.slice(u.length)||"/"}),_=ee(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:M([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,a||void 0);return r&&_?t.createElement($.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},_):_}(a&&!r?a.router.routes:ue(r),i)}var ce;!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ce||(ce={}));new Promise((()=>{}));t.Component;function ue(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let a=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ue(e.props.children,a));e.type!==oe&&s(!1),e.props.index&&e.props.children&&s(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ue(e.props.children,a)),r.push(o)})),r}function he(e){let{basename:n,children:r,window:i}=e,a=t.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),p((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=d(e.location.hash.substr(1));return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:h(t))}),(function(e,t){l("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),o)));let s=a.current,[c,f]=t.useState({action:s.action,location:s.location});return t.useLayoutEffect((()=>s.listen(f)),[s]),t.createElement(se,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var de,pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(de||(de={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(pe||(pe={}));const fe=n.p+"static/media/accommodation.891e5b5047abf9bcd447.md",me=n.p+"static/media/adventures.ae5863a41e2f20cda601.md",ge=n.p+"static/media/our-conference-venue.d3eae6ed7beccb82e4b1.md",ye=n.p+"static/media/register.37f00a93e7663c28afb2.md",_e=n.p+"static/media/travel-grant-program.63e51b5180198cd2e775.md",ve=n.p+"static/media/call-for-papers.3cac87389409653d2802.md",xe=n.p+"static/media/code-of-conduct.e4012129a720d4b8409d.md",be=n.p+"static/media/community-day.e8dea4972dabbe87fb6a.md",Le=n.p+"static/media/get-involved.db58cf7b06f5b72366be.md",we=n.p+"static/media/transport.057d91c371338ccc1c0a.md",ke=n.p+"static/media/present.b48a79e16b15a6893839.md",Se=n.p+"static/media/product-showcase.29e695eb7a275abc9585.md",Ce=n.p+"static/media/program-outline.99e31de146f6b1de79f3.md",Te=n.p+"static/media/sponsorship.0b6fbd8f8573a3d60a91.md";function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}const Ie=["children","options"],Me=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{for:"htmlFor"}),Pe={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xa0",quot:"\u201c"},Ae=["style","script"],ze=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,De=/mailto:/i,Re=/\n{2,}$/,Fe=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,Oe=/^ *> ?/gm,Be=/^ {2,}\n/,Ve=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,je=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,Ne=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,He=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,Ue=/^(?:\n *)*\n/,$e=/\r\n?/g,Ze=/^\[\^([^\]]+)](:.*)\n/,qe=/^\[\^([^\]]+)]/,Ge=/\f/g,We=/^\s*?\[(x|\s)\]/,Xe=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Ke=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,Ye=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/i,Je=/&([a-zA-Z]+);/g,Qe=/^<!--[\s\S]*?(?:-->)/,et=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,tt=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,nt=/^\{.*\}$/,rt=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,it=/^<([^ >]+@[^ >]+)>/,at=/^<([^ >]+:\/[^ >]+)>/,ot=/-([a-z])?/gi,st=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,lt=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,ct=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,ut=/^\[([^\]]*)\] ?\[([^\]]*)\]/,ht=/(\[|\])/g,dt=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,pt=/\t/g,ft=/^ *\| */,mt=/(^ *\||\| *$)/g,gt=/ *$/,yt=/^ *:-+: *$/,_t=/^ *:-+ *$/,vt=/^ *-+: *$/,xt=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,bt=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1|\w)/,Lt=/^==((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)==/,wt=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,kt=/^\\([^0-9A-Za-z\s])/,St=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,Ct=/^\n+/,Tt=/^([ \t]*)/,Et=/\\([^\\])/g,It=/ *\n+$/,Mt=/(?:^|\n)( *)$/,Pt="(?:\\d+\\.)",At="(?:[*+-])";function zt(e){return"( *)("+(1===e?Pt:At)+") +"}const Dt=zt(1),Rt=zt(2);function Ft(e){return new RegExp("^"+(1===e?Dt:Rt))}const Ot=Ft(1),Bt=Ft(2);function Vt(e){return new RegExp("^"+(1===e?Dt:Rt)+"[^\\n]*(?:\\n(?!\\1"+(1===e?Pt:At)+" )[^\\n]*)*(\\n|$)","gm")}const jt=Vt(1),Nt=Vt(2);function Ht(e){const t=1===e?Pt:At;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const Ut=Ht(1),$t=Ht(2);function Zt(e,t){const n=1===t,r=n?Ut:$t,i=n?jt:Nt,a=n?Ot:Bt;return{t(e,t,n){const i=Mt.exec(n);return i&&(t.o||!t._&&!t.u)?r.exec(e=i[1]+e):null},i:yn.HIGH,l(e,t,r){const o=n?+e[2]:void 0,s=e[0].replace(Re,"\n").match(i);let l=!1;return{p:s.map((function(e,n){const i=a.exec(e)[0].length,o=new RegExp("^ {1,"+i+"}","gm"),c=e.replace(o,"").replace(a,""),u=n===s.length-1,h=-1!==c.indexOf("\n\n")||u&&l;l=h;const d=r._,p=r.o;let f;r.o=!0,h?(r._=!1,f=c.replace(It,"\n\n")):(r._=!0,f=c.replace(It,""));const m=t(f,r);return r._=d,r.o=p,m})),m:n,g:o}},h:(t,n,r)=>e(t.m?"ol":"ul",{key:r.k,start:t.g},t.p.map((function(t,i){return e("li",{key:i},n(t,r))})))}}const qt=/^\[([^\]]*)]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Gt=/^!\[([^\]]*)]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Wt=[Fe,je,Ne,Xe,Ke,Qe,st,jt,Ut,Nt,$t],Xt=[...Wt,/^[^\n]+(?:  \n|\n{2,})/,Ye,tt];function Kt(e){return e.replace(/[\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xc6]/g,"a").replace(/[\xe7\xc7]/g,"c").replace(/[\xf0\xd0]/g,"d").replace(/[\xc8\xc9\xca\xcb\xe9\xe8\xea\xeb]/g,"e").replace(/[\xcf\xef\xce\xee\xcd\xed\xcc\xec]/g,"i").replace(/[\xd1\xf1]/g,"n").replace(/[\xf8\xd8\u0153\u0152\xd5\xf5\xd4\xf4\xd3\xf3\xd2\xf2]/g,"o").replace(/[\xdc\xfc\xdb\xfb\xda\xfa\xd9\xf9]/g,"u").replace(/[\u0178\xff\xdd\xfd]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Yt(e){return vt.test(e)?"right":yt.test(e)?"center":_t.test(e)?"left":null}function Jt(e,t,n){const r=n.v;n.v=!0;const i=t(e.trim(),n);n.v=r;let a=[[]];return i.forEach((function(e,t){"tableSeparator"===e.type?0!==t&&t!==i.length-1&&a.push([]):("text"!==e.type||null!=i[t+1]&&"tableSeparator"!==i[t+1].type||(e.$=e.$.replace(gt,"")),a[a.length-1].push(e))})),a}function Qt(e,t,n){n._=!0;const r=Jt(e[1],t,n),i=e[2].replace(mt,"").split("|").map(Yt),a=function(e,t,n){return e.trim().split("\n").map((function(e){return Jt(e,t,n)}))}(e[3],t,n);return n._=!1,{S:i,A:a,L:r,type:"table"}}function en(e,t){return null==e.S[t]?{}:{textAlign:e.S[t]}}function tn(e){return function(t,n){return n._?e.exec(t):null}}function nn(e){return function(t,n){return n._||n.u?e.exec(t):null}}function rn(e){return function(t,n){return n._||n.u?null:e.exec(t)}}function an(e){return function(t){return e.exec(t)}}function on(e,t,n){if(t._||t.u)return null;if(n&&!n.endsWith("\n"))return null;let r="";e.split("\n").every((e=>!Wt.some((t=>t.test(e)))&&(r+=e+"\n",e.trim())));const i=r.trimEnd();return""==i?null:[r,i]}function sn(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch(e){return null}return e}function ln(e){return e.replace(Et,"$1")}function cn(e,t,n){const r=n._||!1,i=n.u||!1;n._=!0,n.u=!0;const a=e(t,n);return n._=r,n.u=i,a}function un(e,t,n){const r=n._||!1,i=n.u||!1;n._=!1,n.u=!0;const a=e(t,n);return n._=r,n.u=i,a}function hn(e,t,n){return n._=!1,e(t+"\n\n",n)}const dn=(e,t,n)=>({$:cn(t,e[1],n)});function pn(){return{}}function fn(){return null}function mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function gn(e,t,n){let r=e;const i=t.split(".");for(;i.length&&(r=r[i[0]],void 0!==r);)i.shift();return r||n}var yn,_n;function vn(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.overrides=n.overrides||{},n.slugify=n.slugify||Kt,n.namedCodesToUnicode=n.namedCodesToUnicode?Ee({},Pe,n.namedCodesToUnicode):Pe;const r=n.createElement||t.createElement;function i(e,t){const i=gn(n.overrides,`${e}.props`,{});for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return r(function(e,t){const n=gn(t,e);return n?"function"==typeof n||"object"==typeof n&&"render"in n?n:gn(t,`${e}.component`,e):e}(e,n.overrides),Ee({},t,i,{className:mn(null==t?void 0:t.className,i.className)||void 0}),...o)}function a(e){let r=!1;n.forceInline?r=!0:n.forceBlock||(r=!1===dt.test(e));const a=h(u(r?e:`${e.trimEnd().replace(Ct,"")}\n\n`,{_:r}));for(;"string"==typeof a[a.length-1]&&!a[a.length-1].trim();)a.pop();if(null===n.wrapper)return a;const o=n.wrapper||(r?"span":"div");let s;if(a.length>1||n.forceWrapper)s=a;else{if(1===a.length)return s=a[0],"string"==typeof s?i("span",{key:"outer"},s):s;s=null}return t.createElement(o,{key:"outer"},s)}function o(e){const n=e.match(ze);return n?n.reduce((function(e,n,r){const i=n.indexOf("=");if(-1!==i){const s=(o=n.slice(0,i),-1!==o.indexOf("-")&&null===o.match(et)&&(o=o.replace(ot,(function(e,t){return t.toUpperCase()}))),o).trim(),l=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(n.slice(i+1).trim()),c=Me[s]||s,u=e[c]=function(e,t){return"style"===e?t.split(/;\s?/).reduce((function(e,t){const n=t.slice(0,t.indexOf(":"));return e[n.replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(n.length+1).trim(),e}),{}):"href"===e?sn(t):(t.match(nt)&&(t=t.slice(1,t.length-1)),"true"===t||"false"!==t&&t)}(s,l);"string"==typeof u&&(Ye.test(u)||tt.test(u))&&(e[c]=t.cloneElement(a(u.trim()),{key:r}))}else"style"!==n&&(e[Me[n]||n]=!0);var o;return e}),{}):null}const s=[],l={},c={blockQuote:{t:rn(Fe),i:yn.HIGH,l:(e,t,n)=>({$:t(e[0].replace(Oe,""),n)}),h:(e,t,n)=>i("blockquote",{key:n.k},t(e.$,n))},breakLine:{t:an(Be),i:yn.HIGH,l:pn,h:(e,t,n)=>i("br",{key:n.k})},breakThematic:{t:rn(Ve),i:yn.HIGH,l:pn,h:(e,t,n)=>i("hr",{key:n.k})},codeBlock:{t:rn(Ne),i:yn.MAX,l:e=>({$:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,""),M:void 0}),h:(e,t,n)=>i("pre",{key:n.k},i("code",Ee({},e.I,{className:e.M?`lang-${e.M}`:""}),e.$))},codeFenced:{t:rn(je),i:yn.MAX,l:e=>({I:o(e[3]||""),$:e[4],M:e[2]||void 0,type:"codeBlock"})},codeInline:{t:nn(He),i:yn.LOW,l:e=>({$:e[2]}),h:(e,t,n)=>i("code",{key:n.k},e.$)},footnote:{t:rn(Ze),i:yn.MAX,l:e=>(s.push({O:e[2],B:e[1]}),{}),h:fn},footnoteReference:{t:tn(qe),i:yn.HIGH,l:e=>({$:e[1],R:`#${n.slugify(e[1])}`}),h:(e,t,n)=>i("a",{key:n.k,href:sn(e.R)},i("sup",{key:n.k},e.$))},gfmTask:{t:tn(We),i:yn.HIGH,l:e=>({T:"x"===e[1].toLowerCase()}),h:(e,t,n)=>i("input",{checked:e.T,key:n.k,readOnly:!0,type:"checkbox"})},heading:{t:rn(Xe),i:yn.HIGH,l:(e,t,r)=>({$:cn(t,e[2],r),j:n.slugify(e[2]),C:e[1].length}),h:(e,t,n)=>i(`h${e.C}`,{id:e.j,key:n.k},t(e.$,n))},headingSetext:{t:rn(Ke),i:yn.MAX,l:(e,t,n)=>({$:cn(t,e[1],n),C:"="===e[2]?1:2,type:"heading"})},htmlComment:{t:an(Qe),i:yn.HIGH,l:()=>({}),h:fn},image:{t:nn(Gt),i:yn.HIGH,l:e=>({D:e[1],R:ln(e[2]),N:e[3]}),h:(e,t,n)=>i("img",{key:n.k,alt:e.D||void 0,title:e.N||void 0,src:sn(e.R)})},link:{t:tn(qt),i:yn.LOW,l:(e,t,n)=>({$:un(t,e[1],n),R:ln(e[2]),N:e[3]}),h:(e,t,n)=>i("a",{key:n.k,href:sn(e.R),title:e.N},t(e.$,n))},linkAngleBraceStyleDetector:{t:tn(at),i:yn.MAX,l:e=>({$:[{$:e[1],type:"text"}],R:e[1],type:"link"})},linkBareUrlDetector:{t:(e,t)=>t.Z?null:tn(rt)(e,t),i:yn.MAX,l:e=>({$:[{$:e[1],type:"text"}],R:e[1],N:void 0,type:"link"})},linkMailtoDetector:{t:tn(it),i:yn.MAX,l(e){let t=e[1],n=e[1];return De.test(n)||(n="mailto:"+n),{$:[{$:t.replace("mailto:",""),type:"text"}],R:n,type:"link"}}},orderedList:Zt(i,1),unorderedList:Zt(i,2),newlineCoalescer:{t:rn(Ue),i:yn.LOW,l:pn,h:()=>"\n"},paragraph:{t:on,i:yn.LOW,l:dn,h:(e,t,n)=>i("p",{key:n.k},t(e.$,n))},ref:{t:tn(lt),i:yn.MAX,l:e=>(l[e[1]]={R:e[2],N:e[4]},{}),h:fn},refImage:{t:nn(ct),i:yn.MAX,l:e=>({D:e[1]||void 0,F:e[2]}),h:(e,t,n)=>i("img",{key:n.k,alt:e.D,src:sn(l[e.F].R),title:l[e.F].N})},refLink:{t:tn(ut),i:yn.MAX,l:(e,t,n)=>({$:t(e[1],n),P:t(e[0].replace(ht,"\\$1"),n),F:e[2]}),h:(e,t,n)=>l[e.F]?i("a",{key:n.k,href:sn(l[e.F].R),title:l[e.F].N},t(e.$,n)):i("span",{key:n.k},t(e.P,n))},table:{t:rn(st),i:yn.HIGH,l:Qt,h:(e,t,n)=>i("table",{key:n.k},i("thead",null,i("tr",null,e.L.map((function(r,a){return i("th",{key:a,style:en(e,a)},t(r,n))})))),i("tbody",null,e.A.map((function(r,a){return i("tr",{key:a},r.map((function(r,a){return i("td",{key:a,style:en(e,a)},t(r,n))})))}))))},tableSeparator:{t:function(e,t){return t.v?ft.exec(e):null},i:yn.HIGH,l:function(){return{type:"tableSeparator"}},h:()=>" | "},text:{t:an(St),i:yn.MIN,l:e=>({$:e[0].replace(Je,((e,t)=>n.namedCodesToUnicode[t]?n.namedCodesToUnicode[t]:e))}),h:e=>e.$},textBolded:{t:nn(xt),i:yn.MED,l:(e,t,n)=>({$:t(e[2],n)}),h:(e,t,n)=>i("strong",{key:n.k},t(e.$,n))},textEmphasized:{t:nn(bt),i:yn.LOW,l:(e,t,n)=>({$:t(e[2],n)}),h:(e,t,n)=>i("em",{key:n.k},t(e.$,n))},textEscaped:{t:nn(kt),i:yn.HIGH,l:e=>({$:e[1],type:"text"})},textMarked:{t:nn(Lt),i:yn.LOW,l:dn,h:(e,t,n)=>i("mark",{key:n.k},t(e.$,n))},textStrikethroughed:{t:nn(wt),i:yn.LOW,l:dn,h:(e,t,n)=>i("del",{key:n.k},t(e.$,n))}};!0!==n.disableParsingRawHTML&&(c.htmlBlock={t:an(Ye),i:yn.HIGH,l(e,t,n){const[,r]=e[3].match(Tt),i=new RegExp(`^${r}`,"gm"),a=e[3].replace(i,""),s=(l=a,Xt.some((e=>e.test(l)))?hn:cn);var l;const c=e[1].toLowerCase(),u=-1!==Ae.indexOf(c);n.Z=n.Z||"a"===c;const h=u?e[3]:s(t,a,n);return n.Z=!1,{I:o(e[2]),$:h,G:u,H:u?c:e[1]}},h:(e,t,n)=>i(e.H,Ee({key:n.k},e.I),e.G?e.$:t(e.$,n))},c.htmlSelfClosing={t:an(tt),i:yn.HIGH,l:e=>({I:o(e[2]||""),H:e[1]}),h:(e,t,n)=>i(e.H,Ee({},e.I,{key:n.k}))});const u=function(e){let t=Object.keys(e);function n(r,i){let a=[],o="";for(;r;){let s=0;for(;s<t.length;){const l=t[s],c=e[l],u=c.t(r,i,o);if(u){const e=u[0];r=r.substring(e.length);const t=c.l(u,n,i);null==t.type&&(t.type=l),a.push(t),o=e;break}s++}}return a}return t.sort((function(t,n){let r=e[t].i,i=e[n].i;return r!==i?r-i:t<n?-1:1})),function(e,t){return n(function(e){return e.replace($e,"\n").replace(Ge,"").replace(pt,"    ")}(e),t)}}(c),h=(d=c,p=function(e,t,n){return d[e.type].h(e,t,n)},function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t)){const r=n.k,i=[];let a=!1;for(let o=0;o<t.length;o++){n.k=o;const r=e(t[o],n),s="string"==typeof r;s&&a?i[i.length-1]+=r:null!==r&&i.push(r),a=s}return n.k=r,i}return p(t,e,n)});var d,p;const f=a(e);return s.length?i("div",null,f,i("footer",{key:"footer"},s.map((function(e){return i("div",{id:n.slugify(e.B),key:e.B},e.B,h(u(e.O,{_:!0})))})))):f}(_n=yn||(yn={}))[_n.MAX=0]="MAX",_n[_n.HIGH=1]="HIGH",_n[_n.MED=2]="MED",_n[_n.LOW=3]="LOW",_n[_n.MIN=4]="MIN";const xn=e=>{let{children:n,options:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,Ie);return t.cloneElement(vn(n,r),i)};var bn=n(66),Ln=n.n(bn),wn=Math.pow,kn=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{s(n.next(e))}catch(Ie){i(Ie)}},o=e=>{try{s(n.throw(e))}catch(Ie){i(Ie)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);s((n=n.apply(e,t)).next())})),Sn=Uint8Array,Cn=Uint16Array,Tn=Int32Array,En=new Sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),In=new Sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mn=new Sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pn=function(e,t){for(var n=new Cn(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Tn(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},An=Pn(En,2),zn=An.b,Dn=An.r;zn[28]=258,Dn[258]=28;var Rn,Fn=Pn(In,0),On=Fn.b,Bn=(Fn.r,new Cn(32768));for(Nn=0;Nn<32768;++Nn)Rn=(61680&(Rn=(52428&(Rn=(43690&Nn)>>1|(21845&Nn)<<1))>>2|(13107&Rn)<<2))>>4|(3855&Rn)<<4,Bn[Nn]=((65280&Rn)>>8|(255&Rn)<<8)>>1;var Vn=function(e,t,n){for(var r=e.length,i=0,a=new Cn(t);i<r;++i)e[i]&&++a[e[i]-1];var o,s=new Cn(t);for(i=1;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;if(n){o=new Cn(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=s[e[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)o[Bn[h]>>l]=c}else for(o=new Cn(r),i=0;i<r;++i)e[i]&&(o[i]=Bn[s[e[i]-1]++]>>15-e[i]);return o},jn=new Sn(288);for(Nn=0;Nn<144;++Nn)jn[Nn]=8;for(Nn=144;Nn<256;++Nn)jn[Nn]=9;for(Nn=256;Nn<280;++Nn)jn[Nn]=7;for(Nn=280;Nn<288;++Nn)jn[Nn]=8;var Nn,Hn=new Sn(32);for(Nn=0;Nn<32;++Nn)Hn[Nn]=5;var Un=Vn(jn,9,1),$n=Vn(Hn,5,1),Zn=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},qn=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Gn=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Wn=function(e){return(e+7)/8|0},Xn=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Kn=function(e,t,n){var r=new Error(t||Xn[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Kn),!n)throw r;return r},Yn=function(e,t,n,r){var i=e.length,a=r?r.length:0;if(!i||t.f&&!t.l)return n||new Sn(0);var o=!n||2!=t.i,s=t.i;n||(n=new Sn(3*i));var l=function(e){var t=n.length;if(e>t){var r=new Sn(Math.max(2*t,e));r.set(n),n=r}},c=t.f||0,u=t.p||0,h=t.b||0,d=t.l,p=t.d,f=t.m,m=t.n,g=8*i;do{if(!d){c=qn(e,u,1);var y=qn(e,u+1,3);if(u+=3,!y){var _=e[(I=Wn(u)+4)-4]|e[I-3]<<8,v=I+_;if(v>i){s&&Kn(0);break}o&&l(h+_),n.set(e.subarray(I,v),h),t.b=h+=_,t.p=u=8*v,t.f=c;continue}if(1==y)d=Un,p=$n,f=9,m=5;else if(2==y){var x=qn(e,u,31)+257,b=qn(e,u+10,15)+4,L=x+qn(e,u+5,31)+1;u+=14;for(var w=new Sn(L),k=new Sn(19),S=0;S<b;++S)k[Mn[S]]=qn(e,u+3*S,7);u+=3*b;var C=Zn(k),T=(1<<C)-1,E=Vn(k,C,1);for(S=0;S<L;){var I,M=E[qn(e,u,T)];if(u+=15&M,(I=M>>4)<16)w[S++]=I;else{var P=0,A=0;for(16==I?(A=3+qn(e,u,3),u+=2,P=w[S-1]):17==I?(A=3+qn(e,u,7),u+=3):18==I&&(A=11+qn(e,u,127),u+=7);A--;)w[S++]=P}}var z=w.subarray(0,x),D=w.subarray(x);f=Zn(z),m=Zn(D),d=Vn(z,f,1),p=Vn(D,m,1)}else Kn(1);if(u>g){s&&Kn(0);break}}o&&l(h+131072);for(var R=(1<<f)-1,F=(1<<m)-1,O=u;;O=u){var B=(P=d[Gn(e,u)&R])>>4;if((u+=15&P)>g){s&&Kn(0);break}if(P||Kn(2),B<256)n[h++]=B;else{if(256==B){O=u,d=null;break}var V=B-254;if(B>264){var j=En[S=B-257];V=qn(e,u,(1<<j)-1)+zn[S],u+=j}var N=p[Gn(e,u)&F],H=N>>4;N||Kn(3),u+=15&N;D=On[H];if(H>3){j=In[H];D+=Gn(e,u)&(1<<j)-1,u+=j}if(u>g){s&&Kn(0);break}o&&l(h+131072);var U=h+V;if(h<D){var $=a-D,Z=Math.min(D,U);for($+h<0&&Kn(3);h<Z;++h)n[h]=r[$+h]}for(;h<U;h+=4)n[h]=n[h-D],n[h+1]=n[h+1-D],n[h+2]=n[h+2-D],n[h+3]=n[h+3-D];h=U}}t.l=d,t.p=O,t.b=h,t.f=c,d&&(c=1,t.m=f,t.d=p,t.n=m)}while(!c);return h==n.length?n:function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new Sn(n-t);return r.set(e.subarray(t,n)),r}(n,0,h)},Jn=new Sn(0),Qn=function(e){31==e[0]&&139==e[1]&&8==e[2]||Kn(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},er=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},tr=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Kn(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Kn(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function nr(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?function(e,t){var n=Qn(e);return n+8>e.length&&Kn(6,"invalid gzip data"),Yn(e.subarray(n,-8),{i:2},t&&t.out||new Sn(er(e)),t&&t.dictionary)}(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?function(e,t){return Yn(e,{i:2},t&&t.out,t&&t.dictionary)}(e,t):function(e,t){return Yn(e.subarray(tr(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}(e,t)}var rr="undefined"!=typeof TextDecoder&&new TextDecoder;try{rr.decode(Jn,{stream:!0}),1}catch(Ie){}var ir=(e,t)=>e*wn(2,t),ar=(e,t)=>Math.floor(e/wn(2,t)),or=(e,t)=>ir(e.getUint16(t+1,!0),8)+e.getUint8(t),sr=(e,t)=>ir(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),lr=(e,t,n,r,i)=>{if(e!==r.getUint8(i))return e-r.getUint8(i);const a=or(r,i+1);if(t!==a)return t-a;const o=or(r,i+4);return n!==o?n-o:0},cr=(e,t,n,r)=>{const i=ur(e,t,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],isDir:!1}:null},ur=(e,t,n,r)=>{let i=0,a=e.byteLength/17-1;for(;i<=a;){const o=a+i>>1,s=lr(t,n,r,e,17*o);if(s>0)i=o+1;else{if(!(s<0))return[sr(e,17*o+7),e.getUint32(17*o+13,!0)];a=o-1}}return null},hr=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,dr=(e,t)=>{const n=e.getUint8(17*t);return{z:127&n,x:or(e,17*t+1),y:or(e,17*t+4),offset:sr(e,17*t+7),length:e.getUint32(17*t+13,!0),isDir:n>>7===1}},pr=e=>{const t=[],n=new DataView(e);for(let r=0;r<n.byteLength/17;r++)t.push(dr(n,r));return fr(t)},fr=e=>{e.sort(hr);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++){const t=e[r];let i=t.z;t.isDir&&(i|=128),n[17*r]=i,n[17*r+1]=255&t.x,n[17*r+2]=t.x>>8&255,n[17*r+3]=t.x>>16&255,n[17*r+4]=255&t.y,n[17*r+5]=t.y>>8&255,n[17*r+6]=t.y>>16&255,n[17*r+7]=255&t.offset,n[17*r+8]=255&ar(t.offset,8),n[17*r+9]=255&ar(t.offset,16),n[17*r+10]=255&ar(t.offset,24),n[17*r+11]=255&ar(t.offset,32),n[17*r+12]=255&ar(t.offset,48),n[17*r+13]=255&t.length,n[17*r+14]=t.length>>8&255,n[17*r+15]=t.length>>16&255,n[17*r+16]=t.length>>24&255}return t};var mr={getHeader:function(e){return kn(this,null,(function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),a=new TextDecoder("utf-8"),o=JSON.parse(a.decode(new DataView(t.data,10,r)));let s=0;"gzip"===o.compression&&(s=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let c=0;"maxzoom"in o&&(c=+o.maxzoom);let u=0,h=0,d=0,p=-180,f=-85,m=180,g=85;if(o.bounds){const e=o.bounds.split(",");p=+e[0],f=+e[1],m=+e[2],g=+e[3]}if(o.center){const e=o.center.split(",");u=+e[0],h=+e[1],d=+e[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:17*i,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:s,tileType:1,minZoom:l,maxZoom:c,minLon:p,minLat:f,maxLon:m,maxLat:g,centerZoom:d,centerLon:u,centerLat:h,etag:t.etag}}))},getZxy:function(e,t,n,r,i,a,o){return kn(this,null,(function*(){let s=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);1===e.specVersion&&(s=pr(s));const l=cr(new DataView(s),r,i,a);if(l){let e=(yield t.getBytes(l.offset,l.length,o)).data;const n=new DataView(e);return 31===n.getUint8(0)&&139===n.getUint8(1)&&(e=nr(new Uint8Array(e))),{data:e}}const c=((e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,r=dr(e,n-1);if(r.isDir){const e=r.z,n=t.z-e;return{z:e,x:Math.trunc(t.x/(1<<n)),y:Math.trunc(t.y/(1<<n))}}return null})(new DataView(s),{z:r,x:i,y:a});if(c){const l=((e,t,n,r)=>{const i=ur(e,128|t,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],isDir:!0}:null})(new DataView(s),c.z,c.x,c.y);if(l){let s=yield n.getArrayBuffer(t,l.offset,l.length,e);1===e.specVersion&&(s=pr(s));const c=cr(new DataView(s),r,i,a);if(c){let e=(yield t.getBytes(c.offset,c.length,o)).data;const n=new DataView(e);return 31===n.getUint8(0)&&139===n.getUint8(1)&&(e=nr(new Uint8Array(e))),{data:e}}}}}))}},gr=class{constructor(){var e;this.tilev4=(e,t)=>kn(this,null,(function*(){if("json"===e.type){const t=e.url.substr(10);let n=this.tiles.get(t);n||(n=new Mr(t),this.tiles.set(t,n));const r=yield n.getHeader();return{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:r.minZoom,maxzoom:r.maxZoom,bounds:[r.minLon,r.minLat,r.maxLon,r.maxLat]}}}const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),r=e.url.match(n);if(!r)throw new Error("Invalid PMTiles protocol URL");const i=r[1];let a=this.tiles.get(i);a||(a=new Mr(i),this.tiles.set(i,a));const o=r[2],s=r[3],l=r[4],c=yield a.getHeader(),u=yield null==a?void 0:a.getZxy(+o,+s,+l,t.signal);return u?{data:new Uint8Array(u.data),cacheControl:u.cacheControl,expires:u.expires}:1===c.tileType?{data:new Uint8Array}:{data:null}})),this.tile=(e=this.tilev4,(t,n)=>{if(n instanceof AbortController)return e(t,n);const r=new AbortController;return e(t,r).then((e=>n(void 0,e.data,e.cacheControl||"",e.expires||"")),(e=>n(e))).catch((e=>n(e))),{cancel:()=>r.abort()}}),this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function yr(e,t){return 4294967296*(t>>>0)+(e>>>0)}function _r(e){const t=e.buf;let n=t[e.pos++],r=127&n;return n<128?r:(n=t[e.pos++],r|=(127&n)<<7,n<128?r:(n=t[e.pos++],r|=(127&n)<<14,n<128?r:(n=t[e.pos++],r|=(127&n)<<21,n<128?r:(n=t[e.pos],r|=(15&n)<<28,function(e,t){const n=t.buf;let r=n[t.pos++],i=(112&r)>>4;if(r<128)return yr(e,i);if(r=n[t.pos++],i|=(127&r)<<3,r<128)return yr(e,i);if(r=n[t.pos++],i|=(127&r)<<10,r<128)return yr(e,i);if(r=n[t.pos++],i|=(127&r)<<17,r<128)return yr(e,i);if(r=n[t.pos++],i|=(127&r)<<24,r<128)return yr(e,i);if(r=n[t.pos++],i|=(1&r)<<31,r<128)return yr(e,i);throw new Error("Expected varint not more than 10 bytes")}(r,e)))))}function vr(e,t,n,r){if(0===r){1===n&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const r=t[0];t[0]=t[1],t[1]=r}}var xr=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function br(e,t){return kn(this,null,(function*(){if(1===t||0===t)return e;if(2===t){if("undefined"===typeof globalThis.DecompressionStream)return nr(new Uint8Array(e));const t=new Response(e).body;if(!t)throw Error("Failed to read response stream");const n=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}throw Error("Compression method not supported")}))}function Lr(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=r+n>>1,a=t-e[i].tileId;if(a>0)n=i+1;else{if(!(a<0))return e[i];r=i-1}}if(r>=0){if(0===e[r].runLength)return e[r];if(t-e[r].tileId<e[r].runLength)return e[r]}return null}var wr=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers;this.url=e,this.customHeaders=t,this.mustReload=!1}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n,r){return kn(this,null,(function*(){let i,a;n?a=n:(i=new AbortController,a=i.signal);const o=new Headers(this.customHeaders);let s;o.set("range",`bytes=${e}-${e+t-1}`),this.mustReload&&(s="reload");let l=yield fetch(this.url,{signal:a,cache:s,headers:o});if(0===e&&416===l.status){const e=l.headers.get("Content-Range");if(!e||!e.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const t=+e.substr(8);l=yield fetch(this.url,{signal:a,cache:"reload",headers:{range:"bytes=0-"+(t-1)}})}let c=l.headers.get("Etag");if((null==c?void 0:c.startsWith("W/"))&&(c=null),416===l.status||r&&c&&c!==r)throw this.mustReload=!0,new Cr(r);if(l.status>=300)throw Error(`Bad response code: ${l.status}`);const u=l.headers.get("Content-Length");if(200===l.status&&(!u||+u>t))throw i&&i.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield l.arrayBuffer(),etag:c||void 0,cacheControl:l.headers.get("Cache-Control")||void 0,expires:l.headers.get("Expires")||void 0}}))}};function kr(e,t){const n=e.getUint32(t+4,!0),r=e.getUint32(t+0,!0);return n*wn(2,32)+r}function Sr(e){const t={buf:new Uint8Array(e),pos:0},n=_r(t),r=[];let i=0;for(let a=0;a<n;a++){const e=_r(t);r.push({tileId:i+e,offset:0,length:0,runLength:1}),i+=e}for(let a=0;a<n;a++)r[a].runLength=_r(t);for(let a=0;a<n;a++)r[a].length=_r(t);for(let a=0;a<n;a++){const e=_r(t);r[a].offset=0===e&&a>0?r[a-1].offset+r[a-1].length:e-1}return r}var Cr=class extends Error{};function Tr(e,t){return kn(this,null,(function*(){const n=yield e.getBytes(0,16384);if(19792!==new DataView(n.data).getUint16(0,!0))throw new Error("Wrong magic number for PMTiles archive");if(function(e){const t=new DataView(e);return 2===t.getUint16(2,!0)?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):1===t.getUint16(2,!0)?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}(n.data)<3)return[yield mr.getHeader(e)];const r=function(e,t){const n=new DataView(e),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:kr(n,8),rootDirectoryLength:kr(n,16),jsonMetadataOffset:kr(n,24),jsonMetadataLength:kr(n,32),leafDirectoryOffset:kr(n,40),leafDirectoryLength:kr(n,48),tileDataOffset:kr(n,56),tileDataLength:kr(n,64),numAddressedTiles:kr(n,72),numTileEntries:kr(n,80),numTileContents:kr(n,88),clustered:1===n.getUint8(96),internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}(n.data.slice(0,127),n.etag),i=n.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),a=`${e.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,o=Sr(yield t(i,r.internalCompression));return[r,[a,o.length,o]]}))}function Er(e,t,n,r,i){return kn(this,null,(function*(){const a=yield e.getBytes(n,r,void 0,i.etag),o=Sr(yield t(a.data,i.internalCompression));if(0===o.length)throw new Error("Empty directory is invalid");return o}))}var Ir=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:br;this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=t}getHeader(e){return kn(this,null,(function*(){const t=e.getKey(),n=this.cache.get(t);if(n){n.lastUsed=this.counter++;return yield n.data}const r=new Promise(((t,n)=>{Tr(e,this.decompress).then((e=>{e[1]&&this.cache.set(e[1][0],{lastUsed:this.counter++,data:Promise.resolve(e[1][2])}),t(e[0]),this.prune()})).catch((e=>{n(e)}))}));return this.cache.set(t,{lastUsed:this.counter++,data:r}),r}))}getDirectory(e,t,n,r){return kn(this,null,(function*(){const i=`${e.getKey()}|${r.etag||""}|${t}|${n}`,a=this.cache.get(i);if(a){a.lastUsed=this.counter++;return yield a.data}const o=new Promise(((i,a)=>{Er(e,this.decompress,t,n,r).then((e=>{i(e),this.prune()})).catch((e=>{a(e)}))}));return this.cache.set(i,{lastUsed:this.counter++,data:o}),o}))}getArrayBuffer(e,t,n,r){return kn(this,null,(function*(){const i=`${e.getKey()}|${r.etag||""}|${t}|${n}`,a=this.cache.get(i);if(a){a.lastUsed=this.counter++;return yield a.data}const o=new Promise(((a,o)=>{e.getBytes(t,n,void 0,r.etag).then((e=>{a(e.data),this.cache.has(i),this.prune()})).catch((e=>{o(e)}))}));return this.cache.set(i,{lastUsed:this.counter++,data:o}),o}))}prune(){if(this.cache.size>=this.maxCacheEntries){let e,t=1/0;this.cache.forEach(((n,r)=>{n.lastUsed<t&&(t=n.lastUsed,e=r)})),e&&this.cache.delete(e)}}invalidate(e){return kn(this,null,(function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const n=new Promise(((n,r)=>{this.getHeader(e).then((e=>{n(),this.invalidations.delete(t)})).catch((e=>{r(e)}))}));this.invalidations.set(t,n)}))}},Mr=class{constructor(e,t,n){this.source="string"===typeof e?new wr(e):e,this.decompress=n||br,this.cache=t||new Ir}getHeader(){return kn(this,null,(function*(){return yield this.cache.getHeader(this.source)}))}getZxyAttempt(e,t,n,r){return kn(this,null,(function*(){const i=function(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>wn(2,e)-1||n>wn(2,e)-1)throw Error("tile x/y outside zoom level bounds");const r=xr[e];let i=0,a=0,o=0;const s=[t,n];let l=wn(2,e)/2;for(;l>0;)i=(s[0]&l)>0?1:0,a=(s[1]&l)>0?1:0,o+=l*l*(3*i^a),vr(l,s,i,a),l/=2;return r+o}(e,t,n),a=yield this.cache.getHeader(this.source);if(a.specVersion<3)return mr.getZxy(a,this.source,this.cache,e,t,n,r);if(e<a.minZoom||e>a.maxZoom)return;let o=a.rootDirectoryOffset,s=a.rootDirectoryLength;for(let e=0;e<=3;e++){const e=Lr(yield this.cache.getDirectory(this.source,o,s,a),i);if(!e)return;if(e.runLength>0){const t=yield this.source.getBytes(a.tileDataOffset+e.offset,e.length,r,a.etag);return{data:yield this.decompress(t.data,a.tileCompression),cacheControl:t.cacheControl,expires:t.expires}}o=a.leafDirectoryOffset+e.offset,s=e.length}throw Error("Maximum directory depth exceeded")}))}getZxy(e,t,n,r){return kn(this,null,(function*(){try{return yield this.getZxyAttempt(e,t,n,r)}catch(Ie){if(Ie instanceof Cr)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,n,r);throw Ie}}))}getMetadataAttempt(){return kn(this,null,(function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),n=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))}))}getMetadata(){return kn(this,null,(function*(){try{return yield this.getMetadataAttempt()}catch(Ie){if(Ie instanceof Cr)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw Ie}}))}};const Pr=t.createContext(null);function Ar(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){if(!t.hasOwnProperty(i))return!1;if(!Ar(e[i],t[i]))return!1}return!0}return!1}function zr(e,t){if(!e.getProjection)return;const n=e.getProjection();Ar(n,t.getProjection())||t.setProjection(n)}function Dr(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Rr(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),r=r||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,r=r||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,r=r||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,r=r||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const Fr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Or(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map((e=>{let n=null;"interactive"in e&&(n=Object.assign({},e),delete n.interactive);const r=t[e.ref];if(r){n=n||Object.assign({},e),delete n.ref;for(const e of Fr)e in r&&(n[e]=r[e])}return n||e}));return{...e,layers:n}}const Br={version:8,sources:{},layers:[]},Vr={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},jr={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Nr={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Hr=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Ur=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class $r{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[Nr[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[Vr[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[jr[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=$r.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(t.className=i.className;i.childNodes.length>0;)t.appendChild(i.childNodes[0]);r._container=t;const a=r._resizeObserver;a&&(a.disconnect(),a.observe(t)),n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:o}=e;return o&&(o.bounds?r.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),r._update(),n}_initialize(e){const{props:t}=this,{mapStyle:n=Br}=t,r={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||Zr()||null,container:e,style:Or(n)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const a=new this._MapClass(r);i.padding&&a.setPadding(i.padding),t.cursor&&(a.getCanvas().style.cursor=t.cursor),this._createShadowTransform(a);const o=a._render;a._render=e=>{this._inRender=!0,o.call(a,e),this._inRender=!1};const s=a._renderTaskQueue.run;a._renderTaskQueue.run=e=>{s.call(a._renderTaskQueue,e),this._onBeforeRepaint()},a.on("render",(()=>this._onAfterRepaint()));const l=a.fire;a.fire=this._fireEvent.bind(this,l),a.on("resize",(()=>{this._renderTransform.resize(a.transform.width,a.transform.height)})),a.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),zr(a.transform,this._renderTransform)})),a.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const c in Vr)a.on(c,this._onPointerEvent);for(const c in jr)a.on(c,this._onCameraEvent);for(const c in Nr)a.on(c,this._onEvent);this._map=a}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null===e||void 0===e||e.remove(),$r.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:a,bearing:o}=r,s=n.isMoving();s&&(r.cameraElevationReference="sea");const l=Rr(r,{...Dr(n.transform),...e});if(s&&(r.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=i!==r.zoom),e.rotate||(e.rotate=o!==r.bearing),e.pitch||(e.pitch=a!==r.pitch)}return s||Rr(n.transform,e),l}_updateSettings(e,t){const n=this._map;let r=!1;for(const i of Hr)if(i in e&&!Ar(e[i],t[i])){r=!0;const t=n[`set${i[0].toUpperCase()}${i.slice(1)}`];null===t||void 0===t||t.call(n,e[i])}return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=Br,styleDiffing:n=!0}=e,r={diff:n};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(Or(t),r),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let r=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!Ar(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!Ar(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!Ar(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}_updateHandlers(e,t){var n,r;const i=this._map;let a=!1;for(const o of Ur){const s=null===(n=e[o])||void 0===n||n;Ar(s,null===(r=t[o])||void 0===r||r)||(a=!0,s?i[o].enable(s):i[o].disable())}return a}_queryRenderedFeatures(e){const t=this._map,n=t.transform,{interactiveLayerIds:r=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:r.filter(t.getLayer.bind(t))})}catch(An){return[]}finally{t.transform=n}}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=e.type,r=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,i=this._queryRenderedFeatures(e.point),a=i.length>0;!a&&r&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=i,a&&!r&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,t,n){const r=this._map,i=r.transform,a="string"===typeof t?t:t.type;return"move"===a&&this._updateViewState(this.props,!1),a in jr&&("object"===typeof t&&(t.viewState=Dr(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{zr(this._renderTransform,t),e.transform=t}}}function Zr(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(An){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(Fn){}return e}$r.savedMaps=[];const qr=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Gr(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const r=t.transform;t.transform=e.transform;const i=t.project(n);return t.transform=r,i},unproject:n=>{const r=t.transform;t.transform=e.transform;const i=t.unproject(n);return t.transform=r,i},queryTerrainElevation:(n,r)=>{const i=t.transform;t.transform=e.transform;const a=t.queryTerrainElevation(n,r);return t.transform=i,a},queryRenderedFeatures:(n,r)=>{const i=t.transform;t.transform=e.transform;const a=t.queryRenderedFeatures(n,r);return t.transform=i,a}};for(const r of function(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}(t))r in n||qr.includes(r)||(n[r]=t[r].bind(t));return n}const Wr="undefined"!==typeof document?t.useLayoutEffect:t.useEffect,Xr=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const Kr=t.createContext(null);function Yr(e,n,r){const i=(0,t.useContext)(Pr),[a,o]=(0,t.useState)(null),s=(0,t.useRef)(),{current:l}=(0,t.useRef)({mapLib:null,map:null});(0,t.useEffect)((()=>{const t=e.mapLib;let n,a=!0;return Promise.resolve(t||r).then((t=>{if(!a)return;if(!t)throw new Error("Invalid mapLib");const r="Map"in t?t:t.default;if(!r.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const r of Xr)r in t&&(e[r]=t[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(n,(e=>{e&&console.error(e)}),!0)}(r,e),r.supported&&!r.supported(e))throw new Error("Map is not supported by this browser");e.reuseMaps&&(n=$r.reuse(e,s.current)),n||(n=new $r(r.Map,e,s.current)),l.map=Gr(n),l.mapLib=r,o(n),null===i||void 0===i||i.onMapMount(l.map,e.id)})).catch((t=>{const{onError:n}=e;n?n({type:"error",target:null,originalEvent:null,error:t}):console.error(t)})),()=>{a=!1,n&&(null===i||void 0===i||i.onMapUnmount(e.id),e.reuseMaps?n.recycle():n.destroy())}}),[]),Wr((()=>{a&&a.setProps(e)})),(0,t.useImperativeHandle)(n,(()=>l.map),[a]);const c=(0,t.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...e.style})),[e.style]);return t.createElement("div",{id:e.id,ref:s,style:c},a&&t.createElement(Kr.Provider,{value:l},t.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))}var Jr=n(950);const Qr=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ei(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const e=t[r];Number.isFinite(e)&&!Qr.test(r)?n[r]=`${e}px`:n[r]=e}}(0,t.memo)((0,t.forwardRef)((function(e,n){const{map:r,mapLib:i}=(0,t.useContext)(Kr),a=(0,t.useRef)({props:e});a.current.props=e;const o=(0,t.useMemo)((()=>{let n=!1;t.Children.forEach(e.children,(e=>{e&&(n=!0)}));const r={...e,element:n?document.createElement("div"):null},s=new i.Marker(r);return s.setLngLat([e.longitude,e.latitude]),s.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=a.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=a.current.props).onDragStart)||void 0===n||n.call(t,r)})),s.on("drag",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=a.current.props).onDrag)||void 0===n||n.call(t,r)})),s.on("dragend",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=a.current.props).onDragEnd)||void 0===n||n.call(t,r)})),s}),[]);(0,t.useEffect)((()=>(o.addTo(r.getMap()),()=>{o.remove()})),[]);const{longitude:s,latitude:l,offset:c,style:u,draggable:h=!1,popup:d=null,rotation:p=0,rotationAlignment:f="auto",pitchAlignment:m="auto"}=e;return(0,t.useEffect)((()=>{ei(o.getElement(),u)}),[u]),(0,t.useImperativeHandle)(n,(()=>o),[]),o.getLngLat().lng===s&&o.getLngLat().lat===l||o.setLngLat([s,l]),c&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===a}(o.getOffset(),c)&&o.setOffset(c),o.isDraggable()!==h&&o.setDraggable(h),o.getRotation()!==p&&o.setRotation(p),o.getRotationAlignment()!==f&&o.setRotationAlignment(f),o.getPitchAlignment()!==m&&o.setPitchAlignment(m),o.getPopup()!==d&&o.setPopup(d),(0,Jr.createPortal)(e.children,o.getElement())})));function ti(e){return new Set(e?e.trim().split(/\s+/):[])}(0,t.memo)((0,t.forwardRef)((function(e,n){const{map:r,mapLib:i}=(0,t.useContext)(Kr),a=(0,t.useMemo)((()=>document.createElement("div")),[]),o=(0,t.useRef)({props:e});o.current.props=e;const s=(0,t.useMemo)((()=>{const t={...e},n=new i.Popup(t);return n.setLngLat([e.longitude,e.latitude]),n.once("open",(e=>{var t,n;null===(n=(t=o.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,t.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=o.current.props).onClose)||void 0===n||n.call(t,e)};return s.on("close",e),s.setDOMContent(a).addTo(r.getMap()),()=>{s.off("close",e),s.isOpen()&&s.remove()}}),[]),(0,t.useEffect)((()=>{ei(s.getElement(),e.style)}),[e.style]),(0,t.useImperativeHandle)(n,(()=>s),[]),s.isOpen()&&(s.getLngLat().lng===e.longitude&&s.getLngLat().lat===e.latitude||s.setLngLat([e.longitude,e.latitude]),e.offset&&!Ar(s.options.offset,e.offset)&&s.setOffset(e.offset),s.options.anchor===e.anchor&&s.options.maxWidth===e.maxWidth||(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth)),s.options.className!==e.className)){const t=ti(s.options.className),n=ti(e.className);for(const e of t)n.has(e)||s.removeClassName(e);for(const e of n)t.has(e)||s.addClassName(e);s.options.className=e.className}return(0,Jr.createPortal)(e.children,a)})));const ni=function(e,n,r,i){const a=(0,t.useContext)(Kr),o=(0,t.useMemo)((()=>e(a)),[]);return(0,t.useEffect)((()=>{const e=i||r||n,t="function"===typeof n&&"function"===typeof r?n:null,s="function"===typeof r?r:"function"===typeof n?n:null,{map:l}=a;return l.hasControl(o)||(l.addControl(o,null===e||void 0===e?void 0:e.position),t&&t(a)),()=>{s&&s(a),l.hasControl(o)&&l.removeControl(o)}}),[]),o};const ri=(0,t.memo)((function(e){const n=ni((t=>{let{mapLib:n}=t;return new n.AttributionControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{ei(n._container,e.style)}),[e.style]),null}));const ii=(0,t.memo)((function(e){const n=ni((t=>{let{mapLib:n}=t;return new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,t.useEffect)((()=>{ei(n._controlContainer,e.style)}),[e.style]),null}));const ai=(0,t.memo)((0,t.forwardRef)((function(e,n){const r=(0,t.useRef)({props:e}),i=ni((t=>{let{mapLib:n}=t;const i=new n.GeolocateControl(e),a=i._setupUI;return i._setupUI=e=>{i._container.hasChildNodes()||a(e)},i.on("geolocate",(e=>{var t,n;null===(n=(t=r.current.props).onGeolocate)||void 0===n||n.call(t,e)})),i.on("error",(e=>{var t,n;null===(n=(t=r.current.props).onError)||void 0===n||n.call(t,e)})),i.on("outofmaxbounds",(e=>{var t,n;null===(n=(t=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),i.on("trackuserlocationstart",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),i.on("trackuserlocationend",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),i}),{position:e.position});return r.current.props=e,(0,t.useImperativeHandle)(n,(()=>i),[]),(0,t.useEffect)((()=>{ei(i._container,e.style)}),[e.style]),null})));const oi=(0,t.memo)((function(e){const n=ni((t=>{let{mapLib:n}=t;return new n.NavigationControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{ei(n._container,e.style)}),[e.style]),null}));(0,t.memo)((function(e){const n=ni((t=>{let{mapLib:n}=t;return new n.ScaleControl(e)}),{position:e.position}),r=(0,t.useRef)(e),i=r.current;r.current=e;const{style:a}=e;return void 0!==e.maxWidth&&e.maxWidth!==i.maxWidth&&(n.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==i.unit&&n.setUnit(e.unit),(0,t.useEffect)((()=>{ei(n._container,a)}),[a]),null}));function si(e,t){if(!e)throw new Error(t)}let li=0;const ci=function(e){const n=(0,t.useContext)(Kr).map.getMap(),r=(0,t.useRef)(e),[,i]=(0,t.useState)(0),a=(0,t.useMemo)((()=>e.id||"jsx-layer-"+li++),[]);if((0,t.useEffect)((()=>{if(n){const e=()=>i((e=>e+1));return n.on("styledata",e),e(),()=>{n.off("styledata",e),n.style&&n.style._loaded&&n.getLayer(a)&&n.removeLayer(a)}}}),[n]),n&&n.style&&n.getLayer(a))try{!function(e,t,n,r){if(si(n.id===r.id,"layer id changed"),si(n.type===r.type,"layer type changed"),"custom"===n.type||"custom"===r.type)return;const{layout:i={},paint:a={},filter:o,minzoom:s,maxzoom:l,beforeId:c}=n;if(c!==r.beforeId&&e.moveLayer(t,c),i!==r.layout){const n=r.layout||{};for(const r in i)Ar(i[r],n[r])||e.setLayoutProperty(t,r,i[r]);for(const r in n)i.hasOwnProperty(r)||e.setLayoutProperty(t,r,void 0)}if(a!==r.paint){const n=r.paint||{};for(const r in a)Ar(a[r],n[r])||e.setPaintProperty(t,r,a[r]);for(const r in n)a.hasOwnProperty(r)||e.setPaintProperty(t,r,void 0)}Ar(o,r.filter)||e.setFilter(t,o),s===r.minzoom&&l===r.maxzoom||e.setLayerZoomRange(t,s,l)}(n,a,e,r.current)}catch(o){console.warn(o)}else!function(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}(n,a,e);return r.current=e,null};let ui=0;const hi=function(e){const n=(0,t.useContext)(Kr).map.getMap(),r=(0,t.useRef)(e),[,i]=(0,t.useState)(0),a=(0,t.useMemo)((()=>e.id||"jsx-source-"+ui++),[]);(0,t.useEffect)((()=>{if(n){const e=()=>setTimeout((()=>i((e=>e+1))),0);return n.on("styledata",e),e(),()=>{var t;if(n.off("styledata",e),n.style&&n.style._loaded&&n.getSource(a)){const e=null===(t=n.getStyle())||void 0===t?void 0:t.layers;if(e)for(const t of e)t.source===a&&n.removeLayer(t.id);n.removeSource(a)}}}}),[n]);let o=n&&n.style&&n.getSource(a);return o?function(e,t,n){si(t.id===n.id,"source id changed"),si(t.type===n.type,"source type changed");let r="",i=0;for(const o in t)"children"===o||"id"===o||Ar(n[o],t[o])||(r=o,i++);if(!i)return;const a=t.type;if("geojson"===a)e.setData(t.data);else if("image"===a)e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&1===i&&"coordinates"===r)e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles)}else console.warn(`Unable to update <Source> prop: ${r}`)}(o,e,r.current):o=function(e,t,n){if(e.style&&e.style._loaded){const r={...n};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}(n,a,e),r.current=e,o&&t.Children.map(e.children,(e=>e&&(0,t.cloneElement)(e,{source:a})))||null};const di=Promise.resolve().then(n.t.bind(n,66,23)),pi=t.forwardRef((function(e,t){return Yr(e,t,di)})),fi=ri,mi=ii,gi=oi,yi=ai,_i=ci,vi=hi,xi=pi;var bi=n(579);const Li={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"Conference Venue",name:"C3 Convention Centre",link:"https://maps.app.goo.gl/6bB4R83NHtof8ssM9",minZoom:0,maxZoom:24,id:"0"},geometry:{coordinates:[147.30767,-42.89312],type:"Point"}},{type:"Feature",properties:{description:"Conference Dinner",name:"Frogmore Creek Wine Bar",link:"https://maps.app.goo.gl/hnhztSTp7nrhqT8e6",minZoom:11.1,maxZoom:24,id:"1"},geometry:{coordinates:[147.3358,-42.88206],type:"Point"}},{type:"Feature",properties:{link:"https://maps.app.goo.gl/NRZsP7jjzYcashz99",name:"Deep South Brewing Co.",description:"Icebreaker",minZoom:11.1,maxZoom:24,id:"2"},geometry:{coordinates:[147.3211,-42.87504],type:"Point"}},{type:"Feature",properties:{link:"https://maps.app.goo.gl/whjGxnh8oxksVVq18",name:"Hamlet Cafe",description:"Women in Geo Breakfast",minZoom:11.1,maxZoom:24,id:"6"},geometry:{coordinates:[147.32131,-42.88831],type:"Point"}},{type:"Feature",properties:{link:"https://maps.app.goo.gl/imqmKmN97BQx191M8",name:"Bear with Me Cafe",description:"Travel Grant Breakfast",minZoom:11.1,maxZoom:24,id:"7"},geometry:{coordinates:[147.31425,-42.89288],type:"Point"}},{type:"Feature",properties:{link:"https://maps.utas.edu.au/?zLevel=1&center=147.32609084788146,-42.90434824160919&zoom=17.68769237106732&sharepoi=1001841&sharepoitype=poi",name:"University of Tasmania",description:"Workshops Venue",minZoom:11,maxZoom:16,id:"3"},geometry:{coordinates:[147.32586,-42.90399],type:"Point"}},{type:"Feature",properties:{link:"https://maps.utas.edu.au/?zLevel=1&center=147.32585363952626,-42.90403271359523&zoom=20.72553237782959&sharepoi=1001841&sharepoitype=poi",name:"UTAS: Studio Theatre",description:"Workshops: Reception",minZoom:16,maxZoom:24,id:"4"},geometry:{coordinates:[147.32586,-42.90399],type:"Point"}},{type:"Feature",properties:{link:"https://maps.utas.edu.au/?zLevel=1&center=147.3263352998809,-42.9042736496823&zoom=18.354417938065513&sharepoi=1000552568&sharepoitype=poi",name:"UTAS: Social Sciences",description:"Workshops: Classrooms",minZoom:16,maxZoom:24,id:"5"},geometry:{coordinates:[147.32674,-42.90411],type:"Point"}},{type:"Feature",properties:{link:"https://maps.app.goo.gl/tSkMntQrcBxrg8mL9",name:"MONA",description:"Community Day: Tour",minZoom:9,maxZoom:24,id:"8"},geometry:{coordinates:[147.2612,-42.81267],type:"Point"}},{type:"Feature",properties:{link:"https://maps.app.goo.gl/W3XCa7BvfHVuLefM9",name:"kunanyi-Mt Wellington",description:"Community Day: Tour",minZoom:9,maxZoom:24,id:"9"},geometry:{coordinates:[147.23744,-42.89612],type:"Point"}}]},wi=e=>{const n=(0,t.useRef)(null),{width:r,height:i,children:a,...o}=e,[s,l]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const e=new gr;return Ln().addProtocol("pmtiles",e.tile),()=>{Ln().removeProtocol("pmtiles")}}),[]),(0,bi.jsxs)(xi,{ref:n,style:{width:e.width,height:e.height},initialViewState:{longitude:147.3365,latitude:-42.8832,zoom:11},cooperativeGestures:!0,onLoad:async e=>{const t=e.target;t.touchZoomRotate.disableRotation();const n=await t.loadImage("/imgs/marker.png");t.addImage("marker",n.data,{pixelRatio:3.5})},mapStyle:"https://api.protomaps.com/styles/v2/light.json?key=51cf1275231eb004",dragRotate:!1,touchPitch:!1,pitchWithRotate:!1,maxPitch:0,minPitch:0,keyboard:!1,attributionControl:!1,onClick:e=>{var t;const n=null===(t=e.features)||void 0===t?void 0:t[0];"events"===(null===n||void 0===n?void 0:n.source)&&window.open(n.properties.link,"_blank")},onMouseEnter:e=>{var t;const n=null===(t=e.features)||void 0===t?void 0:t[0];"events"===(null===n||void 0===n?void 0:n.source)?e.target.getCanvas().style.cursor="pointer":e.target.getCanvas().style.cursor=""},onMouseLeave:e=>{e.target.getCanvas().style.cursor=""},onRender:e=>{const t=e.target;if(void 0===t.getLayer("events-name"))return;const n=t.queryRenderedFeatures({layers:["events-name"]}).map((e=>{var t,n,r;return null!==(t=null===(n=e.properties)||void 0===n||null===(r=n.id)||void 0===r?void 0:r.toString())&&void 0!==t?t:""}));JSON.stringify(n)!==JSON.stringify(s)&&l(n)},interactiveLayerIds:["events-name","events-description"],...o,children:[(0,bi.jsx)(mi,{}),(0,bi.jsx)(yi,{}),(0,bi.jsx)(fi,{compact:!1}),(0,bi.jsx)(gi,{showCompass:!1}),(0,bi.jsxs)(vi,{id:"events-small-marker",type:"geojson",data:Li,children:[(0,bi.jsx)(_i,{id:"events-circle",type:"circle",paint:{"circle-color":"#444","circle-radius":3,"circle-translate":[0,-7]}}),(0,bi.jsx)(_i,{id:"events-description",type:"symbol",layout:{"text-field":["get","description"],"text-font":["Noto Sans Italic"],"text-size":13,"text-anchor":"top","text-offset":[0,1.3],"text-max-width":16,"text-padding":0,"text-ignore-placement":!0,"icon-ignore-placement":!0},paint:{"text-color":"#555","text-halo-color":"#fff","text-halo-width":2},filter:["in","id",...s]})]}),(0,bi.jsxs)(vi,{id:"events",type:"geojson",data:Li,children:[(0,bi.jsx)(_i,{id:"events-name",type:"symbol",layout:{"icon-image":"marker","icon-anchor":"bottom","text-field":["get","name"],"text-font":["Noto Sans Medium"],"text-size":14,"text-anchor":"top","text-offset":[0,0],"text-max-width":16,"text-padding":0,"icon-padding":0,"symbol-sort-key":["get","minZoom"]},paint:{"text-color":"#333","text-halo-color":"#fff","text-halo-width":2},filter:["all",[">=",["zoom"],["get","minZoom"]],["<",["zoom"],["get","maxZoom"]]]}),(0,bi.jsx)(_i,{id:"events-description",type:"symbol",layout:{"text-field":["get","description"],"text-font":["Noto Sans Italic"],"text-size":13,"text-anchor":"top","text-offset":[0,1.3],"text-max-width":16,"text-padding":0,"text-ignore-placement":!0,"icon-ignore-placement":!0},paint:{"text-color":"#555","text-halo-color":"#fff","text-halo-width":2},filter:["in","id",...s]})]}),e.children]})},ki=e=>{let{children:t}=e;return(0,bi.jsxs)("div",{className:"flex w-full max-w-sm overflow-hidden rounded-lg shadow-md bg-gray-800",children:[(0,bi.jsx)("div",{className:"w-2 bg-gray-900"}),(0,bi.jsx)("div",{className:"flex items-center px-2 py-3",children:(0,bi.jsx)("div",{className:"mx-3",children:(0,bi.jsx)("div",{className:"text-gray-200",children:t})})})]})},Si=e=>{let{children:t,target:n,className:r}=e;return(0,bi.jsx)("button",{className:"not-prose px-6 py-2 font-medium tracking-wide text-white transition-colors duration-300 transform bg-blue-500 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 "+(null!==r&&void 0!==r?r:""),children:(0,bi.jsx)("a",{href:n,target:null!==n&&void 0!==n&&n.startsWith("/#")?void 0:"_blank",rel:"noreferrer",children:t})})},Ci=e=>{let{children:t}=e;return(0,bi.jsx)("div",{className:"flex flex-col mt-6 not-prose w-screen left-0 md:px-6 px-3 overflow-x-auto ",style:{marginLeft:"calc((-100vw + 100%)/2)"},children:(0,bi.jsx)("div",{className:"m-auto max-w-7xl w-fit overflow-hidden border border-gray-200 dark:border-gray-700 rounded-lg",children:(0,bi.jsx)("table",{className:"divide-y divide-gray-700",children:t})})})},Ti=e=>{let{children:t,href:n,className:r}=e;return(0,bi.jsx)("a",{className:"text-blue-500 underline "+(null!==r&&void 0!==r?r:""),href:n,target:null!==n&&void 0!==n&&n.startsWith("/#")||null!==n&&void 0!==n&&n.startsWith("#")?void 0:"_blank",onClick:e=>{if(null!==n&&void 0!==n&&n.startsWith("/#/"))window.scrollTo(0,0);else if(null!==n&&void 0!==n&&n.startsWith("#")){const t=document.querySelector(n);t&&window.scrollTo({top:t.getBoundingClientRect().top+window.scrollY-100,behavior:"smooth"}),e.preventDefault()}},rel:"noreferrer",children:t})},Ei={blockquote:{component:ki},h1:{props:{className:"text-xl font-medium text-gray-800 md:text-2xl lg:text-4xl"}},h2:{props:{className:"text-l font-bold text-gray-800 md:text-xl lg:text-2xl"}},h3:{props:{className:"text-base font-semibold text-gray-800 md:text-lg lg:text-xl"}},a:{component:Ti},button:{component:Si},table:{component:Ci},thead:{props:{className:"bg-gray-800"}},th:{props:{className:"px-3 md:px-6 py-2 md:py-3.5 text-xs md:text-sm font-bold text-left rtl:text-right text-gray-200"}},tbody:{props:{className:"bg-gray-900 divide-y divide-gray-700"}},td:{props:{className:"px-3 md:px-6 py-2 md:py-3.5 text-xs md:text-sm font-normal text-left rtl:text-right text-gray-200"}},img:{props:{className:"popout-image"}},ul:{props:{className:"list-disc list-inside"}}},Ii=e=>{let{mddText:n,title:r,open:i,setOpen:a,imgSrc:o,imgHref:s,imgHeight:l,imgPositionX:c,imgPositionY:u,light:h}=e;const d=(0,t.useRef)(null);(0,t.useEffect)((()=>{var e;i?(document.body.style.overflow="hidden",null===(e=d.current)||void 0===e||e.scrollTo(0,0)):document.body.style.overflow="auto"}),[i]);const p=h?"bg-black bg-opacity-40":"bg-white bg-opacity-60",f=h?"bg-white":"bg-gray-900",m=h?"text-black":"text-white",g=h?"text-gray-900":"text-gray-200",y=h?"text-gray-500":"text-gray-400",_=h?"hover:text-gray-800":"hover:text-gray-300",v=h?"border-gray-300":"border-gray-700",x=h?"hover:bg-gray-300":"hover:bg-gray-800";return(0,bi.jsx)("div",{className:`fixed top-0 left-0 p-2 items-center justify-center overflow-hidden z-40 ${p} h-screen w-screen`,"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",style:{transition:"opacity .15s ease-in-out",display:i?"flex":"none",opacity:i?1:0},onClick:()=>a(!i),children:(0,bi.jsx)("div",{className:"flex items-center justify-center text-center",children:(0,bi.jsxs)("div",{ref:d,style:{flex:"1 1 auto",maxWidth:"800px"},className:`relative p-4 overflow-scroll text-left align-bottom transition-all transform rounded-lg shadow-xl ${f} sm:align-middle sm:max-w-md sm:w-full sm:p-6 h-full max-h-[calc(100vh-1rem)]`,onClick:e=>{e.stopPropagation()},children:[(0,bi.jsxs)("div",{className:"flex flex-wrap justify-center",children:[(0,bi.jsx)("div",{className:"md:w-1/3 max-h-96",children:(0,bi.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:(0,bi.jsx)("img",{style:{height:l,width:"250px",objectPosition:`${c} ${u}`},className:"object-cover rounded-md",src:o,alt:""})})}),(0,bi.jsxs)("div",{className:"md:w-2/3 mt-8 md:mt-0 px-4 flex flex-wrap",children:[(0,bi.jsx)("h3",{className:`font-medium leading-6 capitalize ${m} text-2xl lg:text-3xl`,id:"modal-title",children:r}),(0,bi.jsx)("div",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:{...Ei,p:{props:{className:`${g} mt-0`}},span:{props:{className:`${g} mt-0`}}}},children:n})})]})]}),(0,bi.jsxs)("div",{className:"mt-5 sm:flex sm:items-center sm:-mx-2",children:[(0,bi.jsx)("button",{onClick:()=>a(!i),className:`w-full px-4 py-2 text-sm font-medium tracking-wide capitalize transition-colors duration-300 transform border rounded-md mb-16 sm:mb-0 sm:mx-2 ${y} ${v} ${x} focus:outline-none focus:ring focus:ring-gray-300 focus:ring-opacity-40`,children:"Close"}),(0,bi.jsx)("button",{onClick:()=>a(!i),className:`absolute right-4 top-4 w-4 h-4 transition-colors rounded duration-300 transform ${y} ${_} focus:outline-none focus:ring focus:ring-gray-700 focus:ring-opacity-40`,children:(0,bi.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8",children:[(0,bi.jsx)("title",{children:"Shape + Shape"}),(0,bi.jsxs)("g",{"fill-rule":"evenodd",children:[(0,bi.jsx)("path",{d:"M2.048.77l5.18 5.182L5.953 7.23.77 2.048 2.048.77z",fill:"currentColor"}),(0,bi.jsx)("path",{d:"M5.952.77L7.23 2.05 2.048 7.23.77 5.952 5.953.772z",fill:"currentColor"})]})]})})]})]})})})},Mi=e=>{let{name:n,link:r,imgSrc:i,description:a}=e;const[o,s]=(0,t.useState)(!1);return(0,bi.jsxs)("div",{className:"relative w-64 h-40 sm:w-52 sm:h-32 m-2.5",children:[a&&(0,bi.jsx)(Ii,{open:o,setOpen:s,title:n,mddText:a,imgSrc:i,imgHref:r,light:!0}),(0,bi.jsx)("a",{href:a?"#info":r,onClick:e=>{a&&(s(!0),e.preventDefault())},target:"_blank",rel:"noopener noreferrer",className:"flex cursor-pointer w-full h-full bg-white rounded overflow-hidden hover:scale-105 sponsor-card justify-center",children:(0,bi.jsx)("img",{src:i,alt:n,className:"p-3 max-w-full max-h-full object-contain m-0"})})]})},Pi=e=>{let{title:n,description:r,cards:i}=e;return(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("h2",{className:"text-l font-medium text-gray-800 md:text-xl lg:text-2xl mb-5",children:n}),r&&(0,bi.jsx)("p",{className:"text-sm text-gray-600 mb-5",children:r}),(0,bi.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 mb-5  justify-items-center sm:justify-items-normal",children:i.map(((e,n)=>(0,t.createElement)(Mi,{...e,key:n})))})]})},Ai=()=>(0,bi.jsx)(bi.Fragment,{children:(0,bi.jsx)("section",{className:"container px-6 py-8 mx-auto lg:py-16",children:(0,bi.jsxs)("div",{className:"container",children:[(0,bi.jsx)("h1",{className:"text-xl font-medium text-gray-800 md:text-2xl lg:text-3xl mb-10",children:"Our sponsors and partners"}),(0,bi.jsx)(Pi,{title:"Platinum Sponsor",cards:[{link:"https://www.ga.gov.au/",imgSrc:"./imgs/sponsors/geoscience_stacked.png",name:"Geoscience Australia"}]}),(0,bi.jsx)(Pi,{title:"Gold Sponsor",cards:[{link:"https://mra.gov.pg/",imgSrc:"./imgs/sponsors/mra.jpeg",name:"Mineral Resources Authority of Papua New Guinea"},{link:"https://www.esri.com/en-us/home/",imgSrc:"./imgs/sponsors/esri.png",name:"Esri",description:"Esri, the global market leader in geographic information system (GIS) software, location intelligence, and mapping, helps leaders around the world unlock the full potential of data, and to understand and address important challenges such as climate change, disaster response, public health and education. Founded in 1969 in Redlands, California, USA, Esri software is deployed in more than 350,000 organizations globally and in over 200,000 institutions in the Americas, Asia Pacific, Europe, Africa, and the Middle East, including government agencies, nonprofits, and universities. With its pioneering commitment to geospatial information technology, Esri engineers the most innovative solutions to help solve the world\u2019s most complex problems.  \n\nVisit us at [esri.com](http://www.esri.com/)."}]}),(0,bi.jsx)(Pi,{title:"Silver Sponsor",cards:[{link:"https://www.terria.io/",imgSrc:"./imgs/sponsors/terria-logo.png",name:"Terria",description:"Terria's mission is to organise and connect the world\u2019s spatial data, making it accessible and useful for everyone. We\u2019re pioneering spatial digital twins\u2014digital replicas of natural and built environments\u2014to address complex challenges like understanding the impact of rising sea levels on coastal cities and planning resilient infrastructure. While digital twins are often costly and complicated, Terria is changing that by making them accessible, powerful, and easy to use. We empower researchers, government leaders, industry experts and open-source developers to leverage spatial data and digital twins for smarter solutions, from building resilient communities to advancing sustainable food and energy systems.\n\nGo to [terria.io](https://www.terria.io/) to learn more!"},{link:"https://www.spc.int/",imgSrc:"./imgs/sponsors/spc.svg",name:"SPC"}]}),(0,bi.jsx)(Pi,{title:"Bronze Sponsors",cards:[{link:"https://north-road.com/",imgSrc:"./imgs/sponsors/northroad.png",name:"North Road"},{link:"https://auspatious.com/",imgSrc:"./imgs/sponsors/auspatious.png",name:"Auspatious"},{link:"https://www.tomtom.com/",imgSrc:"./imgs/sponsors/tomtom.png",name:"TomTom"},{link:"https://www.openwork.nz/",imgSrc:"./imgs/sponsors/openwork.png",name:"OpenWork"},{link:"https://pozi.com/",imgSrc:"./imgs/sponsors/pozi.png",name:"Pozi"},{link:"https://nre.tas.gov.au/",imgSrc:"./imgs/sponsors/tas_gov.jpg",name:"Tasmanian Government"},{link:"https://eskspatial.com.au",imgSrc:"./imgs/sponsors/esk.png",name:"Esk Spatial"},{link:"https://www.meta.com/au/",imgSrc:"./imgs/sponsors/meta.png",name:"Meta"}]}),(0,bi.jsx)(Pi,{title:"Venue Sponsors",cards:[{link:"https://www.utas.edu.au/",imgSrc:"./imgs/sponsors/utas.svg",name:"University of Tasmania"},{link:"https://c3conventioncentre.com.au/",imgSrc:"./imgs/sponsors/c3.png",name:"C3 Convention Centre"}]}),(0,bi.jsx)(Pi,{title:"Event Sponsors",cards:[{link:"https://north-road.com/",imgSrc:"./imgs/sponsors/northroad.png",name:"North Road"},{link:"https://www.novasystems.com/au",imgSrc:"./imgs/sponsors/nova.png",name:"Nova Systems"},{link:"https://www.esri.com/en-us/home/",imgSrc:"./imgs/sponsors/esri.png",name:"Esri"}]}),(0,bi.jsx)(Pi,{title:"Conference Partners",cards:[{link:"https://osgeo-oceania.org/",imgSrc:"./imgs/sponsors/osgeo-oceania.png",name:"OSGeo Oceania"},{link:"https://osmfoundation.org/",imgSrc:"./imgs/sponsors/osmf.png",name:"OpenStreetMap Foundation"}]})]})})}),zi=n.p+"static/media/home-preamble.69e8724a896dff8c7fd2.md",Di=e=>{let{imgSrc:n,imgHeight:r,imgPositionX:i,imgPositionY:a,imgExpandedHeight:o,imgExpandedPositionX:s,imgExpandedPositionY:l,title:c,shortDescription:u,longDescriptionMd:h}=e;const[d,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(h).then((e=>e.text())).then((e=>m(e))).catch((e=>console.error(e)))}),[h]),(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsxs)("div",{onClick:()=>p(!d),className:"cursor-pointer w-full max-w-xs overflow-hidden bg-gray-900 rounded  hover:scale-105 keynote-card",children:[(0,bi.jsx)("div",{className:"w-full h-64 overflow-hidden",children:(0,bi.jsx)("img",{style:{height:r,objectPosition:`${i} ${a}`},className:"min-h-[16rem] object-cover",src:n,alt:"avatar"})}),(0,bi.jsxs)("div",{className:"py-5 px-3 text-center",children:[(0,bi.jsx)("div",{className:"block text-xl font-bold text-white",children:c}),(0,bi.jsx)("span",{className:"text-sm text-gray-200",children:u})]})]}),(0,bi.jsx)(Ii,{mddText:f,title:c,open:d,setOpen:p,imgSrc:n,imgHeight:o,imgPositionX:s,imgPositionY:l})]})},Ri=n.p+"static/media/andrea-jalandoni.a5de1a88d5c4e0ed0dd0.md",Fi=n.p+"static/media/brianna-pagan.acd4820454377e2e3111.md",Oi=n.p+"static/media/kate-fickas.7f8b49082213b70eb441.md",Bi=n.p+"static/media/lanieta-roko.e1f8be2794deb15c7b9d.md",Vi=()=>(0,bi.jsx)(bi.Fragment,{children:(0,bi.jsxs)("section",{className:"container px-4 py-8 mx-auto lg:py-16",children:[(0,bi.jsx)("h1",{className:"text-xl md:text-2xl lg:text-3xl font-medium text-gray-800 mb-6",children:"Keynote Speakers"}),(0,bi.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-y-4 gap-x-2 justify-center",children:[(0,bi.jsx)(Di,{imgSrc:"./imgs/keynote-speakers/andrea.jpeg",title:"Andrea Jalandoni",imgHeight:"300px",imgExpandedHeight:"400px",imgPositionX:"50%",imgPositionY:"0px",shortDescription:"A pioneering digital archaeologist, Andrea specializes in rock art recording using photogrammetry, lidar, and unmanned aerial systems, with nearly 20 years of experience on World Heritage Sites across Australia, Southeast Asia, and Micronesia.",longDescriptionMd:Ri}),(0,bi.jsx)(Di,{imgSrc:"./imgs/keynote-speakers/brianna.jpeg",title:"Brianna Pag\xe1n",imgHeight:"500px",imgPositionX:"40%",imgPositionY:"-70px",shortDescription:"As Deputy Manager at NASA\u2019s GES DISC and Adjunct Professor, Brianna enables science for the masses and brings her expertise in the fields of remote sensing, climate and informatics to lead large and diverse teams of software engineers and scientists to effectively distribute geospatial data.",longDescriptionMd:Fi}),(0,bi.jsx)(Di,{imgSrc:"./imgs/keynote-speakers/kate.jpeg",title:"Kate Fickas",shortDescription:"As Esri Director of Imagery and Remote Sensing Solutions, Kate combines her interdisciplinary expertise in satellite, drone, and lidar remote sensing with GIS, statistical modeling, and machine learning, to develop user and solution driven approaches to cross-industry applications.",longDescriptionMd:Oi}),(0,bi.jsx)(Di,{imgSrc:"./imgs/keynote-speakers/lani.jpeg",imgHeight:"400px",imgPositionX:"85%",imgPositionY:"-70px",imgExpandedHeight:"400px",imgExpandedPositionX:"-220px",imgExpandedPositionY:"0px",title:"Lanieta Roko",shortDescription:"An accomplished environmental scientist, Lanieta conducts climate risk assessments across Fiji and the Pacific, using geospatial tools to develop data-driven adaptation plans tailored to regional needs. She\u2019s also active in voluntary geospatial work and passionate about community engagement.",longDescriptionMd:Bi})]})]})}),ji=()=>{const[e,n]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(zi).then((e=>e.text())).then((e=>n(e)))}),[]),(0,bi.jsxs)("div",{children:[(0,bi.jsx)("section",{className:"bg-white",children:(0,bi.jsx)("div",{style:{backgroundImage:"url('/imgs/2024/home-view.webp')",backgroundSize:"cover",backgroundPosition:"center bottom",margin:"auto"},children:(0,bi.jsxs)("div",{className:"container mx-auto px-4 grid md:grid-cols-[300px_1fr] lg:grid-cols-[600px_1fr] items-center md:py-16",children:[(0,bi.jsx)("div",{className:"flex flex-col",children:(0,bi.jsx)("div",{className:"p-4 lg:text-6xl md:text-5xl text-3xl font-bold text-white mx-auto md:mx-0",children:(0,bi.jsx)("img",{src:"/imgs/2024/2024_logo_round.png",alt:"FOSS4G SotM Oceania 2024",className:"w-auto h-36 md:h-64 lg:h-96"})})}),(0,bi.jsxs)("div",{className:"hidden md:block text-center md:text-left text-lg md:text-2xl font-display font-['Roboto Serif']",style:{lineHeight:"3rem"},children:[(0,bi.jsxs)("div",{children:["Join us for"," ",(0,bi.jsx)("span",{className:"text-xl md:text-4xl",children:"FOSS4G SotM Oceania"})," ","in ",(0,bi.jsx)("span",{className:"text-xl md:text-4xl",children:"Hobart, Tasmania"})," "]}),(0,bi.jsxs)("div",{children:["from"," ",(0,bi.jsx)("span",{className:"text-xl md:text-4xl",children:"5 - 8 November 2024"}),"."]})]}),(0,bi.jsx)("div",{className:"md:hidden text-center text-2xl font-bold mb-4 text-white",children:"5 - 8 November 2024"})]})})}),(0,bi.jsx)("section",{className:"container mx-auto py-8 px-4",children:(0,bi.jsxs)("div",{className:"prose-base max-w-none",children:[(0,bi.jsx)("p",{className:"text-lg",children:"FOSS4G SotM Oceania is a gathering for our vibrant open geospatial community to come together and geek out over all things open geospatial."}),(0,bi.jsx)("p",{children:"FOSS4G events are part of a conference series run by the OSGeo community with the objective of fostering and promoting the adoption of open source geospatial technology. SotM refers to the conference of the OpenStreetMap Foundation (OSMF), supporting the development of the OpenStreetMap project. FOSS4G SotM Oceania is part of the larger global community, and merges the two conferences into one exciting Oceania centered event."})]})}),(0,bi.jsx)(Vi,{}),(0,bi.jsx)("section",{className:"container mx-auto px-4",children:(0,bi.jsx)("div",{className:"prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:e})})}),(0,bi.jsx)(Ai,{}),(0,bi.jsx)(wi,{width:"100vw",height:400})]})},Ni=n.p+"static/media/top-menu.b2dd20935633a92af385.md",Hi=()=>(0,bi.jsxs)("svg",{width:"auto",height:"30",viewBox:"0 0 395 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.845886 14.3433L0.915518 14.3665L1.05478 14.2737L1.07799 13.8559L1.05478 13.6702L0.96194 13.6238V13.5542H0.869097V13.4381L1.03157 13.3917L1.07799 13.2524L1.21726 13.2292L1.28689 13.1596L1.21726 12.9971L1.49579 13.1131L1.56542 13.0667L1.7511 12.6954L1.77431 12.5561L1.70468 12.5097L1.84395 12.4168V12.1615L1.72789 12.0222L1.68147 11.8366L1.77431 11.6509L1.68147 11.4884L1.79753 11.3723V11.1402L1.72789 11.0706L1.63505 11.1402L1.58863 10.7689L1.519 10.6528L1.70468 10.3047L1.58863 10.2118V10.0958L1.7511 9.91007L1.86716 9.88686L1.96 9.70117L2.19211 10.3047L2.07605 10.2118V10.3047L2.14569 10.4207H2.33137L2.42421 10.5135L2.35458 11.001L2.49385 10.8153L2.47064 10.6064L2.54027 10.5368L2.72595 10.6064L2.77238 10.676L2.74917 10.7457L2.79559 10.7921L2.88843 10.6992L3.02769 10.676L3.09733 10.8849L3.02769 11.0242L3.09733 11.117L3.07412 11.001L3.19017 10.9313L3.4687 11.0706L3.74723 11.0938L3.81686 11.1402L3.79365 11.2331L3.84007 11.2099V11.2563H3.86328L3.88649 11.3027V11.3259H3.9097H3.95612L3.86328 11.2795L3.93291 11.1867L4.30428 11.0938L4.42034 11.001L4.62923 11.2331L4.58281 11.2795L4.62923 11.3956L4.72208 11.2795H4.7685L4.69887 11.442L4.86134 11.3491L4.7685 11.442H4.83813L4.79171 11.558V11.5812L4.88455 11.6045L5.00061 11.4652L5.13987 11.5348L5.30234 11.8366L5.27913 11.9294L5.37198 11.8133L5.48803 11.883L5.46482 12.0222L5.53445 11.9758L5.58087 12.0455L5.55766 11.9062L5.62729 11.8598L5.67372 11.9062L5.72014 11.999L5.69693 12.1151L5.76656 12.0919L5.78977 12.2079L5.76656 12.2311L5.72014 12.2079L5.67372 12.2544L5.65051 12.2311L5.53445 12.2544L5.55766 12.2776V12.2544H5.67372L5.76656 12.2311L5.78977 12.2079L5.81298 12.1615L5.83619 12.1383V12.1151L5.90582 12.0455L5.88261 11.9526L6.04509 11.9294L6.20756 12.0222L6.23077 11.9758L6.09151 11.8366L5.97545 11.8598L5.92903 11.7669L5.69693 11.7205V11.6277L6.43967 11.7669L7.11278 11.5812L6.7182 11.8598L6.9503 11.883L7.11278 11.7901L7.22883 11.1867L7.20562 11.0474L7.13599 11.0242L7.11278 10.8617L7.04315 10.8153L7.06636 10.6296L7.13599 10.6064L7.27526 10.8849L7.48415 10.9313L7.46094 11.1402L7.6002 11.2563L7.57699 11.3259L7.41452 11.2795L7.22883 11.7205L7.20562 11.6741L7.18241 11.6973L7.22883 11.8598L7.3681 11.9758L7.32168 12.0919L7.39131 12.0222L7.46094 12.0455L7.32168 11.6277L7.64663 12.1615L7.6002 12.2311V12.3008H7.50736V12.324H7.46094H7.43773L7.41452 12.3472L7.39131 12.3704L7.62342 12.3008H7.64663L7.69305 12.324L7.71626 12.3472L7.66984 12.1847L7.94837 12.3704L8.41258 12.3472L8.43579 12.5097L8.52863 12.4168L8.92322 12.6257L8.90001 12.6721L8.94643 12.8114L8.85358 12.8346L8.80716 12.881L8.94643 12.8346V12.6489L9.27138 12.5793L9.45706 12.4632L9.48027 12.3704L9.57312 12.3936L9.61954 12.4632L9.54991 12.5329L9.66596 12.6257V12.8346L9.82843 12.881V12.9971L9.92128 13.0203L9.89807 13.0899L10.0373 13.206L10.2694 13.1596L10.3855 13.2988H10.6176L10.6408 13.3917L10.9425 13.5077L11.1979 13.4613L11.6621 13.5542L11.7085 13.6934L11.6157 13.8559L11.7781 14.0648L11.6853 14.088L11.5924 13.9952L11.4764 14.0184L11.4068 13.9255H11.3836H11.3603L11.4764 14.0184L11.5924 13.9952L11.6853 14.1112L12.0567 14.2273L12.3584 14.5986L12.7298 14.7611L12.6834 14.854L12.7066 14.8772H12.6834H12.6601L12.6369 14.9004L12.7066 14.8772L12.753 14.7379H13.1011L13.1708 14.8307L13.4725 14.9004L13.4029 14.9468L13.5654 15.1325L13.5421 15.1557L13.5189 15.1789L13.5421 15.2485V15.1789L13.5654 15.1325V15.1093L13.8903 15.0628L14.1456 15.2253L14.0528 15.2485L14.0296 15.3182V15.3878L14.1456 15.2021L14.7259 15.5503L14.9116 15.5735L15.0276 15.736L15.4454 15.7824L15.5383 15.9913L15.84 16.0609L15.9096 16.1305V16.2466L15.7704 16.2234L15.7472 16.3394L15.5615 16.2234L15.5383 16.2698L15.4454 16.2466L15.4919 16.3626L15.5383 16.293L15.6775 16.3162L15.6543 16.4091L15.7007 16.4323V16.4787L15.724 16.5019L15.6775 16.3626H15.8168V16.293L15.9096 16.2698V16.177H16.2346L16.4899 16.293L16.6756 16.2698L16.6524 16.5251L16.722 16.4555L16.6988 16.5948L16.722 16.734V16.2698L16.7452 16.2002L17.0702 16.3162L17.4183 16.2234L17.5112 16.2698L17.4648 16.3859L17.3951 16.4555L17.3719 16.5483L17.5344 16.3162L17.7433 16.293L17.8361 16.3626L17.7897 16.5019L17.8361 16.734L17.7201 16.8269L17.6504 17.0358L17.8129 16.9197V17.0822L17.8826 17.0358L17.8593 17.1518L17.9754 17.2214L17.9986 17.175V17.2679H18.0218V17.175L18.0915 17.2214L18.045 17.2447H18.1147L18.0682 17.175L18.1611 17.1982L18.0218 17.1054L17.7897 16.8269L17.8593 16.734L17.8129 16.5251L17.8593 16.4091V16.4555L17.9986 16.4323L18.0915 16.4787L18.3932 16.3394L18.7646 16.3162L19.2985 15.9913L19.4377 15.7824L19.5538 15.9216L19.5306 16.2466L19.7163 16.4091L19.6931 16.4555L19.577 16.4091L19.5074 16.5019L19.577 16.4323L19.7627 16.5019L19.8323 16.6876L19.7163 16.7804L19.8555 17.1054L19.7395 17.175L19.7163 17.3143H19.8323L19.7627 17.3607L19.7395 17.3839L19.7627 17.4071L19.8787 17.3375L19.8555 17.2447H19.7859L19.9252 17.1054L19.9484 16.8733V17.0358L20.0412 17.059L20.018 17.4768L20.1109 17.5V17.5464L20.1341 17.5696H20.1573L20.1341 17.5L20.0412 17.4768L20.0876 17.2447H20.1573L20.0876 17.175V17.0125L20.1805 16.9661L20.1341 16.9429L20.0644 17.0358L19.9716 17.0125L20.0412 16.9429L19.8787 16.7804L19.9252 16.4091L19.9948 16.3626L20.0412 16.4091H20.0644L20.1109 16.3859V16.4091H20.1341L20.1109 16.3626L20.0412 16.4091V16.3394L20.1341 16.2466L20.1805 16.2698L20.1109 16.2002L20.0876 16.2698L19.8787 16.2466L19.7627 16.3626L19.7395 16.1305L20.0412 16.1073L20.4126 15.8752V15.7592L20.5519 15.6663L20.4822 15.5039L20.5519 15.4574L20.8072 15.5503L20.9464 15.4806L21.1785 15.2253L21.1321 15.0628L21.4571 15.2485L21.4803 15.3414L21.7124 15.2717L21.9909 15.6199L21.8981 15.6895H21.9909V15.736V15.7592L22.0838 15.736L22.0606 15.6663L22.1534 15.6895V15.736L22.0838 15.7127L22.1302 15.9216L22.223 16.0145L22.0373 15.9681L21.8052 16.2002L21.6892 16.177L21.7356 16.2002V16.3626L21.8284 16.2234H21.8981L21.9213 16.1305L22.0141 16.1538L22.0838 16.0609L22.1998 16.1073L22.2694 16.2002L22.223 16.4323L22.3855 16.5251L22.3159 16.6412L22.3855 16.8037V16.7108L22.4551 16.6412L22.5712 16.734L22.3391 16.3394L22.5944 16.4555L22.7801 16.177L23.2211 16.4323L23.2675 16.5483L23.0818 16.6644L23.1515 16.6876L23.1282 16.7804L23.0586 16.8269V16.8965L22.9658 16.8037V16.8501L23.1282 17.1054L23.3139 17.2214L23.43 17.5928L23.7085 17.4768L23.6389 17.616L23.7549 17.7553L23.7317 17.941L23.6621 18.057V18.2195L23.8246 18.3588H24.0103L24.2656 18.7534L24.5209 18.5445L24.7066 18.6141L24.6137 18.7998L24.6834 19.2176L24.753 19.3104L25.0315 19.38L25.1476 19.4961L25.0315 19.6586L25.0779 19.6354L25.194 19.8675L25.1244 19.9371L25.3333 19.7514L25.3565 19.6121L25.3797 19.6354L25.4029 19.6586L25.4261 19.6354L25.4493 19.5889L25.4725 19.6121L25.4957 19.6354L25.4725 19.6818L25.519 19.7282H25.5422V19.7514L25.5654 19.7978L25.6118 19.8443L25.635 19.821L25.5654 19.7978L25.5422 19.7282V19.705L25.519 19.7282L25.4957 19.6354L25.4725 19.6121L25.4493 19.5889H25.4261L25.4029 19.6586L25.3797 19.5889H25.3565V19.6121L25.3333 19.7514L25.1708 19.7978L25.1012 19.6354L25.194 19.5193L24.8691 19.1944L24.7298 18.9622L24.6834 18.7534L24.753 18.6605L24.6602 18.498L24.4048 18.5677L24.3352 18.3356L23.9406 18.3123L23.7317 18.2195L23.7549 18.0802L23.9638 17.8946H24.0799L24.1031 17.8017L23.8942 17.4768L23.7317 17.3839L23.7085 17.2679L23.6621 17.3143L23.43 17.1982L23.4068 16.8965L23.1979 17.0822L23.105 16.9661L23.2907 16.8269H23.2443L23.1979 16.7572L23.3371 16.5715L23.4764 16.5948L23.5693 16.7108L23.6157 16.6876L23.1747 16.293L23.0586 16.1538L23.1282 16.1305L23.0122 16.1073L22.989 16.0145L22.7569 15.9216L22.5712 16.0377L22.5016 16.0609L22.2927 15.9913L22.3391 15.9681V15.852L22.2927 15.9449L22.1998 15.852L22.2694 15.6431H22.1766L22.0606 15.1557L21.9677 15.0628L21.9445 15.1093L21.8981 14.9468L22.0838 15.0628L22.3391 14.7611L22.5944 14.6683L22.7337 14.5058L22.9193 14.6451L23.0818 14.5986L23.1747 14.6451L23.43 14.5754L23.4532 14.5986L23.8942 14.088L24.1495 14.0184L24.2656 14.1344L24.5209 14.1112L24.6602 14.2505L24.8226 14.1808L24.9155 14.2273L25.0779 14.1808L25.1476 14.2969L25.4725 14.4129L25.2868 14.7147L25.4493 14.5522L25.519 14.3665L25.6582 14.3897L25.8207 14.2505L25.8903 14.2737L25.9135 14.2505L25.8903 14.3201L25.9367 14.2505H25.8903L26.2153 13.9952L26.3545 13.6702L26.6563 13.5077L26.7027 13.647L26.8884 13.7166L27.0509 13.6702L27.283 13.4845L27.4454 13.9487L27.3758 13.9719L27.399 14.0416H27.4454L27.399 13.9719L27.5151 13.9487L27.6775 14.0184L27.8168 14.3665L27.9793 14.4362L28.0257 14.3897L28.0489 14.4362L28.1186 14.4129L28.0953 14.3897H28.1186V14.4129H28.1418L28.1186 14.3897H28.0953L28.0721 14.4362L28.0257 14.3897H27.8632L27.7936 14.2969L27.9329 14.3433L28.2114 14.2969L28.6988 13.9952L29.0238 13.6238L29.4416 12.9739L29.5808 12.9043L29.5112 12.8578L29.6505 12.6257L29.604 12.5097L29.6969 12.5329L29.7433 12.44L29.6969 12.3472L30.0218 12.2776L30.4164 11.9758V12.0687L30.6253 12.2079L30.7878 12.4865L31.2752 12.44L31.2984 12.5329L31.2752 12.5097L31.2056 12.5793L31.2288 12.6721L31.2752 12.5329L31.4841 12.7186L31.9019 12.8114L32.2268 12.7418L32.4822 12.5793L32.3893 12.765L32.6911 12.6954L32.5286 12.7186V12.5329L32.9696 11.9062L33.1089 11.6045L33.0624 11.3956L33.1553 11.4188L33.2249 11.2563V11.1402L33.0624 11.117L33.016 10.9546L33.2249 11.0242L33.3642 10.9081L33.6891 11.001L33.8052 11.117L33.9444 11.0938L33.9909 11.2099L33.9444 11.2563L33.9909 11.3723L34.0373 11.3956L33.9909 11.2331L34.1766 11.3491L34.3854 11.3259L34.7568 11.883L34.9889 12.0919L35.1514 12.1615L35.3139 12.0919L35.2675 12.1615H35.1978H35.0586L34.8497 11.999L34.8032 12.0455L34.7336 11.883L34.7568 11.9758H34.664L34.7104 12.0687L34.8497 12.1615L34.8729 12.0687L35.0818 12.1847L35.2907 12.2079L35.3371 11.9758L35.5228 12.2079L35.7781 12.3008L35.7549 12.5097L35.8245 12.6954L35.9174 12.8114L36.1495 12.881L36.1727 12.9739L36.1263 12.9971V13.0203L36.103 13.0435L36.1959 12.9971L36.2655 13.2524L36.544 13.5077V13.7398L36.7529 14.1112L36.8458 14.1576L36.9618 14.1112L37.0083 14.1808L36.8226 14.2505L36.544 14.6451L36.4744 14.854L36.4976 15.0628L36.3816 14.8772L36.4512 14.6218L36.0334 14.9236H36.3584L36.4976 15.0861L36.2191 15.8752V16.2002H36.2887L36.3816 16.4091L36.3351 16.5251L36.2191 16.5483L36.0566 16.7108L36.1727 16.6644L36.2423 16.5715L36.2887 16.9197L36.1959 16.8501H36.1495L36.2191 16.9429H36.3816L36.3351 17.1982L36.3584 17.175L36.4512 17.2679V17.3607L36.5673 17.4768H36.544L36.6369 17.4071L36.7065 17.5232L36.7994 17.4303L36.8922 17.5928L36.8226 17.7785L36.6137 17.941L36.5905 18.1267L36.428 18.1499L36.4744 17.8713H36.3584L36.3351 17.8017L36.2423 18.1963L36.2887 18.2659L36.2191 18.2891H36.2655L36.3119 18.2427L36.2887 18.2891L36.0102 18.4516L35.9406 18.3588L35.8941 18.382L35.987 18.4748L36.103 18.498L36.1727 18.6141H36.2423L36.6137 18.3123L36.6601 18.1267L36.7761 18.0338L36.8226 17.8017L36.8922 17.8713L37.0547 17.7553L37.1011 17.8713L36.7761 18.1731L36.544 18.939L36.4976 19.0087L36.4512 18.9855L36.3119 19.0319V19.1015L36.4048 19.1247L36.3816 19.0783L36.4744 19.0087L36.1959 20.1692V20.0532L36.1727 20.146L36.0334 20.0996L36.0102 20.1228L35.987 20.1924L35.9174 20.146L35.987 20.2388L35.8709 20.146V19.9371L35.8245 19.7978V19.9603L35.7781 19.9139L35.7549 19.9371L35.7781 19.9603L35.7549 19.9835L35.6156 19.9371L35.5692 20.0067L35.6156 19.9139L35.5692 19.8907L35.546 19.9139H35.6156L35.5692 20.0067H35.5924L35.6388 19.9603L35.7549 19.9835H35.7317L35.7085 20.0067V20.0299L35.7781 19.9603V19.9139L35.8245 19.9603L35.8709 19.9371L35.8477 20.1228L35.8709 20.1692L35.9638 20.2388H35.987L36.0102 20.2156L36.0334 20.0996L36.1959 20.1692L36.2423 20.7031L36.1727 20.4245L36.1495 20.5406L36.0566 20.3781L36.0334 20.4942L36.1495 20.5638L36.1959 20.7263L36.2887 20.7031L36.3816 21.353L36.6833 21.6315L36.7065 22.235L36.4512 22.7224L36.4048 23.0473L36.4744 23.1634L36.3584 23.4883L36.428 23.6972L36.544 23.7437L36.5673 23.8597L36.5208 23.9061L36.4512 23.8829L36.3584 23.999L36.1727 24.6489L36.2655 25.1595L36.4048 25.3916L36.6369 25.4845L36.5673 25.7166L36.7065 25.8558L36.7529 26.0415L36.544 26.2968L36.6137 26.6218L36.4976 26.6682L36.428 26.8307L36.3584 27.5734L36.4976 27.852L36.6137 27.8752L36.7994 28.409L36.9386 28.5019L36.9618 28.6875L36.8458 28.7804L36.8922 28.85H36.7065L36.7529 29.0589L36.4976 29.2678L36.5905 29.4071L36.6601 29.3142L36.9618 29.4999L37.0779 29.4535L37.0083 29.5231L37.0315 29.732L36.9386 29.8713L36.9618 30.0338L36.7994 30.1034L36.7297 30.5444L36.5905 30.5676L36.6601 30.7069L36.544 30.7765H36.428L36.3816 30.4516L36.1495 30.4283L36.0798 30.3355L36.0334 30.1266L36.2191 30.057L36.2887 29.8249L36.4512 29.616L36.3119 29.3607L36.1263 29.2678L36.2423 29.0589L36.4976 28.9429L36.544 28.8268L36.4744 28.734L36.3584 28.7804V28.6875L36.1959 28.5715L36.0102 28.6411L35.9174 28.4322L35.9638 28.293L35.6388 28.1305L35.6852 28.0376L35.7781 28.1073L35.7549 28.0144L35.5228 27.9912L35.4299 28.1305L35.1514 28.1073V27.8984L35.3139 27.8287L35.2907 27.6895L35.4763 27.5966L35.6156 27.6198L35.6852 27.5734L35.987 27.0628L35.9174 26.9235L35.7781 26.9932L35.7085 26.9467V27.0164L35.662 26.9932L35.7317 27.1556L35.5228 27.3877L35.2907 27.2485V27.086L35.221 27.0628L35.0121 27.3877L35.0353 27.4806L35.0121 27.5038L35.0353 27.5502L35.0121 27.5966L35.0353 27.6431L34.9657 27.7823L35.0818 27.7127L35.0353 27.5502L35.1978 27.6431L35.1514 27.7591L35.221 27.7823L35.105 27.9216H34.8729L34.7336 28.0609L34.8497 28.0841L34.5479 28.1769L34.4087 28.0376L34.3622 28.0609L34.3854 27.8984L34.3622 27.8287L34.339 28.0609H34.3622V28.0841L34.4087 28.0609L34.5015 28.1769L34.5943 28.2001L34.7568 28.1073L34.8729 28.1537L35.0818 28.0841L35.2442 28.2233H35.662L35.8709 28.3162L35.8941 28.3858L34.8497 28.3162L34.5711 28.3858L34.3158 28.5715L34.3622 28.7108L34.4319 28.7572L34.3622 28.85L34.4087 28.9661L34.3158 29.1053L34.4319 29.291L34.3158 29.3839L34.2694 29.616L34.0373 29.7552L34.0605 29.8249L33.7588 30.2194V30.3587L33.898 30.498L33.7588 30.614L33.782 30.8229L33.6659 30.9622L33.6195 31.1479L33.4106 31.1247L33.341 31.4496H33.1785L33.2249 31.4728L33.0856 31.496L33.1321 31.5192L33.0856 31.5657L33.0392 31.4496L33.0624 31.5889L32.9928 31.496L32.9696 31.5657V31.6353L33.0856 31.6121V31.6585L33.1785 31.5889L33.2017 31.7049L33.2481 31.7746L33.2249 31.5657L33.4802 31.496L33.3874 31.4496L33.4106 31.3568L33.5034 31.3336L33.5266 31.2175L33.5731 31.1711L33.8052 31.2175L33.782 31.38L33.8748 31.6585L33.5034 32.1691L33.4338 32.4013L33.6195 32.7494L33.5963 32.819L33.5266 32.7958L33.4338 32.819V32.8423H33.7123L33.7355 32.9815L33.5731 33.4922L33.5034 33.469V33.6082L33.5731 33.4922L33.5963 33.6546L33.7355 33.7475L33.5731 33.8635V33.9796L33.457 33.8403L33.3178 33.8867V34.0028L33.1785 34.1188L33.2017 34.2813L33.1321 34.3277L33.0392 34.2349L32.9696 34.2813L32.9 34.1188L32.9464 34.026L32.7839 33.8403L32.8768 33.6778V33.6546V33.6082L32.8303 33.7243L32.7375 33.7475V33.8171L32.6446 33.91L32.7839 34.026V34.2581L32.5518 34.2117L32.3661 34.3742L32.1804 34.3974H32.3661L32.459 34.3277L32.4822 34.4902H32.6679L32.8303 34.792L32.9696 34.8384L32.9928 34.9776L33.0856 35.0241L32.9696 35.349L33.1785 35.5115L33.2017 35.6275H33.1785L32.9464 35.5115L33.0856 35.6508L33.1785 35.674L33.2017 35.6275L33.1785 35.7436L33.2713 35.8364L33.2481 35.9757L33.0392 36.2542L33.1089 36.3703L33.0624 36.4167L33.1089 36.6024L32.9696 36.7417L32.6446 36.8113L32.459 37.1595L32.3661 37.8094L32.5054 38.1575L32.3661 38.0415L32.2965 37.8094L32.2036 38.0647L32.2268 38.2039L32.1108 38.1575V38.3432L32.018 38.3664L32.1108 38.5289L32.0644 38.5521L31.9947 38.4128L31.9483 38.6217L31.7162 38.7842L31.6002 38.761V38.9003L31.4145 38.8538L31.3681 38.9699L31.1359 38.8074L30.9967 38.8538L30.9271 38.6914L30.7646 38.8074L30.6253 38.761L30.5325 38.9235L30.4164 38.9003L30.4396 38.7842L30.3236 38.6914L30.2075 38.7842L30.1379 38.7146L30.1611 38.5753L30.3004 38.6217L30.37 38.5289L30.5325 38.5057L30.5557 38.3896L30.6949 38.5289L30.7182 38.5057L30.5557 38.3896L30.2307 38.5521L30.2771 38.5985L29.8129 38.4593L29.8594 38.3896L29.8129 38.2968L29.9522 38.2271V38.1111L29.8129 37.9486L29.8361 37.8558L29.7201 37.7397L29.7665 37.4612L29.6969 37.3219L29.6272 37.2755L29.6969 37.3451L29.6272 37.5308L29.6737 37.5772L29.4184 37.4844L29.4416 37.4612L29.4184 37.4148L29.3719 37.5076H29.3255L29.2791 37.3684L29.163 37.3451L29.1166 37.2291L29.0702 37.3451L29.163 37.5772L29.1166 37.6237H29.047L28.9773 37.3684L28.9077 37.3219L28.6524 37.6005L28.3274 37.3219L28.4899 37.1827L28.3507 37.1362L28.281 36.9738L28.3042 37.1362L28.3971 37.2523L28.281 37.2291L28.2578 37.3451L28.165 37.2059L28.1882 37.3684L28.3971 37.6701L28.5596 37.7165L28.6524 37.6701L28.6988 37.7629L28.5828 37.7165L28.5363 37.8094L28.606 37.9022L28.6988 37.9254L28.8149 37.7165L28.9077 37.6933L29.0006 37.9254L29.5344 37.879L29.6969 37.9486L29.8826 38.1575L29.6505 38.0647L29.4184 38.0415L29.0702 38.1807L28.8149 38.3896L28.8845 38.5521L28.7452 39.0163L28.7917 39.0859H28.9077L28.9309 39.202L29.0702 39.2716L29.163 39.6894L28.9541 39.5502V39.7126L28.8845 39.7591L29.0702 39.9912L29.163 39.8519L29.047 39.6894L29.1398 39.7126L29.1862 39.643L29.3023 39.9912L29.0238 40.084L29.0702 40.2697L29.0006 40.4554L28.2114 40.6643L28.0489 40.7571L28.0025 40.85L27.9097 40.8035L27.9329 40.7107L27.8632 40.6643L27.9793 40.4554L27.9097 40.3161L27.7936 40.2697L27.8632 39.9912L27.7472 39.8751L27.84 39.8287L27.9097 39.6894L27.8632 39.8983L28.0025 39.968L27.9793 40.2233L28.0953 40.3625L28.1186 40.5482L28.3274 40.6179L28.4899 40.525L28.5363 40.4322L28.4899 40.1768L28.5828 39.9447L28.4435 39.7823L28.2578 39.8983V39.7126L28.4435 39.1788L28.5596 39.1092L28.6292 39.2484L28.6988 39.2252L28.6292 39.1556V38.9931H28.165L28.1418 39.1788L28.0257 39.3877H27.9097V39.1092L27.9793 38.9931L27.8632 38.6682L27.6079 38.5985L27.4919 38.6449V38.4825L27.3526 38.5521L27.3294 38.3432L27.4222 38.2039L27.283 38.2271L27.2133 38.1575L27.283 38.0415L27.1669 38.0879L27.1901 37.995L27.1437 38.0183L27.0276 37.879L27.0509 37.7629L26.958 37.7861L26.6795 37.5772L26.7723 37.4148L26.7027 37.2523L26.6331 37.3219L26.517 37.2755L26.4706 37.0898L26.5402 36.9738L26.4242 36.8809L26.517 36.7417L26.4938 36.6488L26.517 36.7649L26.401 36.9041L26.4242 36.997L26.3545 36.8577L26.0296 36.7184L25.8671 36.5792L25.7278 36.672V36.7649H25.7511V36.7881L25.4029 36.9273L25.3101 37.113L25.1244 37.1595L25.0315 37.2291L25.3101 37.1595L25.4493 36.9273L25.96 36.7881L26.401 37.113L26.4474 37.2523L26.401 37.3916L26.7027 37.4148L26.5866 37.5076L26.4474 37.438L26.517 37.5076L26.401 37.6469L26.4938 37.6933L26.4242 37.7629L26.6563 37.9022L26.7027 37.8094H26.842L26.9116 37.8558L26.842 37.879L26.8652 37.9254L26.7955 37.9486L26.8652 37.995L26.9116 37.9022L27.0741 37.9718L26.9812 38.2039L27.1205 38.1343L27.0509 38.2736L27.2133 38.4128L27.1901 38.5289L27.2598 38.5753V38.6449L27.1669 38.6682L27.2365 38.6914L27.1669 38.877L27.4454 39.0627L27.399 39.5502L27.283 39.5966L27.2365 39.8519H27.0973L27.0276 39.8983H27.1437L27.0973 40.2697L27.283 40.8267L27.1669 40.966H27.0044L26.7027 40.2929L26.5866 40.3857L26.517 40.525L26.6099 40.5018L26.6563 40.5482L26.5402 40.7571L26.517 40.966L26.4938 40.9892L26.4706 40.966L26.4242 41.0124L26.517 41.0589L26.4242 41.1517L26.6563 41.1749L26.8652 41.3374L26.7027 41.6391L26.6099 41.5695L26.4474 41.5927L26.5866 41.7088L26.5634 41.8016H26.3313L26.3777 41.8712L26.4938 41.9177L26.401 41.9409L26.4242 42.0105L26.3545 42.0337L26.2849 42.1498L26.3545 42.1962L26.2617 42.2194V42.3354L26.3545 42.3819L26.2617 42.4747L26.2849 42.5908L26.4242 42.6604L26.4706 43.1942L26.2849 43.5656L26.3081 43.7281L26.1921 43.8209L26.0296 43.8906L25.7046 43.8441L25.5654 43.937L25.3333 43.7745V43.5424L25.4029 43.4031L25.3333 43.496L25.1476 43.3799L25.1244 43.4496L24.9619 43.5192L24.8691 43.4728L24.9155 43.4263L24.8226 43.4031L24.9155 43.3335L24.8458 43.0782L25.0779 42.9621L24.9387 42.9157L24.9619 42.7997L24.8691 42.6604L24.9851 42.6372L24.8226 42.5211L24.8691 42.4051L24.7994 42.4283L24.7298 42.3354L24.7994 42.73L24.6369 42.8461L24.753 42.9157L24.5673 43.055L24.5441 43.1478L24.3816 42.9853L24.2192 42.9621L24.1959 42.8229L24.0567 42.7068L23.8014 42.6836V42.5211L23.8942 42.4747L23.9174 42.1265L24.1263 41.6623L24.1727 41.407L24.312 41.0821H24.3352L24.3816 40.7803L24.4977 40.7107L24.312 40.5018L24.2888 40.3393H24.1727L24.0103 40.3857L23.9638 40.409L24.2656 40.3393L24.2888 40.525L24.4745 40.7107L24.3816 40.7571L24.2424 40.966L23.871 41.7552L23.8942 41.8712L23.6853 42.0105L23.7781 42.289L23.5693 42.2426L23.4764 42.3354L23.5925 42.2658L23.7085 42.4283L23.6157 42.7068L23.6853 42.8693L23.9174 42.9157L23.871 43.055L23.9638 43.0086L24.1495 43.1246L24.312 43.4031L24.3584 43.3567L24.5673 43.4728L24.6137 43.6585L24.8923 43.8906L24.9155 44.0066L24.7298 44.053L24.5905 44.4012L24.6602 44.494L24.5905 44.5869L24.3816 44.3084L24.1727 44.4012L24.0799 44.3548L23.987 44.4708V44.6101H23.8942L23.7781 44.494L23.6853 44.5173L23.6621 44.5637L23.7781 44.5405L23.7549 44.6565L23.8014 44.5869L23.871 44.6797L24.0335 44.7261L24.1495 44.5869L24.2656 44.7726L24.3352 44.7494L24.5209 44.8422L24.4048 45.2136L24.1031 45.5153L24.1959 45.6314L24.0799 45.7706L24.2192 45.9563L24.1263 46.0492L23.987 45.9331H23.871L23.8246 46.0027L23.6853 45.8867L23.5925 45.9563L23.5693 46.0724L23.4764 46.0956L23.4532 45.9331L23.2211 45.6778L23.2675 45.9563L23.2211 46.0027L23.1515 45.9099L23.0586 45.8867L23.0818 45.8403L23.0354 45.7474L23.0586 45.9099L23.1747 45.9795L23.1282 46.0956L23.3836 46.0027L23.43 46.0724L23.3836 46.0492L23.3371 46.0956L23.4532 46.1652L23.5693 46.0956L23.6621 46.2116L23.8014 46.1884L23.9174 46.2813L23.9638 46.5366L23.7549 46.6294L23.7781 46.467L23.6853 46.3741L23.4532 46.5598L23.3836 46.5134L23.2675 46.7223L23.3371 46.8151L23.4068 46.7687V46.9544L23.4996 46.9312L23.7317 46.6294V46.7223L23.4996 46.9776V47.2329L23.1979 47.3258L23.2211 47.2097L23.1515 47.4186L23.0122 47.3258L23.105 47.2097L23.0122 47.024H23.0586V47.0008H23.0818V46.9776L22.989 47.0008L22.8729 47.5114H22.8497L22.7801 47.5579L22.8961 47.5114L23.0122 47.6275H22.9193L22.8961 47.6971L22.8497 47.6739L22.9193 47.906L22.8729 47.8828H22.8265L22.7105 47.9989L22.9426 47.8828L23.1515 47.7203L23.2211 47.8828L23.1515 48.0453L23.1979 48.1149L22.7337 48.4399L22.7105 48.6488L22.6408 48.5559L22.5016 48.6023L22.4551 48.5559L22.2694 48.6952L22.3855 48.5327L22.3391 48.347L22.1766 48.2078L22.0141 48.1613L21.9445 48.2078L21.8749 48.1381L21.8284 48.2542L21.7356 48.231L21.666 48.3238L21.5731 48.231L21.5035 48.2542L21.2714 48.5559L21.1553 48.4631L21.1089 48.5791L20.9232 48.0917L20.7608 48.0453L20.6679 48.231L20.5983 48.0685L20.6447 47.9757V47.906L20.5519 47.8828L20.4822 47.9524L20.5286 47.8596L20.3662 47.6739L20.2733 47.6275L20.1573 47.7203L20.1805 47.5811L20.0876 47.6275L20.1573 47.465L19.8555 47.1169L19.8787 46.6062L19.6931 46.3277L19.6002 46.467V46.6991L19.6698 46.7455L19.6234 46.9312L19.7395 47.0472V47.1401L20.0412 47.3722L19.5306 47.1169L19.4377 47.2097L19.2056 47.1169L18.9967 47.3722V47.3258L18.8574 47.2561L18.8342 47.3722H18.7181L18.6717 47.2561L18.2539 47.2793L18.2075 47.3258L18.0682 47.2097L17.8826 47.2561V47.1169L17.8593 47.0472V47.2097L17.8361 47.0704L17.6272 46.9776L17.4416 47.0704L17.3487 47.2793L17.0934 47.3954L16.9541 47.1865H16.8613L16.9309 46.7687L16.722 46.6758H16.6292L16.6524 46.7455L16.5363 46.6758L16.3506 46.7455L16.3274 47.2561L16.2114 47.3258L16.0721 47.2329L16.0025 46.9312L15.84 47.024L15.8168 46.8151H15.724L15.6543 46.8615L15.7007 47.1633L15.6079 47.0472L15.5383 47.1401L15.4686 47.0936L15.4222 47.1633L15.3526 47.1169V47.5579H15.1901L15.1669 47.3722L15.0508 47.349L14.958 47.5579L14.7259 47.4882L14.5866 47.7435L14.7027 46.908L14.5402 46.6294L14.5634 46.3277L14.4242 46.2581L14.3777 46.3509L14.3313 46.3277L14.4474 46.2116L14.2849 45.9795L14.2617 45.5617L14.0064 45.5153L14.0528 45.3993L13.9367 45.2368L13.8207 45.26L13.7743 45.2136L13.6582 45.3528L13.5189 45.2136L13.635 45.1672V45.0743L13.7743 45.0975L13.8439 44.935L14.0064 45.0743L14.0528 44.9815L14.0064 44.9118L14.076 44.8886L14.2153 45.1207L14.1224 45.3064L14.1688 45.3993H14.2153L14.2849 45.0279L14.2153 45.0047L14.192 44.7726L14.076 44.8422L14.0528 44.7958L14.1688 44.5405L14.3545 44.6797L14.3081 44.7494H14.7259L14.9348 44.8422L15.0276 44.9118L14.9812 45.0279L15.0973 45.0743H15.1669V45.0047L14.8419 44.7261L15.1437 44.819L15.1205 44.7029L15.2133 44.819L15.2597 44.7494L15.3758 44.8654L15.5383 44.8886L15.5847 44.9815L15.5383 45.0047L15.6079 45.1207H15.5151L15.6311 45.3528V45.5617L15.7472 45.6778L15.8864 45.7242L15.9096 45.6082L15.7472 45.6778L15.6775 45.5849V45.4225L15.5847 45.1672H15.7007L15.7936 45.376L15.8632 45.2368H16.0025L15.9096 45.1904L15.7936 44.9815H16.3274L16.3042 45.1439L16.3739 45.2832H16.3971V45.3064L16.4203 45.3296L16.4667 45.1439L16.3506 45.0047L16.4667 44.9583L16.4435 44.5869L16.5131 44.4476L16.3971 44.494V44.4244L16.3042 44.5405L16.1882 44.378L16.0953 44.3548L15.9793 44.494L15.9329 44.4012L15.9793 44.1227L15.9329 44.1459L15.9096 44.0298L15.7704 44.1227L15.8168 44.2851L15.7704 44.4012L15.724 44.3548L15.6543 44.4476L15.6079 44.7494L15.3758 44.7958L15.3526 44.7261L15.1669 44.6565L15.1437 44.494L15.0973 44.6797L14.9812 44.5173L14.958 44.2619L14.8419 44.1459L14.9116 44.1227L14.8419 44.0763L14.7955 44.1459V44.2155L14.8884 44.2387L14.7955 44.2851L14.7723 44.4244L14.8652 44.494V44.5869L14.7491 44.6333L14.6563 44.5869L14.5634 44.7029L14.4474 44.6101H14.3313V44.5637L14.2617 44.5405H14.3313V44.4244L14.1224 44.4476V44.2155L13.9832 44.1923L13.8671 44.0298L13.9367 43.9602L13.8439 43.8906L13.9832 43.8674L14.0296 43.7977L13.9599 43.7049L13.9832 43.4496L14.076 43.2871L14.0064 43.2175H13.7743L13.635 42.9853L13.4725 42.9621L13.5886 42.8925L13.4725 42.73L13.6814 42.7068L13.5886 42.6372L13.6118 42.5211L13.5189 42.4747V42.3354L13.5654 42.2658L13.635 42.2426H13.5654L13.5189 42.3122V42.4515L13.5886 42.5211L13.5654 42.614L13.5886 42.6836L13.4493 42.7068L13.4725 42.6836V42.6604L13.4261 42.73L13.5189 42.8925L13.4493 42.9389L13.4725 43.055L13.5189 43.0318L13.5654 43.1478L13.5886 43.4263L13.4029 43.4728L13.2868 43.6817L13.0547 43.5888L13.0779 43.7977H12.9619L13.1244 44.0066L13.2868 43.8906L13.3565 43.7745L13.3333 43.6817L13.5421 43.7049L13.5189 44.0298L13.5654 44.1459L13.5421 44.1923L13.31 44.1459L13.2636 44.3316L13.1244 44.2851L13.0315 44.4476L12.8458 44.2387L12.7994 44.3316H12.7298L12.7762 44.1923L12.8226 44.2155L12.869 44.1459L12.8458 44.053L12.7298 44.0763L12.6369 43.8906L12.4977 43.8674L12.5441 43.496L12.4048 43.4728L12.3816 43.2871L12.4512 43.2639L12.312 43.0782L12.428 42.9389L12.2423 42.8461L12.312 42.73L12.1959 42.6372L12.1263 42.6836L12.0567 42.6372L12.0335 42.73H11.987L11.9406 42.3587L11.8246 42.2658L11.7781 42.0801L11.7085 41.9873L11.6389 42.0337L11.5924 41.9873L11.6157 41.8016L11.7085 41.7552L11.6389 41.6623H11.5228L11.546 41.5927L11.4764 41.7552L11.43 41.7088L11.3836 41.7784V41.7088L11.3371 41.7552L11.2211 41.4999L11.1282 41.5927L11.0354 41.4534L11.1514 41.3838L11.0818 41.2445L11.1514 41.1053L11.1979 41.0589L11.2443 41.1285L11.2675 41.1053L11.2907 41.0821H11.2443L11.2211 40.85L11.1282 40.8732L10.989 40.7571L10.8729 40.8267L10.7801 40.6179L10.8497 40.525L10.5248 40.3161V40.2465L10.4551 40.1536L10.5015 40.0608H10.4087L10.3391 39.8287L10.0373 39.8055L9.7588 39.968L9.57312 39.9447L9.41064 40.084L9.48027 39.8751L9.38743 39.8519L9.43385 39.7126L9.36422 39.5966L9.50348 39.5037L9.38743 39.4805L9.36422 39.2484L9.27138 39.2716L9.3178 39.0627H9.22496L9.17853 38.9467H9.03927L8.83037 38.5289L8.90001 38.4593L8.69111 38.0415L8.73753 37.9254L8.6679 37.7397H8.73753L8.55185 37.3451L8.62148 37.2987L8.31974 37.1362L8.34295 37.113L8.29653 36.8809L8.38937 36.8113V36.7184H8.459L8.43579 36.5328L8.31974 36.6024L8.22689 36.1614L8.15726 36.115V35.674L7.97158 35.6043L7.90195 35.6508L7.87873 35.6043L7.83231 35.6972L7.78589 35.5347L7.85552 35.349L7.62342 35.2098L7.41452 35.233L7.3681 35.349L7.32168 35.3026L7.22883 35.3258V35.2562L7.1592 35.2098V35.0937L7.34489 35.1169L7.53057 34.9312L7.48415 34.8616L7.55378 34.7455L7.50736 34.6295L7.55378 34.5599L7.29847 34.4438L7.27526 34.351L7.32168 34.3277L7.20562 34.0028L7.06636 33.91L7.13599 33.6778L7.08957 33.469L6.97352 33.4457L6.99673 33.3993L6.90388 33.2601L7.01994 33.0047L7.06636 33.0279V32.8887L6.88067 32.5405L6.9503 32.4941L6.88067 32.3316L6.90388 32.262L6.78783 32.1459L6.83425 31.937L6.69499 31.8674L6.76462 31.7281L6.5093 31.38L6.48609 31.1711L6.69499 30.9854L6.67178 30.7069L6.60214 30.4283L6.43967 30.2659L6.46288 29.8249L6.30041 29.8481L6.23077 29.6624L6.34683 29.616L6.5093 29.6856L6.55572 29.8249L6.62536 29.8017V29.7088L6.78783 30.0802L6.76462 30.2659L6.90388 30.2891V30.5444L7.08957 30.5908L7.06636 30.8693L7.18241 30.8926L7.32168 30.7765L7.41452 30.7997L7.43773 30.9622H7.50736L7.69305 30.8229L7.62342 31.2871L7.8091 31.4032L7.87873 31.5889L7.90195 31.496L8.41258 31.9835L8.64469 31.9603L8.83037 32.1459L8.90001 32.3316L8.99285 32.378L8.94643 32.819L9.06248 33.0744L9.13211 33.4457L9.08569 33.6314L9.20175 33.9564H9.27138L9.17853 33.6314L9.27138 33.3065L9.20175 33.2833L9.1089 32.8655L9.20175 32.8423L9.08569 32.819L9.01606 32.8887L9.03927 32.7726L9.36422 32.6102L9.41064 32.703L9.7588 32.9583L9.99091 32.8423L10.3391 33.0047L10.3855 32.9815L10.4319 32.9351L10.5015 33.0047L10.5944 32.9119L10.5248 32.7958L10.6176 32.8887L10.664 32.9119L10.8961 32.7958L11.105 32.9119L11.1282 33.5154L11.1747 33.6778L11.1282 33.7475V33.8635L11.0586 33.9796L11.1282 34.0724L11.0818 34.0956L11.0586 34.1188L11.105 34.4438L11.2211 34.5599H11.3836L11.4764 34.7223L11.5692 34.792H11.5924L11.6621 34.6991L11.7549 34.8152H11.7781L11.6621 34.6991L11.5692 34.792L11.4068 34.5599L11.3603 34.5366H11.3139L11.2907 34.5134L11.2211 34.5366L11.105 34.4206L11.0586 34.1188L11.1282 34.0724L11.0586 33.9796L11.1514 33.8635L11.1747 33.6546L11.1282 32.8887L10.8497 32.7726L10.664 32.9119L10.548 32.7726L10.5015 32.7958L10.5712 32.9119L10.5015 32.9815L10.4319 32.9119L10.3623 32.9815L10.2462 32.9583L9.99091 32.7958L9.78201 32.9351L9.68917 32.8887L9.57312 32.7726L9.78201 32.4013L9.80522 32.1459L9.94449 32.1691L9.87486 32.0995L9.85165 31.9138L9.99091 31.8442L10.0141 31.7514L9.87486 31.7049L9.73559 31.9603L9.57312 31.9835L9.48027 31.8442L9.64275 31.9138L9.71238 31.7978L9.57312 31.5657L9.61954 31.5192L9.45706 31.4496L9.38743 31.3104L9.41064 31.4728H9.36422L9.43385 31.5657H9.34101L9.27138 31.6353L9.36422 31.7049L9.29459 31.7514H9.38743L9.27138 31.8674L9.24817 31.6585L9.13211 31.6121L9.08569 31.3336L8.80716 31.1943L8.71432 30.8926L8.50542 30.7533L8.27332 30.3819H8.13405L8.11084 30.1498L8.20368 30.0338L8.13405 29.8481L8.22689 29.7552L8.06442 29.732L8.018 29.8481L7.97158 29.8017L8.06442 29.6392L8.34295 29.6856H8.36616L8.38937 29.6392L8.459 29.6624L8.59827 29.6856H8.69111L8.71432 29.5928L8.80716 29.616V29.5695L8.85358 29.5928H8.90001L8.94643 29.6856V29.7088H8.96964L9.06248 29.6624L9.1089 29.616H9.13211L9.15532 29.6856L9.17853 29.6624V29.6392V29.616L9.13211 29.5695L9.15532 29.5463L9.17853 29.5231L9.22496 29.5463L9.29459 29.4999L9.3178 29.5463L9.38743 29.5231L9.36422 29.4535L9.43385 29.4303L9.45706 29.4071L9.38743 29.4535L9.3178 29.5463L9.29459 29.4999L9.17853 29.5231L9.15532 29.5463L9.13211 29.5695L9.15532 29.6624L9.13211 29.6392L9.1089 29.616L8.96964 29.7088L8.90001 29.5928L8.80716 29.5695V29.616L8.76074 29.5695H8.71432L8.69111 29.5928L8.6679 29.6856L8.38937 29.6392L8.27332 29.6624L8.06442 29.5928L8.08763 29.4303L7.97158 29.3142L7.87873 29.291L7.8091 29.3607L7.76268 29.1982L7.85552 29.0821L7.73947 29.1518L7.6002 29.0589L7.55378 29.1053L7.66984 29.175L7.69305 29.4071L7.62342 29.3607L7.55378 29.4767L7.46094 29.4535L7.20562 29.7552L7.3681 29.8481V29.6856L7.41452 29.6624V30.0802L7.20562 30.1266L7.01994 29.9873L6.76462 29.9641L7.04315 29.5928L7.13599 29.291L7.1592 28.5715L7.06636 27.8752L6.99673 27.527L7.06636 27.3645L7.13599 27.411H7.20562L7.06636 27.3645L6.99673 27.4806V27.527V27.6663L7.04315 27.8984L6.46288 26.4129L6.57893 26.5986L6.5093 26.4593L6.30041 26.204L6.13793 26.1344L6.09151 25.9951L5.81298 25.8326L5.65051 25.5309L5.30234 25.2291L5.27913 24.997L5.16308 24.8346L5.00061 24.6953H4.88455L4.93097 24.6025H4.83813L4.72208 24.4168L4.69887 24.115L4.5596 24.0454V23.999L4.58281 23.9758L4.60602 23.9526L4.42034 23.7437L4.37392 23.6276L4.18823 23.4651L4.02575 23.558L3.9097 23.5116L3.77044 23.117V23.0241L3.9097 22.9313L3.88649 22.792L4.18823 22.5831L4.39713 22.3278L4.5596 22.3046L4.67565 22.1885H4.95418L5.11666 22.3278L5.13987 22.351L5.18629 22.3046L5.25592 22.4206L5.2095 22.5135V22.5599L5.39519 22.676H5.62729L5.48803 22.6063L5.55766 22.5831L5.62729 22.5135L5.48803 22.6063V22.6528L5.4184 22.676L5.25592 22.5831L5.23271 22.5367L5.27913 22.4206V22.3974H5.30234H5.34877L5.37198 22.3742V22.351V22.3278V22.2814L5.34877 22.3974H5.27913V22.4206L5.2095 22.3046L5.11666 22.3278L4.95418 22.1653L5.11666 22.0493L5.07024 22.0261L4.93097 22.1653H4.65244L4.5596 22.2814L4.37392 22.3278L3.86328 22.8152L3.72402 22.676V22.4903L3.63117 22.4671L3.7008 22.3278L3.67759 22.1653L3.2598 21.2369L2.8188 20.5638L2.79559 20.3781L2.6099 20.1924L2.54027 19.9603L2.1689 19.6586L2.26174 19.4961L2.35458 19.5425L2.47064 19.4265L2.49385 18.9855L2.28495 18.6141L2.33137 18.6373L2.07605 18.4284L2.05284 18.3356L2.12248 18.2427L1.91358 18.1035L1.93679 17.9178L1.82074 17.8713L1.86716 17.8017L1.79753 17.5928L1.56542 17.2679L1.63505 17.2214L1.58863 17.1054L1.65826 16.8269L1.44937 16.3394L1.49579 16.2466L1.519 16.0609V16.0377L1.54221 16.0145V15.9681L1.519 16.0377H1.44937L1.37973 15.8056L1.47258 15.7592L1.49579 15.5735L1.47258 15.295L1.33331 14.9932L1.42615 14.8772L1.49579 14.9236L1.54221 14.9004L1.56542 14.7611L1.68147 14.8772L1.86716 14.9004L1.91358 14.8772L1.93679 14.9468L1.96 14.97H2.1689L2.23853 15.0396L2.30816 15.0861V15.1093L2.35458 15.1325L2.37779 15.1557L2.401 15.1325V15.1557L2.35458 15.1789V15.2021H2.401V15.2253V15.2485V15.2717H2.42421L2.44743 15.295H2.47064L2.401 15.2485L2.42421 15.2021L2.44743 15.1789V15.1557L2.49385 15.1789L2.51706 15.1093L2.58669 15.1557L2.6099 15.1325V15.0861L2.58669 15.0396L2.63311 15.0164V14.9932L2.6099 14.97L2.63311 14.9468L2.58669 15.0396L2.6099 15.1325L2.51706 15.1093L2.44743 15.1557L2.42421 15.2021L2.35458 15.1789L2.401 15.1557V15.1325L2.1689 14.97L1.93679 14.9468L1.91358 14.8772H1.68147L1.56542 14.7379L1.519 14.9004L1.42615 14.8772L1.33331 14.9468L1.12442 14.854L0.845886 14.3433Z",fill:"#CC0000"}),(0,bi.jsx)("path",{d:"M5.78977 12.2079L5.76656 12.0919L5.69693 12.1151L5.72014 11.999L5.67372 11.9062L5.62729 11.8598L5.55766 11.9062L5.58087 12.0455L5.53445 11.9758L5.46482 12.0222L5.48803 11.883L5.37198 11.8133L5.27913 11.9294L5.30234 11.8366L5.13987 11.5348L5.00061 11.4652L4.88455 11.6045L4.79171 11.5812V11.558L4.83813 11.442H4.7685L4.86134 11.3491L4.69887 11.442L4.7685 11.2795H4.72208L4.62923 11.3956L4.58281 11.2795L4.62923 11.2331L4.42034 11.001L4.30428 11.0938L3.93291 11.1867L3.86328 11.2795L3.95612 11.3259H3.9097H3.88649V11.3027L3.86328 11.2563H3.84007V11.2099L3.79365 11.2331L3.81686 11.1402L3.74723 11.0938L3.4687 11.0706L3.19017 10.9313L3.07412 11.001L3.09733 11.117L3.02769 11.0242L3.09733 10.8849L3.02769 10.676L2.88843 10.6992L2.79559 10.7921L2.74917 10.7457L2.77238 10.676L2.72595 10.6064L2.54027 10.5368L2.47064 10.6064L2.49385 10.8153L2.35458 11.001L2.42421 10.5135L2.33137 10.4207H2.14569L2.07605 10.3047V10.2118L2.19211 10.3047L1.96 9.70117L1.86716 9.88686L1.7511 9.91007L1.58863 10.0958V10.2118L1.70468 10.3047L1.519 10.6528L1.58863 10.7689L1.63505 11.1402L1.72789 11.0706L1.79753 11.1402V11.3723L1.68147 11.4884L1.77431 11.6509L1.68147 11.8366L1.72789 12.0222L1.84395 12.1615V12.4168L1.70468 12.5097L1.77431 12.5561L1.7511 12.6954L1.56542 13.0667L1.49579 13.1131L1.21726 12.9971L1.28689 13.1596L1.21726 13.2292L1.07799 13.2524L1.03157 13.3917L0.869097 13.4381V13.5542H0.96194V13.6238L1.05478 13.6702L1.07799 13.8559L1.05478 14.2737L0.915518 14.3665L0.845886 14.3433L1.12442 14.854L1.33331 14.9468L1.42615 14.8772M5.78977 12.2079L5.76656 12.2311M5.78977 12.2079L5.81298 12.1615L5.83619 12.1383V12.1151L5.90582 12.0455L5.88261 11.9526L6.04509 11.9294L6.20756 12.0222L6.23077 11.9758L6.09151 11.8366L5.97545 11.8598L5.92903 11.7669L5.69693 11.7205V11.6277L6.43967 11.7669L7.11278 11.5812L6.7182 11.8598L6.95031 11.883L7.11278 11.7901L7.22883 11.1867L7.20562 11.0474L7.13599 11.0242L7.11278 10.8617L7.04315 10.8153L7.06636 10.6296L7.13599 10.6064L7.27526 10.8849L7.48415 10.9313L7.46094 11.1402L7.60021 11.2563L7.57699 11.3259L7.41452 11.2795L7.22883 11.7205L7.20562 11.6741L7.18241 11.6973L7.22883 11.8598L7.3681 11.9758L7.32168 12.0919L7.39131 12.0222L7.46094 12.0455L7.32168 11.6277L7.64663 12.1615L7.60021 12.2311V12.3008H7.50736V12.324H7.46094H7.43773L7.41452 12.3472L7.39131 12.3704L7.62342 12.3008M5.76656 12.2311L5.72014 12.2079L5.67372 12.2544M5.76656 12.2311L5.67372 12.2544M5.67372 12.2544L5.65051 12.2311L5.53445 12.2544M5.67372 12.2544H5.55766V12.2776L5.53445 12.2544M5.53445 12.2544L5.51124 12.2776M7.62342 12.3008V12.2544M7.62342 12.3008H7.64663L7.69305 12.324L7.71626 12.3472L7.66984 12.1847L7.94837 12.3704L8.41258 12.3472L8.43579 12.5097L8.52863 12.4168L8.92322 12.6257L8.90001 12.6721L8.94643 12.8114L8.85358 12.8346L8.80716 12.881L8.94643 12.8346V12.6489L9.27138 12.5793L9.45706 12.4632L9.48027 12.3704L9.57312 12.3936L9.61954 12.4632L9.54991 12.5329L9.66596 12.6257V12.8346L9.82843 12.881V12.9971L9.92128 13.0203L9.89807 13.0899L10.0373 13.206L10.2694 13.1596L10.3855 13.2988H10.6176L10.6408 13.3917L10.9425 13.5077L11.1979 13.4613L11.6621 13.5542L11.7085 13.6934L11.6157 13.8559L11.7781 14.0648L11.6853 14.088L11.5924 13.9952M11.5924 13.9952L11.4764 14.0184M11.5924 13.9952L11.6853 14.1112L12.0567 14.2273L12.3584 14.5986L12.7298 14.7611L12.6834 14.854L12.7066 14.8772M11.4764 14.0184L11.4068 13.9255H11.3836H11.3603L11.4764 14.0184ZM12.7066 14.8772H12.6834H12.6601L12.6369 14.9004L12.7066 14.8772ZM12.7066 14.8772L12.753 14.7379H13.1011L13.1708 14.8307L13.4725 14.9004L13.4029 14.9468L13.5654 15.1325M13.5654 15.1325L13.5421 15.1557L13.5189 15.1789L13.5421 15.2485V15.1789L13.5654 15.1325ZM13.5654 15.1325V15.1093L13.8903 15.0628L14.1456 15.2253L14.0528 15.2485L14.0296 15.3182V15.3878L14.1456 15.2021L14.7259 15.5503L14.9116 15.5735L15.0276 15.736L15.4454 15.7824L15.5383 15.9913L15.84 16.0609L15.9096 16.1305V16.2466L15.7704 16.2234L15.7472 16.3394L15.5615 16.2234L15.5383 16.2698L15.4454 16.2466L15.4919 16.3626L15.5383 16.293L15.6775 16.3162L15.6543 16.4091L15.7007 16.4323V16.4787L15.724 16.5019L15.6775 16.3626H15.8168V16.293L15.9096 16.2698V16.177H16.2346L16.4899 16.293L16.6756 16.2698L16.6524 16.5251L16.722 16.4555L16.6988 16.5948L16.722 16.734V16.2698L16.7452 16.2002L17.0702 16.3162L17.4183 16.2234L17.5112 16.2698L17.4648 16.3859L17.3951 16.4555L17.3719 16.5483L17.5344 16.3162L17.7433 16.293L17.8361 16.3626L17.7897 16.5019L17.8361 16.734L17.7201 16.8269L17.6504 17.0358L17.8129 16.9197V17.0822L17.8826 17.0358L17.8593 17.1518L17.9754 17.2214L17.9986 17.175V17.2679H18.0218V17.175L18.0915 17.2214L18.045 17.2447H18.1147L18.0682 17.175L18.1611 17.1982L18.0218 17.1054L17.7897 16.8269L17.8593 16.734L17.8129 16.5251L17.8593 16.4091V16.4555L17.9986 16.4323L18.0915 16.4787L18.3932 16.3394L18.7646 16.3162L19.2985 15.9913L19.4377 15.7824L19.5538 15.9216L19.5306 16.2466L19.7163 16.4091L19.6931 16.4555L19.577 16.4091L19.5074 16.5019L19.577 16.4323L19.7627 16.5019L19.8323 16.6876L19.7163 16.7804L19.8555 17.1054L19.7395 17.175L19.7163 17.3143H19.8323L19.7627 17.3607L19.7395 17.3839L19.7627 17.4071L19.8787 17.3375L19.8555 17.2447H19.7859L19.9252 17.1054L19.9484 16.8733V17.0358L20.0412 17.059L20.018 17.4768L20.1109 17.5V17.5464L20.1341 17.5696H20.1573L20.1341 17.5L20.0412 17.4768L20.0876 17.2447H20.1573L20.0876 17.175V17.0125L20.1805 16.9661L20.1341 16.9429L20.0644 17.0358L19.9716 17.0125L20.0412 16.9429L19.8787 16.7804L19.9252 16.4091L19.9948 16.3626L20.0412 16.4091M20.0412 16.4091H20.0644L20.1109 16.3859V16.4091H20.1341L20.1109 16.3626L20.0412 16.4091ZM20.0412 16.4091V16.3394L20.1341 16.2466L20.1805 16.2698L20.1109 16.2002L20.0876 16.2698L19.8787 16.2466L19.7627 16.3626L19.7395 16.1305L20.0412 16.1073L20.4126 15.8752V15.7592L20.5519 15.6663L20.4822 15.5039L20.5519 15.4574L20.8072 15.5503L20.9464 15.4806L21.1785 15.2253L21.1321 15.0628L21.4571 15.2485L21.4803 15.3414L21.7124 15.2717L21.9909 15.6199L21.8981 15.6895H21.9909V15.736V15.7592L22.0838 15.736L22.0606 15.6663L22.1534 15.6895V15.736L22.0838 15.7127L22.1302 15.9216L22.223 16.0145L22.0373 15.9681L21.8052 16.2002L21.6892 16.177L21.7356 16.2002V16.3626L21.8284 16.2234H21.8981L21.9213 16.1305L22.0141 16.1538L22.0838 16.0609L22.1998 16.1073L22.2694 16.2002L22.223 16.4323L22.3855 16.5251L22.3159 16.6412L22.3855 16.8037V16.7108L22.4551 16.6412L22.5712 16.734L22.3391 16.3394L22.5944 16.4555L22.7801 16.177L23.2211 16.4323L23.2675 16.5483L23.0818 16.6644L23.1515 16.6876L23.1282 16.7804L23.0586 16.8269V16.8965L22.9658 16.8037V16.8501L23.1282 17.1054L23.3139 17.2214L23.43 17.5928L23.7085 17.4768L23.6389 17.616L23.7549 17.7553L23.7317 17.941L23.6621 18.057M23.6621 18.057L23.5925 18.0338M23.6621 18.057V18.2195L23.8246 18.3588H24.0103L24.2656 18.7534L24.5209 18.5445L24.7066 18.6141L24.6137 18.7998L24.6834 19.2176L24.753 19.3104L25.0315 19.38L25.1476 19.4961L25.0315 19.6586L25.0779 19.6354L25.194 19.8675L25.1244 19.9371L25.3333 19.7514M25.3333 19.7514L25.3565 19.6121M25.3333 19.7514L25.1708 19.7978L25.1012 19.6354L25.194 19.5193L24.8691 19.1944L24.7298 18.9622L24.6834 18.7534L24.753 18.6605L24.6602 18.498L24.4048 18.5677L24.3352 18.3356L23.9406 18.3123L23.7317 18.2195L23.7549 18.0802L23.9638 17.8946H24.0799L24.1031 17.8017L23.8942 17.4768L23.7317 17.3839L23.7085 17.2679L23.6621 17.3143L23.43 17.1982L23.4068 16.8965L23.1979 17.0822L23.105 16.9661L23.2907 16.8269H23.2443L23.1979 16.7572L23.3371 16.5715L23.4764 16.5948L23.5692 16.7108L23.6157 16.6876L23.1747 16.293L23.0586 16.1538L23.1282 16.1305L23.0122 16.1073L22.989 16.0145L22.7569 15.9216L22.5712 16.0377L22.5016 16.0609L22.2927 15.9913L22.3391 15.9681V15.852L22.2927 15.9449L22.1998 15.852L22.2694 15.6431H22.1766L22.0606 15.1557L21.9677 15.0628L21.9445 15.1093L21.8981 14.9468L22.0838 15.0628L22.3391 14.7611L22.5944 14.6683L22.7337 14.5058L22.9193 14.6451L23.0818 14.5986L23.1747 14.6451L23.43 14.5754L23.4532 14.5986M25.3565 19.6121L25.3797 19.6354L25.4029 19.6586M25.3565 19.6121V19.5889H25.3797L25.4029 19.6586M25.4029 19.6586L25.4261 19.6354L25.4493 19.5889M25.4029 19.6586L25.4261 19.5889H25.4493M25.4493 19.5889L25.4725 19.6121L25.4957 19.6354M25.4957 19.6354L25.4725 19.6818L25.519 19.7282M25.4957 19.6354L25.519 19.7282M25.519 19.7282H25.5422M25.519 19.7282L25.5422 19.705V19.7282M25.5422 19.7282V19.7514L25.5654 19.7978M25.5422 19.7282L25.5654 19.7978M25.5654 19.7978L25.6118 19.8443L25.635 19.821L25.5654 19.7978ZM23.4532 14.5986H23.546M23.4532 14.5986L23.8942 14.088L24.1495 14.0184L24.2656 14.1344L24.5209 14.1112L24.6602 14.2505L24.8226 14.1808L24.9155 14.2273L25.0779 14.1808L25.1476 14.2969L25.4725 14.4129L25.2868 14.7147L25.4493 14.5522M25.4493 14.5522L25.4957 14.6218M25.4493 14.5522L25.519 14.3665L25.6582 14.3897L25.8207 14.2505L25.8903 14.2737L25.9135 14.2505L25.8903 14.3201L25.9367 14.2505H25.8903L26.2153 13.9952L26.3545 13.6702L26.6563 13.5077L26.7027 13.647L26.8884 13.7166L27.0509 13.6702L27.283 13.4845L27.4454 13.9487L27.3758 13.9719L27.399 14.0416H27.4454L27.399 13.9719L27.5151 13.9487L27.6775 14.0184L27.8168 14.3665L27.9793 14.4362L28.0257 14.3897M28.0257 14.3897L28.0489 14.4362L28.1186 14.4129M28.0257 14.3897L28.0721 14.4362L28.0953 14.3897M28.0257 14.3897H27.8632L27.7936 14.2969L27.9329 14.3433L28.2114 14.2969L28.6988 13.9952L29.0238 13.6238L29.4416 12.9739L29.5808 12.9043L29.5112 12.8578L29.6505 12.6257L29.604 12.5097L29.6969 12.5329L29.7433 12.44L29.6969 12.3472L30.0218 12.2776L30.4164 11.9758V12.0687L30.6253 12.2079L30.7878 12.4865L31.2752 12.44L31.2984 12.5329L31.2752 12.5097L31.2056 12.5793L31.2288 12.6721L31.2752 12.5329L31.4841 12.7186L31.9019 12.8114L32.2268 12.7418L32.4822 12.5793L32.3893 12.765L32.6911 12.6954M28.1186 14.4129L28.0953 14.3897M28.1186 14.4129V14.3897M28.1186 14.4129H28.1418M28.0953 14.3897H28.1186M28.1186 14.3897L28.1418 14.4129M28.1418 14.4129H28.165M32.6911 12.6954L32.7839 12.6025M32.6911 12.6954L32.5286 12.7186V12.5329L32.9696 11.9062L33.1089 11.6045L33.0624 11.3956L33.1553 11.4188L33.2249 11.2563V11.1402L33.0624 11.117L33.016 10.9546L33.2249 11.0242L33.3642 10.9081L33.6891 11.001L33.8052 11.117L33.9444 11.0938L33.9909 11.2099L33.9444 11.2563L33.9909 11.3723L34.0373 11.3956L33.9909 11.2331L34.1766 11.3491L34.3854 11.3259L34.7568 11.883L34.9889 12.0919L35.1514 12.1615L35.3139 12.0919L35.2675 12.1615H35.1978H35.0586L34.8497 11.999L34.8032 12.0455L34.7336 11.883L34.7568 11.9758H34.664L34.7104 12.0687L34.8497 12.1615L34.8729 12.0687L35.0818 12.1847L35.2907 12.2079L35.3371 11.9758L35.5228 12.2079L35.7781 12.3008L35.7549 12.5097L35.8245 12.6954L35.9174 12.8114L36.1495 12.881L36.1727 12.9739L36.1263 12.9971V13.0203L36.103 13.0435L36.1959 12.9971L36.2655 13.2524L36.544 13.5077V13.7398L36.7529 14.1112L36.8458 14.1576L36.9618 14.1112L37.0083 14.1808L36.8226 14.2505L36.544 14.6451L36.4744 14.854L36.4976 15.0628L36.3816 14.8772L36.4512 14.6218L36.0334 14.9236H36.3584L36.4976 15.0861L36.2191 15.8752V16.2002H36.2887L36.3816 16.4091L36.3351 16.5251L36.2191 16.5483L36.0566 16.7108L36.1727 16.6644L36.2423 16.5715L36.2887 16.9197L36.1959 16.8501H36.1495L36.2191 16.9429H36.3816L36.3351 17.1982L36.3584 17.175L36.4512 17.2679V17.3607L36.5673 17.4768H36.544L36.6369 17.4071L36.7065 17.5232L36.7994 17.4303L36.8922 17.5928L36.8226 17.7785L36.6137 17.941L36.5905 18.1267L36.428 18.1499L36.4744 17.8713H36.3584L36.3351 17.8017L36.2423 18.1963L36.2887 18.2659L36.2191 18.2891H36.2655L36.3119 18.2427L36.2887 18.2891L36.0102 18.4516L35.9406 18.3588L35.8941 18.382L35.987 18.4748L36.103 18.498L36.1727 18.6141H36.2423L36.6137 18.3123L36.6601 18.1267L36.7762 18.0338L36.8226 17.8017L36.8922 17.8713L37.0547 17.7553L37.1011 17.8713L36.7762 18.1731L36.544 18.939L36.4976 19.0087L36.4512 18.9855L36.3119 19.0319V19.1015L36.4048 19.1247L36.3816 19.0783L36.4744 19.0087L36.1959 20.1692M36.1959 20.1692V20.0532L36.1727 20.146L36.0334 20.0996M36.1959 20.1692L36.0334 20.0996M36.1959 20.1692L36.2423 20.7031L36.1727 20.4245L36.1495 20.5406L36.0566 20.3781L36.0334 20.4942L36.1495 20.5638L36.1959 20.7263L36.2887 20.7031L36.3816 21.353L36.6833 21.6315L36.7065 22.235L36.4512 22.7224L36.4048 23.0473L36.4744 23.1634L36.3584 23.4883L36.428 23.6972L36.544 23.7437L36.5673 23.8597L36.5208 23.9061L36.4512 23.8829L36.3584 23.999L36.1727 24.6489L36.2655 25.1595L36.4048 25.3916L36.6369 25.4845L36.5673 25.7166L36.7065 25.8558L36.7529 26.0415L36.544 26.2968L36.6137 26.6218L36.4976 26.6682L36.428 26.8307L36.3584 27.5734L36.4976 27.852L36.6137 27.8752L36.7994 28.409L36.9386 28.5019L36.9618 28.6875L36.8458 28.7804L36.8922 28.85H36.7065L36.7529 29.0589L36.4976 29.2678L36.5905 29.4071L36.6601 29.3142L36.9618 29.4999L37.0779 29.4535L37.0083 29.5231L37.0315 29.732L36.9386 29.8713L36.9618 30.0338L36.7994 30.1034L36.7297 30.5444L36.5905 30.5676L36.6601 30.7069L36.544 30.7765H36.428L36.3816 30.4516L36.1495 30.4283L36.0798 30.3355L36.0334 30.1266L36.2191 30.057L36.2887 29.8249L36.4512 29.616L36.3119 29.3607L36.1263 29.2678L36.2423 29.0589L36.4976 28.9429L36.544 28.8268L36.4744 28.734L36.3584 28.7804V28.6875L36.1959 28.5715L36.0102 28.6411L35.9174 28.4322L35.9638 28.293L35.6388 28.1305L35.6852 28.0376L35.7781 28.1073L35.7549 28.0144L35.5228 27.9912L35.4299 28.1305L35.1514 28.1073V27.8984L35.3139 27.8287L35.2907 27.6895L35.4763 27.5966L35.6156 27.6198L35.6852 27.5734L35.987 27.0628L35.9174 26.9235L35.7781 26.9932L35.7085 26.9467V27.0164L35.662 26.9932L35.7317 27.1556L35.5228 27.3877L35.2907 27.2485V27.086L35.221 27.0628L35.0121 27.3877L35.0353 27.4806L35.0121 27.5038L35.0353 27.5502M36.0334 20.0996L36.0102 20.1228L35.987 20.1924L35.9174 20.146L35.987 20.2388M36.0334 20.0996L36.0102 20.2156L35.987 20.2388M35.987 20.2388L35.8709 20.146V19.9371M35.987 20.2388H35.9638L35.8709 20.1692L35.8477 20.1228L35.8709 19.9371M35.8709 19.9371L35.8245 19.7978V19.9603M35.8709 19.9371L35.8245 19.9603M35.8245 19.9603L35.7781 19.9139M35.7781 19.9139L35.7549 19.9371L35.7781 19.9603M35.7781 19.9139V19.9603M35.7781 19.9603L35.7549 19.9835M35.7781 19.9603L35.7085 20.0299V20.0067L35.7317 19.9835H35.7549M35.7549 19.9835L35.6156 19.9371L35.5692 20.0067M35.7549 19.9835L35.6388 19.9603L35.5924 20.0067H35.5692M35.5692 20.0067L35.6156 19.9139M35.6156 19.9139L35.5692 19.8907L35.546 19.9139H35.6156ZM35.0353 27.5502L35.0121 27.5966L35.0353 27.6431L34.9657 27.7823L35.0818 27.7127L35.0353 27.5502ZM35.0353 27.5502L35.1978 27.6431L35.1514 27.7591L35.221 27.7823L35.105 27.9216H34.8729L34.7336 28.0609L34.8497 28.0841L34.5479 28.1769L34.4087 28.0376L34.3622 28.0609M34.3622 28.0609L34.3854 27.8984L34.3622 27.8287L34.339 28.0609H34.3622ZM34.3622 28.0609V28.0841L34.4087 28.0609L34.5015 28.1769L34.5943 28.2001L34.7568 28.1073L34.8729 28.1537L35.0818 28.0841L35.2442 28.2233H35.662L35.8709 28.3162L35.8941 28.3858L34.8497 28.3162L34.5711 28.3858L34.3158 28.5715M34.3158 28.5715L34.223 28.5947M34.3158 28.5715L34.3622 28.7108L34.4319 28.7572L34.3622 28.85L34.4087 28.9661L34.3158 29.1053L34.4319 29.291L34.3158 29.3839L34.2694 29.616L34.0373 29.7552L34.0605 29.8249L33.7588 30.2194V30.3587L33.898 30.498L33.7588 30.614L33.782 30.8229L33.6659 30.9622L33.6195 31.1479L33.4106 31.1247L33.341 31.4496H33.1785L33.2249 31.4728L33.0856 31.496L33.1321 31.5192L33.0856 31.5657L33.0392 31.4496L33.0624 31.5889L32.9928 31.496L32.9696 31.5657V31.6353L33.0856 31.6121V31.6585L33.1785 31.5889L33.2017 31.7049L33.2481 31.7746L33.2249 31.5657L33.4802 31.496L33.3874 31.4496L33.4106 31.3568L33.5034 31.3336L33.5267 31.2175L33.5731 31.1711L33.8052 31.2175L33.782 31.38L33.8748 31.6585L33.5034 32.1692L33.4338 32.4013L33.6195 32.7494L33.5963 32.819L33.5267 32.7958L33.4338 32.819V32.8423H33.7123L33.7355 32.9815L33.5731 33.4922M33.5731 33.4922L33.5034 33.469V33.6082L33.5731 33.4922ZM33.5731 33.4922L33.5963 33.6546L33.7355 33.7475L33.5731 33.8635V33.9796L33.457 33.8403L33.3178 33.8867V34.0028L33.1785 34.1188L33.2017 34.2813L33.1321 34.3277L33.0392 34.2349L32.9696 34.2813L32.9 34.1188L32.9464 34.026L32.7839 33.8403L32.8767 33.6778V33.6546V33.6082L32.8303 33.7243L32.7375 33.7475V33.8171L32.6446 33.91L32.7839 34.026V34.2581L32.5518 34.2117L32.3661 34.3742L32.1804 34.3974H32.3661L32.459 34.3277L32.4822 34.4902H32.6679L32.8303 34.792L32.9696 34.8384L32.9928 34.9776L33.0856 35.0241L32.9696 35.349L33.1785 35.5115L33.2017 35.6275M33.2017 35.6275H33.1785L32.9464 35.5115L33.0856 35.6508L33.1785 35.674L33.2017 35.6275ZM33.2017 35.6275L33.1785 35.7436L33.2713 35.8364L33.2481 35.9757L33.0392 36.2542L33.1089 36.3703L33.0624 36.4167L33.1089 36.6024L32.9696 36.7417L32.6446 36.8113L32.459 37.1595L32.3661 37.8094L32.5054 38.1575L32.3661 38.0415L32.2965 37.8094L32.2036 38.0647L32.2268 38.2039L32.1108 38.1575V38.3432L32.018 38.3664L32.1108 38.5289L32.0644 38.5521L31.9947 38.4128L31.9483 38.6217L31.7162 38.7842L31.6002 38.761V38.9003L31.4145 38.8538L31.3681 38.9699L31.1359 38.8074L30.9967 38.8538L30.9271 38.6914L30.7646 38.8074L30.6253 38.761L30.5325 38.9235L30.4164 38.9003L30.4396 38.7842L30.3236 38.6914L30.2075 38.7842L30.1379 38.7146L30.1611 38.5753L30.3004 38.6217L30.37 38.5289L30.5325 38.5057L30.5557 38.3896M30.5557 38.3896L30.6949 38.5289L30.7182 38.5057L30.5557 38.3896ZM30.5557 38.3896L30.2307 38.5521L30.2771 38.5985L29.8129 38.4593L29.8594 38.3896L29.8129 38.2968L29.9522 38.2271V38.1111L29.8129 37.9486L29.8361 37.8558L29.7201 37.7397L29.7665 37.4612L29.6969 37.3219L29.6272 37.2755L29.6969 37.3451L29.6272 37.5308L29.6737 37.5772L29.4184 37.4844L29.4416 37.4612L29.4184 37.4148L29.3719 37.5076H29.3255L29.2791 37.3684L29.163 37.3451L29.1166 37.2291L29.0702 37.3451L29.163 37.5772L29.1166 37.6237H29.047L28.9773 37.3684L28.9077 37.3219L28.6524 37.6005L28.3274 37.3219L28.4899 37.1827L28.3507 37.1362L28.281 36.9738L28.3042 37.1362L28.3971 37.2523L28.281 37.2291L28.2578 37.3451L28.165 37.2059L28.1882 37.3684L28.3971 37.6701L28.5596 37.7165L28.6524 37.6701L28.6988 37.7629L28.5828 37.7165L28.5363 37.8094L28.606 37.9022L28.6988 37.9254L28.8149 37.7165L28.9077 37.6933L29.0006 37.9254L29.5344 37.879L29.6969 37.9486L29.8826 38.1575L29.6505 38.0647L29.4184 38.0415L29.0702 38.1807L28.8149 38.3896L28.8845 38.5521L28.7452 39.0163L28.7917 39.0859H28.9077L28.9309 39.202L29.0702 39.2716L29.163 39.6894L28.9541 39.5502V39.7126L28.8845 39.7591L29.0702 39.9912L29.163 39.8519L29.047 39.6894L29.1398 39.7126L29.1862 39.643L29.3023 39.9912L29.0238 40.084L29.0702 40.2697L29.0006 40.4554L28.2114 40.6643L28.0489 40.7571L28.0025 40.85L27.9097 40.8035L27.9329 40.7107L27.8632 40.6643L27.9793 40.4554L27.9097 40.3161L27.7936 40.2697L27.8632 39.9912L27.7472 39.8751L27.84 39.8287L27.9097 39.6894L27.8632 39.8983L28.0025 39.968L27.9793 40.2233L28.0953 40.3625L28.1186 40.5482L28.3274 40.6179L28.4899 40.525L28.5363 40.4322L28.4899 40.1768L28.5828 39.9447L28.4435 39.7823L28.2578 39.8983V39.7126L28.4435 39.1788L28.5596 39.1092L28.6292 39.2484L28.6988 39.2252L28.6292 39.1556V38.9931H28.165L28.1418 39.1788L28.0257 39.3877H27.9097V39.1092L27.9793 38.9931L27.8632 38.6682L27.6079 38.5985L27.4919 38.6449V38.4825L27.3526 38.5521L27.3294 38.3432L27.4222 38.2039L27.283 38.2271L27.2133 38.1575L27.283 38.0415L27.1669 38.0879L27.1901 37.995L27.1437 38.0183L27.0276 37.879L27.0509 37.7629L26.958 37.7861L26.6795 37.5772L26.7723 37.4148L26.7027 37.2523L26.6331 37.3219L26.517 37.2755L26.4706 37.0898L26.5402 36.9738L26.4242 36.8809L26.517 36.7417L26.4938 36.6488L26.517 36.7649L26.401 36.9041L26.4242 36.997L26.3545 36.8577L26.0296 36.7184L25.8671 36.5792L25.7278 36.672V36.7649H25.7511V36.7881L25.4029 36.9273L25.3101 37.113L25.1244 37.1595L25.0315 37.2291L25.3101 37.1595L25.4493 36.9273L25.96 36.7881L26.401 37.113L26.4474 37.2523L26.401 37.3916L26.7027 37.4148L26.5866 37.5076L26.4474 37.438L26.517 37.5076L26.401 37.6469L26.4938 37.6933L26.4242 37.7629L26.6563 37.9022L26.7027 37.8094H26.842L26.9116 37.8558L26.842 37.879L26.8652 37.9254L26.7955 37.9486L26.8652 37.995L26.9116 37.9022L27.0741 37.9718L26.9812 38.2039L27.1205 38.1343L27.0509 38.2736L27.2133 38.4128L27.1901 38.5289L27.2598 38.5753V38.6449L27.1669 38.6682L27.2365 38.6914L27.1669 38.877L27.4454 39.0627L27.399 39.5502L27.283 39.5966L27.2365 39.8519H27.0973L27.0276 39.8983H27.1437L27.0973 40.2697L27.283 40.8267L27.1669 40.966H27.0044L26.7027 40.2929L26.5866 40.3857L26.517 40.525L26.6099 40.5018L26.6563 40.5482L26.5402 40.7571L26.517 40.966L26.4938 40.9892L26.4706 40.966L26.4242 41.0124L26.517 41.0589L26.4242 41.1517L26.6563 41.1749L26.8652 41.3374L26.7027 41.6391L26.6099 41.5695L26.4474 41.5927L26.5866 41.7088L26.5634 41.8016H26.3313L26.3777 41.8712L26.4938 41.9177L26.401 41.9409L26.4242 42.0105L26.3545 42.0337L26.2849 42.1498L26.3545 42.1962L26.2617 42.2194V42.3354L26.3545 42.3819L26.2617 42.4747L26.2849 42.5908L26.4242 42.6604L26.4706 43.1942L26.2849 43.5656L26.3081 43.7281L26.1921 43.8209L26.0296 43.8906L25.7046 43.8441L25.5654 43.937L25.3333 43.7745V43.5424L25.4029 43.4031L25.3333 43.496L25.1476 43.3799L25.1244 43.4496L24.9619 43.5192L24.8691 43.4728L24.9155 43.4263L24.8226 43.4031L24.9155 43.3335L24.8458 43.0782L25.0779 42.9621L24.9387 42.9157L24.9619 42.7997L24.8691 42.6604L24.9851 42.6372L24.8226 42.5211L24.8691 42.4051L24.7994 42.4283L24.7298 42.3354L24.7994 42.73L24.6369 42.8461L24.753 42.9157L24.5673 43.055L24.5441 43.1478L24.3816 42.9853L24.2192 42.9621L24.1959 42.8229L24.0567 42.7068L23.8014 42.6836V42.5211L23.8942 42.4747L23.9174 42.1265L24.1263 41.6623L24.1727 41.407L24.312 41.0821H24.3352L24.3816 40.7803L24.4977 40.7107L24.312 40.5018L24.2888 40.3393H24.1727L24.0103 40.3857L23.9638 40.409L24.2656 40.3393L24.2888 40.525L24.4745 40.7107L24.3816 40.7571L24.2424 40.966L23.871 41.7552L23.8942 41.8712L23.6853 42.0105L23.7781 42.289L23.5692 42.2426L23.4764 42.3354L23.5925 42.2658L23.7085 42.4283L23.6157 42.7068L23.6853 42.8693L23.9174 42.9157L23.871 43.055L23.9638 43.0086L24.1495 43.1246L24.312 43.4031L24.3584 43.3567L24.5673 43.4728L24.6137 43.6585L24.8923 43.8906L24.9155 44.0066L24.7298 44.053L24.5905 44.4012L24.6602 44.494L24.5905 44.5869L24.3816 44.3084L24.1727 44.4012L24.0799 44.3548L23.987 44.4708V44.6101H23.8942L23.7781 44.494L23.6853 44.5173L23.6621 44.5637L23.7781 44.5405L23.7549 44.6565L23.8014 44.5869L23.871 44.6797L24.0335 44.7261L24.1495 44.5869L24.2656 44.7726L24.3352 44.7494L24.5209 44.8422L24.4048 45.2136L24.1031 45.5153L24.1959 45.6314L24.0799 45.7706L24.2192 45.9563L24.1263 46.0492L23.987 45.9331H23.871L23.8246 46.0027L23.6853 45.8867L23.5925 45.9563L23.5692 46.0724L23.4764 46.0956L23.4532 45.9331L23.2211 45.6778L23.2675 45.9563L23.2211 46.0027L23.1515 45.9099L23.0586 45.8867L23.0818 45.8403L23.0354 45.7474L23.0586 45.9099L23.1747 45.9795L23.1282 46.0956L23.3836 46.0027L23.43 46.0724L23.3836 46.0492L23.3371 46.0956L23.4532 46.1652L23.5692 46.0956L23.6621 46.2116L23.8014 46.1884L23.9174 46.2813L23.9638 46.5366L23.7549 46.6294L23.7781 46.467L23.6853 46.3741L23.4532 46.5598L23.3836 46.5134L23.2675 46.7223L23.3371 46.8151L23.4068 46.7687V46.9544L23.4996 46.9312L23.7317 46.6294V46.7223L23.4996 46.9776V47.2329L23.1979 47.3258L23.2211 47.2097L23.1515 47.4186L23.0122 47.3258L23.105 47.2097L23.0122 47.024H23.0586V47.0008H23.0818V46.9776L22.989 47.0008L22.8729 47.5114H22.8497L22.7801 47.5579L22.8961 47.5114L23.0122 47.6275H22.9193L22.8961 47.6971L22.8497 47.6739L22.9193 47.906L22.8729 47.8828H22.8265L22.7105 47.9989L22.9426 47.8828L23.1515 47.7203L23.2211 47.8828L23.1515 48.0453L23.1979 48.1149L22.7337 48.4399L22.7105 48.6488L22.6408 48.5559L22.5016 48.6023L22.4551 48.5559L22.2694 48.6952L22.3855 48.5327L22.3391 48.347L22.1766 48.2078L22.0141 48.1613L21.9445 48.2078L21.8749 48.1381L21.8284 48.2542L21.7356 48.231L21.666 48.3238L21.5731 48.231L21.5035 48.2542L21.2714 48.5559L21.1553 48.4631L21.1089 48.5791L20.9232 48.0917L20.7608 48.0453L20.6679 48.231L20.5983 48.0685L20.6447 47.9756V47.906M20.6447 47.906L20.6215 47.8596M20.6447 47.906L20.5519 47.8828L20.4822 47.9524L20.5286 47.8596L20.3662 47.6739L20.2733 47.6275L20.1573 47.7203L20.1805 47.5811L20.0876 47.6275L20.1573 47.465L19.8555 47.1169L19.8787 46.6062L19.6931 46.3277L19.6002 46.467V46.6991L19.6698 46.7455L19.6234 46.9312L19.7395 47.0472V47.1401L20.0412 47.3722L19.5306 47.1169L19.4377 47.2097L19.2056 47.1169L18.9967 47.3722V47.3258L18.8574 47.2561L18.8342 47.3722H18.7181L18.6717 47.2561L18.2539 47.2793L18.2075 47.3258L18.0682 47.2097L17.8826 47.2561V47.1169L17.8593 47.0472V47.2097L17.8361 47.0704L17.6272 46.9776L17.4416 47.0704L17.3487 47.2793L17.0934 47.3954L16.9541 47.1865H16.8613L16.9309 46.7687L16.722 46.6759H16.6292L16.6524 46.7455L16.5363 46.6759L16.3506 46.7455L16.3274 47.2561L16.2114 47.3258L16.0721 47.2329L16.0025 46.9312L15.84 47.024L15.8168 46.8151H15.724L15.6543 46.8615L15.7007 47.1633L15.6079 47.0472L15.5383 47.1401L15.4686 47.0936L15.4222 47.1633L15.3526 47.1169V47.5579H15.1901L15.1669 47.3722L15.0508 47.349L14.958 47.5579L14.7259 47.4882L14.5866 47.7435L14.7027 46.908L14.5402 46.6294L14.5634 46.3277L14.4242 46.2581L14.3777 46.3509L14.3313 46.3277L14.4474 46.2116L14.2849 45.9795L14.2617 45.5617L14.0064 45.5153L14.0528 45.3993L13.9367 45.2368L13.8207 45.26L13.7743 45.2136L13.6582 45.3528L13.5189 45.2136L13.635 45.1672V45.0743L13.7743 45.0975L13.8439 44.935L14.0064 45.0743L14.0528 44.9815L14.0064 44.9118L14.076 44.8886L14.2153 45.1207L14.1224 45.3064L14.1688 45.3993H14.2153L14.2849 45.0279L14.2153 45.0047L14.192 44.7726L14.076 44.8422L14.0528 44.7958L14.1688 44.5405L14.3545 44.6797L14.3081 44.7494H14.7259L14.9348 44.8422L15.0276 44.9118L14.9812 45.0279L15.0973 45.0743H15.1669V45.0047L14.8419 44.7261L15.1437 44.819L15.1205 44.7029L15.2133 44.819L15.2597 44.7494L15.3758 44.8654L15.5383 44.8886L15.5847 44.9815L15.5383 45.0047L15.6079 45.1207H15.5151L15.6311 45.3528V45.5617L15.7472 45.6778M15.7472 45.6778L15.8864 45.7242L15.9096 45.6082L15.7472 45.6778ZM15.7472 45.6778L15.6775 45.5849V45.4225L15.5847 45.1672H15.7007L15.7936 45.376L15.8632 45.2368H16.0025L15.9096 45.1904L15.7936 44.9815H16.3274L16.3042 45.1439L16.3739 45.2832H16.3971V45.3064L16.4203 45.3296L16.4667 45.1439L16.3506 45.0047L16.4667 44.9583L16.4435 44.5869L16.5131 44.4476L16.3971 44.494V44.4244L16.3042 44.5405L16.1882 44.378L16.0953 44.3548L15.9793 44.494L15.9329 44.4012L15.9793 44.1227L15.9329 44.1459L15.9096 44.0298L15.7704 44.1227L15.8168 44.2851L15.7704 44.4012L15.724 44.3548L15.6543 44.4476L15.6079 44.7494L15.3758 44.7958L15.3526 44.7261L15.1669 44.6565L15.1437 44.494L15.0973 44.6797L14.9812 44.5173L14.958 44.2619L14.8419 44.1459L14.9116 44.1227M14.9116 44.1227V44.0066M14.9116 44.1227L14.8419 44.0763L14.7955 44.1459V44.2155L14.8884 44.2387L14.7955 44.2851L14.7723 44.4244L14.8652 44.494V44.5869L14.7491 44.6333L14.6563 44.5869L14.5634 44.7029L14.4474 44.6101H14.3313V44.5637L14.2617 44.5405H14.3313V44.4244L14.1224 44.4476V44.2155L13.9832 44.1923L13.8671 44.0298L13.9367 43.9602L13.8439 43.8906L13.9832 43.8674L14.0296 43.7977L13.9599 43.7049L13.9832 43.4496L14.076 43.2871L14.0064 43.2175H13.7743L13.635 42.9853L13.4725 42.9621L13.5886 42.8925L13.4725 42.73L13.6814 42.7068L13.5886 42.6372L13.6118 42.5211L13.5189 42.4747V42.3354L13.5654 42.2658L13.635 42.2426M13.635 42.2426L13.7046 42.173M13.635 42.2426H13.5654L13.5189 42.3122V42.4515L13.5886 42.5211L13.5654 42.614L13.5886 42.6836L13.4493 42.7068L13.4725 42.6836V42.6604M13.4725 42.6604H13.4029M13.4725 42.6604L13.4261 42.73L13.5189 42.8925L13.4493 42.9389L13.4725 43.055L13.5189 43.0318L13.5654 43.1478L13.5886 43.4263L13.4029 43.4728L13.2868 43.6817L13.0547 43.5888L13.0779 43.7977H12.9619L13.1244 44.0066L13.2868 43.8906L13.3565 43.7745L13.3333 43.6817L13.5421 43.7049L13.5189 44.0298L13.5654 44.1459L13.5421 44.1923L13.31 44.1459L13.2636 44.3316L13.1244 44.2851L13.0315 44.4476L12.8458 44.2387L12.7994 44.3316H12.7298L12.7762 44.1923L12.8226 44.2155L12.869 44.1459L12.8458 44.053L12.7298 44.0763L12.6369 43.8906L12.4977 43.8674L12.5441 43.496L12.4048 43.4728L12.3816 43.2871L12.4512 43.2639L12.312 43.0782L12.428 42.9389L12.2423 42.8461L12.312 42.73L12.1959 42.6372L12.1263 42.6836L12.0567 42.6372L12.0335 42.73H11.987L11.9406 42.3587L11.8246 42.2658L11.7781 42.0801L11.7085 41.9873L11.6389 42.0337L11.5924 41.9873L11.6157 41.8016L11.7085 41.7552M11.7085 41.7552L11.7317 41.732M11.7085 41.7552L11.6389 41.6623H11.5228L11.546 41.5927L11.4764 41.7552L11.43 41.7088L11.3836 41.7784V41.7088L11.3371 41.7552L11.2211 41.4999L11.1282 41.5927L11.0354 41.4534L11.1514 41.3838L11.0818 41.2445L11.1514 41.1053L11.1979 41.0589L11.2443 41.1285L11.2675 41.1053L11.2907 41.0821H11.2443L11.2211 40.85L11.1282 40.8732L10.989 40.7571L10.8729 40.8267L10.7801 40.6179L10.8497 40.525L10.5248 40.3161V40.2465L10.4551 40.1536L10.5015 40.0608H10.4087L10.3391 39.8287L10.0373 39.8055L9.7588 39.968L9.57312 39.9447L9.41064 40.084L9.48027 39.8751L9.38743 39.8519L9.43385 39.7126L9.36422 39.5966L9.50348 39.5037L9.38743 39.4805L9.36422 39.2484L9.27138 39.2716L9.3178 39.0627H9.22496L9.17853 38.9467H9.03927L8.83037 38.5289L8.90001 38.4593L8.69111 38.0415L8.73753 37.9254L8.6679 37.7397H8.73753L8.55185 37.3451L8.62148 37.2987L8.31974 37.1362L8.34295 37.113L8.29653 36.8809L8.38937 36.8113V36.7184H8.459L8.43579 36.5328L8.31974 36.6024L8.22689 36.1614L8.15726 36.115V35.674L7.97158 35.6043L7.90195 35.6508L7.87873 35.6043L7.83231 35.6972L7.78589 35.5347L7.85552 35.349L7.62342 35.2098L7.41452 35.233L7.3681 35.349L7.32168 35.3026L7.22883 35.3258V35.2562L7.1592 35.2098V35.0937L7.34489 35.1169L7.53057 34.9312L7.48415 34.8616L7.55378 34.7455L7.50736 34.6295L7.55378 34.5599L7.29847 34.4438L7.27526 34.351L7.32168 34.3277L7.20562 34.0028L7.06636 33.91L7.13599 33.6778L7.08957 33.469L6.97352 33.4457L6.99673 33.3993L6.90388 33.2601L7.01994 33.0047L7.06636 33.0279V32.8887L6.88067 32.5405L6.95031 32.4941L6.88067 32.3316L6.90388 32.262M6.90388 32.262V32.2156M6.90388 32.262L6.78783 32.1459L6.83425 31.937L6.69499 31.8674L6.76462 31.7281L6.5093 31.38L6.48609 31.1711L6.69499 30.9854L6.67178 30.7069L6.60214 30.4283L6.43967 30.2659L6.46288 29.8249L6.30041 29.8481L6.23077 29.6624L6.34683 29.616L6.5093 29.6856L6.55572 29.8249L6.62536 29.8017V29.7088L6.78783 30.0802L6.76462 30.2659L6.90388 30.2891V30.5444L7.08957 30.5908L7.06636 30.8693L7.18241 30.8926L7.32168 30.7765L7.41452 30.7997L7.43773 30.9622H7.50736L7.69305 30.8229L7.62342 31.2871L7.8091 31.4032L7.87873 31.5889L7.90195 31.496L8.41258 31.9835L8.64469 31.9603L8.83037 32.1459L8.90001 32.3316L8.99285 32.378L8.94643 32.819L9.06248 33.0744L9.13211 33.4457L9.08569 33.6314L9.20175 33.9564H9.27138L9.17853 33.6314L9.27138 33.3065L9.20175 33.2833L9.1089 32.8655L9.20175 32.8423L9.08569 32.819L9.01606 32.8887L9.03927 32.7726L9.36422 32.6102L9.41064 32.703L9.7588 32.9583L9.99091 32.8423L10.3391 33.0047L10.3855 32.9815L10.4319 32.9351L10.5015 33.0047L10.5944 32.9119L10.5248 32.7958L10.6176 32.8887L10.664 32.9119M10.664 32.9119L10.8961 32.7958L11.105 32.9119L11.1282 33.5154L11.1747 33.6778L11.1282 33.7475V33.8635L11.0586 33.9796M10.664 32.9119L10.8497 32.7726L11.1282 32.8887L11.1747 33.6546L11.1514 33.8635L11.0586 33.9796M10.664 32.9119L10.548 32.7726L10.5015 32.7958L10.5712 32.9119L10.5015 32.9815L10.4319 32.9119L10.3623 32.9815L10.2462 32.9583L9.99091 32.7958L9.78201 32.9351L9.68917 32.8887L9.57312 32.7726L9.78201 32.4013L9.80522 32.1459L9.94449 32.1692L9.87486 32.0995L9.85165 31.9138L9.99091 31.8442L10.0141 31.7514L9.87486 31.7049L9.73559 31.9603L9.57312 31.9835L9.48027 31.8442L9.64275 31.9138L9.71238 31.7978L9.57312 31.5657L9.61954 31.5192L9.45706 31.4496L9.38743 31.3104L9.41064 31.4728H9.36422L9.43385 31.5657H9.34101L9.27138 31.6353L9.36422 31.7049L9.29459 31.7514H9.38743L9.27138 31.8674L9.24817 31.6585L9.13211 31.6121L9.08569 31.3336L8.80716 31.1943L8.71432 30.8926L8.50542 30.7533L8.27332 30.3819H8.13405L8.11084 30.1498L8.20368 30.0338L8.13405 29.8481L8.22689 29.7552L8.06442 29.732L8.018 29.8481L7.97158 29.8017L8.06442 29.6392L8.34295 29.6856H8.36616L8.38937 29.6392M11.0586 33.9796L11.1282 34.0724M11.1282 34.0724L11.0818 34.0956L11.0586 34.1188M11.1282 34.0724L11.0586 34.1188M11.0586 34.1188L11.105 34.4438L11.2211 34.5599H11.3836L11.4764 34.7223L11.5692 34.792M11.0586 34.1188L11.105 34.4206L11.2211 34.5366L11.2907 34.5134L11.3139 34.5366H11.3603L11.4068 34.5599L11.5692 34.792M11.5692 34.792H11.5924L11.6621 34.6991M11.5692 34.792L11.6621 34.6991M11.6621 34.6991L11.7549 34.8152H11.7781L11.6621 34.6991ZM8.38937 29.6392L8.459 29.6624L8.59827 29.6856H8.69111L8.71432 29.5928L8.80716 29.616M8.38937 29.6392L8.6679 29.6856L8.69111 29.5928L8.71432 29.5695H8.76074L8.80716 29.616M8.38937 29.6392L8.27332 29.6624L8.06442 29.5928L8.08763 29.4303L7.97158 29.3142L7.87873 29.291L7.8091 29.3607L7.76268 29.1982L7.85552 29.0821L7.73947 29.1518L7.60021 29.0589L7.55378 29.1053L7.66984 29.175L7.69305 29.4071L7.62342 29.3607L7.55378 29.4767L7.46094 29.4535L7.20562 29.7552L7.3681 29.8481V29.6856L7.41452 29.6624V30.0802L7.20562 30.1266L7.01994 29.9873L6.76462 29.9641L7.04315 29.5928L7.13599 29.291L7.1592 28.5715L7.06636 27.8752L6.99673 27.527M8.80716 29.616V29.5695M8.80716 29.5695L8.85358 29.5928H8.90001M8.80716 29.5695L8.90001 29.5928M8.90001 29.5928L8.94643 29.6856V29.7088H8.96964M8.90001 29.5928L8.96964 29.7088M8.96964 29.7088L9.06248 29.6624L9.1089 29.616M8.96964 29.7088L9.1089 29.616M9.1089 29.616H9.13211L9.15532 29.6856L9.17853 29.6624V29.6392V29.616L9.13211 29.5695M9.1089 29.616L9.13211 29.6392L9.15532 29.6624L9.13211 29.5695M9.13211 29.5695L9.15532 29.5463L9.17853 29.5231M9.17853 29.5231L9.22496 29.5463L9.29459 29.4999M9.17853 29.5231L9.29459 29.4999M9.29459 29.4999L9.3178 29.5463M9.3178 29.5463L9.38743 29.5231L9.36422 29.4535L9.43385 29.4303L9.45706 29.4071L9.38743 29.4535L9.3178 29.5463ZM6.99673 27.527L7.06636 27.3645M6.99673 27.527V27.4806L7.06636 27.3645M6.99673 27.527V27.6663L7.04315 27.8984L6.46288 26.4129L6.57893 26.5986L6.5093 26.4593M7.06636 27.3645L7.13599 27.411H7.20562L7.06636 27.3645ZM6.5093 26.4593L6.60214 26.2968M6.5093 26.4593L6.30041 26.204L6.13793 26.1344L6.09151 25.9951L5.81298 25.8326L5.65051 25.5309L5.30234 25.2291L5.27913 24.997L5.16308 24.8346L5.00061 24.6953H4.88455L4.93097 24.6025H4.83813L4.72208 24.4168L4.69887 24.115L4.5596 24.0454V23.999L4.58281 23.9758L4.60602 23.9526L4.42034 23.7437M4.42034 23.7437L4.46676 23.7204M4.42034 23.7437L4.37392 23.6276L4.18823 23.4651L4.02575 23.558L3.9097 23.5116L3.77044 23.117V23.0241L3.9097 22.9313L3.88649 22.792L4.18823 22.5831L4.39713 22.3278L4.5596 22.3046L4.67565 22.1885H4.95418L5.11666 22.3278M5.11666 22.3278L5.13987 22.351L5.18629 22.3046L5.25592 22.4206L5.2095 22.5135V22.5599L5.39519 22.676H5.62729L5.48803 22.6063M5.11666 22.3278L5.2095 22.3046L5.27913 22.4206M5.11666 22.3278L4.95418 22.1653L5.11666 22.0493L5.07024 22.0261L4.93097 22.1653H4.65244L4.5596 22.2814L4.37392 22.3278L3.86328 22.8152L3.72402 22.676V22.4903L3.63117 22.4671L3.7008 22.3278L3.67759 22.1653L3.2598 21.2369L2.8188 20.5638L2.79559 20.3781L2.6099 20.1924L2.54027 19.9603L2.1689 19.6586L2.26174 19.4961L2.35458 19.5425L2.47064 19.4265L2.49385 18.9855L2.28495 18.6141L2.33137 18.6373L2.07605 18.4284L2.05284 18.3356L2.12248 18.2427L1.91358 18.1035L1.93679 17.9178L1.82074 17.8713L1.86716 17.8017L1.79753 17.5928L1.56542 17.2679L1.63505 17.2214L1.58863 17.1054L1.65826 16.8269L1.44937 16.3394L1.49579 16.2466L1.519 16.0609V16.0377M5.48803 22.6063L5.55766 22.5831L5.62729 22.5135L5.48803 22.6063ZM5.48803 22.6063V22.6528L5.4184 22.676L5.25592 22.5831L5.23271 22.5367L5.27913 22.4206M5.27913 22.4206V22.3974M5.27913 22.3974H5.30234H5.34877M5.27913 22.3974H5.34877M5.34877 22.3974L5.37198 22.3742V22.351V22.3278V22.2814M5.34877 22.3974L5.37198 22.2814M5.37198 22.2814H5.39519M1.519 16.0377L1.54221 16.0145V15.9681L1.519 16.0377ZM1.519 16.0377H1.44937L1.37973 15.8056L1.47258 15.7592L1.49579 15.5735L1.47258 15.295L1.33331 14.9932L1.42615 14.8772M1.42615 14.8772L1.49579 14.9236L1.54221 14.9004L1.56542 14.7611L1.68147 14.8772M1.42615 14.8772L1.519 14.9004L1.56542 14.7379L1.68147 14.8772M1.68147 14.8772L1.86716 14.9004L1.91358 14.8772M1.68147 14.8772H1.91358M1.91358 14.8772L1.93679 14.9468M1.93679 14.9468L1.96 14.97H2.1689M1.93679 14.9468L2.1689 14.97M2.1689 14.97L2.23853 15.0396L2.30816 15.0861V15.1093L2.35458 15.1325L2.37779 15.1557L2.401 15.1325M2.1689 14.97L2.401 15.1325M2.401 15.1325V15.1557L2.35458 15.1789M2.35458 15.1789V15.2021H2.401V15.2253V15.2485M2.35458 15.1789L2.42421 15.2021M2.401 15.2485V15.2717H2.42421L2.44743 15.295H2.47064L2.401 15.2485ZM2.401 15.2485L2.42421 15.2021M2.42421 15.2021L2.44743 15.1789V15.1557M2.42421 15.2021L2.44743 15.1557M2.44743 15.1557L2.49385 15.1789L2.51706 15.1093M2.44743 15.1557L2.51706 15.1093M2.51706 15.1093L2.58669 15.1557L2.6099 15.1325M2.51706 15.1093L2.6099 15.1325M2.6099 15.1325V15.0861L2.58669 15.0396M2.6099 15.1325L2.58669 15.0396M2.58669 15.0396L2.63311 15.0164V14.9932L2.6099 14.97L2.63311 14.9468L2.58669 15.0396Z",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M31.8789 38.8091L32.0878 38.7163L32.3895 38.7859L32.436 38.7163L32.5056 38.8091L32.5984 38.7859L32.7145 38.9716L32.6681 38.8787L32.6913 38.6466L32.436 38.5306L32.3895 38.577L32.2735 38.5306L32.3895 38.4842V38.3913L32.5056 38.3681L32.4592 38.2521L32.552 38.2056L32.5752 38.1128H32.7145L32.7841 38.1824L32.8537 38.1128V38.3681L33.0162 38.5538L33.3412 38.3913V38.5306L33.2251 38.6466H33.3644V38.7163L33.4572 38.7395L33.4804 38.8787L33.6197 39.0644L33.5733 39.2501L33.4572 39.4126L33.5036 39.5519H33.5965L33.5733 39.8072L33.5036 39.784V39.8768L33.3876 39.9697H33.2483L33.1787 40.2018L32.9466 40.3178L32.9002 40.4571L32.993 40.6428H33.1323L33.1787 40.8749L33.0859 40.9677L33.2019 41.0373L33.3412 41.548L33.434 41.5944V41.8033L33.3644 41.7569L33.318 41.8497H33.1787L33.2251 41.8961L33.1787 41.989L33.2715 42.0586L33.3412 41.9658L33.5501 42.0586L33.5733 42.0122L33.6197 42.0354L33.6661 42.0122H33.6893L33.4572 42.2443L33.2715 42.6389L33.3644 42.871L33.5965 43.0567L33.7125 43.0799L33.6429 43.1959L33.3412 43.0567L33.1323 43.0335L33.0859 42.7549L32.9698 42.8014L32.8073 42.6853L32.6216 42.7085V42.2211L32.5288 42.0586L32.5984 42.0122H32.552L32.5288 41.8033L32.3431 41.8961L32.2967 41.6176L32.2039 41.7337L32.2503 41.8265H32.1806L32.3199 41.989L32.2271 41.9658L32.2735 42.0586L32.1342 42.2211L32.2735 42.3604L32.3663 42.1979V42.3604L32.2039 42.546L32.4127 42.7085L32.3199 42.8014L32.4127 42.9174L32.3431 42.9406L32.2967 42.871L32.2735 42.9406L32.111 42.6621L31.67 43.0567L31.6932 43.3816L31.5772 43.2888L31.5539 43.3352L31.4611 43.0103L31.3218 42.9174L31.2058 42.9406L31.1362 42.8942L31.1594 42.8014L31.0433 42.8246L30.9273 42.7317L30.8808 42.8014L30.8344 42.7549L30.8808 42.546L30.7416 42.5228L30.6719 42.3836L30.7416 42.2907L30.6719 42.1979L30.6952 42.105L30.5791 42.0122L30.7416 41.8033L31.0201 41.8265L31.0433 41.6408L30.8808 41.5712L31.0201 41.5016L31.0897 41.6176L31.1826 41.664L31.1129 41.4551L31.0433 41.3855L30.8112 41.548L30.7184 41.4783L30.5559 41.548L30.463 41.3623H30.2541L30.1613 41.1766H30.022L29.9756 41.0838L30.022 40.7124L29.9756 40.666L29.9988 40.4571L29.9292 40.4107V40.2714L30.1381 40.1089L30.2541 40.0857L30.4166 40.1785L30.5327 40.0625L30.5791 39.8536L30.4166 39.7143L30.4863 39.6215L30.3702 39.4358L30.4863 39.3198L30.6719 39.3894L30.7648 39.6215L30.9737 39.5286L31.0201 39.6215L30.9737 39.7143L31.0665 39.784L30.9737 39.8768L30.788 40.2714L30.8576 40.341L30.904 40.2946L30.9737 40.4339L30.9969 40.5267H30.9737L30.904 40.5499H30.9737L30.9969 40.5267L31.1129 40.3642L31.2058 40.7588H31.2986L31.3683 40.6196L31.4379 40.9213L31.4843 40.8284L31.5307 40.8749V40.8284L31.6236 40.8749V40.8052H31.7396L31.8093 40.9909L31.9485 40.9213L32.0646 40.9909L32.1342 40.8981L32.0414 40.7356L32.1342 40.5963L32.111 40.666L32.2503 40.7588L32.2735 40.9445L32.2967 40.666L32.3895 40.5035L32.9002 40.4107L32.5752 40.4339L32.3663 40.341L32.1342 40.3642L32.1806 40.2946L32.0646 40.2482L32.0414 40.0857L32.2271 39.9464L32.0414 39.9232L31.995 39.8072L31.9021 39.8768L31.7861 39.6911L31.995 39.7375L32.0878 39.6215L32.2039 39.6447L32.1574 39.5519L32.2039 39.4822H32.3199L32.2503 39.343L32.0414 39.5054L31.9717 39.4822L32.0182 39.3198L31.9021 39.2965L31.8093 39.343V39.2037L31.9021 39.1573V38.9716L31.7164 38.7859L31.8093 38.7395L31.8789 38.8091Z",fill:"#CC0000"}),(0,bi.jsx)("path",{d:"M30.9969 40.5267L30.9737 40.4339L30.904 40.2946L30.8576 40.341L30.788 40.2714L30.9737 39.8768L31.0665 39.784L30.9737 39.7143L31.0201 39.6215L30.9737 39.5286L30.7648 39.6215L30.6719 39.3894L30.4863 39.3198L30.3702 39.4358L30.4863 39.6215L30.4166 39.7143L30.5791 39.8536L30.5327 40.0625L30.4166 40.1785L30.2541 40.0857L30.1381 40.1089L29.9292 40.2714V40.4107L29.9988 40.4571L29.9756 40.666L30.022 40.7124L29.9756 41.0838L30.022 41.1766H30.1613L30.2541 41.3623H30.463L30.5559 41.548L30.7184 41.4783L30.8112 41.548L31.0433 41.3855L31.1129 41.4551L31.1826 41.664L31.0897 41.6176L31.0201 41.5016L30.8808 41.5712L31.0433 41.6408L31.0201 41.8265L30.7416 41.8033L30.5791 42.0122L30.6952 42.105L30.6719 42.1979L30.7416 42.2907L30.6719 42.3836L30.7416 42.5228L30.8808 42.546L30.8344 42.7549L30.8808 42.8014L30.9273 42.7317L31.0433 42.8246L31.1594 42.8014L31.1362 42.8942L31.2058 42.9406L31.3218 42.9174L31.4611 43.0103L31.5539 43.3352L31.5772 43.2888L31.6932 43.3816L31.67 43.0567L32.111 42.6621L32.2735 42.9406L32.2967 42.871L32.3431 42.9406L32.4127 42.9174L32.3199 42.8014L32.4127 42.7085L32.2039 42.546L32.3663 42.3604V42.1979L32.2735 42.3604L32.1342 42.2211L32.2735 42.0586L32.2271 41.9658L32.3199 41.989L32.1806 41.8265H32.2503L32.2039 41.7337L32.2967 41.6176L32.3431 41.8961L32.5288 41.8033L32.552 42.0122H32.5984L32.5288 42.0586L32.6216 42.2211V42.7085L32.8073 42.6853L32.9698 42.8014L33.0859 42.7549L33.1323 43.0335L33.3412 43.0567L33.6429 43.1959L33.7125 43.0799L33.5965 43.0567L33.3644 42.871L33.2715 42.6389L33.4572 42.2443L33.6893 42.0122H33.6661L33.6197 42.0354L33.5733 42.0122L33.5501 42.0586L33.3412 41.9658L33.2715 42.0586L33.1787 41.989L33.2251 41.8961L33.1787 41.8497H33.318L33.3644 41.7569L33.434 41.8033V41.5944L33.3412 41.548L33.2019 41.0373L33.0859 40.9677L33.1787 40.8749L33.1323 40.6428H32.993L32.9002 40.4571L32.9466 40.3178L33.1787 40.2018L33.2483 39.9697H33.3876L33.5036 39.8768V39.784L33.5733 39.8072L33.5965 39.5519H33.5036L33.4572 39.4126L33.5733 39.2501L33.6197 39.0644L33.4804 38.8787L33.4572 38.7395L33.3644 38.7163V38.6466H33.2251L33.3412 38.5306V38.3913L33.0162 38.5538L32.8537 38.3681V38.1128L32.7841 38.1824L32.7145 38.1128H32.5752L32.552 38.2056L32.4592 38.2521L32.5056 38.3681L32.3895 38.3913V38.4842L32.2735 38.5306L32.3895 38.577L32.436 38.5306L32.6913 38.6466L32.6681 38.8787L32.7145 38.9716L32.5984 38.7859L32.5056 38.8091L32.436 38.7163L32.3895 38.7859L32.0878 38.7163L31.8789 38.8091L31.8093 38.7395L31.7164 38.7859L31.9021 38.9716V39.1573L31.8093 39.2037V39.343L31.9021 39.2965L32.0182 39.3198L31.9717 39.4822L32.0414 39.5054L32.2503 39.343L32.3199 39.4822H32.2039L32.1574 39.5519L32.2039 39.6447L32.0878 39.6215L31.995 39.7375L31.7861 39.6911L31.9021 39.8768L31.995 39.8072L32.0414 39.9232L32.2271 39.9464L32.0414 40.0857L32.0646 40.2482L32.1806 40.2946L32.1342 40.3642L32.3663 40.341L32.5752 40.4339L32.9002 40.4107L32.3895 40.5035L32.2967 40.666L32.2735 40.9445L32.2503 40.7588L32.111 40.666L32.1342 40.5963L32.0414 40.7356L32.1342 40.8981L32.0646 40.9909L31.9485 40.9213L31.8093 40.9909L31.7396 40.8052H31.6236V40.8749L31.5307 40.8284V40.8749L31.4843 40.8284L31.4379 40.9213L31.3683 40.6196L31.2986 40.7588H31.2058L31.1129 40.3642L30.9969 40.5267ZM30.9969 40.5267H30.9737L30.904 40.5499H30.9737L30.9969 40.5267Z",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.8903 45.7487L25.8671 46.0736L25.9135 46.1665L25.8207 46.3521L25.6814 46.4218L25.751 46.561L25.7278 46.6539L25.6814 46.7003L25.4957 46.5842L25.4029 46.6307L25.3797 46.7467L25.2868 46.7003L25.31 46.6307H25.2404V46.561L25.2636 46.2361L25.1708 46.1897L25.0547 45.9576H24.9386L24.869 45.8415L24.8922 45.6326L25.0779 45.6094L25.1243 45.679L25.4261 46.2361L25.5189 46.2593L25.4957 46.3289L25.6814 46.2361L25.6118 46.1665L25.7046 46.0504L25.635 45.9808L25.8207 45.8415L25.751 45.7022L25.635 45.7719V45.5862H25.5653L25.751 45.3077L25.6814 44.8434L25.7742 44.797L25.751 44.9131L25.8439 44.9595L25.8671 45.1916L26.0063 45.238L26.0992 45.0755L26.0528 44.9827L26.2152 45.0059L26.0992 44.8434V44.681L26.2849 44.5417L26.3313 44.1935L26.5634 44.0775L26.5866 43.8222L26.7259 43.7061L26.7723 43.3812L26.8651 43.6829L26.8419 43.799L26.9116 44.1007L27.0276 44.0775L27.1901 43.9382L27.4222 43.5669V43.4276L27.3294 43.3115H27.3758L27.399 43.2187L27.2597 43.0794H27.3526L27.3294 42.9866L27.4686 42.9402L27.5847 43.0098L27.6543 42.917L27.6775 42.6616L27.6079 42.4992L27.4454 42.5224L27.3758 42.6384H27.1669L27.2597 42.4295H27.1205L26.8419 42.5688L26.8651 42.4063L26.7027 42.4527L26.6098 42.3831L26.6795 42.2671H26.8187L26.7955 42.151L26.6795 42.0814L26.958 41.9653L26.9348 42.0349H27.0044L27.1437 42.1974V42.0582L27.2133 41.9885L27.3526 41.9189L27.399 42.0349L27.4454 41.6868L27.3758 41.8725H27.3061V41.8028L27.2133 41.7564L27.1205 41.9189L27.074 41.8493L27.1437 41.71L27.0044 41.7564L26.9116 41.6868L27.0276 41.6172L27.1205 41.3618L27.074 41.2922L27.2133 41.269L27.399 41.0137L27.515 41.1297L27.4686 41.3386L27.5615 41.3618L27.6079 41.5243L27.7007 41.5475L27.6543 41.6172L27.7239 41.7796L27.8168 41.8725L27.7471 42.3367L27.9096 42.4063L27.9328 42.8241L28.0721 42.917L28.1417 43.358L28.0721 43.5436L28.0025 43.3812L27.9096 43.358L27.515 43.5669L27.2597 43.8222L27.074 44.1935L27.0508 44.7506L27.1205 44.9363L27.2365 45.0291H27.1901V45.0523H27.3294L27.4918 44.8202L27.6543 45.0988L27.6079 45.3541L27.4686 45.3773L27.2133 45.7719L27.3061 45.8647L27.2829 45.9808L27.1437 46.0272L27.0508 46.3986L27.074 46.8396L27.0044 46.8164L26.7955 47.002L26.7723 46.8628L26.5866 46.8164L26.4938 46.6307L26.3313 46.7003L26.2849 46.5378L26.3313 46.445H26.2849V46.3521H26.3777L26.4241 46.2361L26.3313 46.004L25.8903 45.9576L25.9367 45.8647L26.1456 45.9111L26.2849 45.8183V45.6558L26.2384 45.7254L26.2152 45.6558H26.076L25.8903 45.7487Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M35.0749 35.6849L35.0167 35.8167L34.9078 35.7218L34.7755 35.8341L34.7894 35.7675L34.7031 35.7167L34.3934 35.7531L34.279 35.9984L34.4617 36.1064L34.5506 36.3912L34.519 36.5181L34.3872 36.5638L34.2507 36.4715L34.2709 36.5831L34.0831 36.5413L33.8519 36.7813L33.7528 36.7964L33.7424 36.5109L33.8666 36.4139L33.994 36.036L34.1732 36.0555L34.2607 35.9423L34.23 35.781L34.1001 35.6637L34.0133 35.673L33.9784 35.8L33.8594 35.8285L33.7097 35.7357L33.9859 35.5788L33.9508 35.3917L33.8584 35.3184L34.081 35.0375L34.1295 34.7397L34.2349 34.6803L34.2711 34.5508L34.3846 34.5719L34.4877 34.739L34.7811 34.7386L34.9589 35.0452L34.9152 35.1127L34.9795 35.3423L35.2532 35.5656L35.0749 35.6849Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.93375 9.49659L4.04217 9.82361L4.30828 9.91928L4.17995 9.54698L4.53676 10.0618L4.87576 10.2513L5.09494 10.1931L5.04656 10.3052L5.26946 10.6389L5.01588 10.6642L5.08579 10.6433L5.11207 10.5996L4.99641 10.6095L4.99318 10.5139L4.93446 10.5779L4.91911 10.5193L4.75406 10.527L4.66113 10.6225L4.42688 10.5354L4.26933 10.5972L4.06814 10.8408L3.83464 10.8057L3.69259 10.9497L3.48355 10.8946L3.33398 10.7224L3.42383 10.5787L3.37913 10.1709L3.7563 9.79285L3.83979 9.48828L3.93375 9.49659Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.551 6.63965L2.6146 6.86098L2.59807 7.45547L2.53979 7.52828L2.61297 7.64021L2.55648 7.89413L2.59821 7.99853L2.40733 8.32952L2.45277 8.9329L2.27442 9.24866L2.06172 9.08287L1.96762 8.85069L2.03886 8.53962L1.93945 8.32859L1.93295 8.12137L1.80933 8.0281L1.89488 7.91168L1.82114 7.70896L1.95774 7.64127L2.01539 7.76861L2.25908 7.72363L2.41958 7.4577L2.36028 7.2028L2.43801 6.96758L2.5342 6.89925L2.551 6.63965Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.59985 6.5L3.78586 6.60857L3.9046 6.53589L4.07334 6.61229L4.17956 6.52995L4.25125 6.65946L4.19506 6.79816L4.32722 6.97354L4.11364 7.13161L4.1505 7.39965L4.06009 7.39066L4.04503 7.46705L3.77597 7.66764L3.60235 7.70196L3.24465 7.51045L3.17709 7.30439L3.02118 7.18464L3.10054 7.0967L3.08136 7.01911L3.20055 7.07966L3.4221 6.93991L3.51327 6.74812L3.40529 6.65676L3.50132 6.63326L3.47683 6.52551L3.59985 6.5Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M36.4995 30.9229L36.707 31.0953L36.6905 31.3228L36.739 31.2696L36.8265 31.3135L36.7743 31.4581L36.8569 31.5396L36.9159 31.524L36.9623 31.5646L36.5647 31.589L36.5271 31.4989L36.5097 31.5549L36.4459 31.4871L36.47 31.4335L36.3909 31.4511L36.2982 31.3397L36.0592 31.3919L35.9067 31.2487L35.9236 31.0586L36.0696 30.9365L36.3203 31.0463L36.4995 30.9229Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.00884 9.02933L4.00309 9.1818L4.13437 9.44292L4.00265 9.54692L3.95929 9.41455L3.84247 9.32953L3.91814 8.88672L4.00884 9.02933Z",fill:"#CC0000",stroke:"black","stroke-width":"0.3","stroke-linecap":"square","stroke-linejoin":"round"}),(0,bi.jsx)("path",{d:"M50.1737 10.8936H64.7237V15.8936H55.6737V25.6436H62.7737V30.6436H55.6737V45.8936H50.1737V10.8936ZM75.3112 46.3936C72.6112 46.3936 70.5445 45.6269 69.1112 44.0936C67.6778 42.5602 66.9612 40.3936 66.9612 37.5936V19.1936C66.9612 16.3936 67.6778 14.2269 69.1112 12.6936C70.5445 11.1602 72.6112 10.3936 75.3112 10.3936C78.0112 10.3936 80.0778 11.1602 81.5112 12.6936C82.9445 14.2269 83.6612 16.3936 83.6612 19.1936V37.5936C83.6612 40.3936 82.9445 42.5602 81.5112 44.0936C80.0778 45.6269 78.0112 46.3936 75.3112 46.3936ZM75.3112 41.3936C77.2112 41.3936 78.1612 40.2436 78.1612 37.9436V18.8436C78.1612 16.5436 77.2112 15.3936 75.3112 15.3936C73.4112 15.3936 72.4612 16.5436 72.4612 18.8436V37.9436C72.4612 40.2436 73.4112 41.3936 75.3112 41.3936ZM94.5307 46.3936C91.864 46.3936 89.8474 45.6436 88.4807 44.1436C87.114 42.6102 86.4307 40.4269 86.4307 37.5936V35.5936H91.6307V37.9936C91.6307 40.2602 92.5807 41.3936 94.4807 41.3936C95.414 41.3936 96.114 41.1269 96.5807 40.5936C97.0807 40.0269 97.3307 39.1269 97.3307 37.8936C97.3307 36.4269 96.9974 35.1436 96.3307 34.0436C95.664 32.9102 94.4307 31.5602 92.6307 29.9936C90.364 27.9936 88.7807 26.1936 87.8807 24.5936C86.9807 22.9602 86.5307 21.1269 86.5307 19.0936C86.5307 16.3269 87.2307 14.1936 88.6307 12.6936C90.0307 11.1602 92.064 10.3936 94.7307 10.3936C97.364 10.3936 99.3474 11.1602 100.681 12.6936C102.047 14.1936 102.731 16.3602 102.731 19.1936V20.6436H97.5307V18.8436C97.5307 17.6436 97.2974 16.7769 96.8307 16.2436C96.364 15.6769 95.6807 15.3936 94.7807 15.3936C92.9474 15.3936 92.0307 16.5102 92.0307 18.7436C92.0307 20.0102 92.364 21.1936 93.0307 22.2936C93.7307 23.3936 94.9807 24.7269 96.7807 26.2936C99.0807 28.2936 100.664 30.1102 101.531 31.7436C102.397 33.3769 102.831 35.2936 102.831 37.4936C102.831 40.3602 102.114 42.5602 100.681 44.0936C99.2807 45.6269 97.2307 46.3936 94.5307 46.3936ZM113.134 46.3936C110.468 46.3936 108.451 45.6436 107.084 44.1436C105.718 42.6102 105.034 40.4269 105.034 37.5936V35.5936H110.234V37.9936C110.234 40.2602 111.184 41.3936 113.084 41.3936C114.018 41.3936 114.718 41.1269 115.184 40.5936C115.684 40.0269 115.934 39.1269 115.934 37.8936C115.934 36.4269 115.601 35.1436 114.934 34.0436C114.268 32.9102 113.034 31.5602 111.234 29.9936C108.968 27.9936 107.384 26.1936 106.484 24.5936C105.584 22.9602 105.134 21.1269 105.134 19.0936C105.134 16.3269 105.834 14.1936 107.234 12.6936C108.634 11.1602 110.668 10.3936 113.334 10.3936C115.968 10.3936 117.951 11.1602 119.284 12.6936C120.651 14.1936 121.334 16.3602 121.334 19.1936V20.6436H116.134V18.8436C116.134 17.6436 115.901 16.7769 115.434 16.2436C114.968 15.6769 114.284 15.3936 113.384 15.3936C111.551 15.3936 110.634 16.5102 110.634 18.7436C110.634 20.0102 110.968 21.1936 111.634 22.2936C112.334 23.3936 113.584 24.7269 115.384 26.2936C117.684 28.2936 119.268 30.1102 120.134 31.7436C121.001 33.3769 121.434 35.2936 121.434 37.4936C121.434 40.3602 120.718 42.5602 119.284 44.0936C117.884 45.6269 115.834 46.3936 113.134 46.3936ZM133.788 39.5436H123.288V34.5436L133.288 10.8936H139.288V34.5436H141.888V39.5436H139.288V45.8936H133.788V39.5436ZM133.788 34.5436V20.8936H133.688L128.288 34.5436H133.788ZM152.407 46.3936C149.741 46.3936 147.707 45.6436 146.307 44.1436C144.907 42.6102 144.207 40.4269 144.207 37.5936V19.1936C144.207 16.3602 144.907 14.1936 146.307 12.6936C147.707 11.1602 149.741 10.3936 152.407 10.3936C155.074 10.3936 157.107 11.1602 158.507 12.6936C159.907 14.1936 160.607 16.3602 160.607 19.1936V22.1936H155.407V18.8436C155.407 16.5436 154.457 15.3936 152.557 15.3936C150.657 15.3936 149.707 16.5436 149.707 18.8436V37.9936C149.707 40.2602 150.657 41.3936 152.557 41.3936C154.457 41.3936 155.407 40.2602 155.407 37.9936V31.1436H152.657V26.1436H160.607V37.5936C160.607 40.4269 159.907 42.6102 158.507 44.1436C157.107 45.6436 155.074 46.3936 152.407 46.3936ZM179.296 46.3936C176.63 46.3936 174.613 45.6436 173.246 44.1436C171.88 42.6102 171.196 40.4269 171.196 37.5936V35.5936H176.396V37.9936C176.396 40.2602 177.346 41.3936 179.246 41.3936C180.18 41.3936 180.88 41.1269 181.346 40.5936C181.846 40.0269 182.096 39.1269 182.096 37.8936C182.096 36.4269 181.763 35.1436 181.096 34.0436C180.43 32.9102 179.196 31.5602 177.396 29.9936C175.13 27.9936 173.546 26.1936 172.646 24.5936C171.746 22.9602 171.296 21.1269 171.296 19.0936C171.296 16.3269 171.996 14.1936 173.396 12.6936C174.796 11.1602 176.83 10.3936 179.496 10.3936C182.13 10.3936 184.113 11.1602 185.446 12.6936C186.813 14.1936 187.496 16.3602 187.496 19.1936V20.6436H182.296V18.8436C182.296 17.6436 182.063 16.7769 181.596 16.2436C181.13 15.6769 180.446 15.3936 179.546 15.3936C177.713 15.3936 176.796 16.5102 176.796 18.7436C176.796 20.0102 177.13 21.1936 177.796 22.2936C178.496 23.3936 179.746 24.7269 181.546 26.2936C183.846 28.2936 185.43 30.1102 186.296 31.7436C187.163 33.3769 187.596 35.2936 187.596 37.4936C187.596 40.3602 186.88 42.5602 185.446 44.0936C184.046 45.6269 181.996 46.3936 179.296 46.3936ZM198.7 46.3936C196 46.3936 193.933 45.6269 192.5 44.0936C191.066 42.5602 190.35 40.3936 190.35 37.5936V19.1936C190.35 16.3936 191.066 14.2269 192.5 12.6936C193.933 11.1602 196 10.3936 198.7 10.3936C201.4 10.3936 203.466 11.1602 204.9 12.6936C206.333 14.2269 207.05 16.3936 207.05 19.1936V37.5936C207.05 40.3936 206.333 42.5602 204.9 44.0936C203.466 45.6269 201.4 46.3936 198.7 46.3936ZM198.7 41.3936C200.6 41.3936 201.55 40.2436 201.55 37.9436V18.8436C201.55 16.5436 200.6 15.3936 198.7 15.3936C196.8 15.3936 195.85 16.5436 195.85 18.8436V37.9436C195.85 40.2436 196.8 41.3936 198.7 41.3936ZM214.874 15.8936H209.124V10.8936H226.124V15.8936H220.374V45.8936H214.874V15.8936ZM228.787 10.8936H236.637L240.137 35.9436H240.237L243.737 10.8936H251.587V45.8936H246.387V19.3936H246.287L242.287 45.8936H237.687L233.687 19.3936H233.587V45.8936H228.787V10.8936ZM271.649 46.3936C268.949 46.3936 266.882 45.6269 265.449 44.0936C264.016 42.5602 263.299 40.3936 263.299 37.5936V19.1936C263.299 16.3936 264.016 14.2269 265.449 12.6936C266.882 11.1602 268.949 10.3936 271.649 10.3936C274.349 10.3936 276.416 11.1602 277.849 12.6936C279.282 14.2269 279.999 16.3936 279.999 19.1936V37.5936C279.999 40.3936 279.282 42.5602 277.849 44.0936C276.416 45.6269 274.349 46.3936 271.649 46.3936ZM271.649 41.3936C273.549 41.3936 274.499 40.2436 274.499 37.9436V18.8436C274.499 16.5436 273.549 15.3936 271.649 15.3936C269.749 15.3936 268.799 16.5436 268.799 18.8436V37.9436C268.799 40.2436 269.749 41.3936 271.649 41.3936ZM291.469 46.3936C288.835 46.3936 286.819 45.6436 285.419 44.1436C284.052 42.6436 283.369 40.5269 283.369 37.7936V18.9936C283.369 16.2602 284.052 14.1436 285.419 12.6436C286.819 11.1436 288.835 10.3936 291.469 10.3936C294.102 10.3936 296.102 11.1436 297.469 12.6436C298.869 14.1436 299.569 16.2602 299.569 18.9936V22.6936H294.369V18.6436C294.369 16.4769 293.452 15.3936 291.619 15.3936C289.785 15.3936 288.869 16.4769 288.869 18.6436V38.1936C288.869 40.3269 289.785 41.3936 291.619 41.3936C293.452 41.3936 294.369 40.3269 294.369 38.1936V32.8436H299.569V37.7936C299.569 40.5269 298.869 42.6436 297.469 44.1436C296.102 45.6436 294.102 46.3936 291.469 46.3936ZM302.859 10.8936H317.859V15.8936H308.359V25.1436H315.909V30.1436H308.359V40.8936H317.859V45.8936H302.859V10.8936ZM325.273 10.8936H332.723L338.423 45.8936H332.923L331.923 38.9436V39.0436H325.673L324.673 45.8936H319.573L325.273 10.8936ZM331.273 34.2936L328.823 16.9936H328.723L326.323 34.2936H331.273ZM341.092 10.8936H347.992L353.342 31.8436H353.442V10.8936H358.342V45.8936H352.692L346.092 20.3436H345.992V45.8936H341.092V10.8936ZM362.43 10.8936H367.93V45.8936H362.43V10.8936ZM376.299 10.8936H383.749L389.449 45.8936H383.949L382.949 38.9436V39.0436H376.699L375.699 45.8936H370.599L376.299 10.8936ZM382.299 34.2936L379.849 16.9936H379.749L377.349 34.2936H382.299Z",fill:"black"})]}),Ui=e=>{let{children:n,setMenuOpen:r}=e;const i=[];t.Children.map(n,((e,n)=>((e=>{if(t.isValidElement(e)){const t={href:e.props.children[0].props.href,text:e.props.children[0].props.children[0],subMenuItems:[],isShown:!1};if(e.props.children.length>1)for(let n=0;n<e.props.children[2].props.children.length;n++){const r={href:e.props.children[2].props.children[n].props.children[0].props.href,text:e.props.children[2].props.children[n].props.children[0].props.children[0]};t.subMenuItems.push(r)}i.push(t)}})(e),null)));const[a,o]=(0,t.useState)(i),s=a.map(((e,n)=>(0,bi.jsxs)(t.Fragment,{children:[0===e.subMenuItems.length&&(0,bi.jsx)("a",{href:e.href,onClick:()=>{window.scrollTo({top:0}),r(!1)},className:"font-semibold block text-sky transition-colors duration-300 md:px-2 lg:px-6 text-sm lg:text-base hover:text-black text-center",children:e.text}),e.subMenuItems.length>0&&(0,bi.jsxs)("div",{onMouseEnter:()=>{return t=e.text,void o((e=>e.map((e=>e.text===t?{...e,isShown:!0}:e))));var t},onMouseLeave:()=>{return t=e.text,void o((e=>e.map((e=>e.text===t?{...e,isShown:!1}:e))));var t},className:"relative",children:[(0,bi.jsxs)("a",{href:e.href,onClick:()=>{window.scrollTo({top:0}),r(!1)},className:"hidden md:block font-semibold text-sky transition-colors duration-300 md:px-2 lg:px-6 text-sm lg:text-base hover:text-black text-center min-w-full",children:[e.text,(0,bi.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 inline ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,bi.jsx)("path",{fillRule:"evenodd",d:"M6 8l4 4 4-4H6z"})})]}),(0,bi.jsxs)("button",{className:"block md:hidden font-semibold text-sky transition-colors duration-300 md:px-4 lg:px-6 hover:text-black text-center min-w-full",children:[e.text,(0,bi.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 inline ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,bi.jsx)("path",{fillRule:"evenodd",d:"M6 8l4 4 4-4H6z"})})]}),(0,bi.jsx)("div",{className:"hidden md:block",children:(0,bi.jsx)("div",{style:{display:e.isShown?"block":"none",left:"50%",transform:"translateX(-50%)"},className:"absolute bg-white rounded-md shadow-lg min-w-full w-fit text-center pt-4 pb-1 hidden md:inline-block z-50",children:e.subMenuItems.map(((e,t)=>(0,bi.jsx)("a",{href:e.href,onClick:()=>{window.scrollTo({top:0})},className:"block px-4 py-2 hover:text-blue-700 whitespace-nowrap",children:e.text},t)))})}),(0,bi.jsx)("div",{className:"block md:hidden",children:(0,bi.jsx)("div",{style:{display:e.isShown?"block":"none"},children:e.subMenuItems.map(((e,t)=>(0,bi.jsx)("a",{href:e.href,onClick:()=>{window.scrollTo({top:0}),r(!1)},className:"block px-4 py-2 text-sky hover:bg-blue-900 text-center",children:e.text},t)))})})]})]},n)));return(0,bi.jsx)(bi.Fragment,{children:s})},$i=()=>{const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(Ni).then((e=>e.text())).then((e=>i(e)))}),[]),(0,bi.jsx)("header",{className:"shadow-sm bg-white sticky top-0 z-40 flex-none w-full mx-auto",children:(0,bi.jsxs)("nav",{className:"container relative flex px-6 py-1 mx-auto text-black h-16",children:[(0,bi.jsx)("a",{href:"/",className:"flex items-center justify-start",children:(0,bi.jsxs)("div",{children:[(0,bi.jsx)(Hi,{}),(0,bi.jsx)("p",{className:"hidden",children:"FOSS4G SotM Oceania 2024"})]})}),(0,bi.jsxs)("div",{className:"flex items-center justify-end flex-grow",children:[(0,bi.jsxs)("button",{onClick:()=>n(!e),className:"md:hidden p-4",children:[(0,bi.jsx)("span",{style:{display:e?"none":"inline"},children:(0,bi.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,bi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})})}),(0,bi.jsx)("span",{style:{display:e?"inline":"none"},children:(0,bi.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,bi.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,bi.jsx)("div",{className:(e?"translate-x-0 opacity-100":"opacity-0 -translate-x-full")+" absolute inset-x-0 z-30 w-full px-4 py-8 mt-4 space-y-6 transition-all duration-300 ease-in-out text-black bg-white top-10 md:mt-0 md:p-0 md:top-0 md:relative md:bg-transparent md:w-auto md:opacity-100 md:translate-x-0 md:space-y-0 md:-mx-6 md:flex md:items-center md:justify-center",children:(0,bi.jsx)(xn,{options:{overrides:{ul:{component:e=>(0,bi.jsx)(Ui,{...e,setMenuOpen:n})}}},children:r})})]})]})})};var Zi={prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]},qi={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},Gi={prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]},Wi={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};function Xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(n),!0).forEach((function(t){Qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(Kn){s=!0,i=Kn}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||na(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e){return function(e){if(Array.isArray(e))return ra(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||na(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){if(e){if("string"===typeof e)return ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ra(e,t):void 0}}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ia=function(){},aa={},oa={},sa=null,la={mark:ia,measure:ia};try{"undefined"!==typeof window&&(aa=window),"undefined"!==typeof document&&(oa=document),"undefined"!==typeof MutationObserver&&(sa=MutationObserver),"undefined"!==typeof performance&&(la=performance)}catch(Ie){}var ca,ua,ha,da,pa,fa=(aa.navigator||{}).userAgent,ma=void 0===fa?"":fa,ga=aa,ya=oa,_a=sa,va=la,xa=(ga.document,!!ya.documentElement&&!!ya.head&&"function"===typeof ya.addEventListener&&"function"===typeof ya.createElement),ba=~ma.indexOf("MSIE")||~ma.indexOf("Trident/"),La="___FONT_AWESOME___",wa=16,ka="fa",Sa="svg-inline--fa",Ca="data-fa-i2svg",Ta="data-fa-pseudo-element",Ea="data-fa-pseudo-element-pending",Ia="data-prefix",Ma="data-icon",Pa="fontawesome-i2svg",Aa="async",za=["HTML","HEAD","STYLE","SCRIPT"],Da=function(){try{return!0}catch(Ie){return!1}}(),Ra="classic",Fa="sharp",Oa=[Ra,Fa];function Ba(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[Ra]}})}var Va=Ba((Qi(ca={},Ra,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Qi(ca,Fa,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),ca)),ja=Ba((Qi(ua={},Ra,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Qi(ua,Fa,{solid:"fass",regular:"fasr",light:"fasl"}),ua)),Na=Ba((Qi(ha={},Ra,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Qi(ha,Fa,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),ha)),Ha=Ba((Qi(da={},Ra,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Qi(da,Fa,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),da)),Ua=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,$a="fa-layers-text",Za=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,qa=Ba((Qi(pa={},Ra,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Qi(pa,Fa,{900:"fass",400:"fasr",300:"fasl"}),pa)),Ga=[1,2,3,4,5,6,7,8,9,10],Wa=Ga.concat([11,12,13,14,15,16,17,18,19,20]),Xa=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ka={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ya=new Set;Object.keys(ja[Ra]).map(Ya.add.bind(Ya)),Object.keys(ja[Fa]).map(Ya.add.bind(Ya));var Ja=[].concat(Oa,ta(Ya),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ka.GROUP,Ka.SWAP_OPACITY,Ka.PRIMARY,Ka.SECONDARY]).concat(Ga.map((function(e){return"".concat(e,"x")}))).concat(Wa.map((function(e){return"w-".concat(e)}))),Qa=ga.FontAwesomeConfig||{};if(ya&&"function"===typeof ya.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=ea(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=ya.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(Qa[r]=i)}))}var eo={styleDefault:"solid",familyDefault:"classic",cssPrefix:ka,replacementClass:Sa,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Qa.familyPrefix&&(Qa.cssPrefix=Qa.familyPrefix);var to=Ki(Ki({},eo),Qa);to.autoReplaceSvg||(to.observeMutations=!1);var no={};Object.keys(eo).forEach((function(e){Object.defineProperty(no,e,{enumerable:!0,set:function(t){to[e]=t,ro.forEach((function(e){return e(no)}))},get:function(){return to[e]}})})),Object.defineProperty(no,"familyPrefix",{enumerable:!0,set:function(e){to.cssPrefix=e,ro.forEach((function(e){return e(no)}))},get:function(){return to.cssPrefix}}),ga.FontAwesomeConfig=no;var ro=[];var io=wa,ao={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var oo="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function so(){for(var e=12,t="";e-- >0;)t+=oo[62*Math.random()|0];return t}function lo(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function co(e){return e.classList?lo(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function uo(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ho(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function po(e){return e.size!==ao.size||e.x!==ao.x||e.y!==ao.y||e.rotate!==ao.rotate||e.flipX||e.flipY}var fo=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function mo(){var e=ka,t=Sa,n=no.cssPrefix,r=no.replacementClass,i=fo;if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var go=!1;function yo(){no.autoAddCss&&!go&&(!function(e){if(e&&xa){var t=ya.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ya.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}ya.head.insertBefore(t,r)}}(mo()),go=!0)}var _o={mixout:function(){return{dom:{css:mo,insertCss:yo}}},hooks:function(){return{beforeDOMElementCreation:function(){yo()},beforeI2svg:function(){yo()}}}},vo=ga||{};vo[La]||(vo[La]={}),vo[La].styles||(vo[La].styles={}),vo[La].hooks||(vo[La].hooks={}),vo[La].shims||(vo[La].shims=[]);var xo=vo[La],bo=[],Lo=!1;function wo(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?uo(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(uo(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(wo).join(""),"</").concat(t,">")}function ko(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}xa&&((Lo=(ya.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ya.readyState))||ya.addEventListener("DOMContentLoaded",(function e(){ya.removeEventListener("DOMContentLoaded",e),Lo=1,bo.map((function(e){return e()}))})));var So=function(e,t,n,r){var i,a,o,s=Object.keys(e),l=s.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<l;i++)o=c(o,e[a=s[i]],a,e);return o};function Co(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function To(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function Eo(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=To(t);"function"!==typeof xo.hooks.addPack||r?xo.styles[e]=Ki(Ki({},xo.styles[e]||{}),i):xo.hooks.addPack(e,To(t)),"fas"===e&&Eo("fa",t)}var Io,Mo,Po,Ao=xo.styles,zo=xo.shims,Do=(Qi(Io={},Ra,Object.values(Na[Ra])),Qi(Io,Fa,Object.values(Na[Fa])),Io),Ro=null,Fo={},Oo={},Bo={},Vo={},jo={},No=(Qi(Mo={},Ra,Object.keys(Va[Ra])),Qi(Mo,Fa,Object.keys(Va[Fa])),Mo);function Ho(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~Ja.indexOf(n))?null:a}var Uo,$o=function(){var e=function(e){return So(Ao,(function(t,n,r){return t[r]=So(n,e,{}),t}),{})};Fo=e((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var r=t[2].filter((function(e){return"number"===typeof e}));r.forEach((function(t){e[t.toString(16)]=n}))}return e})),Oo=e((function(e,t,n){if(e[n]=n,t[2]){var r=t[2].filter((function(e){return"string"===typeof e}));r.forEach((function(t){e[t]=n}))}return e})),jo=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in Ao||no.autoFetchSvg,n=So(zo,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});Bo=n.names,Vo=n.unicodes,Ro=Ko(no.styleDefault,{family:no.familyDefault})};function Zo(e,t){return(Fo[e]||{})[t]}function qo(e,t){return(jo[e]||{})[t]}function Go(e){return Bo[e]||{prefix:null,iconName:null}}function Wo(){return Ro}Uo=function(e){Ro=Ko(e.styleDefault,{family:no.familyDefault})},ro.push(Uo),$o();var Xo=function(){return{prefix:null,iconName:null,rest:[]}};function Ko(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?Ra:t,r=Va[n][e],i=ja[n][e]||ja[n][r],a=e in xo.styles?e:null;return i||a||null}var Yo=(Qi(Po={},Ra,Object.keys(Na[Ra])),Qi(Po,Fa,Object.keys(Na[Fa])),Po);function Jo(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(Qi(t={},Ra,"".concat(no.cssPrefix,"-").concat(Ra)),Qi(t,Fa,"".concat(no.cssPrefix,"-").concat(Fa)),t),a=null,o=Ra;(e.includes(i[Ra])||e.some((function(e){return Yo[Ra].includes(e)})))&&(o=Ra),(e.includes(i[Fa])||e.some((function(e){return Yo[Fa].includes(e)})))&&(o=Fa);var s=e.reduce((function(e,t){var n=Ho(no.cssPrefix,t);if(Ao[t]?(t=Do[o].includes(t)?Ha[o][t]:t,a=t,e.prefix=t):No[o].indexOf(t)>-1?(a=t,e.prefix=Ko(t,{family:o})):n?e.iconName=n:t!==no.replacementClass&&t!==i[Ra]&&t!==i[Fa]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var s="fa"===a?Go(e.iconName):{},l=qo(e.prefix,e.iconName);s.prefix&&(a=null),e.iconName=s.iconName||l||e.iconName,e.prefix=s.prefix||e.prefix,"far"!==e.prefix||Ao.far||!Ao.fas||no.autoFetchSvg||(e.prefix="fas")}return e}),Xo());return(e.includes("fa-brands")||e.includes("fab"))&&(s.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(s.prefix="fad"),s.prefix||o!==Fa||!Ao.fass&&!no.autoFetchSvg||(s.prefix="fass",s.iconName=qo(s.prefix,s.iconName)||s.iconName),"fa"!==s.prefix&&"fa"!==a||(s.prefix=Wo()||"fas"),s}var Qo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=Ki(Ki({},e.definitions[t]||{}),i[t]),Eo(t,i[t]);var n=Na[Ra][t];n&&Eo(n,i[t]),$o()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&Ji(t.prototype,n),r&&Ji(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),es=[],ts={},ns={},rs=Object.keys(ns);function is(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(ts[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function as(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(ts[e]||[]).forEach((function(e){e.apply(null,n)}))}function os(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return ns[e]?ns[e].apply(null,t):void 0}function ss(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||Wo();if(t)return t=qo(n,t)||t,ko(ls.definitions,n,t)||ko(xo.styles,n,t)}var ls=new Qo,cs={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xa?(as("beforeI2svg",e),os("pseudoElements2svg",e),os("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===no.autoReplaceSvg&&(no.autoReplaceSvg=!0),no.observeMutations=!0,e=function(){ds({autoReplaceSvgRoot:n}),as("watch",t)},xa&&(Lo?setTimeout(e,0):bo.push(e))}},us={icon:function(e){if(null===e)return null;if("object"===Yi(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:qo(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=Ko(e[0]);return{prefix:n,iconName:qo(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(no.cssPrefix,"-"))>-1||e.match(Ua))){var r=Jo(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Wo(),iconName:qo(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=Wo();return{prefix:i,iconName:qo(i,e)||e}}}},hs={noAuto:function(){no.autoReplaceSvg=!1,no.observeMutations=!1,as("noAuto")},config:no,dom:cs,parse:us,library:ls,findIconDefinition:ss,toHtml:wo},ds=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?ya:e;(Object.keys(xo.styles).length>0||no.autoFetchSvg)&&xa&&no.autoReplaceSvg&&hs.dom.i2svg({node:t})};function ps(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return wo(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(xa){var t=ya.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function fs(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,l=e.title,c=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,p=void 0!==d&&d,f=r.found?r:n,m=f.width,g=f.height,y="fak"===i,_=[no.replacementClass,a?"".concat(no.cssPrefix,"-").concat(a):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),v={children:[],attributes:Ki(Ki({},h.attributes),{},{"data-prefix":i,"data-icon":a,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},x=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(v.attributes[Ca]=""),l&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(u||so())},children:[l]}),delete v.attributes.title);var b=Ki(Ki({},v),{},{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:s,styles:Ki(Ki({},x),h.styles)}),L=r.found&&n.found?os("generateAbstractMask",b)||{children:[],attributes:{}}:os("generateAbstractIcon",b)||{children:[],attributes:{}},w=L.children,k=L.attributes;return b.children=w,b.attributes=k,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(no.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ki(Ki({},i),{},{id:o}),children:r}]}]}(b):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(po(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=ho(Ki(Ki({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(b)}function ms(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,l=void 0!==s&&s,c=Ki(Ki(Ki({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});l&&(c[Ca]="");var u=Ki({},o.styles);po(i)&&(u.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?wa:n,i=e.height,a=void 0===i?wa:i,o=e.startCentered,s=void 0!==o&&o,l="";return l+=s&&ba?"translate(".concat(t.x/io-r/2,"em, ").concat(t.y/io-a/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/io,"em), calc(-50% + ").concat(t.y/io,"em)) "):"translate(".concat(t.x/io,"em, ").concat(t.y/io,"em) "),l+="scale(".concat(t.size/io*(t.flipX?-1:1),", ").concat(t.size/io*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=ho(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),a&&d.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),d}var gs=xo.styles;function ys(e){var t=e[0],n=e[1],r=ea(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(no.cssPrefix,"-").concat(Ka.GROUP)},children:[{tag:"path",attributes:{class:"".concat(no.cssPrefix,"-").concat(Ka.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(no.cssPrefix,"-").concat(Ka.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var _s={found:!1,width:512,height:512};function vs(e,t){var n=t;return"fa"===t&&null!==no.styleDefault&&(t=Wo()),new Promise((function(r,i){os("missingIconAbstract");if("fa"===n){var a=Go(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&gs[t]&&gs[t][e])return r(ys(gs[t][e]));!function(e,t){Da||no.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(Ki(Ki({},_s),{},{icon:no.showMissingIcons&&e&&os("missingIconAbstract")||{}}))}))}var xs=function(){},bs=no.measurePerformance&&va&&va.mark&&va.measure?va:{mark:xs,measure:xs},Ls='FA "6.4.0"',ws=function(e){bs.mark("".concat(Ls," ").concat(e," ends")),bs.measure("".concat(Ls," ").concat(e),"".concat(Ls," ").concat(e," begins"),"".concat(Ls," ").concat(e," ends"))},ks={begin:function(e){return bs.mark("".concat(Ls," ").concat(e," begins")),function(){return ws(e)}},end:ws},Ss=function(){};function Cs(e){return"string"===typeof(e.getAttribute?e.getAttribute(Ca):null)}function Ts(e){return ya.createElementNS("http://www.w3.org/2000/svg",e)}function Es(e){return ya.createElement(e)}function Is(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?Ts:Es:t;if("string"===typeof e)return ya.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(Is(e,{ceFn:n}))})),r}var Ms={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(Is(e),t)})),null===t.getAttribute(Ca)&&no.keepOriginalSource){var n=ya.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~co(t).indexOf(no.replacementClass))return Ms.replace(e);var r=new RegExp("".concat(no.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===no.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return wo(e)})).join("\n");t.setAttribute(Ca,""),t.innerHTML=a}};function Ps(e){e()}function As(e,t){var n="function"===typeof t?t:Ss;if(0===e.length)n();else{var r=Ps;no.mutateApproach===Aa&&(r=ga.requestAnimationFrame||Ps),r((function(){var t=!0===no.autoReplaceSvg?Ms.replace:Ms[no.autoReplaceSvg]||Ms.replace,r=ks.begin("mutate");e.map(t),r(),n()}))}}var zs=!1;function Ds(){zs=!0}function Rs(){zs=!1}var Fs=null;function Os(e){if(_a&&no.observeMutations){var t=e.treeCallback,n=void 0===t?Ss:t,r=e.nodeCallback,i=void 0===r?Ss:r,a=e.pseudoElementsCallback,o=void 0===a?Ss:a,s=e.observeMutationsRoot,l=void 0===s?ya:s;Fs=new _a((function(e){if(!zs){var t=Wo();lo(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!Cs(e.addedNodes[0])&&(no.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&no.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&Cs(e.target)&&~Xa.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(Ia):null,n=e.getAttribute?e.getAttribute(Ma):null;return t&&n}(e.target)){var r=Jo(co(e.target)),a=r.prefix,s=r.iconName;e.target.setAttribute(Ia,a||t),s&&e.target.setAttribute(Ma,s)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(no.replacementClass)&&i(e.target);var l}))}})),xa&&Fs.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Bs(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=Jo(co(e));return i.prefix||(i.prefix=Wo()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(Oo[e]||{})[t]}(i.prefix,e.innerText)||Zo(i.prefix,Co(e.innerText))),!i.iconName&&no.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function Vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=Bs(e),r=n.iconName,i=n.prefix,a=n.rest,o=function(e){var t=lo(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return no.autoA11y&&(n?t["aria-labelledby"]="".concat(no.replacementClass,"-title-").concat(r||so()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),s=is("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return Ki({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:ao,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:l,attributes:o}},s)}var js=xo.styles;function Ns(e){var t="nest"===no.autoReplaceSvg?Vs(e,{styleParser:!1}):Vs(e);return~t.extra.classes.indexOf($a)?os("generateLayersText",e,t):os("generateSvgReplacementMutation",e,t)}var Hs=new Set;function Us(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!xa)return Promise.resolve();var n=ya.documentElement.classList,r=function(e){return n.add("".concat(Pa,"-").concat(e))},i=function(e){return n.remove("".concat(Pa,"-").concat(e))},a=no.autoFetchSvg?Hs:Oa.map((function(e){return"fa-".concat(e)})).concat(Object.keys(js));a.includes("fa")||a.push("fa");var o=[".".concat($a,":not([").concat(Ca,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(Ca,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=lo(e.querySelectorAll(o))}catch(Ie){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var l=ks.begin("onTree"),c=s.reduce((function(e,t){try{var n=Ns(t);n&&e.push(n)}catch(Ie){Da||"MissingIcon"===Ie.name&&console.error(Ie)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){As(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function $s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ns(e).then((function(e){e&&As([e],t)}))}Oa.map((function(e){Hs.add("fa-".concat(e))})),Object.keys(Va[Ra]).map(Hs.add.bind(Hs)),Object.keys(Va[Fa]).map(Hs.add.bind(Hs)),Hs=ta(Hs);var Zs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?ao:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,s=void 0===o?null:o,l=t.maskId,c=void 0===l?null:l,u=t.title,h=void 0===u?null:u,d=t.titleId,p=void 0===d?null:d,f=t.classes,m=void 0===f?[]:f,g=t.attributes,y=void 0===g?{}:g,_=t.styles,v=void 0===_?{}:_;if(e){var x=e.prefix,b=e.iconName,L=e.icon;return ps(Ki({type:"icon"},e),(function(){return as("beforeDOMElementCreation",{iconDefinition:e,params:t}),no.autoA11y&&(h?y["aria-labelledby"]="".concat(no.replacementClass,"-title-").concat(p||so()):(y["aria-hidden"]="true",y.focusable="false")),fs({icons:{main:ys(L),mask:s?ys(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:b,transform:Ki(Ki({},ao),r),symbol:a,title:h,maskId:c,titleId:p,extra:{attributes:y,styles:v,classes:m}})}))}},qs={mixout:function(){return{icon:(e=Zs,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:ss(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:ss(i||{})),e(r,Ki(Ki({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=Us,e.nodeCallback=$s,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?ya:t,r=e.callback;return Us(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,s=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise((function(t,h){Promise.all([vs(n,a),l.iconName?vs(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var h=ea(l,2),d=h[0],p=h[1];t([e,fs({icons:{main:d,mask:p},prefix:a,iconName:n,transform:o,symbol:s,maskId:c,title:r,titleId:i,extra:u,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=ho(e.styles);return o.length>0&&(r.style=o),po(a)&&(t=os("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},Gs={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return ps({type:"layer"},(function(){as("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(no.cssPrefix,"-layers")].concat(ta(r)).join(" ")},children:n}]}))}}}},Ws={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,s=void 0===o?{}:o,l=t.styles,c=void 0===l?{}:l;return ps({type:"counter",content:e},(function(){return as("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,i=Ki(Ki(Ki({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=ho(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:r,extra:{attributes:s,styles:c,classes:["".concat(no.cssPrefix,"-layers-counter")].concat(ta(a))}})}))}}}},Xs={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?ao:n,i=t.title,a=void 0===i?null:i,o=t.classes,s=void 0===o?[]:o,l=t.attributes,c=void 0===l?{}:l,u=t.styles,h=void 0===u?{}:u;return ps({type:"text",content:e},(function(){return as("beforeDOMElementCreation",{content:e,params:t}),ms({content:e,transform:Ki(Ki({},ao),r),title:a,extra:{attributes:c,styles:h,classes:["".concat(no.cssPrefix,"-layers-text")].concat(ta(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if(ba){var s=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();a=l.width/s,o=l.height/s}return no.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,ms({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},Ks=new RegExp('"',"ug"),Ys=[1105920,1112319];function Js(e,t){var n="".concat(Ea).concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=lo(e.children).filter((function(e){return e.getAttribute(Ta)===t}))[0],o=ga.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(Za),l=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(a&&!s)return e.removeChild(a),r();if(s&&"none"!==c&&""!==c){var u=o.getPropertyValue("content"),h=~["Sharp"].indexOf(s[2])?Fa:Ra,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?ja[h][s[2].toLowerCase()]:qa[h][l],p=function(e){var t=e.replace(Ks,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=Ys[0]&&n<=Ys[1],i=2===t.length&&t[0]===t[1];return{value:Co(i?t[0]:t),isSecondary:r||i}}(u),f=p.value,m=p.isSecondary,g=s[0].startsWith("FontAwesome"),y=Zo(d,f),_=y;if(g){var v=function(e){var t=Vo[e],n=Zo("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(f);v.iconName&&v.prefix&&(y=v.iconName,d=v.prefix)}if(!y||m||a&&a.getAttribute(Ia)===d&&a.getAttribute(Ma)===_)r();else{e.setAttribute(n,_),a&&e.removeChild(a);var x={iconName:null,title:null,titleId:null,prefix:null,transform:ao,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},b=x.extra;b.attributes[Ta]=t,vs(y,d).then((function(i){var a=fs(Ki(Ki({},x),{},{icons:{main:i,mask:Xo()},prefix:d,iconName:_,extra:b,watchable:!0})),o=ya.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return wo(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function Qs(e){return Promise.all([Js(e,"::before"),Js(e,"::after")])}function el(e){return e.parentNode!==document.head&&!~za.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Ta)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function tl(e){if(xa)return new Promise((function(t,n){var r=lo(e.querySelectorAll("*")).filter(el).map(Qs),i=ks.begin("searchPseudoElements");Ds(),Promise.all(r).then((function(){i(),Rs(),t()})).catch((function(){i(),Rs(),n()}))}))}var nl=!1,rl=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},il={mixout:function(){return{parse:{transform:function(e){return rl(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=rl(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:Ki({},c.outer),children:[{tag:"g",attributes:Ki({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Ki(Ki({},t.icon.attributes),c.path)}]}]}}}},al={x:0,y:0,width:"100%",height:"100%"};function ol(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var sl={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?Jo(n.split(" ").map((function(e){return e.trim()}))):Xo();return r.prefix||(r.prefix=Wo()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,s=e.transform,l=i.width,c=i.icon,u=a.width,h=a.icon,d=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:Ki(Ki({},al),{},{fill:"white"})},f=c.children?{children:c.children.map(ol)}:{},m={tag:"g",attributes:Ki({},d.inner),children:[ol(Ki({tag:c.tag,attributes:Ki(Ki({},c.attributes),d.path)},f))]},g={tag:"g",attributes:Ki({},d.outer),children:[m]},y="mask-".concat(o||so()),_="clip-".concat(o||so()),v={tag:"mask",attributes:Ki(Ki({},al),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,g]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:_},children:(t=h,"g"===t.tag?t.children:[t])},v]};return n.push(x,{tag:"rect",attributes:Ki({fill:"currentColor","clip-path":"url(#".concat(_,")"),mask:"url(#".concat(y,")")},al)}),{children:n,attributes:r}}}},ll={provides:function(e){var t=!1;ga.matchMedia&&(t=ga.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:Ki(Ki({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=Ki(Ki({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Ki(Ki({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:Ki(Ki({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ki(Ki({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:Ki(Ki({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ki(Ki({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:Ki(Ki({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ki(Ki({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;es=e,ts={},Object.keys(ns).forEach((function(e){-1===rs.indexOf(e)&&delete ns[e]})),es.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===Yi(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){ts[e]||(ts[e]=[]),ts[e].push(r[e])}))}e.provides&&e.provides(ns)}))}([_o,qs,Gs,Ws,Xs,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=tl,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?ya:t;no.searchPseudoElements&&tl(n)}}},{mixout:function(){return{dom:{unwatch:function(){Ds(),nl=!0}}}},hooks:function(){return{bootstrap:function(){Os(is("mutationObserverCallbacks",{}))},noAuto:function(){Fs&&Fs.disconnect()},watch:function(e){var t=e.observeMutationsRoot;nl?Rs():Os(is("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},il,sl,ll,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:hs});var cl=hs.parse,ul=hs.icon,hl=n(173),dl=n.n(hl);function pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(n),!0).forEach((function(t){gl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ml(e){return ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(e)}function gl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yl(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _l(e){return function(e){if(Array.isArray(e))return vl(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return vl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xl(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var bl=["style"];var Ll=!1;try{Ll=!0}catch(Ie){}function wl(e){return e&&"object"===ml(e)&&e.prefix&&e.iconName&&e.icon?e:cl.icon?cl.icon(e):null===e?null:e&&"object"===ml(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function kl(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?gl({},e,t):{}}var Sl=t.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,a=e.className,o=e.title,s=e.titleId,l=e.maskId,c=wl(n),u=kl("classes",[].concat(_l(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,s=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,p=e.inverse,f=e.border,m=e.listItem,g=e.flip,y=e.size,_=e.rotation,v=e.pull,x=(gl(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":p,"fa-border":f,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(y),"undefined"!==typeof y&&null!==y),gl(t,"fa-rotate-".concat(_),"undefined"!==typeof _&&null!==_&&0!==_),gl(t,"fa-pull-".concat(v),"undefined"!==typeof v&&null!==v),gl(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(x).map((function(e){return x[e]?e:null})).filter((function(e){return e}))}(e)),_l(a.split(" ")))),h=kl("transform","string"===typeof e.transform?cl.transform(e.transform):e.transform),d=kl("mask",wl(r)),p=ul(c,fl(fl(fl(fl({},u),h),d),{},{symbol:i,title:o,titleId:s,maskId:l}));if(!p)return function(){var e;!Ll&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var f=p.abstract,m={ref:t};return Object.keys(e).forEach((function(t){Sl.defaultProps.hasOwnProperty(t)||(m[t]=e[t])})),Cl(f[0],m)}));Sl.displayName="FontAwesomeIcon",Sl.propTypes={beat:dl().bool,border:dl().bool,beatFade:dl().bool,bounce:dl().bool,className:dl().string,fade:dl().bool,flash:dl().bool,mask:dl().oneOfType([dl().object,dl().array,dl().string]),maskId:dl().string,fixedWidth:dl().bool,inverse:dl().bool,flip:dl().oneOf([!0,!1,"horizontal","vertical","both"]),icon:dl().oneOfType([dl().object,dl().array,dl().string]),listItem:dl().bool,pull:dl().oneOf(["right","left"]),pulse:dl().bool,rotation:dl().oneOf([0,90,180,270]),shake:dl().bool,size:dl().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:dl().bool,spinPulse:dl().bool,spinReverse:dl().bool,symbol:dl().oneOfType([dl().bool,dl().string]),title:dl().string,titleId:dl().string,transform:dl().oneOfType([dl().string,dl().object]),swapOpacity:dl().bool},Sl.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Cl=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=xl(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[xl(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,l=yl(r,bl);return a.attrs.style=fl(fl({},a.attrs.style),s),t.apply(void 0,[n.tag,fl(fl({},a.attrs),l)].concat(_l(i)))}.bind(null,t.createElement);const Tl=n.p+"static/media/acknowledgement-country.75e597155aab7bce6266.md",El=()=>{const[e,n]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(Tl).then((e=>e.text())).then((e=>n(e)))}),[]),(0,bi.jsxs)("div",{children:[(0,bi.jsx)("section",{className:"bg-gray-900 text-sm text-white",children:(0,bi.jsx)("div",{className:"container mx-auto px-4 py-8 text-italic text-center prose-sm",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:e})})}),(0,bi.jsx)("footer",{className:"bg-blue-950",children:(0,bi.jsxs)("div",{className:"container p-6 mx-auto",children:[(0,bi.jsxs)("div",{className:"lg:flex",children:[(0,bi.jsx)("div",{className:"w-full -mx-6 lg:w-2/5",children:(0,bi.jsxs)("div",{className:"px-6",children:[(0,bi.jsx)("p",{className:"max-w-sm mt-2 text-gray-400",children:"Join us as we discover what's new in FOSS4G!"}),(0,bi.jsxs)("div",{className:"flex mt-6 -mx-2",children:[(0,bi.jsx)("a",{href:"https://twitter.com/foss4g_oceania/",target:"_blank",rel:"noreferrer",className:"mx-2 transition-colors duration-300 text-gray-300 hover:text-blue-500 hover:text-blue-400","aria-label":"Twitter",children:(0,bi.jsx)(Sl,{icon:Wi})}),(0,bi.jsx)("a",{href:"https://www.youtube.com/channel/UCbqmnF77HxLCmO9d7LrEbpg",target:"_blank",rel:"noreferrer",className:"mx-2 transition-colors duration-300 text-gray-300 hover:text-blue-500 hover:text-blue-400","aria-label":"YouTube",children:(0,bi.jsx)(Sl,{icon:Gi})}),(0,bi.jsx)("a",{href:"https://www.linkedin.com/company/18396595/",target:"_blank",rel:"noreferrer",className:"mx-2 transition-colors duration-300 text-gray-300 hover:text-blue-500 hover:text-blue-400","aria-label":"LinkedIn",children:(0,bi.jsx)(Sl,{icon:Zi})}),(0,bi.jsx)("a",{href:"https://www.facebook.com/FOSS4GOceania/",target:"_blank",rel:"noreferrer",className:"mx-2 transition-colors duration-300 text-gray-300 hover:text-blue-500 hover:text-blue-400","aria-label":"Facebook",children:(0,bi.jsx)(Sl,{icon:qi})})]})]})}),(0,bi.jsx)("div",{className:"mt-6 lg:mt-0 lg:flex-1",children:(0,bi.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[(0,bi.jsxs)("div",{children:[(0,bi.jsx)("h3",{className:"uppercase text-white",children:"About"}),(0,bi.jsx)("a",{href:"https://www.osgeo.org/",target:"_blank",rel:"noreferrer",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"Open Source Geospatial Foundation (OSGeo)"}),(0,bi.jsx)("a",{href:"https://osmfoundation.org/",target:"_blank",rel:"noreferrer",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"OpenStreetMap Foundation"})]}),(0,bi.jsxs)("div",{children:[(0,bi.jsx)("h3",{className:"uppercase text-white",children:"Related Conferences"}),(0,bi.jsx)("a",{href:"https://www.osgeo.org/events/foss4g-2024-belem-brazil/",target:"_blank",rel:"noreferrer",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"Global FOSS4G: Bel\xe9m, Brazil"}),(0,bi.jsx)("a",{href:"https://foss4g-perth.org/",target:"_blank",rel:"noreferrer",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"FOSS4G Perth"})]}),(0,bi.jsxs)("div",{children:[(0,bi.jsx)("h3",{className:"uppercase text-white",children:"Event Resources"}),(0,bi.jsx)("a",{href:"/#/code-of-conduct",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"Code Of Conduct"})]}),(0,bi.jsxs)("div",{children:[(0,bi.jsx)("h3",{className:"uppercase text-white",children:"Contact"}),(0,bi.jsx)("a",{href:"#/mailing-list",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"Join our Mailing List"}),(0,bi.jsx)("a",{href:"mailto:chair@foss4g-oceania.org",className:"block mt-2 text-sm text-gray-400 hover:underline",children:"chair@foss4g-oceania.org"})]})]})})]}),(0,bi.jsx)("hr",{className:"h-px my-6 bg-gray-200 border-none bg-gray-700"}),(0,bi.jsx)("div",{children:(0,bi.jsx)("p",{className:"text-center text-gray-500 text-gray-400",children:"\xa9 FOSS4G Oceania - All rights reserved"})})]})})]})},Il=()=>(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)($i,{}),(0,bi.jsx)(ae,{}),(0,bi.jsx)(El,{})]}),Ml=()=>(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("div",{className:" bg-blue-950",children:(0,bi.jsx)("section",{style:{backgroundImage:"url('/imgs/sunset.jpeg')",backgroundSize:"cover",backgroundPosition:"center 30%"},className:"relative flex items-center justify-center h-64 bg-gray-100 bg-no-repeat bg-cover bg-center"})}),(0,bi.jsxs)("div",{className:"p-6",children:[(0,bi.jsx)("iframe",{title:"mailjet-form","data-w-type":"embedded",src:"https://064rp.mjt.lu/wgt/064rp/xlvi/form?c=7f052458",style:{height:"700px",width:"100%",border:"0"}}),(0,bi.jsx)("script",{type:"text/javascript",src:"https://app.mailjet.com/pas-nc-embedded-v1.js"})]})]}),Pl=e=>{var n,r,i;const a=X().pathname.slice(1),[o,s]=(0,t.useState)("");return(0,t.useEffect)((()=>{s(""),fetch(e.markdownUrl).then((e=>e.text())).then((e=>s(e)))}),[e.markdownUrl]),(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("div",{className:"bg-gray-100",children:(0,bi.jsx)("section",{style:{backgroundRepeat:"no-repeat",backgroundImage:`url('${e.headerImg.url}')`,backgroundSize:"cover",backgroundPosition:`${null!==(n=e.headerImg.positionX)&&void 0!==n?n:"center"} ${null!==(r=e.headerImg.positionY)&&void 0!==r?r:"center"}`,height:null!==(i=e.headerImg.height)&&void 0!==i?i:"16rem",maxWidth:1920},className:"m-auto relative flex items-center justify-center"})}),(0,bi.jsx)("div",{className:"container mx-auto p-6",children:(0,bi.jsx)("section",{className:"mt-8 prose-base max-w-none",id:a.replace("/","-"),children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:o})})}),e.showMap&&(0,bi.jsx)("div",{style:{marginLeft:"calc((-100vw + 100%) / 2)"},className:"-mb-6 mt-6",children:(0,bi.jsx)(wi,{width:"100vw",height:400,initialViewState:{longitude:147.32031,latitude:-42.88898,zoom:12.3}})})]})},Al=()=>(0,bi.jsx)("section",{className:"bg-white",children:(0,bi.jsx)("div",{className:"container px-6 py-16 mx-auto text-center",children:(0,bi.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,bi.jsx)("h1",{className:"text-3xl font-bold text-[#343D33] md:text-4xl",children:"Seems you've lost your way!"}),(0,bi.jsx)("p",{className:"mt-6 text-[#343D33]",children:"We haven't created a page for this URL, please check out our other pages from the menu or contact us."}),(0,bi.jsx)("div",{className:"flex justify-center mt-6",children:(0,bi.jsx)("a",{href:"mailto:admin@foss4g-oceania.org",className:"px-4 py-2 text-white transition-colors duration-300 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",children:"Send Message"})})]})})}),zl=n.p+"static/media/organisers-intro.98ba5e379266c67d795d.md",Dl=[{name:"Alex Leith",description:"Alex is an open geospatial technologist with extensive expertise in software development, cloud infrastructure, and program governance. Throughout his career, Alex's focus has been on making data more easily accessible. By enabling simpler access to data, he believes we can drive positive change and continue to develop sustainably.",role:"Conference Chair",image:"/imgs/team/alex.jpg",links:[{name:"Auspatious",link:"https://auspatious.com"}]},{name:"Dorothy Pion",description:"Dorothy works in Geological Survey at the Mineral Resources Authority in Papua New Guinea, specialising in GIS analysis, remote sensing, and geological mapping. She is passionate about mentoring and actively participates in the GCA mentoring program each year and is involved in training of new staff at the MRA in QGIS, ensuring everyone stays up to date with the latest advances in GIS/RS technology. Outside of work, she enjoys cooking, reading, and spending time gardening.",role:"Chair: Travel Grant Program",image:"/imgs/team/dorothy.jpg",links:[{name:"Mineral Resources Authority (PNG)",link:"https://ww.mra.gov.pg "}]},{name:"Em Hain",description:"Em works at North Road where she assists in the development and integration of QGIS. This is her 3rd year as Program Chair - not planned as she has subbed in for the amazing Simon Nitz who unfortunately needed to step away whilst he got more amazing (#becoming-bionic-man). She is also the contact for QGIS Australia and helps wrangle that group. Herding cats through spreadsheets is her superpower.",role:"Chair: Program, Website, Volunteers",image:"/imgs/team/em.jpg",links:[{name:" North Road",link:"https://north-road.com/"},{name:"QGIS Australia",link:"https://qgis-australia.org/"}]},{name:"Nick Forbes-Smith",description:"Nick is a Technical Leader and Software Engineer specialising in building Web platforms for data visualisation. He focuses on making data accessible and understandable to all, regardless of expertise.\n\nNick is committed to open data and open-source tools, and actively contributes to these communities. He\u2019s driven by projects that create meaningful, positive change.",role:"Chair: Sponsorship, Venues/Events, Website",image:"/imgs/team/nick.jpg",links:[{name:"Self Employed",link:"https://www.linkedin.com/in/nick-forbes-smith/"},{name:"Terria",link:"https://terria.io/"}]},{name:"Dawn Hendrick",description:"I have more than 40 years of cartographic experience starting my professional career as a geologist/seismic geophysicist. Since moving to Tasmania fourteen years ago I have continued to run my own consultancy DH Geodata Services compiling maps for mining, engineering and environmental companies both in Australia and overseas. I am a retired Spatial Science Teacher from TafeNSW.  I have run courses using QGIS for the SSSI (now GCA) and for commercial operations with Alex Leith.\nI attended the first FOSS4G SotM Oceania conference in Melbourne back in 2018 and have attended every year (except 2022 in Fiji) since then.  During COVID I organised the Hobart Hub for 2020 and 2021. I use QGIS software with two volunteer organisations who would not have a mapping capability otherwise.",role:"Communications, Merch",image:"/imgs/team/dawn.jpg"},{name:"Leo Ghignone",description:"Leo is a Data Engineer with a background in Machine Learning, currently working for the Australian Integrated Marine Observing System to manage data from the seas all around Australia. He loves new challenges and new technologies, and strives to make data open and available to all.\nHe had his first experience with FOSS4G last year, got fascinated by the community and is now trying to contribute to it.",role:"Volunteers, Program, Merch",image:"/imgs/team/leo.jpg",links:[{name:"Integrated Marine Observing System (IMOS)",link:"https://imos.org.au/"}]},{name:"Elisa Puccioni",description:"Elisa is the current chair of OsGeo Oceania board and has been contributing to the community since 2019, serving first as board member, then as Grant committee chair and now as the board chair.\n\nElisa was born in Italy and moved to New Zealand in 2008, where she currently resides. She has over 18 years of experience in GIS and database administration and has been working with most of the proprietors and open-source GIS packages. She is a great supporter of GIS open-source software as she strongly believes that everybody should be able to know and use GIS, especially people belonging to minority groups or living in remote areas.",role:"Travel Grant Program",image:"/imgs/team/eli.jpg",links:[{name:"Kenex",link:"https://kenex.com.au/"}]},{name:"Colin Mazengarb",description:"Colin is a semi-retired geologist and GIS specialist based in Hobart.\n\nColin has worked for geological survey organisations in New Zealand, Oklahoma and Tasmania, undertaking regional mapping and natural hazards studies. Since 2016 he has run in-person and online training courses teaching QGIS to geotechnical practitioners in Australia, New Zealand and Nepal. He is currently undertaking a geological mapping project in NZ and will be presenting a talk on this at the conference.",role:"Committee Member",image:"/imgs/team/colin.jpg",links:[{name:"Email",link:"mailto:gis4geotechs@outlook.com"}]},{name:"Michel M Nzikou",description:"Michel works as a research fellow at the Center of Exploration Targeting (CET), at the University of Western Australia (UWA).  He is a data enthusiast with a focus on building QGIS plugins for Geological and Geophysical 3D modelling. A part being an organising committee member, he is the ASEG WA Branch president and part of the MAG 24 committee. Outside work, he enjoys playing volleyball and is also a team member of Fury River Dragon boat for 4 years.",role:"Committee Member",image:"/imgs/team/michel.jpg",links:[{name:"Centre for Exploration Targeting (cet.edu.au)",link:"https://www.cet.edu.au/personnel/michel-nzikou-mamboukou/"}]},{name:"Ponciano da Costa de Jesus",description:"Ponciano, or Ponsy, is the CEO and founder of the Geographic Information System Group (G-SIG). He founded G-SIG in 2022 as a youth-led organization dedicated to advancing geospatial technology in addressing critical environmental challenges such as natural disasters, climate change, and biodiversity conservation in Timor-Leste. Within G-SIG, he also serves as the principal GIS consultant, specializing in QGIS, OpenStreetMap (OSM), and ArcGIS, and facilitates training for NGOs, youth, and students interested in utilizing this technology.",role:"Volunteer",image:"/imgs/team/ponciano.jpg",links:[{name:"Geographic Information System Group (G-SIG).",link:"https://gis.tl/"}]}],Rl=[{link:"https://auspatious.com/",imgSrc:"./imgs/sponsors/auspatious.png",name:"Auspatious"},{link:"https://mra.gov.pg/",imgSrc:"./imgs/sponsors/mra.jpeg",name:"Mineral Resources Authority of Papua New Guinea"},{link:"https://north-road.com/",imgSrc:"./imgs/sponsors/northroad.png",name:"North Road"}],Fl=()=>{const[e,n]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(zl).then((e=>e.text())).then((e=>n(e)))}),[]),(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("section",{style:{backgroundImage:"url('/imgs/dinner.jpg')",backgroundSize:"cover",backgroundPosition:"center 25%"},className:"relative flex items-center justify-center h-64 bg-gray-100 bg-no-repeat bg-cover bg-center"}),(0,bi.jsxs)("div",{className:"container mx-auto p-6",children:[(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:e})}),(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-sm max-w-none",children:(0,bi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:Dl.map((e=>(0,bi.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[(0,bi.jsx)("div",{className:"flex items-center justify-center",children:e.image?(0,bi.jsx)("img",{src:e.image,alt:e.name,className:"w-48 h-48 rounded-full object-cover m-0"}):(0,bi.jsx)("div",{className:"w-48 h-48 rounded-full bg-gray-200"})}),(0,bi.jsxs)("div",{className:"mt-4",children:[(0,bi.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,bi.jsx)("p",{className:"text-sm text-gray-600",children:e.role}),(0,bi.jsx)(xn,{options:{overrides:Ei},children:e.description}),e.links&&(0,bi.jsx)("div",{className:"mt-4 flex gap-2 flex-col",children:e.links.map((e=>(0,bi.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",className:"text-blue-500 hover:underline",children:e.name},e.name)))})]})]},e.name)))})}),(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(Pi,{title:"Supporting Organisations",description:"We would like to extend our thanks to these companies for supporting their employees who have been involved in the planning of this conference.",cards:Rl})})]})]})},Ol=e=>{var n,r,i,a,o;let{open:s,setIsOpen:l,event:c}=e;const u=(0,t.useRef)(null),h=new Date(null!==(n=null===c||void 0===c?void 0:c.date)&&void 0!==n?n:0).toLocaleDateString("en-US",{weekday:"long"}),d=new Date(null!==(r=null===c||void 0===c?void 0:c.date)&&void 0!==r?r:0).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),p=Hl(null!==(i=null===c||void 0===c?void 0:c.duration)&&void 0!==i?i:"");return(0,t.useEffect)((()=>{var e;s?(document.body.style.overflow="hidden",null===(e=u.current)||void 0===e||e.scrollTo(0,0)):document.body.style.overflow="auto"}),[s]),(0,bi.jsx)("div",{className:"fixed top-0 left-0 p-2 items-center justify-center overflow-hidden z-40 bg-black bg-opacity-50 h-screen w-screen","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",style:{transition:"opacity .15s ease-in-out",display:s&&c?"flex":"none",opacity:s&&c?1:0},onClick:()=>l(!s),children:(0,bi.jsx)("div",{className:"flex items-center justify-center text-center max-w-full",children:(0,bi.jsxs)("div",{ref:u,style:{flex:"1 1 auto"},className:"relative p-4 overflow-y-auto text-left align-bottom transition-all transform rounded-lg shadow-xl bg-gray-50 sm:align-middle lg:max-w-6xl w-full sm:p-6 h-full max-h-[calc(100vh-1rem)]",onClick:e=>{e.stopPropagation()},children:[c&&(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsxs)("div",{className:"flex flex-wrap justify-center w-full gap-2",children:[(0,bi.jsxs)("div",{className:"mt-4 md:mt-0 flex flex-col w-full gap-2",children:[(0,bi.jsx)("h3",{className:"m-0 font-bold leading-6 capitalize text-base sm:text-xl lg:text-2xl",id:"modal-title",children:c.title}),(0,bi.jsxs)("div",{className:"p-0 prose-base md:prose-xl text-gray-500",children:[h," ",d," (",p,") in the ",c.room]}),c.abstract&&(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("div",{className:"p-0 prose-sm md:prose-base font-semibold w-full overflow-x-auto",children:(0,bi.jsx)(xn,{options:{overrides:{...Ei}},children:null===(a=c.abstract)||void 0===a?void 0:a.replace("\n","\n\n")})}),(0,bi.jsx)("div",{className:"divide-y w-full h-1 border-gray-300 border-solid border-b"})]}),(null===c||void 0===c?void 0:c.description)&&(0,bi.jsxs)("div",{className:"w-full m-0 prose-sm md:prose-base overflow-x-auto",children:[s&&c.logo&&(0,bi.jsx)("img",{src:c.logo,alt:"Event logo",className:"m-0 md:max-w-[50%] md:max-h-[50vh] md:float-right pt-2 md:py-6 md:pl-2"}),(0,bi.jsx)(xn,{options:{overrides:{...Ei}},children:c.description.replace("\n","\n\n")})]})]}),(0,bi.jsx)("a",{href:c.url,target:"_black",className:"text-left w-full underline text-blue-500",children:"Open in pretalx"}),(0,bi.jsx)("div",{className:"divide-y w-full h-1 border-gray-300 border-solid border-b"})]}),(0,bi.jsx)("div",{className:"flex flex-col mt-10 gap-4",children:null===(o=c.persons)||void 0===o?void 0:o.map(((e,t)=>{var n,r;return(0,bi.jsxs)("div",{className:"flex flex-row gap-4",children:[s&&e.avatar?(0,bi.jsx)("img",{className:"hidden sm:inline object-cover rounded-md h-36 w-36 m-0 mt-2 flex-shrink-0",src:e.avatar,alt:""}):(0,bi.jsx)("div",{className:"hidden sm:block rounded-md h-36 w-36 m-0 mt-2 bg-gray-300 flex-shrink-0",children:"\xa0"}),(0,bi.jsxs)("div",{className:"flex flex-col prose-sm",children:[(0,bi.jsx)("h3",{className:"mt-0 p-0 font-bold",children:e.public_name}),s&&e.avatar&&(0,bi.jsx)("img",{className:"sm:hidden object-cover rounded-md h-36 w-36 my-2 flex-shrink-0",src:e.avatar,alt:""}),(0,bi.jsx)("div",{className:"w-full m-0",children:(0,bi.jsx)(xn,{options:{overrides:{...Ei}},children:null!==(n=null===(r=e.biography)||void 0===r?void 0:r.replace("\n","\n\n"))&&void 0!==n?n:"No bio."})})]})]},t)}))})]}),(0,bi.jsxs)("div",{className:"mt-5 sm:flex sm:items-center sm:-mx-2",children:[(0,bi.jsx)("button",{onClick:()=>l(!s),className:"w-full px-4 py-2 text-sm font-medium tracking-wide capitalize transition-colors duration-300 transform border rounded-md mb-16 sm:mb-0 sm:mx-2 text-gray-700 border-gray-200 hover:bg-gray-300 focus:outline-none focus:ring focus:ring-gray-700 focus:ring-opacity-40",children:"Close"}),(0,bi.jsx)("button",{onClick:()=>l(!s),className:"absolute right-4 top-4 w-4 h-4 transition-colors rounded duration-300 transform text-gray-400 hover:text-gray-700 focus:outline-none focus:ring focus:ring-gray-700 focus:ring-opacity-40",children:(0,bi.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8",children:[(0,bi.jsx)("title",{children:"Shape + Shape"}),(0,bi.jsxs)("g",{"fill-rule":"evenodd",children:[(0,bi.jsx)("path",{d:"M2.048.77l5.18 5.182L5.953 7.23.77 2.048 2.048.77z",fill:"currentColor"}),(0,bi.jsx)("path",{d:"M5.952.77L7.23 2.05 2.048 7.23.77 5.952 5.953.772z",fill:"currentColor"})]})]})})]})]})})})},Bl={Workshop:"#ef8427",Ceremony:"#4ca57b",Keynote:"#aa1456",Talk:"#1f4182",Panel:"#6ac2ea","Lightning talk":"#fab919","Associated Event":"#9a5bd7","Community Day Event":"#ea4ced",Mapathon:"#d62e2e",lunch:"#16a34a",Break:"#AC75EF",default:"rgb(23 37 84)"},Vl=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},jl=e=>e<.125?1:e<1?5:e<2?10:30,Nl=e=>{const t=Math.floor(e/60),n=e%60,r=t>=12?"PM":"AM";return`${t%12||12}:${0===n?"00":n.toString().padStart(2,"0")} ${r}`},Hl=e=>{const[t,n]=e.split(":").map(Number);return 0===t?`${n}min`:0===n?`${t}h`:`${t}h${n}min`},Ul=e=>{let{event:n,time:r,height:i,className:a,showRoom:o,showAbstract:s,onClick:l}=e;const[c,u]=(0,t.useState)(!1),h=(d=n.track)&&Bl[d]||Bl.default;var d;return(0,bi.jsx)("div",{onClick:l,className:`bg-white border-[1px] border-solid rounded-md ${a} cursor-pointer z-10 overflow-hidden`,style:{top:"0px",height:i,width:"95%",zIndex:10,userSelect:"none",marginTop:"2px",color:"white",borderColor:c?h:"rgb(229 231 235)"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:n.id>0?(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsxs)("div",{className:"text-xs text-white py-1 px-2 rounded-t flex flex-nowrap items-center justify-center",style:{backgroundColor:h},children:[(0,bi.jsx)("span",{className:"font-bold flex-1 flex-grow",children:Nl(r)}),o&&n.room&&(0,bi.jsx)("span",{className:"font-medium flex-1 flex-grow-[3] text-center",children:n.room}),(0,bi.jsx)("span",{className:"flex-1 flex-grow text-right",children:Hl(n.duration)})]}),(0,bi.jsx)("div",{className:"font-semibold text-gray-900 px-2 pt-2 mb-2 text-xs xl:text-sm",children:n.title}),s&&(null===n||void 0===n?void 0:n.abstract)&&(0,bi.jsx)("div",{className:"max-w-none m-0 text-gray-600 p-2 prose pt-0 text-xs leading-5",children:(0,bi.jsx)(xn,{options:{overrides:{...Ei}},children:n.abstract.replace("\n","\n\n")})}),n.persons&&n.persons.length>0&&(0,bi.jsx)("div",{className:"text-gray-900 font-medium text-xs sm:test-base px-2 mb-2 pr-20",children:n.persons&&n.persons.length>0?n.persons.map((e=>e.public_name)).join(", "):""}),(0,bi.jsx)("div",{className:"absolute text-xs font-bold py-[6px] px-2 bottom-0 right-0",style:{color:h},children:n.track})]}):(0,bi.jsx)("span",{children:n.title})},n.id)};const $l=e=>{let{day:n}=e;const{events:r,timeSlots:i}=(0,t.useMemo)((()=>function(e){let t={};Object.keys(e.rooms).forEach((n=>{e.rooms[n].forEach((e=>{e.room=n;let r="";void 0!==e.date&&(r=e.date.split("T")[1]),null!==e.start&&(r=e.start);const[i,a]=r.split(":").map(Number),o=i>=12,s=`${i%12||12}:${String(a).padStart(2,"0")} ${o?"PM":"AM"}`;t[n]||(t[n]={}),t[n][s]||(t[n][s]=e)}))}));const n=Object.values(e.rooms).reduce(((e,t)=>e.concat(t)),[]);let r=null;"2024-11-06"===e.date&&(n.push({id:99998,start:"16:50",duration:"0:30",title:"Fake event to fix calendar between lightning talks and dinner"}),n.push({id:99999,start:"17:00",duration:"2:00",title:"Fake event to fix calendar between lightning talks and dinner"})),"2024-11-05"===e.date&&(r=30),n.sort(((e,t)=>Vl(e.start)-Vl(t.start)));const i=[];for(let c=0;c<n.length;c++){var a;const e=Vl(n[c].start)/60,t=Vl(n[c].duration)/60;let o=c===n.length-1?e+t:Vl(n[c+1].start)/60;const s=null!==(a=r)&&void 0!==a?a:jl(t);i.some((t=>t.startTime===e&&t.endTime===o))||e!==o&&i.push({startTime:e,endTime:o,timeSlotInterval:s}),c===n.length-1&&i.push({startTime:o,endTime:o+s/60*2,timeSlotInterval:s})}const o=[];let s=null;for(const c of i)null===s?s=c:s.timeSlotInterval===c.timeSlotInterval&&s.endTime===c.startTime?s.endTime=c.endTime:(o.push(s),s=c);null!==s&&o.push(s);const l=o.flatMap((e=>{let{startTime:t,endTime:n,timeSlotInterval:r}=e;const i=60*(n-t);return Array.from({length:i/r},((e,n)=>({time:Math.round(60*t+n*r),interval:r})))}));return{timeSlots:l,events:t}}(n)),[n]),[a,o]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),c={"Hobart CBD and Surrounds":"Other"},u={"University of Tasmania Studio Theatre":160,"Hobart CBD and Surrounds":150,Atrium:150};return(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsxs)("table",{className:"border-separate w-full",cellPadding:0,cellSpacing:0,children:[(0,bi.jsx)("thead",{children:(0,bi.jsxs)("tr",{className:"sticky top-[103px] bg-gray-50 z-20 border-b",style:{height:"32px"},children:[(0,bi.jsx)("th",{className:"py-2 px-1 min-w-[75px] w-[75px] border-b"}),Object.keys(n.rooms).map(((e,t)=>(0,bi.jsx)("th",{className:"py-2 px-1 text-sm font-bold text-gray-800 border-b min-w-[150px]",style:{width:u[e]?`${u[e]}px`:""},children:c[e]||e},t)))]})}),(0,bi.jsxs)("tbody",{children:[0===i.length&&(0,bi.jsx)("tr",{children:(0,bi.jsx)("td",{colSpan:Object.keys(n.rooms).length+1,className:"text-center text-xl",children:Wl[n.date]||"No events"})}),i.map(((e,t)=>{let{time:n,interval:i}=e;return(0,bi.jsxs)("tr",{style:{height:"32px"},children:[n%15===0?(0,bi.jsx)("td",{className:"border-t text-right pr-1 p-0 align-top",children:Nl(n)}):(0,bi.jsx)("td",{}),Object.keys(r).map(((e,t)=>{var a;const s=null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a[Nl(n)];return(0,bi.jsx)("td",{className:(n%15===0?"border-t":"")+" relative",children:s&&(0,bi.jsx)(Ul,{event:s,height:Math.max(59,Vl(s.duration)/i*32-5),time:n,className:"absolute",onClick:()=>{l(s),o(!0)}})},t)}))]},n)}))]})]}),(0,bi.jsx)(Ol,{open:a,setIsOpen:o,event:s})]})},Zl=n.p+"static/media/schedule-preamble.33ab04f6230628554b35.md",ql=e=>{let{day:n}=e;const r=Object.values(n.rooms).flat().sort(((e,t)=>{var n,r,i;return null!==(n=null===(r=e.track)||void 0===r?void 0:r.localeCompare(null!==(i=t.track)&&void 0!==i?i:""))&&void 0!==n?n:0})).sort(((e,t)=>Vl(e.start)-Vl(t.start))),[i,a]=(0,t.useState)(!1),[o,s]=(0,t.useState)(null);return(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsxs)("div",{className:"flex flex-col gap-3 items-center w-full",children:[0===r.length&&(0,bi.jsx)("div",{className:"text-center text-sm",children:Wl[n.date]||"No events"}),r.map(((e,t)=>(0,bi.jsx)(Ul,{event:e,height:"fit-content",time:Vl(e.start),className:"relative",showRoom:!0,showAbstract:!0,onClick:()=>{s(e),a(!0)}},t)))]}),(0,bi.jsx)(Ol,{open:i,setIsOpen:a,event:o})]})},Gl={"2024-11-05":"Tuesday 5th (Workshops)","2024-11-06":"Wednesday 6th (Conference)","2024-11-07":"Thursday 7th (Conference)","2024-11-08":"Friday 8th (Community Day)"},Wl={"2024-11-05":"No workshops today","2024-11-06":"No events today","2024-11-07":"No events today","2024-11-08":(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("p",{children:"We have some great events in the pipeline including a field trip to Mt Wellington."}),(0,bi.jsxs)("p",{children:["If you would like to propose a hackathon or something, let us know via\xa0",(0,bi.jsx)("a",{href:"mailto:program@foss4g-oceania.org",className:"text-blue-500 underline",children:"program@foss4g-oceania.org"})]})]})},Xl=()=>{const[e,n]=(0,t.useState)("");(0,t.useEffect)((()=>{fetch(Zl).then((e=>e.text())).then((e=>n(e)))}),[]);const[r,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[s,l]=(0,t.useState)(0),[c,u]=(0,t.useState)(!0),[h,d]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch("https://talks.osgeo.org/foss4g-sotm-oceania-2024/schedule/export/schedule.json").then((async e=>await e.json())).then((e=>{const t=e.schedule.conference.days;i(e.schedule.conference.days);const n=(()=>{const e=new Date;return`${e.getFullYear().toString()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`})();let r=t.findIndex((e=>e.date===n));r=-1===r?0:r,o(t.map((e=>Gl[e.date]))),l(r),u(!1)})).catch((e=>{console.error("Error fetching data:",e),d("Error fetching program, please try again later.")}))}),[]),(0,t.useEffect)((()=>{if(c)return;const e=window.document.getElementById("schedule-top");null===e||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})}),[s]),(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("section",{style:{backgroundImage:"url('/imgs/workshop-lunch.jpg')",backgroundSize:"cover",backgroundPosition:"center 35%"},className:"relative flex items-center justify-center h-64 bg-gray-100 bg-no-repeat bg-cover bg-center"}),(0,bi.jsxs)("div",{className:"container mx-auto p-6",children:[(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:e})}),(0,bi.jsx)("a",{type:"hidden",id:"schedule-top",href:"#schedule-top",className:"h-0 overflow-hidden block",children:"\xa0"}),(0,bi.jsx)("section",{className:"mx-[calc((-100vw+100%)/2)] xl:mx-auto mt-8 prose-base max-w-none bg-gray-50 rounded-none xl:rounded-lg py-4",children:h?(0,bi.jsx)("div",{className:"flex items-center justify-center h-64 font-mono text-red-700 text-4xl",children:h}):c?(0,bi.jsx)("div",{className:"flex items-center justify-center h-64 font-mono text-xl font-light",children:"Loading program..."}):(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("div",{className:"sticky top-16 z-20 bg-gray-50 mb-8 overflow-x-auto overflow-y-visible h-10 md:px-4",children:(0,bi.jsx)("div",{className:"flex justify-around whitespace-nowrap w-fit mx-auto",children:a.map(((e,t)=>(0,bi.jsx)("button",{onClick:()=>{l(t)},className:"inline-flex items-center h-10 px-4 -mb-px text-sm text-center text-gray-700 bg-transparent border-b-2 xl:text-base whitespace-nowrap cursor-base focus:outline-none hover:border-gray-400 "+(s===t?"border-blue-950 text-gray-800 font-bold":"border-transparent text-gray-700"),children:e},t)))})}),(0,bi.jsx)("div",{className:"hidden md:block md:px-4",children:r[s]&&(0,bi.jsx)($l,{day:r[s]})}),(0,bi.jsx)("div",{className:"block md:hidden",children:r[s]&&(0,bi.jsx)(ql,{day:r[s]})})]})}),(0,bi.jsx)("div",{style:{marginLeft:"calc((-100vw + 100%) / 2)"},className:"-mb-6 mt-6",children:(0,bi.jsx)(wi,{width:"100vw",height:400,initialViewState:{longitude:147.32031,latitude:-42.88898,zoom:12.3}})})]})]})},Kl=n.p+"static/media/social-events-intro.10df9ff68632b0fc631b.md",Yl=n.p+"static/media/social-events.b711eb9b282598c25da0.md",Jl=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(Kl).then((e=>e.text())).then((e=>n(e)))}),[]),(0,t.useEffect)((()=>{fetch(Yl).then((e=>e.text())).then((e=>i(e)))}),[]),(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("section",{style:{backgroundImage:"url('/imgs/dinner.jpg')",backgroundSize:"cover",backgroundPosition:"center 25%"},className:"relative flex items-center justify-center h-64 bg-gray-100 bg-no-repeat bg-cover bg-center"}),(0,bi.jsxs)("div",{className:"container mx-auto p-6",children:[(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:e})}),(0,bi.jsx)("div",{style:{marginLeft:"calc((-100vw + 100%) / 2)"},children:(0,bi.jsx)(wi,{width:"100vw",height:400,initialViewState:{longitude:147.32031,latitude:-42.88898,zoom:12.3}})}),(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:r})})]})]})},Ql=n.p+"static/media/workshops.eaebde35d97bbbb7839d.md",ec=()=>{const[e,n]=(0,t.useState)("");return(0,t.useEffect)((()=>{fetch(Ql).then((e=>e.text())).then((e=>n(e)))}),[]),(0,bi.jsxs)(bi.Fragment,{children:[(0,bi.jsx)("section",{style:{backgroundImage:"url('/imgs/workshop_crop_01.png')",backgroundSize:"cover",backgroundPosition:"center 0px"},className:"relative flex items-center justify-center h-64 bg-gray-100 bg-no-repeat bg-cover bg-center"}),(0,bi.jsxs)("div",{className:"container mx-auto p-6",children:[(0,bi.jsx)("section",{className:"mx-auto mt-8 prose-base max-w-none",children:(0,bi.jsx)(xn,{options:{overrides:Ei},children:e})}),(0,bi.jsx)("div",{style:{marginLeft:"calc((-100vw + 100%) / 2)"},className:"-mb-6",children:(0,bi.jsx)(wi,{width:"100vw",height:400,initialViewState:{longitude:147.31853,latitude:-42.8965,zoom:13.25}})})]})]})};function tc(){return(0,bi.jsx)(he,{children:(0,bi.jsx)(le,{children:(0,bi.jsxs)(oe,{path:"/",element:(0,bi.jsx)(Il,{}),children:[(0,bi.jsx)(oe,{index:!0,element:(0,bi.jsx)(ji,{})}),(0,bi.jsx)(oe,{path:"code-of-conduct",element:(0,bi.jsx)(Pl,{markdownUrl:xe,headerImg:{url:"/imgs/office_with_paper_work.png"}})}),(0,bi.jsx)(oe,{path:"call-for-papers",element:(0,bi.jsx)(Pl,{markdownUrl:ve,headerImg:{url:"/imgs/present-header.jpg",positionY:"30%"}})}),(0,bi.jsx)(oe,{path:"attend/present",element:(0,bi.jsx)(Pl,{markdownUrl:ke,headerImg:{url:"/imgs/group photo.jpeg",positionY:"40%"}})}),(0,bi.jsx)(oe,{path:"attend/travel-grant-program",element:(0,bi.jsx)(Pl,{markdownUrl:_e,headerImg:{url:"/imgs/group photo.jpeg",positionY:"40%"}})}),(0,bi.jsx)(oe,{path:"attend/our-conference-venue",element:(0,bi.jsx)(Pl,{markdownUrl:ge,headerImg:{url:"/imgs/group photo.jpeg",positionY:"40%"}})}),(0,bi.jsx)(oe,{path:"attend/accommodation",element:(0,bi.jsx)(Pl,{markdownUrl:fe,headerImg:{url:"/imgs/group photo.jpeg",positionY:"40%"}})}),(0,bi.jsx)(oe,{path:"attend/transport",element:(0,bi.jsx)(Pl,{markdownUrl:we,headerImg:{url:"/imgs/bus_hobart3.png",positionY:"40%"},showMap:!0})}),(0,bi.jsx)(oe,{path:"attend/adventures",element:(0,bi.jsx)(Pl,{markdownUrl:me,headerImg:{url:"/imgs/sunset.jpeg",positionY:"20%"}})}),(0,bi.jsx)(oe,{path:"attend",element:(0,bi.jsx)(Pl,{markdownUrl:ye,headerImg:{url:"/imgs/group photo.jpeg",positionY:"40%",height:"20rem"}})}),(0,bi.jsx)(oe,{path:"program",element:(0,bi.jsx)(Xl,{})}),(0,bi.jsx)(oe,{path:"program/outline",element:(0,bi.jsx)(Pl,{markdownUrl:Ce,headerImg:{url:"/imgs/workshop-lunch.jpg",positionY:"40%"},showMap:!0})}),(0,bi.jsx)(oe,{path:"program/schedule",element:(0,bi.jsx)(Xl,{})}),(0,bi.jsx)(oe,{path:"program/social-events",element:(0,bi.jsx)(Jl,{})}),(0,bi.jsx)(oe,{path:"program/workshops",element:(0,bi.jsx)(ec,{})}),(0,bi.jsx)(oe,{path:"program/get-involved",element:(0,bi.jsx)(Pl,{markdownUrl:Le,headerImg:{url:"/imgs/workshop_crop_01.png",positionY:"0px"}})}),(0,bi.jsx)(oe,{path:"program/community-day",element:(0,bi.jsx)(Pl,{markdownUrl:be,headerImg:{url:"/imgs/2023_comm_day4.png",positionY:"0px"},showMap:!0})}),(0,bi.jsx)(oe,{path:"program/product-showcase",element:(0,bi.jsx)(Pl,{markdownUrl:Se,headerImg:{url:"/imgs/present_crop_01.png",positionY:"0px"}})}),(0,bi.jsx)(oe,{path:"sponsorship",element:(0,bi.jsx)(Pl,{markdownUrl:Te,headerImg:{url:"/imgs/sponsor-header.jpeg",positionY:"50%"}})}),(0,bi.jsx)(oe,{path:"organisers",element:(0,bi.jsx)(Fl,{})}),(0,bi.jsx)(oe,{path:"mailing-list",element:(0,bi.jsx)(Ml,{})}),(0,bi.jsx)(oe,{path:"*",element:(0,bi.jsx)(Al,{})})]})})})}const nc=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:o}=t;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,bi.jsx)(t.StrictMode,{children:(0,bi.jsx)(tc,{})})),nc()})()})();
//# sourceMappingURL=main.c4334cce.js.map